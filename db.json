{"meta":{"version":1,"warehouse":"1.0.3"},"models":{"Asset":[{"_id":"themes/minos/source/webfonts/source-code-pro/main.css","path":"webfonts/source-code-pro/main.css","modified":0},{"_id":"themes/minos/source/webfonts/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","path":"webfonts/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","modified":0},{"_id":"themes/minos/source/webfonts/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","path":"webfonts/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/main.css","path":"webfonts/ptserif/main.css","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/fU0HAfLiPHGlZhZpY6M7dBTbgVql8nDJpwnrE27mub0.woff2","path":"webfonts/ptserif/fonts/fU0HAfLiPHGlZhZpY6M7dBTbgVql8nDJpwnrE27mub0.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/b31S45a_TNgaBApZhTgE6CEAvth_LlrfE80CYdSH47w.woff2","path":"webfonts/ptserif/fonts/b31S45a_TNgaBApZhTgE6CEAvth_LlrfE80CYdSH47w.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpI4P5ICox8Kq3LLUNMylGO4.woff2","path":"webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpI4P5ICox8Kq3LLUNMylGO4.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpDUj_cnvWIuuBMVgbX098Mw.woff2","path":"webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpDUj_cnvWIuuBMVgbX098Mw.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpDTOQ_MqJVwkKsUn0wKzc2I.woff2","path":"webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpDTOQ_MqJVwkKsUn0wKzc2I.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpCYE0-AqJ3nfInTTiDXDjU4.woff2","path":"webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpCYE0-AqJ3nfInTTiDXDjU4.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/O_WhD9hODL16N4KLHLX7xSEAvth_LlrfE80CYdSH47w.woff2","path":"webfonts/ptserif/fonts/O_WhD9hODL16N4KLHLX7xSEAvth_LlrfE80CYdSH47w.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/I-OtoJZa3TeyH6D9oli3ifesZW2xOQ-xsNqO47m55DA.woff2","path":"webfonts/ptserif/fonts/I-OtoJZa3TeyH6D9oli3ifesZW2xOQ-xsNqO47m55DA.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/CPRt--GVMETgA6YEaoGitxTbgVql8nDJpwnrE27mub0.woff2","path":"webfonts/ptserif/fonts/CPRt--GVMETgA6YEaoGitxTbgVql8nDJpwnrE27mub0.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/5hX15RUpPERmeybVlLQEWBTbgVql8nDJpwnrE27mub0.woff2","path":"webfonts/ptserif/fonts/5hX15RUpPERmeybVlLQEWBTbgVql8nDJpwnrE27mub0.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/3Nwg9VzlwLXPq3fNKwVRMCEAvth_LlrfE80CYdSH47w.woff2","path":"webfonts/ptserif/fonts/3Nwg9VzlwLXPq3fNKwVRMCEAvth_LlrfE80CYdSH47w.woff2","modified":0},{"_id":"themes/minos/source/webfonts/ptserif/fonts/03aPdn7fFF3H6ngCgAlQzPk_vArhqVIZ0nv9q090hN8.woff2","path":"webfonts/ptserif/fonts/03aPdn7fFF3H6ngCgAlQzPk_vArhqVIZ0nv9q090hN8.woff2","modified":0},{"_id":"themes/minos/source/js/script.js","path":"js/script.js","modified":0},{"_id":"themes/minos/source/js/jquery.min.js","path":"js/jquery.min.js","modified":0},{"_id":"themes/minos/source/fancybox/jquery.fancybox.pack.js","path":"fancybox/jquery.fancybox.pack.js","modified":0},{"_id":"themes/minos/source/fancybox/jquery.fancybox.js","path":"fancybox/jquery.fancybox.js","modified":0},{"_id":"themes/minos/source/fancybox/jquery.fancybox.css","path":"fancybox/jquery.fancybox.css","modified":0},{"_id":"themes/minos/source/fancybox/helpers/jquery.fancybox-thumbs.js","path":"fancybox/helpers/jquery.fancybox-thumbs.js","modified":0},{"_id":"themes/minos/source/fancybox/helpers/jquery.fancybox-thumbs.css","path":"fancybox/helpers/jquery.fancybox-thumbs.css","modified":0},{"_id":"themes/minos/source/fancybox/helpers/jquery.fancybox-media.js","path":"fancybox/helpers/jquery.fancybox-media.js","modified":0},{"_id":"themes/minos/source/fancybox/helpers/jquery.fancybox-buttons.js","path":"fancybox/helpers/jquery.fancybox-buttons.js","modified":0},{"_id":"themes/minos/source/fancybox/helpers/jquery.fancybox-buttons.css","path":"fancybox/helpers/jquery.fancybox-buttons.css","modified":0},{"_id":"themes/minos/source/fancybox/helpers/fancybox_buttons.png","path":"fancybox/helpers/fancybox_buttons.png","modified":0},{"_id":"themes/minos/source/fancybox/fancybox_sprite@2x.png","path":"fancybox/fancybox_sprite@2x.png","modified":0},{"_id":"themes/minos/source/fancybox/fancybox_sprite.png","path":"fancybox/fancybox_sprite.png","modified":0},{"_id":"themes/minos/source/fancybox/fancybox_overlay.png","path":"fancybox/fancybox_overlay.png","modified":0},{"_id":"themes/minos/source/fancybox/fancybox_loading@2x.gif","path":"fancybox/fancybox_loading@2x.gif","modified":0},{"_id":"themes/minos/source/fancybox/fancybox_loading.gif","path":"fancybox/fancybox_loading.gif","modified":0},{"_id":"themes/minos/source/fancybox/blank.gif","path":"fancybox/blank.gif","modified":0},{"_id":"themes/minos/source/css/style.styl","path":"css/style.styl","modified":0},{"_id":"themes/minos/source/css/images/logo.png","path":"css/images/logo.png","modified":0},{"_id":"themes/minos/source/css/fonts/fontawesome-webfont.woff","path":"css/fonts/fontawesome-webfont.woff","modified":0},{"_id":"themes/minos/source/css/fonts/fontawesome-webfont.ttf","path":"css/fonts/fontawesome-webfont.ttf","modified":0},{"_id":"themes/minos/source/css/fonts/fontawesome-webfont.svg","path":"css/fonts/fontawesome-webfont.svg","modified":0},{"_id":"themes/minos/source/css/fonts/fontawesome-webfont.eot","path":"css/fonts/fontawesome-webfont.eot","modified":0},{"_id":"themes/minos/source/css/fonts/FontAwesome.otf","path":"css/fonts/FontAwesome.otf","modified":0},{"_id":"source/images/yearmpgfilter.png","path":"images/yearmpgfilter.png","modified":0},{"_id":"source/images/yearmpg.png","path":"images/yearmpg.png","modified":0},{"_id":"source/images/wtf_data_viz.jpg","path":"images/wtf_data_viz.jpg","modified":0},{"_id":"source/images/strengthofnations.png","path":"images/strengthofnations.png","modified":0},{"_id":"source/images/sonus.png","path":"images/sonus.png","modified":0},{"_id":"source/images/slider.png","path":"images/slider.png","modified":0},{"_id":"source/images/simplespm.png","path":"images/simplespm.png","modified":0},{"_id":"source/images/simplesp.png","path":"images/simplesp.png","modified":0},{"_id":"source/images/simplefspm.png","path":"images/simplefspm.png","modified":0},{"_id":"source/images/simplef.png","path":"images/simplef.png","modified":0},{"_id":"source/images/simplebar.png","path":"images/simplebar.png","modified":0},{"_id":"source/images/screwedup.jpg","path":"images/screwedup.jpg","modified":0},{"_id":"source/images/horsepowermpg.png","path":"images/horsepowermpg.png","modified":0},{"_id":"source/images/hansrosling2.png","path":"images/hansrosling2.png","modified":0},{"_id":"source/images/hansrosling.png","path":"images/hansrosling.png","modified":0},{"_id":"source/images/glyphexample.png","path":"images/glyphexample.png","modified":0},{"_id":"source/images/githubactivity.png","path":"images/githubactivity.png","modified":0},{"_id":"source/images/fourlevelsofvalidation.png","path":"images/fourlevelsofvalidation.png","modified":0},{"_id":"source/images/forinsight.png","path":"images/forinsight.png","modified":0},{"_id":"source/images/data-vis-gb-header.jpg","path":"images/data-vis-gb-header.jpg","modified":0},{"_id":"source/images/chapterseven.png","path":"images/chapterseven.png","modified":0},{"_id":"source/images/ch2maindiagram.png","path":"images/ch2maindiagram.png","modified":0},{"_id":"source/images/census_dot_map.png","path":"images/census_dot_map.png","modified":0},{"_id":"source/images/VADfront.png","path":"images/VADfront.png","modified":0},{"_id":"source/images/ExMachinaCast.jpg","path":"images/ExMachinaCast.jpg","modified":0},{"_id":"source/images/28865167_p0.jpg","path":"images/28865167_p0.jpg","modified":0},{"_id":"source/images/linegraph.png","path":"images/linegraph.png","modified":0},{"_id":"source/images/stackedbarchart.png","path":"images/stackedbarchart.png","modified":0},{"_id":"source/images/barchart.png","path":"images/barchart.png","modified":0},{"_id":"source/images/scatterplot.png","path":"images/scatterplot.png","modified":0},{"_id":"source/images/fake.png","path":"images/fake.png","modified":1},{"_id":"source/images/boxplot.png","path":"images/boxplot.png","modified":1}],"Cache":[{"_id":"source/_posts/Assignment1-Data-Vis-Using-Processing.md","shasum":"c9a5b1b928ee6fb87f59b7dd5e7354f9b03cafb8","modified":1455855404000},{"_id":"source/_posts/Assignment2-Data-Vis-Using-P5-js.md","shasum":"62e16e7c074497465c4b4dd5ae2d1e47c52080a0","modified":1455932287000},{"_id":"source/_posts/Cool-Vis-Weekly-Report-1.md","shasum":"16d9b33337ea80a58154b35b025d323a7b163b28","modified":1455855390000},{"_id":"source/_posts/Data-Can-Become-Source-of-Magic.md","shasum":"b87f54a895a1e85b1f5f4a9d1abea2f6d93cea44","modified":1455855398000},{"_id":"source/_posts/Data-Visualization-Good-vs-Bad.md","shasum":"b03cea500d1bcc2680b08fc1d1209d6befadd6d8","modified":1455855411000},{"_id":"source/_posts/Preface.md","shasum":"7a9933f5a120f1661a194309b4f0efd16afea1e0","modified":1455855414000},{"_id":"source/_posts/Response-on-Chapter-1-of-the-VAD-book-by-Tamara-Munzner.md","shasum":"fc78efaf1bfad55e8565f6a5ef1b368b0be86763","modified":1455855418000},{"_id":"source/_posts/Response-on-Chapter-2-of-the-VAD-book-by-Tamara-Munzner.md","shasum":"1e06c37597519fada062e782d5f3e0fa7c1cfaf2","modified":1455855421000},{"_id":"source/_posts/Response-on-Chapter-3-of-the-VAD-book-by-Tamara-Munzner.md","shasum":"49c15a447a9d23b8bb7d510a55bf4ac683644822","modified":1455006054000},{"_id":"source/_posts/Response-on-Chapter-4-of-the-VAD-book-by-Tamara-Munzner.md","shasum":"c4b953a57a64363bd3a6ee3c43a57a2cad77d530","modified":1455855425000},{"_id":"source/_posts/Response-on-Chapter-7-of-the-VAD-Book-by-Tamara-Munzner.md","shasum":"d05b8f4c289a6eb3937707b43f53008c64f0e810","modified":1455855435000},{"_id":"source/categories/index.md","shasum":"55bee2cb88da438a2e8b1f29b1d7e954c07a9e60","modified":1454032290000},{"_id":"source/images/githubactivity.png","shasum":"d297cdf8add262dfae37430bcf2bf11bf3ebb997","modified":1455647521000},{"_id":"source/images/horsepowermpg.png","shasum":"c4c3beb401164cfc11123ac9f546adbb6dae17f1","modified":1455254078000},{"_id":"source/images/slider.png","shasum":"15ee03bd3969d750462cfdaa5452955095b947ff","modified":1455254487000},{"_id":"source/images/yearmpg.png","shasum":"34df212b546ee95f541fcbafead171b42f26004e","modified":1455253074000},{"_id":"source/images/yearmpgfilter.png","shasum":"4b4d07c80155ed92e0f1c6dbf1f712c1e59e04bf","modified":1455253456000},{"_id":"source/tags/index.md","shasum":"eedee25e6f40898c96bc5e8bbfb5a71c054200a3","modified":1455849566000},{"_id":"source/images/screwedup.jpg","shasum":"5226c40ec30498aa563cb779425b7fde5eceb187","modified":1454381256000},{"_id":"source/images/data-vis-gb-header.jpg","shasum":"30a10dd1c8e1020e6cfeacfafd8db168cdeffbae","modified":1454041642000},{"_id":"source/images/simplebar.png","shasum":"c930e9c4f04661e71a26560f9d099bda92b4431d","modified":1455252176000},{"_id":"source/images/simplesp.png","shasum":"82b78d6c67370626b62173c5f400a802a0055db4","modified":1455252206000},{"_id":"source/images/simplespm.png","shasum":"bcede3b666b3385ed94c0665a11775c5b054fc15","modified":1455252228000},{"_id":"source/images/ExMachinaCast.jpg","shasum":"c897582c5e55f5deda48060c36144ca500d1a664","modified":1454267436000},{"_id":"source/images/fourlevelsofvalidation.png","shasum":"b46b003838019b9b946268840418988336f6b3a6","modified":1455172705000},{"_id":"source/images/chapterseven.png","shasum":"f80c2f65364ede0231bd1bc0e081818ed25b4126","modified":1455644148000},{"_id":"source/images/simplef.png","shasum":"8c93280ae986099ad14315c3da098f63c08f69dd","modified":1455252324000},{"_id":"source/images/wtf_data_viz.jpg","shasum":"d8734bd6ec5ed325c35af1eb3a071eea6f6450eb","modified":1454039560000},{"_id":"themes/minos/Gruntfile.js","shasum":"71adaeaac1f3cc56e36c49d549b8d8a72235c9b9","modified":1454031747000},{"_id":"themes/minos/LICENSE","shasum":"c480fce396b23997ee23cc535518ffaaf7f458f8","modified":1454031747000},{"_id":"themes/minos/README.md","shasum":"971b835999fd136807ec8505e778a9124b3a871d","modified":1454031747000},{"_id":"themes/minos/_config.yml","shasum":"bce8243af49abab6d6eace4571402ced39fed17a","modified":1454388593000},{"_id":"themes/minos/_config.yml.example","shasum":"4e900c079a76c11ef850b60e541f3564d9e44460","modified":1454032040000},{"_id":"themes/minos/_source/categories/index.md","shasum":"55bee2cb88da438a2e8b1f29b1d7e954c07a9e60","modified":1454031747000},{"_id":"themes/minos/_source/tags/index.md","shasum":"e999413d6392c34156b5c6e9273f9069f9e6d92d","modified":1454031747000},{"_id":"themes/minos/languages/en.yml","shasum":"7bada5ca0cf685cb21ab64ba6ef2983314fe10c5","modified":1454031747000},{"_id":"themes/minos/languages/ru.yml","shasum":"c0ac1d63913b0caea5494db14e458f7e5a0937c3","modified":1454031747000},{"_id":"themes/minos/languages/zh-CN.yml","shasum":"c6daf6c25bdddcfa989ff0dd62559ed2ea5f790b","modified":1454031747000},{"_id":"themes/minos/layout/_partial/after-footer.ejs","shasum":"59e91784ebde77f8d258dac6f21e29147ad36b4f","modified":1454031747000},{"_id":"themes/minos/layout/_partial/archive-post.ejs","shasum":"9d687d6560e05764d3d57b2948680aa3940332cf","modified":1454031747000},{"_id":"themes/minos/layout/_partial/archive.ejs","shasum":"fb0206d283ae56717eb92f92784271e79b2e208a","modified":1454031747000},{"_id":"themes/minos/layout/_partial/article.ejs","shasum":"9bd6eda11854c189594fe02d4c18f96a81167c4d","modified":1454031747000},{"_id":"themes/minos/layout/_partial/footer.ejs","shasum":"9ff7842d55d8707317fbcd00b1b2fac206a21a1a","modified":1454031747000},{"_id":"themes/minos/layout/_partial/google-analytics.ejs","shasum":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1454031747000},{"_id":"themes/minos/layout/_partial/head.ejs","shasum":"2765d9d3692feffd216db1071cb9fa1120b0996f","modified":1455169705000},{"_id":"themes/minos/layout/_partial/header.ejs","shasum":"3431b84ac8057be6766ad2806dd418b71f5b9787","modified":1454031747000},{"_id":"themes/minos/layout/_partial/post/category.ejs","shasum":"28600328d5d2d68b547b59e7ed713cd315a138d8","modified":1454031747000},{"_id":"themes/minos/layout/_partial/post/date.ejs","shasum":"6197802873157656e3077c5099a7dda3d3b01c29","modified":1454031747000},{"_id":"themes/minos/layout/_partial/post/gallery.ejs","shasum":"3d9d81a3c693ff2378ef06ddb6810254e509de5b","modified":1454031747000},{"_id":"themes/minos/layout/_partial/post/nav.ejs","shasum":"573863e2d6a9d637fff4a8e3b2a4cacb65565499","modified":1454031747000},{"_id":"themes/minos/layout/_partial/post/tag.ejs","shasum":"2fcb0bf9c8847a644167a27824c9bb19ac74dd14","modified":1454031747000},{"_id":"themes/minos/layout/_partial/post/title.ejs","shasum":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1454031747000},{"_id":"themes/minos/layout/archive.ejs","shasum":"4479c33517aa70f2714ee820775ff8307a0dd115","modified":1454031747000},{"_id":"themes/minos/layout/categories.ejs","shasum":"c40b133eb9b8612a2286a83b8d7d2ca344673507","modified":1454031747000},{"_id":"themes/minos/layout/category.ejs","shasum":"cd17981f9cac718731880148cb17de60d148a75c","modified":1454031747000},{"_id":"themes/minos/layout/index.ejs","shasum":"d3892e562230b67f2f77d0ed8b6c59e0a5a1ef2c","modified":1455849499000},{"_id":"themes/minos/layout/layout.ejs","shasum":"03c85682322dce721f6a90aa0f0b5d2ed6622a35","modified":1454031747000},{"_id":"themes/minos/layout/page.ejs","shasum":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1454031747000},{"_id":"themes/minos/layout/post.ejs","shasum":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1454031747000},{"_id":"themes/minos/package.json","shasum":"6b4e8276c212f5a617dc558548f5b3d1ae0fb1f2","modified":1454031747000},{"_id":"themes/minos/layout/tags.ejs","shasum":"cf485e9053f96d69a1e0ce0f8a55c3aa33ebde03","modified":1454031747000},{"_id":"themes/minos/layout/tag.ejs","shasum":"bcde8c7ce7e21683ca2cba7fcc21ac43c817a9a4","modified":1454031747000},{"_id":"themes/minos/scripts/fancybox.js","shasum":"aa411cd072399df1ddc8e2181a3204678a5177d9","modified":1454031747000},{"_id":"themes/minos/source/css/_extend.styl","shasum":"d31b1c9980353af3c1607ee6caf84835b7322eea","modified":1454031747000},{"_id":"themes/minos/source/css/_partial/archive.styl","shasum":"f75e3da863fccfebafcae2e76ea6732a927b79f4","modified":1454031747000},{"_id":"themes/minos/source/css/_partial/article.styl","shasum":"42ffaa45f8ee22f34f0a560164298e07aa8c24b9","modified":1454031747000},{"_id":"themes/minos/source/css/_partial/comment.styl","shasum":"06fc75428036bd8277a6d3dea4b636a0dac91154","modified":1454031747000},{"_id":"themes/minos/source/css/_partial/custom-layout.styl","shasum":"8d922662464bda0ac0b639c40fda2ee196bef5b5","modified":1454031747000},{"_id":"themes/minos/source/css/_partial/fancybox.styl","shasum":"46a40e2749e68db0348db2938429fe4ce0f4724e","modified":1454031747000},{"_id":"themes/minos/source/css/_partial/footer.styl","shasum":"e4e9b6da90a2620f7905b7283e52322bb83d2fdb","modified":1454031747000},{"_id":"themes/minos/source/css/_partial/header.styl","shasum":"c0efb35cee449e1721473ba535e635f8ac08b178","modified":1454031747000},{"_id":"themes/minos/source/css/_partial/highlight.styl","shasum":"3fb9265868e4cebeaffa155d8825e90311eb3744","modified":1454031747000},{"_id":"themes/minos/source/css/_util/grid.styl","shasum":"0bf55ee5d09f193e249083602ac5fcdb1e571aed","modified":1454031747000},{"_id":"themes/minos/source/css/_util/mixin.styl","shasum":"44f32767d9fd3c1c08a60d91f181ee53c8f0dbb3","modified":1454031747000},{"_id":"themes/minos/source/css/_variables.styl","shasum":"3d0bbf6821e6cb22bf6870be52344e5c8dea54f5","modified":1454219653000},{"_id":"themes/minos/source/css/fonts/FontAwesome.otf","shasum":"b5b4f9be85f91f10799e87a083da1d050f842734","modified":1454031747000},{"_id":"themes/minos/source/css/fonts/fontawesome-webfont.eot","shasum":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e","modified":1454031747000},{"_id":"themes/minos/source/css/images/logo.png","shasum":"4e012d9ba58cb8f87ee775262ef871c158ac5948","modified":1454031747000},{"_id":"themes/minos/source/css/fonts/fontawesome-webfont.woff","shasum":"04c3bf56d87a0828935bd6b4aee859995f321693","modified":1454031747000},{"_id":"themes/minos/source/fancybox/blank.gif","shasum":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1454031747000},{"_id":"themes/minos/source/css/style.styl","shasum":"6793062670c69b331e786cfb19d5473f82d7d51c","modified":1454219574000},{"_id":"themes/minos/source/fancybox/fancybox_loading.gif","shasum":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1454031747000},{"_id":"themes/minos/source/fancybox/fancybox_loading@2x.gif","shasum":"273b123496a42ba45c3416adb027cd99745058b0","modified":1454031747000},{"_id":"themes/minos/source/fancybox/fancybox_overlay.png","shasum":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1454031747000},{"_id":"themes/minos/source/fancybox/fancybox_sprite.png","shasum":"17df19f97628e77be09c352bf27425faea248251","modified":1454031747000},{"_id":"themes/minos/source/fancybox/fancybox_sprite@2x.png","shasum":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1454031747000},{"_id":"themes/minos/source/fancybox/helpers/fancybox_buttons.png","shasum":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1454031747000},{"_id":"themes/minos/source/fancybox/helpers/jquery.fancybox-buttons.css","shasum":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1454031747000},{"_id":"themes/minos/source/fancybox/helpers/jquery.fancybox-buttons.js","shasum":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1454031747000},{"_id":"themes/minos/source/fancybox/helpers/jquery.fancybox-media.js","shasum":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1454031747000},{"_id":"themes/minos/source/fancybox/helpers/jquery.fancybox-thumbs.css","shasum":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1454031747000},{"_id":"themes/minos/source/fancybox/helpers/jquery.fancybox-thumbs.js","shasum":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1454031747000},{"_id":"themes/minos/source/fancybox/jquery.fancybox.css","shasum":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6","modified":1454031747000},{"_id":"themes/minos/source/fancybox/jquery.fancybox.pack.js","shasum":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1454031747000},{"_id":"themes/minos/source/fancybox/jquery.fancybox.js","shasum":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1454031747000},{"_id":"themes/minos/source/js/script.js","shasum":"631cc4a69bc1f7903a24544b79b8e6ea68be9243","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/03aPdn7fFF3H6ngCgAlQzPk_vArhqVIZ0nv9q090hN8.woff2","shasum":"fa8cc541ddc3da23a5a90b08e64e4c12944c56a1","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/3Nwg9VzlwLXPq3fNKwVRMCEAvth_LlrfE80CYdSH47w.woff2","shasum":"703369bb4159f050b38ecc4f52cfadb8e5760775","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/5hX15RUpPERmeybVlLQEWBTbgVql8nDJpwnrE27mub0.woff2","shasum":"0c79a0581c3472e6bb29082092ea37d897370473","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/CPRt--GVMETgA6YEaoGitxTbgVql8nDJpwnrE27mub0.woff2","shasum":"4da92f4f265caa786469ec415cfa6515d2997943","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpDTOQ_MqJVwkKsUn0wKzc2I.woff2","shasum":"b64d3a0d20efa14e6063070eb30fbdb594bde59c","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpDUj_cnvWIuuBMVgbX098Mw.woff2","shasum":"6f1e434623e2fa20ba8972a6f97dd9c800b56168","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpCYE0-AqJ3nfInTTiDXDjU4.woff2","shasum":"5984003d117f49ae596bde0498310ed215ac3aba","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/b31S45a_TNgaBApZhTgE6CEAvth_LlrfE80CYdSH47w.woff2","shasum":"0b4aef50c2979164681fa6dfe2c1d6bd6be6bcd3","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/I-OtoJZa3TeyH6D9oli3ifesZW2xOQ-xsNqO47m55DA.woff2","shasum":"36225cd511b12ed61f3e3fbad53773119e9dd73e","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/main.css","shasum":"ec6a269189b9a8b807fb4e1de6ffd7acc6a7fea8","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/fU0HAfLiPHGlZhZpY6M7dBTbgVql8nDJpwnrE27mub0.woff2","shasum":"3f425d6aee0c07774a10d82dcb742e32b067f217","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/O_WhD9hODL16N4KLHLX7xSEAvth_LlrfE80CYdSH47w.woff2","shasum":"950d5547dc10d4a1bdb837439fcfc6c68bbe1b02","modified":1454031747000},{"_id":"themes/minos/source/webfonts/ptserif/fonts/QABk9IxT-LFTJ_dQzv7xpI4P5ICox8Kq3LLUNMylGO4.woff2","shasum":"df9999766ca9ffe9428b139931352cd821526aed","modified":1454031747000},{"_id":"themes/minos/source/webfonts/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","shasum":"942addaec4d3a60af33947a84a3d85f926015947","modified":1454031747000},{"_id":"themes/minos/source/webfonts/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","shasum":"b0e0bb5ef78db8b15d430d0b9be9d4329289a310","modified":1454031747000},{"_id":"themes/minos/source/webfonts/source-code-pro/main.css","shasum":"e6a0204ff3c501d6248d96e55aa20d0b42b45a79","modified":1454031747000},{"_id":"themes/minos/source/css/fonts/fontawesome-webfont.ttf","shasum":"7f09c97f333917034ad08fa7295e916c9f72fd3f","modified":1454031747000},{"_id":"themes/minos/source/js/jquery.min.js","shasum":"a6eedf84389e1bc9f757bc2d19538f8c8d1cae9d","modified":1454031747000},{"_id":"themes/minos/source/css/fonts/fontawesome-webfont.svg","shasum":"46fcc0194d75a0ddac0a038aee41b23456784814","modified":1454031747000},{"_id":"source/images/forinsight.png","shasum":"05bfde89bc24831db0dd6cb58dff2e848416b19b","modified":1455252238000},{"_id":"source/images/simplefspm.png","shasum":"1db9b630286426afd73a58817162c6a6c932ec43","modified":1455252284000},{"_id":"source/images/ch2maindiagram.png","shasum":"90c828c93ac6030ae4579d8b0d9c5f64b0e7c285","modified":1454569120000},{"_id":"source/images/glyphexample.png","shasum":"8b50884170bee2d554a4d3b7c88e0f8439c1d2f9","modified":1455646958000},{"_id":"source/images/28865167_p0.jpg","shasum":"06cb03c915ebd37cc3ff9d9f3215eed1299035cd","modified":1454032546000},{"_id":"source/images/VADfront.png","shasum":"3738e9dd9cf3346f70607cb0eb025fcc3840626e","modified":1454378742000},{"_id":"source/images/census_dot_map.png","shasum":"f5c425623cf8c5fca0628d1ce4ffba2fd75364e5","modified":1454039685000},{"_id":"source/images/hansrosling.png","shasum":"c5ff0948ea298cbffbaca2d57db95cb85651078b","modified":1454270709000},{"_id":"source/images/strengthofnations.png","shasum":"37de76b5bd6f3ebf8077aaee1d23f7bc31eeb249","modified":1455002182000},{"_id":"source/images/sonus.png","shasum":"405a198bdd2bccd152ccff4ec9ccc75c6747a37c","modified":1455004017000},{"_id":"source/images/hansrosling2.png","shasum":"c3f9326adb8e50a3b403f4f99a33302855762556","modified":1454267885000},{"_id":"source/images/fake.png","shasum":"85bf6799977c8ac7f53726d45e8e394cd2e60396","modified":1455931927000},{"_id":"source/images/scatterplot.png","shasum":"316f4b89c1a58962074ae7f2a4f8b6e269e6062b","modified":1455926766000},{"_id":"source/images/barchart.png","shasum":"5d86e63f8a11daab4d17a13a4a762e711e9ddc99","modified":1455926751000},{"_id":"source/images/stackedbarchart.png","shasum":"8d8db29299932f46b67b8ee96a6222800dfdd090","modified":1455926760000},{"_id":"source/images/linegraph.png","shasum":"5e2398b26953020ab911bc8671a1f2746db79e90","modified":1455926772000},{"_id":"source/images/boxplot.png","shasum":"8b9fd623352c3d36ca77563b4e645c0ee2399f41","modified":1455931094000},{"_id":"source/assignments/assignment2/boxplot.js","shasum":"cf2d2e8822ab87bead8df00feb3aea4a94291d69","modified":1455932287000},{"_id":"source/assignments/assignment2/common.js","shasum":"9ada150db6db8e04776fcbcde68f20c55b71c353","modified":1455932287000},{"_id":"source/assignments/assignment2/boxplot.html","shasum":"6f3eb66a97149dc7d40254415fc105c6cc6f4afa","modified":1455932287000}],"Category":[{"name":"Computer Science","_id":"cikt700uq0001afgnkbn2npb0"},{"name":"Data Visualization","parent":"cikt700uq0001afgnkbn2npb0","_id":"cikt700ur0004afgnf7bpj2f4"},{"name":"Life","_id":"cikt700wl001gafgnwv3wkfms"}],"Data":[],"Page":[{"title":"Tags","layout":"tags","categories":["Computer Science","Data Visualization"],"tags":["Assignments","P5"],"_content":"","source":"tags/index.md","raw":"title: \"Tags\"\nlayout: \"tags\"\ncategories:\n- Computer Science\n- Data Visualization\ntags:\n- Assignments\n- P5\n---\n","date":"2016-02-19T02:39:26.000Z","updated":"2016-02-19T02:39:26.000Z","path":"tags/index.html","comments":1,"_id":"cikt700v10009afgnbxymlcny"},{"_content":"/*! p5.sound.js v0.3.0 2016-01-31 */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd)\n    define('p5.sound', ['p5'], function (p5) { (factory(p5));});\n  else if (typeof exports === 'object')\n    factory(require('../p5'));\n  else\n    factory(root['p5']);\n}(this, function (p5) {\n  /**\n *  p5.sound extends p5 with <a href=\"http://caniuse.com/audio-api\" *=\"\" target=\"_blank\">Web Audio</a> functionality including audio input,\n *  playback, analysis and synthesis.\n *  <br><br>\n *  <a href=\"#/p5.SoundFile\"><b>p5.SoundFile</b></a>: Load and play sound files.<br>\n *  <a href=\"#/p5.Amplitude\"><b>p5.Amplitude</b></a>: Get the current volume of a sound.<br>\n *  <a href=\"#/p5.AudioIn\"><b>p5.AudioIn</b></a>: Get sound from an input source, typically\n *    a computer microphone.<br>\n *  <a href=\"#/p5.FFT\"><b>p5.FFT</b></a>: Analyze the frequency of sound. Returns\n *    results from the frequency spectrum or time domain (waveform).<br>\n *  <a href=\"#/p5.Oscillator\"><b>p5.Oscillator</b></a>: Generate Sine,\n *    Triangle, Square and Sawtooth waveforms. Base class of\n *    <a href=\"#/p5.Noise\">p5.Noise</a> and <a href=\"#/p5.Pulse\">p5.Pulse</a>.\n *    <br>\n *  <a href=\"#/p5.Env\"><b>p5.Env</b></a>: An Envelope is a series\n *    of fades over time. Often used to control an object's\n *    output gain level as an \"ADSR Envelope\" (Attack, Decay,\n *    Sustain, Release). Can also modulate other parameters.<br>\n *  <a href=\"#/p5.Delay\"><b>p5.Delay</b></a>: A delay effect with\n *    parameters for feedback, delayTime, and lowpass filter.<br>\n *  <a href=\"#/p5.Filter\"><b>p5.Filter</b></a>: Filter the frequency range of a\n *    sound.\n *  <br>\n *  <a href=\"#/p5.Reverb\"><b>p5.Reverb</b></a>: Add reverb to a sound by specifying\n *    duration and decay. <br>\n *  <b><a href=\"#/p5.Convolver\">p5.Convolver</a>:</b> Extends\n *  <a href=\"#/p5.Reverb\">p5.Reverb</a> to simulate the sound of real\n *    physical spaces through convolution.<br>\n *  <b><a href=\"#/p5.SoundRecorder\">p5.SoundRecorder</a></b>: Record sound for playback \n *    / save the .wav file.\n *  <b><a href=\"#/p5.Phrase\">p5.Phrase</a></b>, <b><a href=\"#/p5.Part\">p5.Part</a></b> and\n *  <b><a href=\"#/p5.Score\">p5.Score</a></b>: Compose musical sequences.\n *  <br><br>\n *  p5.sound is on <a href=\"https://github.com/therewasaguy/p5.sound/\" target=\"_blank\" rel=\"external\">GitHub</a>.\n *  Download the latest version \n *  <a href=\"https://github.com/therewasaguy/p5.sound/blob/master/lib/p5.sound.js\" target=\"_blank\" rel=\"external\">here</a>.\n *  \n *  @module p5.sound\n *  @submodule p5.sound\n *  @for p5.sound\n *  @main\n */\n/**\n *  p5.sound developed by Jason Sigal for the Processing Foundation, Google Summer of Code 2014. The MIT License (MIT).\n *  \n *  http://github.com/therewasaguy/p5.sound\n *\n *  Some of the many audio libraries & resources that inspire p5.sound:\n *   - TONE.js (c) Yotam Mann, 2014. Licensed under The MIT License (MIT). https://github.com/TONEnoTONE/Tone.js\n *   - buzz.js (c) Jay Salvat, 2013. Licensed under The MIT License (MIT). http://buzz.jaysalvat.com/\n *   - Boris Smus Web Audio API book, 2013. Licensed under the Apache License http://www.apache.org/licenses/LICENSE-2.0\n *   - wavesurfer.js https://github.com/katspaugh/wavesurfer.js\n *   - Web Audio Components by Jordan Santell https://github.com/web-audio-components\n *   - Wilm Thoben's Sound library for Processing https://github.com/processing/processing/tree/master/java/libraries/sound\n *   \n *   Web Audio API: http://w3.org/TR/webaudio/\n */\nvar sndcore;\nsndcore = function () {\n  'use strict';\n  /* AudioContext Monkeypatch\n     Copyright 2013 Chris Wilson\n     Licensed under the Apache License, Version 2.0 (the \"License\");\n     you may not use this file except in compliance with the License.\n     You may obtain a copy of the License at\n         http://www.apache.org/licenses/LICENSE-2.0\n     Unless required by applicable law or agreed to in writing, software\n     distributed under the License is distributed on an \"AS IS\" BASIS,\n     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     See the License for the specific language governing permissions and\n     limitations under the License.\n  */\n  (function (global, exports, perf) {\n    exports = exports || {};\n    'use strict';\n    function fixSetTarget(param) {\n      if (!param)\n        // if NYI, just return\n        return;\n      if (!param.setTargetAtTime)\n        param.setTargetAtTime = param.setTargetValueAtTime;\n    }\n    if (window.hasOwnProperty('webkitAudioContext') && !window.hasOwnProperty('AudioContext')) {\n      window.AudioContext = webkitAudioContext;\n      if (!AudioContext.prototype.hasOwnProperty('createGain'))\n        AudioContext.prototype.createGain = AudioContext.prototype.createGainNode;\n      if (!AudioContext.prototype.hasOwnProperty('createDelay'))\n        AudioContext.prototype.createDelay = AudioContext.prototype.createDelayNode;\n      if (!AudioContext.prototype.hasOwnProperty('createScriptProcessor'))\n        AudioContext.prototype.createScriptProcessor = AudioContext.prototype.createJavaScriptNode;\n      if (!AudioContext.prototype.hasOwnProperty('createPeriodicWave'))\n        AudioContext.prototype.createPeriodicWave = AudioContext.prototype.createWaveTable;\n      AudioContext.prototype.internal_createGain = AudioContext.prototype.createGain;\n      AudioContext.prototype.createGain = function () {\n        var node = this.internal_createGain();\n        fixSetTarget(node.gain);\n        return node;\n      };\n      AudioContext.prototype.internal_createDelay = AudioContext.prototype.createDelay;\n      AudioContext.prototype.createDelay = function (maxDelayTime) {\n        var node = maxDelayTime ? this.internal_createDelay(maxDelayTime) : this.internal_createDelay();\n        fixSetTarget(node.delayTime);\n        return node;\n      };\n      AudioContext.prototype.internal_createBufferSource = AudioContext.prototype.createBufferSource;\n      AudioContext.prototype.createBufferSource = function () {\n        var node = this.internal_createBufferSource();\n        if (!node.start) {\n          node.start = function (when, offset, duration) {\n            if (offset || duration)\n              this.noteGrainOn(when || 0, offset, duration);\n            else\n              this.noteOn(when || 0);\n          };\n        } else {\n          node.internal_start = node.start;\n          node.start = function (when, offset, duration) {\n            if (typeof duration !== 'undefined')\n              node.internal_start(when || 0, offset, duration);\n            else\n              node.internal_start(when || 0, offset || 0);\n          };\n        }\n        if (!node.stop) {\n          node.stop = function (when) {\n            this.noteOff(when || 0);\n          };\n        } else {\n          node.internal_stop = node.stop;\n          node.stop = function (when) {\n            node.internal_stop(when || 0);\n          };\n        }\n        fixSetTarget(node.playbackRate);\n        return node;\n      };\n      AudioContext.prototype.internal_createDynamicsCompressor = AudioContext.prototype.createDynamicsCompressor;\n      AudioContext.prototype.createDynamicsCompressor = function () {\n        var node = this.internal_createDynamicsCompressor();\n        fixSetTarget(node.threshold);\n        fixSetTarget(node.knee);\n        fixSetTarget(node.ratio);\n        fixSetTarget(node.reduction);\n        fixSetTarget(node.attack);\n        fixSetTarget(node.release);\n        return node;\n      };\n      AudioContext.prototype.internal_createBiquadFilter = AudioContext.prototype.createBiquadFilter;\n      AudioContext.prototype.createBiquadFilter = function () {\n        var node = this.internal_createBiquadFilter();\n        fixSetTarget(node.frequency);\n        fixSetTarget(node.detune);\n        fixSetTarget(node.Q);\n        fixSetTarget(node.gain);\n        return node;\n      };\n      if (AudioContext.prototype.hasOwnProperty('createOscillator')) {\n        AudioContext.prototype.internal_createOscillator = AudioContext.prototype.createOscillator;\n        AudioContext.prototype.createOscillator = function () {\n          var node = this.internal_createOscillator();\n          if (!node.start) {\n            node.start = function (when) {\n              this.noteOn(when || 0);\n            };\n          } else {\n            node.internal_start = node.start;\n            node.start = function (when) {\n              node.internal_start(when || 0);\n            };\n          }\n          if (!node.stop) {\n            node.stop = function (when) {\n              this.noteOff(when || 0);\n            };\n          } else {\n            node.internal_stop = node.stop;\n            node.stop = function (when) {\n              node.internal_stop(when || 0);\n            };\n          }\n          if (!node.setPeriodicWave)\n            node.setPeriodicWave = node.setWaveTable;\n          fixSetTarget(node.frequency);\n          fixSetTarget(node.detune);\n          return node;\n        };\n      }\n    }\n    if (window.hasOwnProperty('webkitOfflineAudioContext') && !window.hasOwnProperty('OfflineAudioContext')) {\n      window.OfflineAudioContext = webkitOfflineAudioContext;\n    }\n    return exports;\n  }(window));\n  // <-- end=\"\" monkeypatch.=\"\" create=\"\" the=\"\" audio=\"\" context=\"\" var=\"\" audiocontext=\"new\" window.audiocontext();=\"\" **=\"\" *=\"\" <p=\"\">Returns the Audio Context for this sketch. Useful for users\n   * who would like to dig deeper into the <a target=\"_blank\" href=\"*\" 'http:=\"\" webaudio.github.io=\"\" web-audio-api=\"\" '=\"\">Web Audio API\n   * </a>.<p></p>\n   *\n   * @method getAudioContext\n   * @return {Object}    AudioContext for this sketch\n   */\n  p5.prototype.getAudioContext = function () {\n    return audiocontext;\n  };\n  // Polyfill for AudioIn, also handled by p5.dom createCapture\n  navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n  /**\n   * Determine which filetypes are supported (inspired by buzz.js)\n   * The audio element (el) will only be used to test browser support for various audio formats\n   */\n  var el = document.createElement('audio');\n  p5.prototype.isSupported = function () {\n    return !!el.canPlayType;\n  };\n  var isOGGSupported = function () {\n    return !!el.canPlayType && el.canPlayType('audio/ogg; codecs=\"vorbis\"');\n  };\n  var isMP3Supported = function () {\n    return !!el.canPlayType && el.canPlayType('audio/mpeg;');\n  };\n  var isWAVSupported = function () {\n    return !!el.canPlayType && el.canPlayType('audio/wav; codecs=\"1\"');\n  };\n  var isAACSupported = function () {\n    return !!el.canPlayType && (el.canPlayType('audio/x-m4a;') || el.canPlayType('audio/aac;'));\n  };\n  var isAIFSupported = function () {\n    return !!el.canPlayType && el.canPlayType('audio/x-aiff;');\n  };\n  p5.prototype.isFileSupported = function (extension) {\n    switch (extension.toLowerCase()) {\n    case 'mp3':\n      return isMP3Supported();\n    case 'wav':\n      return isWAVSupported();\n    case 'ogg':\n      return isOGGSupported();\n    case 'aac', 'm4a', 'mp4':\n      return isAACSupported();\n    case 'aif', 'aiff':\n      return isAIFSupported();\n    default:\n      return false;\n    }\n  };\n  // if it is iOS, we have to have a user interaction to start Web Audio\n  // http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n  var iOS = navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? true : false;\n  if (iOS) {\n    var iosStarted = false;\n    var startIOS = function () {\n      if (iosStarted)\n        return;\n      // create empty buffer\n      var buffer = audiocontext.createBuffer(1, 1, 22050);\n      var source = audiocontext.createBufferSource();\n      source.buffer = buffer;\n      // connect to output (your speakers)\n      source.connect(audiocontext.destination);\n      // play the file\n      source.start(0);\n      console.log('start ios!');\n      if (audiocontext.state === 'running') {\n        iosStarted = true;\n      }\n    };\n    document.addEventListener('touchend', startIOS, false);\n    document.addEventListener('touchstart', startIOS, false);\n  }\n}();\nvar master;\nmaster = function () {\n  'use strict';\n  /**\n   * Master contains AudioContext and the master sound output.\n   */\n  var Master = function () {\n    var audiocontext = p5.prototype.getAudioContext();\n    this.input = audiocontext.createGain();\n    this.output = audiocontext.createGain();\n    //put a hard limiter on the output\n    this.limiter = audiocontext.createDynamicsCompressor();\n    this.limiter.threshold.value = 0;\n    this.limiter.ratio.value = 100;\n    this.audiocontext = audiocontext;\n    this.output.disconnect();\n    // an array of input sources\n    this.inputSources = [];\n    // connect input to limiter\n    this.input.connect(this.limiter);\n    // connect limiter to output\n    this.limiter.connect(this.output);\n    // meter is just for global Amplitude / FFT analysis\n    this.meter = audiocontext.createGain();\n    this.fftMeter = audiocontext.createGain();\n    this.output.connect(this.meter);\n    this.output.connect(this.fftMeter);\n    // connect output to destination\n    this.output.connect(this.audiocontext.destination);\n    // an array of all sounds in the sketch\n    this.soundArray = [];\n    // an array of all musical parts in the sketch\n    this.parts = [];\n    // file extensions to search for\n    this.extensions = [];\n  };\n  // create a single instance of the p5Sound / master output for use within this sketch\n  var p5sound = new Master();\n  /**\n   * Returns a number representing the master amplitude (volume) for sound \n   * in this sketch.\n   * \n   * @method getMasterVolume\n   * @return {Number} Master amplitude (volume) for sound in this sketch.\n   *                  Should be between 0.0 (silence) and 1.0.\n   */\n  p5.prototype.getMasterVolume = function () {\n    return p5sound.output.gain.value;\n  };\n  /**\n   *  <p>Scale the output of all sound in this sketch</p>\n   *  Scaled between 0.0 (silence) and 1.0 (full volume).\n   *  1.0 is the maximum amplitude of a digital sound, so multiplying\n   *  by greater than 1.0 may cause digital distortion. To\n   *  fade, provide a <code>rampTime</code> parameter. For more\n   *  complex fades, see the Env class.\n   *\n   *  Alternately, you can pass in a signal source such as an\n   *  oscillator to modulate the amplitude with an audio signal.\n   *\n   *  <p><b>How This Works</b>: When you load the p5.sound module, it\n   *  creates a single instance of p5sound. All sound objects in this\n   *  module output to p5sound before reaching your computer's output.\n   *  So if you change the amplitude of p5sound, it impacts all of the\n   *  sound in this module.</p>\n   *\n   *  <p>If no value is provided, returns a Web Audio API Gain Node</p>\n   *\n   *  @method  masterVolume\n   *  @param {Number|Object} volume  Volume (amplitude) between 0.0\n   *                                     and 1.0 or modulating signal/oscillator\n   *  @param {Number} [rampTime]  Fade for t seconds\n   *  @param {Number} [timeFromNow]  Schedule this event to happen at\n   *                                 t seconds in the future\n   */\n  p5.prototype.masterVolume = function (vol, rampTime, tFromNow) {\n    if (typeof vol === 'number') {\n      var rampTime = rampTime || 0;\n      var tFromNow = tFromNow || 0;\n      var now = p5sound.audiocontext.currentTime;\n      var currentVol = p5sound.output.gain.value;\n      p5sound.output.gain.cancelScheduledValues(now + tFromNow);\n      p5sound.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n      p5sound.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n    } else if (vol) {\n      vol.connect(p5sound.output.gain);\n    } else {\n      // return the Gain Node\n      return p5sound.output.gain;\n    }\n  };\n  /**\n   *  p5.soundOut is the p5.sound master output. It sends output to\n   *  the destination of this window's web audio context. It contains \n   *  Web Audio API nodes including a dyanmicsCompressor (<code>.limiter</code>),\n   *  and Gain Nodes for <code>.input</code> and <code>.output</code>.\n   *  \n   *  @property p5.soundOut\n   *  @type {Object}\n   */\n  p5.soundOut = p5sound;\n  /**\n   *  a silent connection to the DesinationNode\n   *  which will ensure that anything connected to it\n   *  will not be garbage collected\n   *  \n   *  @private\n   */\n  p5.soundOut._silentNode = p5sound.audiocontext.createGain();\n  p5.soundOut._silentNode.gain.value = 0;\n  p5.soundOut._silentNode.connect(p5sound.audiocontext.destination);\n  return p5sound;\n}(sndcore);\nvar helpers;\nhelpers = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   * Returns a number representing the sample rate, in samples per second,\n   * of all sound objects in this audio context. It is determined by the\n   * sampling rate of your operating system's sound card, and it is not\n   * currently possile to change.\n   * It is often 44100, or twice the range of human hearing.\n   *\n   * @method sampleRate\n   * @return {Number} samplerate samples per second\n   */\n  p5.prototype.sampleRate = function () {\n    return p5sound.audiocontext.sampleRate;\n  };\n  /**\n   *  Returns the closest MIDI note value for\n   *  a given frequency.\n   *  \n   *  @param  {Number} frequency A freqeuncy, for example, the \"A\"\n   *                             above Middle C is 440Hz\n   *  @return {Number}   MIDI note value\n   */\n  p5.prototype.freqToMidi = function (f) {\n    var mathlog2 = Math.log(f / 440) / Math.log(2);\n    var m = Math.round(12 * mathlog2) + 57;\n    return m;\n  };\n  /**\n   *  Returns the frequency value of a MIDI note value.\n   *  General MIDI treats notes as integers where middle C\n   *  is 60, C# is 61, D is 62 etc. Useful for generating\n   *  musical frequencies with oscillators.\n   *  \n   *  @method  midiToFreq\n   *  @param  {Number} midiNote The number of a MIDI note\n   *  @return {Number} Frequency value of the given MIDI note\n   *  @example\n   *  <div><code>\n   *  var notes = [60, 64, 67, 72];\n   *  var i = 0;\n   *  \n   *  function setup() {\n   *    osc = new p5.Oscillator('Triangle');\n   *    osc.start();\n   *    frameRate(1);\n   *  }\n   *  \n   *  function draw() {\n   *    var freq = midiToFreq(notes[i]);\n   *    osc.freq(freq);\n   *    i++;\n   *    if (i >= notes.length){\n   *      i = 0;\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.prototype.midiToFreq = function (m) {\n    return 440 * Math.pow(2, (m - 69) / 12);\n  };\n  /**\n   *  List the SoundFile formats that you will include. LoadSound \n   *  will search your directory for these extensions, and will pick\n   *  a format that is compatable with the client's web browser.\n   *  <a href=\"http://media.io/\" target=\"_blank\" rel=\"external\">Here</a> is a free online file\n   *  converter.\n   *  \n   *  @method soundFormats\n   *  @param {String|Strings} formats i.e. 'mp3', 'wav', 'ogg'\n   *  @example\n   *  <div><code>\n   *  function preload() {\n   *    // set the global sound formats\n   *    soundFormats('mp3', 'ogg');\n   *    \n   *    // load either beatbox.mp3, or .ogg, depending on browser\n   *    mySound = loadSound('../sounds/beatbox.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    mySound.play();\n   *  }\n   *  </code></div>\n   */\n  p5.prototype.soundFormats = function () {\n    // reset extensions array\n    p5sound.extensions = [];\n    // add extensions\n    for (var i = 0; i < arguments.length; i++) {\n      arguments[i] = arguments[i].toLowerCase();\n      if ([\n          'mp3',\n          'wav',\n          'ogg',\n          'm4a',\n          'aac'\n        ].indexOf(arguments[i]) > -1) {\n        p5sound.extensions.push(arguments[i]);\n      } else {\n        throw arguments[i] + ' is not a valid sound format!';\n      }\n    }\n  };\n  p5.prototype.disposeSound = function () {\n    for (var i = 0; i < p5sound.soundArray.length; i++) {\n      p5sound.soundArray[i].dispose();\n    }\n  };\n  // register removeSound to dispose of p5sound SoundFiles, Convolvers,\n  // Oscillators etc when sketch ends\n  p5.prototype.registerMethod('remove', p5.prototype.disposeSound);\n  p5.prototype._checkFileFormats = function (paths) {\n    var path;\n    // if path is a single string, check to see if extension is provided\n    if (typeof paths === 'string') {\n      path = paths;\n      // see if extension is provided\n      var extTest = path.split('.').pop();\n      // if an extension is provided...\n      if ([\n          'mp3',\n          'wav',\n          'ogg',\n          'm4a',\n          'aac'\n        ].indexOf(extTest) > -1) {\n        var supported = p5.prototype.isFileSupported(extTest);\n        if (supported) {\n          path = path;\n        } else {\n          var pathSplit = path.split('.');\n          var pathCore = pathSplit[pathSplit.length - 1];\n          for (var i = 0; i < p5sound.extensions.length; i++) {\n            var extension = p5sound.extensions[i];\n            var supported = p5.prototype.isFileSupported(extension);\n            if (supported) {\n              pathCore = '';\n              if (pathSplit.length === 2) {\n                pathCore += pathSplit[0];\n              }\n              for (var i = 1; i <= pathsplit.length=\"\" -=\"\" 2;=\"\" i++)=\"\" {=\"\" var=\"\" p=\"pathSplit[i];\" pathcore=\"\" +=\".\" p;=\"\" }=\"\" path=\"pathCore\" ;=\"\" break;=\"\" else=\"\" for=\"\" (var=\"\" i=\"0;\" <=\"\" p5sound.extensions.length;=\"\" extension=\"p5sound.extensions[i];\" supported=\"p5.prototype.isFileSupported(extension);\" if=\"\" (supported)=\"\" '.'=\"\" extension;=\"\" (typeof=\"\" paths=\"==\" 'object')=\"\" paths.length;=\"\" console.log('.'+extension=\"\" '=\"\" is=\"\" by=\"\" your=\"\" browser.');=\"\" return=\"\" path;=\"\" };=\"\" **=\"\" *=\"\" used=\"\" osc=\"\" and=\"\" env=\"\" to=\"\" chain=\"\" signal=\"\" math=\"\" p5.prototype._mathchain=\"function\" (o,=\"\" math,=\"\" thischain,=\"\" nextchain,=\"\" type)=\"\" this=\"\" type=\"\" of=\"\" already=\"\" exists=\"\" in=\"\" the=\"\" chain,=\"\" replace=\"\" it=\"\" o.mathops)=\"\" (o.mathops[i]=\"\" instanceof=\"\" o.mathops[i].dispose();=\"\" thischain=\"i;\" (thischain=\"\" o.mathops.length=\"\" 1)=\"\" nextchain=\"o.mathOps[i\" 1];=\"\" o.mathops[thischain=\"\" 1].disconnect();=\"\" 1].connect(math);=\"\" math.connect(nextchain);=\"\" o.mathops[thischain]=\"math;\" o;=\"\" }(master);=\"\" errorhandler;=\"\" errorhandler=\"function\" ()=\"\" 'use=\"\" strict';=\"\" helper=\"\" function=\"\" generate=\"\" an=\"\" error=\"\" with=\"\" a=\"\" custom=\"\" stack=\"\" trace=\"\" that=\"\" points=\"\" sketch=\"\" removes=\"\" other=\"\" parts=\"\" trace.=\"\" @private=\"\" @param=\"\" {string}=\"\" name=\"\" errortrace=\"\" failedpath=\"\" file=\"\" failed=\"\" load=\"\" @property=\"\" message=\"\" back=\"\" line=\"\" user's=\"\" sketch.=\"\" note:=\"\" edits=\"\" out=\"\" within=\"\" p5.js=\"\" p5.sound.=\"\" originalstack=\"\" unedited,=\"\" original=\"\" @return=\"\" {error}=\"\" returns=\"\" object=\"\" customerror=\"function\" (name,=\"\" errortrace,=\"\" failedpath)=\"\" err=\"new\" error();=\"\" tempstack,=\"\" splitstack;=\"\" err.name=\"name;\" err.originalstack=\"err.stack\" errortrace;=\"\" tempstack=\"err.stack\" err.failedpath=\"failedPath;\" only=\"\" print=\"\" part=\"\" refers=\"\" user=\"\" code:=\"\" splitstack=\"tempStack.split('\\n');\" (ln)=\"\" !ln.match(=\"\" (p5.|native=\"\" code|globalinit)=\"\" g);=\"\" });=\"\" err.stack=\"splitStack.join('\\n');\" err;=\"\" customerror;=\"\" }();=\"\" panner;=\"\" panner=\"function\" p5sound=\"master;\" ac=\"p5sound.audiocontext;\" stereo=\"\" there=\"\" node=\"\" use=\"\" ac.createstereopanner=\"\" !=\"=\" 'undefined')=\"\" p5.panner=\"function\" (input,=\"\" output,=\"\" numinputchannels)=\"\" this.stereopanner=\"this.input\" ==\"\" ac.createstereopanner();=\"\" input.connect(this.stereopanner);=\"\" this.stereopanner.connect(output);=\"\" p5.panner.prototype.pan=\"function\" (val,=\"\" tfromnow)=\"\" time=\"tFromNow\" ||=\"\" 0;=\"\" t=\"ac.currentTime\" time;=\"\" this.stereopanner.pan.linearramptovalueattime(val,=\"\" t);=\"\" p5.panner.prototype.inputchannels=\"function\" (numchannels)=\"\" p5.panner.prototype.connect=\"function\" (obj)=\"\" this.stereopanner.connect(obj);=\"\" p5.panner.prototype.disconnect=\"function\" this.stereopanner.disconnect();=\"\" no=\"\" createstereopanner=\"\" such=\"\" as=\"\" safari=\"\" 7.1.7=\"\" at=\"\" writing=\"\" method=\"\" create=\"\" effect=\"\" this.input=\"ac.createGain();\" input.connect(this.input);=\"\" this.left=\"ac.createGain();\" this.right=\"ac.createGain();\" this.left.channelinterpretation=\"discrete\" this.right.channelinterpretation=\"discrete\" input=\"\" (numinputchannels=\"\"> 1) {\n        this.splitter = ac.createChannelSplitter(2);\n        this.input.connect(this.splitter);\n        this.splitter.connect(this.left, 1);\n        this.splitter.connect(this.right, 0);\n      } else {\n        this.input.connect(this.left);\n        this.input.connect(this.right);\n      }\n      this.output = ac.createChannelMerger(2);\n      this.left.connect(this.output, 0, 1);\n      this.right.connect(this.output, 0, 0);\n      this.output.connect(output);\n    };\n    // -1 is left, +1 is right\n    p5.Panner.prototype.pan = function (val, tFromNow) {\n      var time = tFromNow || 0;\n      var t = ac.currentTime + time;\n      var v = (val + 1) / 2;\n      var rightVal = Math.cos(v * Math.PI / 2);\n      var leftVal = Math.sin(v * Math.PI / 2);\n      this.left.gain.linearRampToValueAtTime(leftVal, t);\n      this.right.gain.linearRampToValueAtTime(rightVal, t);\n    };\n    p5.Panner.prototype.inputChannels = function (numChannels) {\n      if (numChannels === 1) {\n        this.input.disconnect();\n        this.input.connect(this.left);\n        this.input.connect(this.right);\n      } else if (numChannels === 2) {\n        if (typeof (this.splitter === 'undefined')) {\n          this.splitter = ac.createChannelSplitter(2);\n        }\n        this.input.disconnect();\n        this.input.connect(this.splitter);\n        this.splitter.connect(this.left, 1);\n        this.splitter.connect(this.right, 0);\n      }\n    };\n    p5.Panner.prototype.connect = function (obj) {\n      this.output.connect(obj);\n    };\n    p5.Panner.prototype.disconnect = function (obj) {\n      this.output.disconnect();\n    };\n  }\n  // 3D panner\n  p5.Panner3D = function (input, output) {\n    var panner3D = ac.createPanner();\n    panner3D.panningModel = 'HRTF';\n    panner3D.distanceModel = 'linear';\n    panner3D.setPosition(0, 0, 0);\n    input.connect(panner3D);\n    panner3D.connect(output);\n    panner3D.pan = function (xVal, yVal, zVal) {\n      panner3D.setPosition(xVal, yVal, zVal);\n    };\n    return panner3D;\n  };\n}(master);\nvar soundfile;\nsoundfile = function () {\n  'use strict';\n  var CustomError = errorHandler;\n  var p5sound = master;\n  var ac = p5sound.audiocontext;\n  /**\n   *  <p>SoundFile object with a path to a file.</p>\n   *  \n   *  <p>The p5.SoundFile may not be available immediately because\n   *  it loads the file information asynchronously.</p>\n   * \n   *  <p>To do something with the sound as soon as it loads\n   *  pass the name of a function as the second parameter.</p>\n   *  \n   *  <p>Only one file path is required. However, audio file formats \n   *  (i.e. mp3, ogg, wav and m4a/aac) are not supported by all\n   *  web browsers. If you want to ensure compatability, instead of a single\n   *  file path, you may include an Array of filepaths, and the browser will\n   *  choose a format that works.</p>\n   * \n   *  @class p5.SoundFile\n   *  @constructor\n   *  @param {String/Array} path   path to a sound file (String). Optionally,\n   *                               you may include multiple file formats in\n   *                               an array. Alternately, accepts an object\n   *                               from the HTML5 File API, or a p5.File.\n   *  @param {Function} [successCallback]   Name of a function to call once file loads\n   *  @param {Function} [errorCallback]   Name of a function to call if file fails to\n   *                                      load. This function will receive an error or\n   *                                     XMLHttpRequest object with information\n   *                                     about what went wrong.\n   *  @param {Function} [whileLoadingCallback]   Name of a function to call while file\n   *                                             is loading. That function will\n   *                                             receive percentage loaded\n   *                                             (between 0 and 1) as a\n   *                                             parameter.\n   *                                             \n   *  @return {Object}    p5.SoundFile Object\n   *  @example \n   *  <div><code>\n   *  \n   *  function preload() {\n   *    mySound = loadSound('assets/doorbell.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    mySound.setVolume(0.1);\n   *    mySound.play();\n   *  }\n   * \n   * </code></div>\n   */\n  p5.SoundFile = function (paths, onload, onerror, whileLoading) {\n    if (typeof paths !== 'undefined') {\n      if (typeof paths == 'string' || typeof paths[0] == 'string') {\n        var path = p5.prototype._checkFileFormats(paths);\n        this.url = path;\n      } else if (typeof paths == 'object') {\n        if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n          // The File API isn't supported in this browser \n          throw 'Unable to load file because the File API is not supported';\n        }\n      }\n      // if type is a p5.File...get the actual file\n      if (paths.file) {\n        paths = paths.file;\n      }\n      this.file = paths;\n    }\n    // private _onended callback, set by the method: onended(callback)\n    this._onended = function () {\n    };\n    this._looping = false;\n    this._playing = false;\n    this._paused = false;\n    this._pauseTime = 0;\n    // cues for scheduling events with addCue() removeCue()\n    this._cues = [];\n    //  position of the most recently played sample\n    this._lastPos = 0;\n    this._counterNode;\n    this._scopeNode;\n    // array of sources so that they can all be stopped!\n    this.bufferSourceNodes = [];\n    // current source\n    this.bufferSourceNode = null;\n    this.buffer = null;\n    this.playbackRate = 1;\n    this.gain = 1;\n    this.input = p5sound.audiocontext.createGain();\n    this.output = p5sound.audiocontext.createGain();\n    this.reversed = false;\n    // start and end of playback / loop\n    this.startTime = 0;\n    this.endTime = null;\n    this.pauseTime = 0;\n    // \"restart\" would stop playback before retriggering\n    this.mode = 'sustain';\n    // time that playback was started, in millis\n    this.startMillis = null;\n    // stereo panning\n    this.panPosition = 0;\n    this.panner = new p5.Panner(this.output, p5sound.input, 2);\n    // it is possible to instantiate a soundfile with no path\n    if (this.url || this.file) {\n      this.load(onload, onerror);\n    }\n    // add this p5.SoundFile to the soundArray\n    p5sound.soundArray.push(this);\n    if (typeof whileLoading === 'function') {\n      this._whileLoading = whileLoading;\n    } else {\n      this._whileLoading = function () {\n      };\n    }\n  };\n  // register preload handling of loadSound\n  p5.prototype.registerPreloadMethod('loadSound', p5.prototype);\n  /**\n   *  loadSound() returns a new p5.SoundFile from a specified\n   *  path. If called during preload(), the p5.SoundFile will be ready\n   *  to play in time for setup() and draw(). If called outside of\n   *  preload, the p5.SoundFile will not be ready immediately, so\n   *  loadSound accepts a callback as the second parameter. Using a\n   *  <a href=\"https://github.com/processing/p5.js/wiki/Local-server\" target=\"_blank\" rel=\"external\">\n   *  local server</a> is recommended when loading external files.\n   *  \n   *  @method loadSound\n   *  @param  {String/Array}   path     Path to the sound file, or an array with\n   *                                    paths to soundfiles in multiple formats\n   *                                    i.e. ['sound.ogg', 'sound.mp3'].\n   *                                    Alternately, accepts an object: either\n   *                                    from the HTML5 File API, or a p5.File.\n   *  @param {Function} [successCallback]   Name of a function to call once file loads\n   *  @param {Function} [errorCallback]   Name of a function to call if there is\n   *                                      an error loading the file.\n   *  @param {Function} [whileLoading] Name of a function to call while file is loading.\n   *                                 This function will receive the percentage loaded\n   *                                 so far, from 0.0 to 1.0.\n   *  @return {SoundFile}            Returns a p5.SoundFile\n   *  @example \n   *  <div><code>\n   *  function preload() {\n   *   mySound = loadSound('assets/doorbell.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    mySound.setVolume(0.1);\n   *    mySound.play();\n   *  }\n   *  </code></div>\n   */\n  p5.prototype.loadSound = function (path, callback, onerror, whileLoading) {\n    // if loading locally without a server\n    if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n      alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n    }\n    var s = new p5.SoundFile(path, callback, onerror, whileLoading);\n    return s;\n  };\n  /**\n   * This is a helper function that the p5.SoundFile calls to load\n   * itself. Accepts a callback (the name of another function)\n   * as an optional parameter.\n   *\n   * @private\n   * @param {Function} [successCallback]   Name of a function to call once file loads\n   * @param {Function} [errorCallback]   Name of a function to call if there is an error\n   */\n  p5.SoundFile.prototype.load = function (callback, errorCallback) {\n    var loggedError = false;\n    var self = this;\n    var errorTrace = new Error().stack;\n    if (this.url != undefined && this.url != '') {\n      var request = new XMLHttpRequest();\n      request.addEventListener('progress', function (evt) {\n        self._updateProgress(evt);\n      }, false);\n      request.open('GET', this.url, true);\n      request.responseType = 'arraybuffer';\n      request.onload = function () {\n        if (request.status == 200) {\n          // on sucess loading file:\n          ac.decodeAudioData(request.response, // success decoding buffer:\n          function (buff) {\n            self.buffer = buff;\n            self.panner.inputChannels(buff.numberOfChannels);\n            if (callback) {\n              callback(self);\n            }\n          }, // error decoding buffer. \"e\" is undefined in Chrome 11/22/2015\n          function (e) {\n            var err = new CustomError('decodeAudioData', errorTrace, self.url);\n            var msg = 'AudioContext error at decodeAudioData for ' + self.url;\n            if (errorCallback) {\n              err.msg = msg;\n              errorCallback(err);\n            } else {\n              console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n            }\n          });\n        } else {\n          var err = new CustomError('loadSound', errorTrace, self.url);\n          var msg = 'Unable to load ' + self.url + '. The request status was: ' + request.status + ' (' + request.statusText + ')';\n          if (errorCallback) {\n            err.message = msg;\n            errorCallback(err);\n          } else {\n            console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n          }\n        }\n      };\n      // if there is another error, aside from 404...\n      request.onerror = function (e) {\n        var err = new CustomError('loadSound', errorTrace, self.url);\n        var msg = 'There was no response from the server at ' + self.url + '. Check the url and internet connectivity.';\n        if (errorCallback) {\n          err.message = msg;\n          errorCallback(err);\n        } else {\n          console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n        }\n      };\n      request.send();\n    } else if (this.file != undefined) {\n      var reader = new FileReader();\n      var self = this;\n      reader.onload = function () {\n        ac.decodeAudioData(reader.result, function (buff) {\n          self.buffer = buff;\n          self.panner.inputChannels(buff.numberOfChannels);\n          if (callback) {\n            callback(self);\n          }\n        });\n      };\n      reader.onerror = function (e) {\n        if (onerror)\n          onerror(e);\n      };\n      reader.readAsArrayBuffer(this.file);\n    }\n  };\n  // TO DO: use this method to create a loading bar that shows progress during file upload/decode.\n  p5.SoundFile.prototype._updateProgress = function (evt) {\n    if (evt.lengthComputable) {\n      var percentComplete = Math.log(evt.loaded / evt.total * 9.9);\n      this._whileLoading(percentComplete);\n    } else {\n      // Unable to compute progress information since the total size is unknown\n      this._whileLoading('size unknown');\n    }\n  };\n  /**\n   *  Returns true if the sound file finished loading successfully.\n   *  \n   *  @method  isLoaded\n   *  @return {Boolean} \n   */\n  p5.SoundFile.prototype.isLoaded = function () {\n    if (this.buffer) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * Play the p5.SoundFile\n   *\n   * @method play\n   * @param {Number} [startTime]            (optional) schedule playback to start (in seconds from now).\n   * @param {Number} [rate]             (optional) playback rate\n   * @param {Number} [amp]              (optional) amplitude (volume)\n   *                                     of playback\n   * @param {Number} [cueStart]        (optional) cue start time in seconds\n   * @param {Number} [duration]          (optional) duration of playback in seconds\n   */\n  p5.SoundFile.prototype.play = function (time, rate, amp, _cueStart, duration) {\n    var self = this;\n    var now = p5sound.audiocontext.currentTime;\n    var cueStart, cueEnd;\n    var time = time || 0;\n    if (time < 0) {\n      time = 0;\n    }\n    time = time + now;\n    // TO DO: if already playing, create array of buffers for easy stop()\n    if (this.buffer) {\n      // reset the pause time (if it was paused)\n      this._pauseTime = 0;\n      // handle restart playmode\n      if (this.mode === 'restart' && this.buffer && this.bufferSourceNode) {\n        var now = p5sound.audiocontext.currentTime;\n        this.bufferSourceNode.stop(time);\n        this._counterNode.stop(time);\n      }\n      // make a new source and counter. They are automatically assigned playbackRate and buffer\n      this.bufferSourceNode = this._initSourceNode();\n      // garbage collect counterNode and create a new one\n      if (this._counterNode)\n        this._counterNode = undefined;\n      this._counterNode = this._initCounterNode();\n      if (_cueStart) {\n        if (_cueStart >= 0 && _cueStart < this.buffer.duration) {\n          // this.startTime = cueStart;\n          cueStart = _cueStart;\n        } else {\n          throw 'start time out of range';\n        }\n      } else {\n        cueStart = 0;\n      }\n      if (duration) {\n        // if duration is greater than buffer.duration, just play entire file anyway rather than throw an error\n        duration = duration <= 1=\"\" this.buffer.duration=\"\" -=\"\" cuestart=\"\" ?=\"\" duration=\"\" :=\"\" this.buffer.duration;=\"\" }=\"\" else=\"\" {=\"\" cuestart;=\"\" to=\"\" do:=\"\" fix=\"\" this.=\"\" it=\"\" broke=\"\" in=\"\" safari=\"\" method=\"\" of=\"\" controlling=\"\" gain=\"\" for=\"\" individual=\"\" buffersourcenodes,=\"\" without=\"\" resetting=\"\" overall=\"\" soundfile=\"\" volume=\"\" if=\"\" (typeof(this.buffersourcenode.gain=\"==\" 'undefined'=\"\" )=\"\" this.buffersourcenode.gain=\"p5sound.audiocontext.createGain();\" this.buffersourcenode.connect(this.buffersourcenode.gain);=\"\" set=\"\" local=\"\" amp=\"\" provided,=\"\" otherwise=\"\" var=\"\" a=\"amp\" ||=\"\" 1;=\"\" this.buffersourcenode.gain.gain.setvalueattime(a,=\"\" p5sound.audiocontext.currenttime);=\"\" this.buffersourcenode.gain.connect(this.output);=\"\" this.buffersourcenode.connect(this.output);=\"\" this.output.gain.value=\"a;\" not=\"\" necessary=\"\" with=\"\" _initbuffersource=\"\" this.buffersourcenode.playbackrate.cancelscheduledvalues(now);=\"\" rate=\"rate\" math.abs(this.playbackrate);=\"\" this.buffersourcenode.playbackrate.setvalueattime(rate,=\"\" now);=\"\" was=\"\" paused,=\"\" play=\"\" at=\"\" the=\"\" pause=\"\" position=\"\" (this._paused)=\"\" this.buffersourcenode.start(time,=\"\" this.pausetime,=\"\" duration);=\"\" this._counternode.start(time,=\"\" cuestart,=\"\" this._playing=\"true;\" this._paused=\"false;\" add=\"\" source=\"\" sources=\"\" array,=\"\" which=\"\" is=\"\" used=\"\" stopall()=\"\" this.buffersourcenodes.push(this.buffersourcenode);=\"\" this.buffersourcenode._arrayindex=\"this.bufferSourceNodes.length\" delete=\"\" this.buffersourcenode=\"\" from=\"\" array=\"\" when=\"\" done=\"\" playing:=\"\" clearonend=\"function\" (e)=\"\" this.removeeventlistener('ended',=\"\" clearonend,=\"\" false);=\"\" call=\"\" onended=\"\" callback=\"\" self._onended(self);=\"\" self.buffersourcenodes.foreach(function=\"\" (n,=\"\" i)=\"\" (n._playing=\"==\" false)=\"\" self.buffersourcenodes.splice(i);=\"\" });=\"\" (self.buffersourcenodes.length=\"==\" 0)=\"\" self._playing=\"false;\" };=\"\" this.buffersourcenode.onended=\"clearOnEnd;\" throw=\"\" 'not=\"\" ready=\"\" file,=\"\" buffer=\"\" has=\"\" yet=\"\" load.=\"\" try=\"\" preload()';=\"\" looping,=\"\" will=\"\" restart=\"\" original=\"\" time=\"\" this.buffersourcenode.loop=\"this._looping;\" this._counternode.loop=\"this._looping;\" (this._looping=\"==\" true)=\"\" cueend=\"cueStart\" +=\"\" duration;=\"\" this.buffersourcenode.loopstart=\"cueStart;\" this.buffersourcenode.loopend=\"cueEnd;\" this._counternode.loopstart=\"cueStart;\" this._counternode.loopend=\"cueEnd;\" **=\"\" *=\"\" p5.soundfile=\"\" two=\"\" modes:=\"\" <code=\"\">restart and\n   *  <code>sustain</code>. Play Mode determines what happens to a\n   *  p5.SoundFile if it is triggered while in the middle of playback.\n   *  In sustain mode, playback will continue simultaneous to the\n   *  new playback. In restart mode, play() will stop playback\n   *  and start over. Sustain is the default mode. \n   *  \n   *  @method  playMode\n   *  @param  {String} str 'restart' or 'sustain'\n   *  @example\n   *  <div><code>\n   *  function setup(){\n   *    mySound = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *  function mouseClicked() {\n   *    mySound.playMode('sustain');\n   *    mySound.play();\n   *  }\n   *  function keyPressed() {\n   *    mySound.playMode('restart');\n   *    mySound.play();\n   *  }\n   * \n   * </code></div>\n   */\n  p5.SoundFile.prototype.playMode = function (str) {\n    var s = str.toLowerCase();\n    // if restart, stop all other sounds from playing\n    if (s === 'restart' && this.buffer && this.bufferSourceNode) {\n      for (var i = 0; i < this.bufferSourceNodes.length - 1; i++) {\n        var now = p5sound.audiocontext.currentTime;\n        this.bufferSourceNodes[i].stop(now);\n      }\n    }\n    // set play mode to effect future playback\n    if (s === 'restart' || s === 'sustain') {\n      this.mode = s;\n    } else {\n      throw 'Invalid play mode. Must be either \"restart\" or \"sustain\"';\n    }\n  };\n  /**\n   *  Pauses a file that is currently playing. If the file is not\n   *  playing, then nothing will happen.\n   *\n   *  After pausing, .play() will resume from the paused\n   *  position.\n   *  If p5.SoundFile had been set to loop before it was paused,\n   *  it will continue to loop after it is unpaused with .play().\n   *\n   *  @method pause\n   *  @param {Number} [startTime] (optional) schedule event to occur\n   *                               seconds from now\n   *  @example\n   *  <div><code>\n   *  var soundFile;\n   *  \n   *  function preload() {\n   *    soundFormats('ogg', 'mp3');\n   *    soundFile = loadSound('assets/Damscray_-_Dancing_Tiger_02.mp3');\n   *  }\n   *  function setup() {\n   *    background(0, 255, 0);\n   *    soundFile.setVolume(0.1);\n   *    soundFile.loop();\n   *  }\n   *  function keyTyped() {\n   *    if (key == 'p') {\n   *      soundFile.pause();\n   *      background(255, 0, 0);\n   *    }\n   *  }\n   *  \n   *  function keyReleased() {\n   *    if (key == 'p') {\n   *      soundFile.play();\n   *      background(0, 255, 0);\n   *    }\n   *  </code>\n   *  </div>\n   */\n  p5.SoundFile.prototype.pause = function (time) {\n    var now = p5sound.audiocontext.currentTime;\n    var time = time || 0;\n    var pTime = time + now;\n    if (this.isPlaying() && this.buffer && this.bufferSourceNode) {\n      this.pauseTime = this.currentTime();\n      this.bufferSourceNode.stop(pTime);\n      this._counterNode.stop(pTime);\n      this._paused = true;\n      this._playing = false;\n      this._pauseTime = this.currentTime();\n    } else {\n      this._pauseTime = 0;\n    }\n  };\n  /**\n   * Loop the p5.SoundFile. Accepts optional parameters to set the\n   * playback rate, playback volume, loopStart, loopEnd.\n   *\n   * @method loop\n   * @param {Number} [startTime] (optional) schedule event to occur\n   *                             seconds from now\n   * @param {Number} [rate]        (optional) playback rate\n   * @param {Number} [amp]         (optional) playback volume\n   * @param {Number} [cueLoopStart](optional) startTime in seconds\n   * @param {Number} [duration]  (optional) loop duration in seconds\n   */\n  p5.SoundFile.prototype.loop = function (startTime, rate, amp, loopStart, duration) {\n    this._looping = true;\n    this.play(startTime, rate, amp, loopStart, duration);\n  };\n  /**\n   * Set a p5.SoundFile's looping flag to true or false. If the sound\n   * is currently playing, this change will take effect when it\n   * reaches the end of the current playback. \n   * \n   * @param {Boolean} Boolean   set looping to true or false\n   */\n  p5.SoundFile.prototype.setLoop = function (bool) {\n    if (bool === true) {\n      this._looping = true;\n    } else if (bool === false) {\n      this._looping = false;\n    } else {\n      throw 'Error: setLoop accepts either true or false';\n    }\n    if (this.bufferSourceNode) {\n      this.bufferSourceNode.loop = this._looping;\n      this._counterNode.loop = this._looping;\n    }\n  };\n  /**\n   * Returns 'true' if a p5.SoundFile is currently looping and playing, 'false' if not.\n   *\n   * @return {Boolean}\n   */\n  p5.SoundFile.prototype.isLooping = function () {\n    if (!this.bufferSourceNode) {\n      return false;\n    }\n    if (this._looping === true && this.isPlaying() === true) {\n      return true;\n    }\n    return false;\n  };\n  /**\n   *  Returns true if a p5.SoundFile is playing, false if not (i.e.\n   *  paused or stopped).\n   *\n   *  @method isPlaying\n   *  @return {Boolean}\n   */\n  p5.SoundFile.prototype.isPlaying = function () {\n    return this._playing;\n  };\n  /**\n   *  Returns true if a p5.SoundFile is paused, false if not (i.e.\n   *  playing or stopped).\n   *\n   *  @method  isPaused\n   *  @return {Boolean}\n   */\n  p5.SoundFile.prototype.isPaused = function () {\n    return this._paused;\n  };\n  /**\n   * Stop soundfile playback.\n   *\n   * @method stop\n   * @param {Number} [startTime] (optional) schedule event to occur\n   *                             in seconds from now\n   */\n  p5.SoundFile.prototype.stop = function (timeFromNow) {\n    var time = timeFromNow || 0;\n    if (this.mode == 'sustain') {\n      this.stopAll(time);\n      this._playing = false;\n      this.pauseTime = 0;\n      this._paused = false;\n    } else if (this.buffer && this.bufferSourceNode) {\n      var now = p5sound.audiocontext.currentTime;\n      var t = time || 0;\n      this.pauseTime = 0;\n      this.bufferSourceNode.stop(now + t);\n      this._counterNode.stop(now + t);\n      this._playing = false;\n      this._paused = false;\n    }\n  };\n  /**\n   *  Stop playback on all of this soundfile's sources.\n   *  @private\n   */\n  p5.SoundFile.prototype.stopAll = function (_time) {\n    var now = p5sound.audiocontext.currentTime;\n    var time = _time || 0;\n    if (this.buffer && this.bufferSourceNode) {\n      for (var i = 0; i < this.bufferSourceNodes.length; i++) {\n        if (typeof this.bufferSourceNodes[i] != undefined) {\n          try {\n            this.bufferSourceNodes[i].onended = function () {\n            };\n            this.bufferSourceNodes[i].stop(now + time);\n          } catch (e) {\n          }\n        }\n      }\n      this._counterNode.stop(now + time);\n      this._onended(this);\n    }\n  };\n  /**\n   *  Multiply the output volume (amplitude) of a sound file\n   *  between 0.0 (silence) and 1.0 (full volume).\n   *  1.0 is the maximum amplitude of a digital sound, so multiplying\n   *  by greater than 1.0 may cause digital distortion. To\n   *  fade, provide a <code>rampTime</code> parameter. For more\n   *  complex fades, see the Env class.\n   *\n   *  Alternately, you can pass in a signal source such as an\n   *  oscillator to modulate the amplitude with an audio signal.\n   *\n   *  @method  setVolume\n   *  @param {Number|Object} volume  Volume (amplitude) between 0.0\n   *                                     and 1.0 or modulating signal/oscillator\n   *  @param {Number} [rampTime]  Fade for t seconds\n   *  @param {Number} [timeFromNow]  Schedule this event to happen at\n   *                                 t seconds in the future\n   */\n  p5.SoundFile.prototype.setVolume = function (vol, rampTime, tFromNow) {\n    if (typeof vol === 'number') {\n      var rampTime = rampTime || 0;\n      var tFromNow = tFromNow || 0;\n      var now = p5sound.audiocontext.currentTime;\n      var currentVol = this.output.gain.value;\n      this.output.gain.cancelScheduledValues(now + tFromNow);\n      this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n      this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n    } else if (vol) {\n      vol.connect(this.output.gain);\n    } else {\n      // return the Gain Node\n      return this.output.gain;\n    }\n  };\n  // same as setVolume, to match Processing Sound\n  p5.SoundFile.prototype.amp = p5.SoundFile.prototype.setVolume;\n  // these are the same thing\n  p5.SoundFile.prototype.fade = p5.SoundFile.prototype.setVolume;\n  p5.SoundFile.prototype.getVolume = function () {\n    return this.output.gain.value;\n  };\n  /**\n   * Set the stereo panning of a p5.sound object to\n   * a floating point number between -1.0 (left) and 1.0 (right).\n   * Default is 0.0 (center).\n   *\n   * @method pan\n   * @param {Number} [panValue]     Set the stereo panner\n   * @param  {Number} timeFromNow schedule this event to happen\n   *                                seconds from now\n   * @example\n   * <div><code>\n   *\n   *  var ball = {};\n   *  var soundFile;\n   *\n   *  function setup() {\n   *    soundFormats('ogg', 'mp3');\n   *    soundFile = loadSound('assets/beatbox.mp3');\n   *  }\n   *  \n   *  function draw() {\n   *    background(0);\n   *    ball.x = constrain(mouseX, 0, width);\n   *    ellipse(ball.x, height/2, 20, 20)\n   *  }\n   *  \n   *  function mousePressed(){\n   *    // map the ball's x location to a panning degree \n   *    // between -1.0 (left) and 1.0 (right)\n   *    var panning = map(ball.x, 0., width,-1.0, 1.0);\n   *    soundFile.pan(panning);\n   *    soundFile.play();\n   *  }\n   *  </code></div>\n   */\n  p5.SoundFile.prototype.pan = function (pval, tFromNow) {\n    this.panPosition = pval;\n    this.panner.pan(pval, tFromNow);\n  };\n  /**\n   * Returns the current stereo pan position (-1.0 to 1.0)\n   *\n   * @return {Number} Returns the stereo pan setting of the Oscillator\n   *                          as a number between -1.0 (left) and 1.0 (right).\n   *                          0.0 is center and default.\n   */\n  p5.SoundFile.prototype.getPan = function () {\n    return this.panPosition;\n  };\n  /**\n   *  Set the playback rate of a sound file. Will change the speed and the pitch.\n   *  Values less than zero will reverse the audio buffer.\n   *\n   *  @method rate\n   *  @param {Number} [playbackRate]     Set the playback rate. 1.0 is normal,\n   *                                     .5 is half-speed, 2.0 is twice as fast.\n   *                                     Must be greater than zero.\n   *  @example\n   *  <div><code>\n   *  var song;\n   *  \n   *  function preload() {\n   *    song = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    song.loop();\n   *  }\n   *\n   *  function draw() {\n   *    background(200);\n   *    \n   *    // Set the rate to a range between 0.1 and 4\n   *    // Changing the rate also alters the pitch\n   *    var speed = map(mouseY, 0.1, height, 0, 2);\n   *    speed = constrain(speed, 0.01, 4);\n   *    song.rate(speed);\n   *    \n   *    // Draw a circle to show what is going on\n   *    stroke(0);\n   *    fill(51, 100);\n   *    ellipse(mouseX, 100, 48, 48);\n   *  }\n   *  \n   * </code>\n   * </div>\n   *  \n   */\n  p5.SoundFile.prototype.rate = function (playbackRate) {\n    if (this.playbackRate === playbackRate && this.bufferSourceNode) {\n      if (this.bufferSourceNode.playbackRate.value === playbackRate) {\n        return;\n      }\n    }\n    this.playbackRate = playbackRate;\n    var rate = playbackRate;\n    if (this.playbackRate === 0 && this._playing) {\n      this.pause();\n    }\n    if (this.playbackRate < 0 && !this.reversed) {\n      var cPos = this.currentTime();\n      var cRate = this.bufferSourceNode.playbackRate.value;\n      // this.pause();\n      this.reverseBuffer();\n      rate = Math.abs(playbackRate);\n      var newPos = (cPos - this.duration()) / rate;\n      this.pauseTime = newPos;\n    } else if (this.playbackRate > 0 && this.reversed) {\n      this.reverseBuffer();\n    }\n    if (this.bufferSourceNode) {\n      var now = p5sound.audiocontext.currentTime;\n      this.bufferSourceNode.playbackRate.cancelScheduledValues(now);\n      this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(rate), now);\n      this._counterNode.playbackRate.cancelScheduledValues(now);\n      this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(rate), now);\n    }\n  };\n  // TO DO: document this\n  p5.SoundFile.prototype.setPitch = function (num) {\n    var newPlaybackRate = midiToFreq(num) / midiToFreq(60);\n    this.rate(newPlaybackRate);\n  };\n  p5.SoundFile.prototype.getPlaybackRate = function () {\n    return this.playbackRate;\n  };\n  /**\n   * Returns the duration of a sound file in seconds.\n   *\n   * @method duration\n   * @return {Number} The duration of the soundFile in seconds.\n   */\n  p5.SoundFile.prototype.duration = function () {\n    // Return Duration\n    if (this.buffer) {\n      return this.buffer.duration;\n    } else {\n      return 0;\n    }\n  };\n  /**\n   * Return the current position of the p5.SoundFile playhead, in seconds.\n   * Note that if you change the playbackRate while the p5.SoundFile is\n   * playing, the results may not be accurate.\n   *\n   * @method currentTime\n   * @return {Number}   currentTime of the soundFile in seconds.\n   */\n  p5.SoundFile.prototype.currentTime = function () {\n    // TO DO --> make reverse() flip these values appropriately\n    if (this._pauseTime > 0) {\n      return this._pauseTime;\n    } else {\n      return this._lastPos / ac.sampleRate;\n    }\n  };\n  /**\n   * Move the playhead of the song to a position, in seconds. Start\n   * and Stop time. If none are given, will reset the file to play\n   * entire duration from start to finish.\n   *\n   * @method jump\n   * @param {Number} cueTime    cueTime of the soundFile in seconds.\n   * @param {Number} uuration    duration in seconds.\n   */\n  p5.SoundFile.prototype.jump = function (cueTime, duration) {\n    if (cueTime < 0 || cueTime > this.buffer.duration) {\n      throw 'jump time out of range';\n    }\n    if (duration > this.buffer.duration - cueTime) {\n      throw 'end time out of range';\n    }\n    var cTime = cueTime || 0;\n    var eTime = duration || this.buffer.duration - cueTime;\n    if (this.isPlaying()) {\n      this.stop();\n    }\n    this.play(0, this.playbackRate, this.output.gain.value, cTime, eTime);\n  };\n  /**\n  * Return the number of channels in a sound file.\n  * For example, Mono = 1, Stereo = 2.\n  *\n  * @method channels\n  * @return {Number} [channels]\n  */\n  p5.SoundFile.prototype.channels = function () {\n    return this.buffer.numberOfChannels;\n  };\n  /**\n  * Return the sample rate of the sound file.\n  *\n  * @method sampleRate\n  * @return {Number} [sampleRate]\n  */\n  p5.SoundFile.prototype.sampleRate = function () {\n    return this.buffer.sampleRate;\n  };\n  /**\n  * Return the number of samples in a sound file.\n  * Equal to sampleRate * duration.\n  *\n  * @method frames\n  * @return {Number} [sampleCount]\n  */\n  p5.SoundFile.prototype.frames = function () {\n    return this.buffer.length;\n  };\n  /**\n   * Returns an array of amplitude peaks in a p5.SoundFile that can be\n   * used to draw a static waveform. Scans through the p5.SoundFile's\n   * audio buffer to find the greatest amplitudes. Accepts one\n   * parameter, 'length', which determines size of the array.\n   * Larger arrays result in more precise waveform visualizations.\n   * \n   * Inspired by Wavesurfer.js.\n   * \n   * @method  getPeaks\n   * @params {Number} [length] length is the size of the returned array.\n   *                          Larger length results in more precision.\n   *                          Defaults to 5*width of the browser window.\n   * @returns {Float32Array} Array of peaks.\n   */\n  p5.SoundFile.prototype.getPeaks = function (length) {\n    if (this.buffer) {\n      // set length to window's width if no length is provided\n      if (!length) {\n        length = window.width * 5;\n      }\n      if (this.buffer) {\n        var buffer = this.buffer;\n        var sampleSize = buffer.length / length;\n        var sampleStep = ~~(sampleSize / 10) || 1;\n        var channels = buffer.numberOfChannels;\n        var peaks = new Float32Array(Math.round(length));\n        for (var c = 0; c < channels; c++) {\n          var chan = buffer.getChannelData(c);\n          for (var i = 0; i < length; i++) {\n            var start = ~~(i * sampleSize);\n            var end = ~~(start + sampleSize);\n            var max = 0;\n            for (var j = start; j < end; j += sampleStep) {\n              var value = chan[j];\n              if (value > max) {\n                max = value;\n              } else if (-value > max) {\n                max = value;\n              }\n            }\n            if (c === 0 || Math.abs(max) > peaks[i]) {\n              peaks[i] = max;\n            }\n          }\n        }\n        return peaks;\n      }\n    } else {\n      throw 'Cannot load peaks yet, buffer is not loaded';\n    }\n  };\n  /**\n   *  Reverses the p5.SoundFile's buffer source.\n   *  Playback must be handled separately (see example).\n   *\n   *  @method  reverseBuffer\n   *  @example\n   *  <div><code>\n   *  var drum;\n   *  \n   *  function preload() {\n   *    drum = loadSound('assets/drum.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    drum.reverseBuffer();\n   *    drum.play();\n   *  }\n   *  \n   * </code>\n   * </div>\n   */\n  p5.SoundFile.prototype.reverseBuffer = function () {\n    var curVol = this.getVolume();\n    this.setVolume(0, 0.01, 0);\n    this.pause();\n    if (this.buffer) {\n      for (var i = 0; i < this.buffer.numberOfChannels; i++) {\n        Array.prototype.reverse.call(this.buffer.getChannelData(i));\n      }\n      // set reversed flag\n      this.reversed = !this.reversed;\n    } else {\n      throw 'SoundFile is not done loading';\n    }\n    this.setVolume(curVol, 0.01, 0.0101);\n    this.play();\n  };\n  /**\n   *  Schedule an event to be called when the soundfile\n   *  reaches the end of a buffer. If the soundfile is\n   *  playing through once, this will be called when it\n   *  ends. If it is looping, it will be called when\n   *  stop is called.\n   *  \n   *  @method  onended\n   *  @param  {Function} callback function to call when the\n   *                              soundfile has ended.\n   */\n  p5.SoundFile.prototype.onended = function (callback) {\n    this._onended = callback;\n    return this;\n  };\n  p5.SoundFile.prototype.add = function () {\n  };\n  p5.SoundFile.prototype.dispose = function () {\n    var now = p5sound.audiocontext.currentTime;\n    // remove reference to soundfile\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.stop(now);\n    if (this.buffer && this.bufferSourceNode) {\n      for (var i = 0; i < this.bufferSourceNodes.length - 1; i++) {\n        if (this.bufferSourceNodes[i] !== null) {\n          this.bufferSourceNodes[i].disconnect();\n          try {\n            this.bufferSourceNodes[i].stop(now);\n          } catch (e) {\n          }\n          this.bufferSourceNodes[i] = null;\n        }\n      }\n      if (this.isPlaying()) {\n        try {\n          this._counterNode.stop(now);\n        } catch (e) {\n          console.log(e);\n        }\n        this._counterNode = null;\n      }\n    }\n    if (this.output) {\n      this.output.disconnect();\n      this.output = null;\n    }\n    if (this.panner) {\n      this.panner.disconnect();\n      this.panner = null;\n    }\n  };\n  /**\n   * Connects the output of a p5sound object to input of another\n   * p5.sound object. For example, you may connect a p5.SoundFile to an\n   * FFT or an Effect. If no parameter is given, it will connect to\n   * the master output. Most p5sound objects connect to the master\n   * output when they are created.\n   *\n   * @method connect\n   * @param {Object} [object] Audio object that accepts an input\n   */\n  p5.SoundFile.prototype.connect = function (unit) {\n    if (!unit) {\n      this.panner.connect(p5sound.input);\n    } else {\n      if (unit.hasOwnProperty('input')) {\n        this.panner.connect(unit.input);\n      } else {\n        this.panner.connect(unit);\n      }\n    }\n  };\n  /**\n   * Disconnects the output of this p5sound object.\n   *\n   * @method disconnect\n   */\n  p5.SoundFile.prototype.disconnect = function (unit) {\n    this.panner.disconnect(unit);\n  };\n  /**\n   */\n  p5.SoundFile.prototype.getLevel = function (smoothing) {\n    console.warn('p5.SoundFile.getLevel has been removed from the library. Use p5.Amplitude instead');\n  };\n  /**\n   *  Reset the source for this SoundFile to a\n   *  new path (URL).\n   *\n   *  @method  setPath\n   *  @param {String}   path     path to audio file\n   *  @param {Function} callback Callback\n   */\n  p5.SoundFile.prototype.setPath = function (p, callback) {\n    var path = p5.prototype._checkFileFormats(p);\n    this.url = path;\n    this.load(callback);\n  };\n  /**\n   *  Replace the current Audio Buffer with a new Buffer.\n   *  \n   *  @param {Array} buf Array of Float32 Array(s). 2 Float32 Arrays\n   *                     will create a stereo source. 1 will create\n   *                     a mono source.\n   */\n  p5.SoundFile.prototype.setBuffer = function (buf) {\n    var numChannels = buf.length;\n    var size = buf[0].length;\n    var newBuffer = ac.createBuffer(numChannels, size, ac.sampleRate);\n    if (!buf[0] instanceof Float32Array) {\n      buf[0] = new Float32Array(buf[0]);\n    }\n    for (var channelNum = 0; channelNum < numChannels; channelNum++) {\n      var channel = newBuffer.getChannelData(channelNum);\n      channel.set(buf[channelNum]);\n    }\n    this.buffer = newBuffer;\n    // set numbers of channels on input to the panner\n    this.panner.inputChannels(numChannels);\n  };\n  //////////////////////////////////////////////////\n  // script processor node with an empty buffer to help\n  // keep a sample-accurate position in playback buffer.\n  // Inspired by Chinmay Pendharkar's technique for Sonoport --> http://bit.ly/1HwdCsV\n  // Copyright [2015] [Sonoport (Asia) Pte. Ltd.],\n  // Licensed under the Apache License http://apache.org/licenses/LICENSE-2.0\n  ////////////////////////////////////////////////////////////////////////////////////\n  // initialize counterNode, set its initial buffer and playbackRate\n  p5.SoundFile.prototype._initCounterNode = function () {\n    var self = this;\n    var now = ac.currentTime;\n    var cNode = ac.createBufferSource();\n    // dispose of scope node if it already exists\n    if (self._scopeNode) {\n      self._scopeNode.disconnect();\n      self._scopeNode.onaudioprocess = undefined;\n      self._scopeNode = null;\n    }\n    self._scopeNode = ac.createScriptProcessor(256, 1, 1);\n    // create counter buffer of the same length as self.buffer\n    cNode.buffer = _createCounterBuffer(self.buffer);\n    cNode.playbackRate.setValueAtTime(self.playbackRate, now);\n    cNode.connect(self._scopeNode);\n    self._scopeNode.connect(p5.soundOut._silentNode);\n    self._scopeNode.onaudioprocess = function (processEvent) {\n      var inputBuffer = processEvent.inputBuffer.getChannelData(0);\n      // update the lastPos\n      self._lastPos = inputBuffer[inputBuffer.length - 1] || 0;\n      // do any callbacks that have been scheduled\n      self._onTimeUpdate(self._lastPos);\n    };\n    return cNode;\n  };\n  // initialize sourceNode, set its initial buffer and playbackRate\n  p5.SoundFile.prototype._initSourceNode = function () {\n    var self = this;\n    var now = ac.currentTime;\n    var bufferSourceNode = ac.createBufferSource();\n    bufferSourceNode.buffer = self.buffer;\n    bufferSourceNode.playbackRate.setValueAtTime(self.playbackRate, now);\n    return bufferSourceNode;\n  };\n  var _createCounterBuffer = function (buffer) {\n    var array = new Float32Array(buffer.length);\n    var audioBuf = ac.createBuffer(1, buffer.length, 44100);\n    for (var index = 0; index < buffer.length; index++) {\n      array[index] = index;\n    }\n    audioBuf.getChannelData(0).set(array);\n    return audioBuf;\n  };\n  /**\n   *  processPeaks returns an array of timestamps where it thinks there is a beat.\n   *\n   *  This is an asynchronous function that processes the soundfile in an offline audio context,\n   *  and sends the results to your callback function.\n   *\n   *  The process involves running the soundfile through a lowpass filter, and finding all of the\n   *  peaks above the initial threshold. If the total number of peaks are below the minimum number of peaks,\n   *  it decreases the threshold and re-runs the analysis until either minPeaks or minThreshold are reached.\n   *  \n   *  @method  processPeaks\n   *  @param  {Function} callback       a function to call once this data is returned\n   *  @param  {Number}   [initThreshold] initial threshold defaults to 0.9\n   *  @param  {Number}   [minThreshold]   minimum threshold defaults to 0.22\n   *  @param  {Number}   [minPeaks]       minimum number of peaks defaults to 200\n   *  @return {Array}                  Array of timestamped peaks\n   */\n  p5.SoundFile.prototype.processPeaks = function (callback, _initThreshold, _minThreshold, _minPeaks) {\n    var bufLen = this.buffer.length;\n    var sampleRate = this.buffer.sampleRate;\n    var buffer = this.buffer;\n    var initialThreshold = _initThreshold || 0.9, threshold = initialThreshold, minThreshold = _minThreshold || 0.22, minPeaks = _minPeaks || 200;\n    // Create offline context\n    var offlineContext = new OfflineAudioContext(1, bufLen, sampleRate);\n    // create buffer source\n    var source = offlineContext.createBufferSource();\n    source.buffer = buffer;\n    // Create filter. TO DO: allow custom setting of filter\n    var filter = offlineContext.createBiquadFilter();\n    filter.type = 'lowpass';\n    source.connect(filter);\n    filter.connect(offlineContext.destination);\n    // start playing at time:0\n    source.start(0);\n    offlineContext.startRendering();\n    // Render the song\n    // act on the result\n    offlineContext.oncomplete = function (e) {\n      var data = {};\n      var filteredBuffer = e.renderedBuffer;\n      var bufferData = filteredBuffer.getChannelData(0);\n      // step 1: \n      // create Peak instances, add them to array, with strength and sampleIndex\n      do {\n        allPeaks = getPeaksAtThreshold(bufferData, threshold);\n        threshold -= 0.005;\n      } while (Object.keys(allPeaks).length < minPeaks && threshold >= minThreshold);\n      // step 2:\n      // find intervals for each peak in the sampleIndex, add tempos array\n      var intervalCounts = countIntervalsBetweenNearbyPeaks(allPeaks);\n      // step 3: find top tempos\n      var groups = groupNeighborsByTempo(intervalCounts, filteredBuffer.sampleRate);\n      // sort top intervals\n      var topTempos = groups.sort(function (intA, intB) {\n        return intB.count - intA.count;\n      }).splice(0, 5);\n      // set this SoundFile's tempo to the top tempo ??\n      this.tempo = topTempos[0].tempo;\n      // step 4:\n      // new array of peaks at top tempo within a bpmVariance\n      var bpmVariance = 5;\n      var tempoPeaks = getPeaksAtTopTempo(allPeaks, topTempos[0].tempo, filteredBuffer.sampleRate, bpmVariance);\n      callback(tempoPeaks);\n    };\n  };\n  // process peaks\n  var Peak = function (amp, i) {\n    this.sampleIndex = i;\n    this.amplitude = amp;\n    this.tempos = [];\n    this.intervals = [];\n  };\n  var allPeaks = [];\n  // 1. for processPeaks() Function to identify peaks above a threshold\n  // returns an array of peak indexes as frames (samples) of the original soundfile\n  function getPeaksAtThreshold(data, threshold) {\n    var peaksObj = {};\n    var length = data.length;\n    for (var i = 0; i < length; i++) {\n      if (data[i] > threshold) {\n        var amp = data[i];\n        var peak = new Peak(amp, i);\n        peaksObj[i] = peak;\n        // Skip forward ~ 1/8s to get past this peak.\n        i += 6000;\n      }\n      i++;\n    }\n    return peaksObj;\n  }\n  // 2. for processPeaks()\n  function countIntervalsBetweenNearbyPeaks(peaksObj) {\n    var intervalCounts = [];\n    var peaksArray = Object.keys(peaksObj).sort();\n    for (var index = 0; index < peaksArray.length; index++) {\n      // find intervals in comparison to nearby peaks\n      for (var i = 0; i < 10; i++) {\n        var startPeak = peaksObj[peaksArray[index]];\n        var endPeak = peaksObj[peaksArray[index + i]];\n        if (startPeak && endPeak) {\n          var startPos = startPeak.sampleIndex;\n          var endPos = endPeak.sampleIndex;\n          var interval = endPos - startPos;\n          // add a sample interval to the startPeek in the allPeaks array\n          if (interval > 0) {\n            startPeak.intervals.push(interval);\n          }\n          // tally the intervals and return interval counts\n          var foundInterval = intervalCounts.some(function (intervalCount, p) {\n            if (intervalCount.interval === interval) {\n              intervalCount.count++;\n              return intervalCount;\n            }\n          });\n          // store with JSON like formatting\n          if (!foundInterval) {\n            intervalCounts.push({\n              interval: interval,\n              count: 1\n            });\n          }\n        }\n      }\n    }\n    return intervalCounts;\n  }\n  // 3. for processPeaks --> find tempo\n  function groupNeighborsByTempo(intervalCounts, sampleRate) {\n    var tempoCounts = [];\n    intervalCounts.forEach(function (intervalCount, i) {\n      try {\n        // Convert an interval to tempo\n        var theoreticalTempo = Math.abs(60 / (intervalCount.interval / sampleRate));\n        theoreticalTempo = mapTempo(theoreticalTempo);\n        var foundTempo = tempoCounts.some(function (tempoCount) {\n          if (tempoCount.tempo === theoreticalTempo)\n            return tempoCount.count += intervalCount.count;\n        });\n        if (!foundTempo) {\n          if (isNaN(theoreticalTempo)) {\n            return;\n          }\n          tempoCounts.push({\n            tempo: Math.round(theoreticalTempo),\n            count: intervalCount.count\n          });\n        }\n      } catch (e) {\n        throw e;\n      }\n    });\n    return tempoCounts;\n  }\n  // 4. for processPeaks - get peaks at top tempo\n  function getPeaksAtTopTempo(peaksObj, tempo, sampleRate, bpmVariance) {\n    var peaksAtTopTempo = [];\n    var peaksArray = Object.keys(peaksObj).sort();\n    // TO DO: filter out peaks that have the tempo and return\n    for (var i = 0; i < peaksArray.length; i++) {\n      var key = peaksArray[i];\n      var peak = peaksObj[key];\n      for (var j = 0; j < peak.intervals.length; j++) {\n        var intervalBPM = Math.round(Math.abs(60 / (peak.intervals[j] / sampleRate)));\n        intervalBPM = mapTempo(intervalBPM);\n        var dif = intervalBPM - tempo;\n        if (Math.abs(intervalBPM - tempo) < bpmVariance) {\n          // convert sampleIndex to seconds\n          peaksAtTopTempo.push(peak.sampleIndex / 44100);\n        }\n      }\n    }\n    // filter out peaks that are very close to each other\n    peaksAtTopTempo = peaksAtTopTempo.filter(function (peakTime, index, arr) {\n      var dif = arr[index + 1] - peakTime;\n      if (dif > 0.01) {\n        return true;\n      }\n    });\n    return peaksAtTopTempo;\n  }\n  // helper function for processPeaks\n  function mapTempo(theoreticalTempo) {\n    // these scenarios create infinite while loop\n    if (!isFinite(theoreticalTempo) || theoreticalTempo == 0) {\n      return;\n    }\n    // Adjust the tempo to fit within the 90-180 BPM range\n    while (theoreticalTempo < 90)\n      theoreticalTempo *= 2;\n    while (theoreticalTempo > 180 && theoreticalTempo > 90)\n      theoreticalTempo /= 2;\n    return theoreticalTempo;\n  }\n  /*** SCHEDULE EVENTS ***/\n  /**\n   *  Schedule events to trigger every time a MediaElement\n   *  (audio/video) reaches a playback cue point.\n   *\n   *  Accepts a callback function, a time (in seconds) at which to trigger\n   *  the callback, and an optional parameter for the callback.\n   *\n   *  Time will be passed as the first parameter to the callback function,\n   *  and param will be the second parameter.\n   *\n   *\n   *  @method  addCue\n   *  @param {Number}   time     Time in seconds, relative to this media\n   *                             element's playback. For example, to trigger\n   *                             an event every time playback reaches two\n   *                             seconds, pass in the number 2. This will be\n   *                             passed as the first parameter to\n   *                             the callback function.\n   *  @param {Function} callback Name of a function that will be\n   *                             called at the given time. The callback will\n   *                             receive time and (optionally) param as its\n   *                             two parameters.\n   *  @param {Object} [value]    An object to be passed as the\n   *                             second parameter to the\n   *                             callback function.\n   *  @return {Number} id ID of this cue,\n   *                      useful for removeCue(id)\n   *  @example\n   *  <div><code>\n   *  function setup() {\n   *    background(0);\n   *    noStroke();\n   *    fill(255);\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *    \n   *    mySound = loadSound('assets/beat.mp3');\n   *\n   *    // schedule calls to changeText\n   *    mySound.addCue(0.50, changeText, \"hello\" );\n   *    mySound.addCue(1.00, changeText, \"p5\" );\n   *    mySound.addCue(1.50, changeText, \"what\" );\n   *    mySound.addCue(2.00, changeText, \"do\" );\n   *    mySound.addCue(2.50, changeText, \"you\" );\n   *    mySound.addCue(3.00, changeText, \"want\" );\n   *    mySound.addCue(4.00, changeText, \"to\" );\n   *    mySound.addCue(5.00, changeText, \"make\" );\n   *    mySound.addCue(6.00, changeText, \"?\" );\n   *  }\n   *\n   *  function changeText(val) {\n   *    background(0);\n   *    text(val, width/2, height/2);\n   *  }\n   *\n   *  function mouseClicked() {\n   *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n   *      if (mySound.isPlaying() ) {\n   *        mySound.stop();\n   *      } else {\n   *        mySound.play();\n   *      }\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.SoundFile.prototype.addCue = function (time, callback, val) {\n    var id = this._cueIDCounter++;\n    var cue = new Cue(callback, time, id, val);\n    this._cues.push(cue);\n    // if (!this.elt.ontimeupdate) {\n    //   this.elt.ontimeupdate = this._onTimeUpdate.bind(this);\n    // }\n    return id;\n  };\n  /**\n   *  Remove a callback based on its ID. The ID is returned by the\n   *  addCue method.\n   *\n   *  @method removeCue\n   *  @param  {Number} id ID of the cue, as returned by addCue\n   */\n  p5.SoundFile.prototype.removeCue = function (id) {\n    var cueLength = this._cues.length;\n    for (var i = 0; i < cueLength; i++) {\n      var cue = this._cues[i];\n      if (cue.id === id) {\n        this.cues.splice(i, 1);\n      }\n    }\n    if (this._cues.length === 0) {\n    }\n  };\n  /**\n   *  Remove all of the callbacks that had originally been scheduled\n   *  via the addCue method.\n   *\n   *  @method  clearCues\n   */\n  p5.SoundFile.prototype.clearCues = function () {\n    this._cues = [];\n  };\n  // private method that checks for cues to be fired if events\n  // have been scheduled using addCue(callback, time).\n  p5.SoundFile.prototype._onTimeUpdate = function (position) {\n    var playbackTime = position / this.buffer.sampleRate;\n    var cueLength = this._cues.length;\n    for (var i = 0; i < cueLength; i++) {\n      var cue = this._cues[i];\n      var callbackTime = cue.time;\n      var val = cue.val;\n      if (this._prevTime < callbackTime && callbackTime <= 2015=\"\" playbacktime)=\"\" {=\"\" pass=\"\" the=\"\" scheduled=\"\" callbacktime=\"\" as=\"\" parameter=\"\" to=\"\" callback=\"\" cue.callback(val);=\"\" }=\"\" this._prevtime=\"playbackTime;\" };=\"\" cue=\"\" inspired=\"\" by=\"\" javascript=\"\" settimeout,=\"\" and=\"\" tone.js=\"\" transport=\"\" timeline=\"\" event,=\"\" mit=\"\" license=\"\" yotam=\"\" mann=\"\" tonejs.org=\"\" var=\"\" (callback,=\"\" time,=\"\" id,=\"\" val)=\"\" this.callback=\"callback;\" this.time=\"time;\" this.id=\"id;\" this.val=\"val;\" }(sndcore,=\"\" errorhandler,=\"\" master);=\"\" amplitude;=\"\" amplitude=\"function\" ()=\"\" 'use=\"\" strict';=\"\" p5sound=\"master;\" **=\"\" *=\"\" measures=\"\" volume=\"\" between=\"\" 0.0=\"\" 1.0.=\"\" listens=\"\" all=\"\" default,=\"\" or=\"\" use=\"\" setinput()=\"\" listen=\"\" a=\"\" specific=\"\" sound=\"\" source.=\"\" accepts=\"\" an=\"\" optional=\"\" smoothing=\"\" value,=\"\" which=\"\" defaults=\"\" 0.=\"\" @class=\"\" p5.amplitude=\"\" @constructor=\"\" @param=\"\" {number}=\"\" [smoothing]=\"\" .999=\"\" smooth=\"\" readings=\"\" (defaults=\"\" 0)=\"\" @return=\"\" {object}=\"\" object=\"\" @example=\"\" <div=\"\"><code>\n   *  var sound, amplitude, cnv;\n   *  \n   *  function preload(){\n   *    sound = loadSound('assets/beat.mp3');\n   *  }\n   *  function setup() {\n   *    cnv = createCanvas(100,100);\n   *    amplitude = new p5.Amplitude();\n   *\n   *    // start / stop the sound when canvas is clicked\n   *    cnv.mouseClicked(function() {\n   *      if (sound.isPlaying() ){\n   *        sound.stop();\n   *      } else {\n   *        sound.play();\n   *      }\n   *    });\n   *  }\n   *  function draw() {\n   *    background(0);\n   *    fill(255);\n   *    var level = amplitude.getLevel();\n   *    var size = map(level, 0, 1, 0, 200);\n   *    ellipse(width/2, height/2, size, size);\n   *  }\n   *\n   *  </code>\n   */\n  p5.Amplitude = function (smoothing) {\n    // Set to 2048 for now. In future iterations, this should be inherited or parsed from p5sound's default\n    this.bufferSize = 2048;\n    // set audio context\n    this.audiocontext = p5sound.audiocontext;\n    this.processor = this.audiocontext.createScriptProcessor(this.bufferSize, 2, 1);\n    // for connections\n    this.input = this.processor;\n    this.output = this.audiocontext.createGain();\n    // smoothing defaults to 0\n    this.smoothing = smoothing || 0;\n    // the variables to return\n    this.volume = 0;\n    this.average = 0;\n    this.stereoVol = [\n      0,\n      0\n    ];\n    this.stereoAvg = [\n      0,\n      0\n    ];\n    this.stereoVolNorm = [\n      0,\n      0\n    ];\n    this.volMax = 0.001;\n    this.normalize = false;\n    this.processor.onaudioprocess = this._audioProcess.bind(this);\n    this.processor.connect(this.output);\n    this.output.gain.value = 0;\n    // this may only be necessary because of a Chrome bug\n    this.output.connect(this.audiocontext.destination);\n    // connect to p5sound master output by default, unless set by input()\n    p5sound.meter.connect(this.processor);\n    // add this p5.SoundFile to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Connects to the p5sound instance (master output) by default.\n   *  Optionally, you can pass in a specific source (i.e. a soundfile).\n   *\n   *  @method setInput\n   *  @param {soundObject|undefined} [snd] set the sound source\n   *                                       (optional, defaults to\n   *                                       master output)\n   *  @param {Number|undefined} [smoothing] a range between 0.0 and 1.0\n   *                                        to smooth amplitude readings\n   *  @example\n   *  <div><code>\n   *  function preload(){\n   *    sound1 = loadSound('assets/beat.mp3');\n   *    sound2 = loadSound('assets/drum.mp3');\n   *  }\n   *  function setup(){\n   *    amplitude = new p5.Amplitude();\n   *    sound1.play();\n   *    sound2.play();\n   *    amplitude.setInput(sound2);\n   *  }\n   *  function draw() {\n   *    background(0);\n   *    fill(255);\n   *    var level = amplitude.getLevel();\n   *    var size = map(level, 0, 1, 0, 200);\n   *    ellipse(width/2, height/2, size, size);\n   *  }\n   *  function mouseClicked(){\n   *    sound1.stop();\n   *    sound2.stop();\n   *  }\n   *  </code></div>\n   */\n  p5.Amplitude.prototype.setInput = function (source, smoothing) {\n    p5sound.meter.disconnect();\n    if (smoothing) {\n      this.smoothing = smoothing;\n    }\n    // connect to the master out of p5s instance if no snd is provided\n    if (source == null) {\n      console.log('Amplitude input source is not ready! Connecting to master output instead');\n      p5sound.meter.connect(this.processor);\n    } else if (source instanceof p5.Signal) {\n      source.output.connect(this.processor);\n    } else if (source) {\n      source.connect(this.processor);\n      this.processor.disconnect();\n      this.processor.connect(this.output);\n    } else {\n      p5sound.meter.connect(this.processor);\n    }\n  };\n  p5.Amplitude.prototype.connect = function (unit) {\n    if (unit) {\n      if (unit.hasOwnProperty('input')) {\n        this.output.connect(unit.input);\n      } else {\n        this.output.connect(unit);\n      }\n    } else {\n      this.output.connect(this.panner.connect(p5sound.input));\n    }\n  };\n  p5.Amplitude.prototype.disconnect = function (unit) {\n    this.output.disconnect();\n  };\n  // TO DO make this stereo / dependent on # of audio channels\n  p5.Amplitude.prototype._audioProcess = function (event) {\n    for (var channel = 0; channel < event.inputBuffer.numberOfChannels; channel++) {\n      var inputBuffer = event.inputBuffer.getChannelData(channel);\n      var bufLength = inputBuffer.length;\n      var total = 0;\n      var sum = 0;\n      var x;\n      for (var i = 0; i < bufLength; i++) {\n        x = inputBuffer[i];\n        if (this.normalize) {\n          total += Math.max(Math.min(x / this.volMax, 1), -1);\n          sum += Math.max(Math.min(x / this.volMax, 1), -1) * Math.max(Math.min(x / this.volMax, 1), -1);\n        } else {\n          total += x;\n          sum += x * x;\n        }\n      }\n      var average = total / bufLength;\n      // ... then take the square root of the sum.\n      var rms = Math.sqrt(sum / bufLength);\n      this.stereoVol[channel] = Math.max(rms, this.stereoVol[channel] * this.smoothing);\n      this.stereoAvg[channel] = Math.max(average, this.stereoVol[channel] * this.smoothing);\n      this.volMax = Math.max(this.stereoVol[channel], this.volMax);\n    }\n    // add volume from all channels together\n    var self = this;\n    var volSum = this.stereoVol.reduce(function (previousValue, currentValue, index) {\n      self.stereoVolNorm[index - 1] = Math.max(Math.min(self.stereoVol[index - 1] / self.volMax, 1), 0);\n      self.stereoVolNorm[index] = Math.max(Math.min(self.stereoVol[index] / self.volMax, 1), 0);\n      return previousValue + currentValue;\n    });\n    // volume is average of channels\n    this.volume = volSum / this.stereoVol.length;\n    // normalized value\n    this.volNorm = Math.max(Math.min(this.volume / this.volMax, 1), 0);\n  };\n  /**\n   *  Returns a single Amplitude reading at the moment it is called.\n   *  For continuous readings, run in the draw loop.\n   *\n   *  @method getLevel\n   *  @param {Number} [channel] Optionally return only channel 0 (left) or 1 (right)\n   *  @return {Number}       Amplitude as a number between 0.0 and 1.0\n   *  @example\n   *  <div><code>\n   *  function preload(){\n   *    sound = loadSound('assets/beat.mp3');\n   *  }\n   *  function setup() { \n   *    amplitude = new p5.Amplitude();\n   *    sound.play();\n   *  }\n   *  function draw() {\n   *    background(0);\n   *    fill(255);\n   *    var level = amplitude.getLevel();\n   *    var size = map(level, 0, 1, 0, 200);\n   *    ellipse(width/2, height/2, size, size);\n   *  }\n   *  function mouseClicked(){\n   *    sound.stop();\n   *  }\n   *  </code></div>\n   */\n  p5.Amplitude.prototype.getLevel = function (channel) {\n    if (typeof channel !== 'undefined') {\n      if (this.normalize) {\n        return this.stereoVolNorm[channel];\n      } else {\n        return this.stereoVol[channel];\n      }\n    } else if (this.normalize) {\n      return this.volNorm;\n    } else {\n      return this.volume;\n    }\n  };\n  /**\n   * Determines whether the results of Amplitude.process() will be\n   * Normalized. To normalize, Amplitude finds the difference the\n   * loudest reading it has processed and the maximum amplitude of\n   * 1.0. Amplitude adds this difference to all values to produce\n   * results that will reliably map between 0.0 and 1.0. However,\n   * if a louder moment occurs, the amount that Normalize adds to\n   * all the values will change. Accepts an optional boolean parameter\n   * (true or false). Normalizing is off by default.\n   *\n   * @method toggleNormalize\n   * @param {boolean} [boolean] set normalize to true (1) or false (0)\n   */\n  p5.Amplitude.prototype.toggleNormalize = function (bool) {\n    if (typeof bool === 'boolean') {\n      this.normalize = bool;\n    } else {\n      this.normalize = !this.normalize;\n    }\n  };\n  /**\n   *  Smooth Amplitude analysis by averaging with the last analysis \n   *  frame. Off by default.\n   *\n   *  @method smooth\n   *  @param {Number} set smoothing from 0.0 <= 1=\"\" *=\"\" p5.amplitude.prototype.smooth=\"function\" (s)=\"\" {=\"\" if=\"\" (s=\"\">= 0 && s < 1) {\n      this.smoothing = s;\n    } else {\n      console.log('Error: smoothing must be between 0 and 1');\n    }\n  };\n  p5.Amplitude.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.input.disconnect();\n    this.output.disconnect();\n    this.input = this.processor = undefined;\n    this.output = undefined;\n  };\n}(master);\nvar fft;\nfft = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   *  <p>FFT (Fast Fourier Transform) is an analysis algorithm that\n   *  isolates individual\n   *  <a href=\"https://en.wikipedia.org/wiki/Audio_frequency\" target=\"_blank\" rel=\"external\">\n   *  audio frequencies</a> within a waveform.</p>\n   *\n   *  <p>Once instantiated, a p5.FFT object can return an array based on\n   *  two types of analyses: <br>  <code>FFT.waveform()</code> computes\n   *  amplitude values along the time domain. The array indices correspond\n   *  to samples across a brief moment in time. Each value represents\n   *  amplitude of the waveform at that sample of time.<br>\n   *   <code>FFT.analyze() </code> computes amplitude values along the\n   *  frequency domain. The array indices correspond to frequencies (i.e.\n   *  pitches), from the lowest to the highest that humans can hear. Each\n   *  value represents amplitude at that slice of the frequency spectrum.\n   *  Use with <code>getEnergy()</code> to measure amplitude at specific\n   *  frequencies, or within a range of frequencies. </p>\n   *\n   *  <p>FFT analyzes a very short snapshot of sound called a sample\n   *  buffer. It returns an array of amplitude measurements, referred\n   *  to as <code>bins</code>. The array is 1024 bins long by default.\n   *  You can change the bin array length, but it must be a power of 2\n   *  between 16 and 1024 in order for the FFT algorithm to function\n   *  correctly. The actual size of the FFT buffer is twice the \n   *  number of bins, so given a standard sample rate, the buffer is\n   *  2048/44100 seconds long.</p>\n   *  \n   * \n   *  @class p5.FFT\n   *  @constructor\n   *  @param {Number} [smoothing]   Smooth results of Freq Spectrum.\n   *                                0.0 < smoothing < 1.0.\n   *                                Defaults to 0.8.\n   *  @param {Number} [bins]    Length of resulting array.\n   *                            Must be a power of two between\n   *                            16 and 1024. Defaults to 1024.\n   *  @return {Object}    FFT Object\n   *  @example\n   *  <div><code>\n   *  function preload(){\n   *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *  \n   *  function setup(){\n   *    var cnv = createCanvas(100,100);\n   *    cnv.mouseClicked(togglePlay);\n   *    fft = new p5.FFT();\n   *    sound.amp(0.2);\n   *  }\n   *  \n   *  function draw(){\n   *    background(0);\n   *  \n   *    var spectrum = fft.analyze(); \n   *    noStroke();\n   *    fill(0,255,0); // spectrum is green\n   *    for (var i = 0; i< spectrum.length; i++){\n   *      var x = map(i, 0, spectrum.length, 0, width);\n   *      var h = -height + map(spectrum[i], 0, 255, height, 0);\n   *      rect(x, height, width / spectrum.length, h )\n   *    }\n   *  \n   *    var waveform = fft.waveform();\n   *    noFill();\n   *    beginShape();\n   *    stroke(255,0,0); // waveform is red\n   *    strokeWeight(1);\n   *    for (var i = 0; i< waveform.length; i++){\n   *      var x = map(i, 0, waveform.length, 0, width);\n   *      var y = map( waveform[i], -1, 1, 0, height);\n   *      vertex(x,y);\n   *    }\n   *    endShape();\n   *  \n   *    text('click to play/pause', 4, 10);\n   *  }\n   *  \n   *  // fade sound if mouse is over canvas\n   *  function togglePlay() {\n   *    if (sound.isPlaying()) {\n   *      sound.pause();\n   *    } else {\n   *      sound.loop();\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.FFT = function (smoothing, bins) {\n    this.smoothing = smoothing || 0.8;\n    this.bins = bins || 1024;\n    var FFT_SIZE = bins * 2 || 2048;\n    this.input = this.analyser = p5sound.audiocontext.createAnalyser();\n    // default connections to p5sound fftMeter\n    p5sound.fftMeter.connect(this.analyser);\n    this.analyser.smoothingTimeConstant = this.smoothing;\n    this.analyser.fftSize = FFT_SIZE;\n    this.freqDomain = new Uint8Array(this.analyser.frequencyBinCount);\n    this.timeDomain = new Uint8Array(this.analyser.frequencyBinCount);\n    // predefined frequency ranages, these will be tweakable\n    this.bass = [\n      20,\n      140\n    ];\n    this.lowMid = [\n      140,\n      400\n    ];\n    this.mid = [\n      400,\n      2600\n    ];\n    this.highMid = [\n      2600,\n      5200\n    ];\n    this.treble = [\n      5200,\n      14000\n    ];\n    // add this p5.SoundFile to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Set the input source for the FFT analysis. If no source is\n   *  provided, FFT will analyze all sound in the sketch.\n   *\n   *  @method  setInput\n   *  @param {Object} [source] p5.sound object (or web audio API source node)\n   */\n  p5.FFT.prototype.setInput = function (source) {\n    if (!source) {\n      p5sound.fftMeter.connect(this.analyser);\n    } else {\n      if (source.output) {\n        source.output.connect(this.analyser);\n      } else if (source.connect) {\n        source.connect(this.analyser);\n      }\n      p5sound.fftMeter.disconnect();\n    }\n  };\n  /**\n   *  Returns an array of amplitude values (between -1.0 and +1.0) that represent\n   *  a snapshot of amplitude readings in a single buffer. Length will be\n   *  equal to bins (defaults to 1024). Can be used to draw the waveform\n   *  of a sound. \n   *  \n   *  @method waveform\n   *  @param {Number} [bins]    Must be a power of two between\n   *                            16 and 1024. Defaults to 1024.\n   *  @param {String} [precision] If any value is provided, will return results\n   *                              in a Float32 Array which is more precise\n   *                              than a regular array.\n   *  @return {Array}  Array    Array of amplitude values (-1 to 1)\n   *                            over time. Array length = bins.\n   *\n   */\n  p5.FFT.prototype.waveform = function () {\n    var bins, mode, normalArray;\n    for (var i = 0; i < arguments.length; i++) {\n      if (typeof arguments[i] === 'number') {\n        bins = arguments[i];\n        this.analyser.fftSize = bins * 2;\n      }\n      if (typeof arguments[i] === 'string') {\n        mode = arguments[i];\n      }\n    }\n    // getFloatFrequencyData doesnt work in Safari as of 5/2015\n    if (mode && !p5.prototype._isSafari()) {\n      timeToFloat(this, this.timeDomain);\n      this.analyser.getFloatTimeDomainData(this.timeDomain);\n      return this.timeDomain;\n    } else {\n      timeToInt(this, this.timeDomain);\n      this.analyser.getByteTimeDomainData(this.timeDomain);\n      var normalArray = new Array();\n      for (var i = 0; i < this.timeDomain.length; i++) {\n        var scaled = p5.prototype.map(this.timeDomain[i], 0, 255, -1, 1);\n        normalArray.push(scaled);\n      }\n      return normalArray;\n    }\n  };\n  /**\n   *  Returns an array of amplitude values (between 0 and 255)\n   *  across the frequency spectrum. Length is equal to FFT bins\n   *  (1024 by default). The array indices correspond to frequencies\n   *  (i.e. pitches), from the lowest to the highest that humans can\n   *  hear. Each value represents amplitude at that slice of the\n   *  frequency spectrum. Must be called prior to using\n   *  <code>getEnergy()</code>.\n   *\n   *  @method analyze\n   *  @param {Number} [bins]    Must be a power of two between\n   *                             16 and 1024. Defaults to 1024.\n   *  @param {Number} [scale]    If \"dB,\" returns decibel\n   *                             float measurements between\n   *                             -140 and 0 (max).\n   *                             Otherwise returns integers from 0-255.\n   *  @return {Array} spectrum    Array of energy (amplitude/volume)\n   *                              values across the frequency spectrum.\n   *                              Lowest energy (silence) = 0, highest\n   *                              possible is 255.\n   *  @example\n   *  <div><code>\n   *  var osc;\n   *  var fft;\n   *\n   *  function setup(){\n   *    createCanvas(100,100);\n   *    osc = new p5.Oscillator();\n   *    osc.amp(0);\n   *    osc.start();\n   *    fft = new p5.FFT();\n   *  }\n   *\n   *  function draw(){\n   *    background(0);\n   *\n   *    var freq = map(mouseX, 0, 800, 20, 15000);\n   *    freq = constrain(freq, 1, 20000);\n   *    osc.freq(freq);\n   *\n   *    var spectrum = fft.analyze(); \n   *    noStroke();\n   *    fill(0,255,0); // spectrum is green\n   *    for (var i = 0; i< spectrum.length; i++){\n   *      var x = map(i, 0, spectrum.length, 0, width);\n   *      var h = -height + map(spectrum[i], 0, 255, height, 0);\n   *      rect(x, height, width / spectrum.length, h );\n   *    }\n   *\n   *    stroke(255);\n   *    text('Freq: ' + round(freq)+'Hz', 10, 10); \n   *\n   *    isMouseOverCanvas();\n   *  }\n   *\n   *  // only play sound when mouse is over canvas\n   *  function isMouseOverCanvas() {\n   *    var mX = mouseX, mY = mouseY;\n   *    if (mX > 0 && mX < width && mY < height && mY > 0) {\n   *      osc.amp(0.5, 0.2);\n   *    } else {\n   *      osc.amp(0, 0.2);\n   *    }\n   *  }\n   *  </code></div>\n   *                                   \n   *\n   */\n  p5.FFT.prototype.analyze = function () {\n    var bins, mode;\n    for (var i = 0; i < arguments.length; i++) {\n      if (typeof arguments[i] === 'number') {\n        bins = this.bins = arguments[i];\n        this.analyser.fftSize = this.bins * 2;\n      }\n      if (typeof arguments[i] === 'string') {\n        mode = arguments[i];\n      }\n    }\n    if (mode && mode.toLowerCase() === 'db') {\n      freqToFloat(this);\n      this.analyser.getFloatFrequencyData(this.freqDomain);\n      return this.freqDomain;\n    } else {\n      freqToInt(this, this.freqDomain);\n      this.analyser.getByteFrequencyData(this.freqDomain);\n      var normalArray = Array.apply([], this.freqDomain);\n      normalArray.length === this.analyser.fftSize;\n      normalArray.constructor === Array;\n      return normalArray;\n    }\n  };\n  /**\n   *  Returns the amount of energy (volume) at a specific\n   *  <a href=\"en.wikipedia.org/wiki/Audio_frequency\" target=\"_blank\">\n   *  frequency</a>, or the average amount of energy between two\n   *  frequencies. Accepts Number(s) corresponding\n   *  to frequency (in Hz), or a String corresponding to predefined\n   *  frequency ranges (\"bass\", \"lowMid\", \"mid\", \"highMid\", \"treble\").\n   *  Returns a range between 0 (no energy/volume at that frequency) and\n   *  255 (maximum energy). \n   *  <em>NOTE: analyze() must be called prior to getEnergy(). Analyze()\n   *  tells the FFT to analyze frequency data, and getEnergy() uses\n   *  the results determine the value at a specific frequency or\n   *  range of frequencies.</em><p></p>\n   *  \n   *  @method  getEnergy\n   *  @param  {Number|String} frequency1   Will return a value representing\n   *                                energy at this frequency. Alternately,\n   *                                the strings \"bass\", \"lowMid\" \"mid\",\n   *                                \"highMid\", and \"treble\" will return\n   *                                predefined frequency ranges.\n   *  @param  {Number} [frequency2] If a second frequency is given,\n   *                                will return average amount of\n   *                                energy that exists between the\n   *                                two frequencies.\n   *  @return {Number}   Energy   Energy (volume/amplitude) from\n   *                              0 and 255.\n   *                                       \n   */\n  p5.FFT.prototype.getEnergy = function (frequency1, frequency2) {\n    var nyquist = p5sound.audiocontext.sampleRate / 2;\n    if (frequency1 === 'bass') {\n      frequency1 = this.bass[0];\n      frequency2 = this.bass[1];\n    } else if (frequency1 === 'lowMid') {\n      frequency1 = this.lowMid[0];\n      frequency2 = this.lowMid[1];\n    } else if (frequency1 === 'mid') {\n      frequency1 = this.mid[0];\n      frequency2 = this.mid[1];\n    } else if (frequency1 === 'highMid') {\n      frequency1 = this.highMid[0];\n      frequency2 = this.highMid[1];\n    } else if (frequency1 === 'treble') {\n      frequency1 = this.treble[0];\n      frequency2 = this.treble[1];\n    }\n    if (typeof frequency1 !== 'number') {\n      throw 'invalid input for getEnergy()';\n    } else if (!frequency2) {\n      var index = Math.round(frequency1 / nyquist * this.freqDomain.length);\n      return this.freqDomain[index];\n    } else if (frequency1 && frequency2) {\n      // if second is higher than first\n      if (frequency1 > frequency2) {\n        var swap = frequency2;\n        frequency2 = frequency1;\n        frequency1 = swap;\n      }\n      var lowIndex = Math.round(frequency1 / nyquist * this.freqDomain.length);\n      var highIndex = Math.round(frequency2 / nyquist * this.freqDomain.length);\n      var total = 0;\n      var numFrequencies = 0;\n      // add up all of the values for the frequencies\n      for (var i = lowIndex; i <= highindex;=\"\" i++)=\"\" {=\"\" total=\"\" +=\"this.freqDomain[i];\" numfrequencies=\"\" }=\"\" divide=\"\" by=\"\" number=\"\" of=\"\" frequencies=\"\" var=\"\" toreturn=\"total\" numfrequencies;=\"\" return=\"\" toreturn;=\"\" else=\"\" throw=\"\" 'invalid=\"\" input=\"\" for=\"\" getenergy()';=\"\" };=\"\" compatability=\"\" with=\"\" v.012,=\"\" changed=\"\" to=\"\" getenergy=\"\" in=\"\" v.0121.=\"\" will=\"\" be=\"\" deprecated...=\"\" p5.fft.prototype.getfreq=\"function\" (freq1,=\"\" freq2)=\"\" console.log('getfreq()=\"\" is=\"\" deprecated.=\"\" please=\"\" use=\"\" getenergy()=\"\" instead.');=\"\" x=\"this.getEnergy(freq1,\" freq2);=\"\" x;=\"\" **=\"\" *=\"\" returns=\"\" the=\"\" <a=\"\" href=\"http://en.wikipedia.org/wiki/Spectral_centroid\" target=\"_blank\">\n   *  spectral centroid of the input signal.\n   *  <em>NOTE: analyze() must be called prior to getCentroid(). Analyze()\n   *  tells the FFT to analyze frequency data, and getCentroid() uses\n   *  the results determine the spectral centroid.</em><p></p>\n   *  \n   *  @method  getCentroid\n   *  @return {Number}   Spectral Centroid Frequency   Frequency of the spectral centroid in Hz.\n   * \n   *\n   * @example\n   *  <div><code>\n   *\n   *\n   *function setup(){\n   *  cnv = createCanvas(800,400);\n   *  sound = new p5.AudioIn();\n   *  sound.start();\n   *  fft = new p5.FFT();\n   *  sound.connect(fft);\n   *}\n   *\n   *\n   *function draw(){\n   *\n   *  var centroidplot = 0.0;\n   *  var spectralCentroid = 0;\n   *  \n   *  \n   *  background(0);\n   *  stroke(0,255,0);\n   *  var spectrum = fft.analyze(); \n   *  fill(0,255,0); // spectrum is green\n   *  \n   *  //draw the spectrum\n   *  \n   *  for (var i = 0; i< spectrum.length; i++){\n   *    var x = map(log(i), 0, log(spectrum.length), 0, width);\n   *    var h = map(spectrum[i], 0, 255, 0, height);\n   *    var rectangle_width = (log(i+1)-log(i))*(width/log(spectrum.length));\n   *    rect(x, height, rectangle_width, -h )\n   *  }\n  \n   *  var nyquist = 22050;\n   *  \n   *  // get the centroid\n   *  spectralCentroid = fft.getCentroid();\n   *  \n   *  // the mean_freq_index calculation is for the display.\n   *  var mean_freq_index = spectralCentroid/(nyquist/spectrum.length);\n   *\n   *  centroidplot = map(log(mean_freq_index), 0, log(spectrum.length), 0, width);\n   *\n   *\n   *  stroke(255,0,0); // the line showing where the centroid is will be red\n   *  \n   *  rect(centroidplot, 0, width / spectrum.length, height)\n   *  noStroke();\n   *  fill(255,255,255);  // text is white\n   *  textSize(40);\n   *  text(\"centroid: \"+round(spectralCentroid)+\" Hz\", 10, 40);\n   *}\n   * </code></div>\n   */\n  p5.FFT.prototype.getCentroid = function () {\n    var nyquist = p5sound.audiocontext.sampleRate / 2;\n    var cumulative_sum = 0;\n    var centroid_normalization = 0;\n    for (var i = 0; i < this.freqDomain.length; i++) {\n      cumulative_sum += i * this.freqDomain[i];\n      centroid_normalization += this.freqDomain[i];\n    }\n    var mean_freq_index = 0;\n    if (centroid_normalization != 0) {\n      mean_freq_index = cumulative_sum / centroid_normalization;\n    }\n    var spec_centroid_freq = mean_freq_index * (nyquist / this.freqDomain.length);\n    return spec_centroid_freq;\n  };\n  /**\n   *  Smooth FFT analysis by averaging with the last analysis frame.\n   *  \n   *  @method smooth\n   *  @param {Number} smoothing    0.0 < smoothing < 1.0.\n   *                               Defaults to 0.8.\n   */\n  p5.FFT.prototype.smooth = function (s) {\n    if (s) {\n      this.smoothing = s;\n    }\n    this.analyser.smoothingTimeConstant = s;\n  };\n  p5.FFT.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.analyser.disconnect();\n    this.analyser = undefined;\n  };\n  // helper methods to convert type from float (dB) to int (0-255)\n  var freqToFloat = function (fft) {\n    if (fft.freqDomain instanceof Float32Array === false) {\n      fft.freqDomain = new Float32Array(fft.analyser.frequencyBinCount);\n    }\n  };\n  var freqToInt = function (fft) {\n    if (fft.freqDomain instanceof Uint8Array === false) {\n      fft.freqDomain = new Uint8Array(fft.analyser.frequencyBinCount);\n    }\n  };\n  var timeToFloat = function (fft) {\n    if (fft.timeDomain instanceof Float32Array === false) {\n      fft.timeDomain = new Float32Array(fft.analyser.frequencyBinCount);\n    }\n  };\n  var timeToInt = function (fft) {\n    if (fft.timeDomain instanceof Uint8Array === false) {\n      fft.timeDomain = new Uint8Array(fft.analyser.frequencyBinCount);\n    }\n  };\n}(master);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Tone;\nTone_core_Tone = function () {\n  'use strict';\n  function isUndef(val) {\n    return val === void 0;\n  }\n  function isFunction(val) {\n    return typeof val === 'function';\n  }\n  var audioContext;\n  if (isUndef(window.AudioContext)) {\n    window.AudioContext = window.webkitAudioContext;\n  }\n  if (isUndef(window.OfflineAudioContext)) {\n    window.OfflineAudioContext = window.webkitOfflineAudioContext;\n  }\n  if (!isUndef(AudioContext)) {\n    audioContext = new AudioContext();\n  } else {\n    throw new Error('Web Audio is not supported in this browser');\n  }\n  if (!isFunction(AudioContext.prototype.createGain)) {\n    AudioContext.prototype.createGain = AudioContext.prototype.createGainNode;\n  }\n  if (!isFunction(AudioContext.prototype.createDelay)) {\n    AudioContext.prototype.createDelay = AudioContext.prototype.createDelayNode;\n  }\n  if (!isFunction(AudioContext.prototype.createPeriodicWave)) {\n    AudioContext.prototype.createPeriodicWave = AudioContext.prototype.createWaveTable;\n  }\n  if (!isFunction(AudioBufferSourceNode.prototype.start)) {\n    AudioBufferSourceNode.prototype.start = AudioBufferSourceNode.prototype.noteGrainOn;\n  }\n  if (!isFunction(AudioBufferSourceNode.prototype.stop)) {\n    AudioBufferSourceNode.prototype.stop = AudioBufferSourceNode.prototype.noteOff;\n  }\n  if (!isFunction(OscillatorNode.prototype.start)) {\n    OscillatorNode.prototype.start = OscillatorNode.prototype.noteOn;\n  }\n  if (!isFunction(OscillatorNode.prototype.stop)) {\n    OscillatorNode.prototype.stop = OscillatorNode.prototype.noteOff;\n  }\n  if (!isFunction(OscillatorNode.prototype.setPeriodicWave)) {\n    OscillatorNode.prototype.setPeriodicWave = OscillatorNode.prototype.setWaveTable;\n  }\n  AudioNode.prototype._nativeConnect = AudioNode.prototype.connect;\n  AudioNode.prototype.connect = function (B, outNum, inNum) {\n    if (B.input) {\n      if (Array.isArray(B.input)) {\n        if (isUndef(inNum)) {\n          inNum = 0;\n        }\n        this.connect(B.input[inNum]);\n      } else {\n        this.connect(B.input, outNum, inNum);\n      }\n    } else {\n      try {\n        if (B instanceof AudioNode) {\n          this._nativeConnect(B, outNum, inNum);\n        } else {\n          this._nativeConnect(B, outNum);\n        }\n      } catch (e) {\n        throw new Error('error connecting to node: ' + B);\n      }\n    }\n  };\n  var Tone = function (inputs, outputs) {\n    if (isUndef(inputs) || inputs === 1) {\n      this.input = this.context.createGain();\n    } else if (inputs > 1) {\n      this.input = new Array(inputs);\n    }\n    if (isUndef(outputs) || outputs === 1) {\n      this.output = this.context.createGain();\n    } else if (outputs > 1) {\n      this.output = new Array(inputs);\n    }\n  };\n  Tone.prototype.set = function (params, value, rampTime) {\n    if (this.isObject(params)) {\n      rampTime = value;\n    } else if (this.isString(params)) {\n      var tmpObj = {};\n      tmpObj[params] = value;\n      params = tmpObj;\n    }\n    for (var attr in params) {\n      value = params[attr];\n      var parent = this;\n      if (attr.indexOf('.') !== -1) {\n        var attrSplit = attr.split('.');\n        for (var i = 0; i < attrSplit.length - 1; i++) {\n          parent = parent[attrSplit[i]];\n        }\n        attr = attrSplit[attrSplit.length - 1];\n      }\n      var param = parent[attr];\n      if (isUndef(param)) {\n        continue;\n      }\n      if (Tone.Signal && param instanceof Tone.Signal || Tone.Param && param instanceof Tone.Param) {\n        if (param.value !== value) {\n          if (isUndef(rampTime)) {\n            param.value = value;\n          } else {\n            param.rampTo(value, rampTime);\n          }\n        }\n      } else if (param instanceof AudioParam) {\n        if (param.value !== value) {\n          param.value = value;\n        }\n      } else if (param instanceof Tone) {\n        param.set(value);\n      } else if (param !== value) {\n        parent[attr] = value;\n      }\n    }\n    return this;\n  };\n  Tone.prototype.get = function (params) {\n    if (isUndef(params)) {\n      params = this._collectDefaults(this.constructor);\n    } else if (this.isString(params)) {\n      params = [params];\n    }\n    var ret = {};\n    for (var i = 0; i < params.length; i++) {\n      var attr = params[i];\n      var parent = this;\n      var subRet = ret;\n      if (attr.indexOf('.') !== -1) {\n        var attrSplit = attr.split('.');\n        for (var j = 0; j < attrSplit.length - 1; j++) {\n          var subAttr = attrSplit[j];\n          subRet[subAttr] = subRet[subAttr] || {};\n          subRet = subRet[subAttr];\n          parent = parent[subAttr];\n        }\n        attr = attrSplit[attrSplit.length - 1];\n      }\n      var param = parent[attr];\n      if (this.isObject(params[attr])) {\n        subRet[attr] = param.get();\n      } else if (Tone.Signal && param instanceof Tone.Signal) {\n        subRet[attr] = param.value;\n      } else if (Tone.Param && param instanceof Tone.Param) {\n        subRet[attr] = param.value;\n      } else if (param instanceof AudioParam) {\n        subRet[attr] = param.value;\n      } else if (param instanceof Tone) {\n        subRet[attr] = param.get();\n      } else if (!isFunction(param) && !isUndef(param)) {\n        subRet[attr] = param;\n      }\n    }\n    return ret;\n  };\n  Tone.prototype._collectDefaults = function (constr) {\n    var ret = [];\n    if (!isUndef(constr.defaults)) {\n      ret = Object.keys(constr.defaults);\n    }\n    if (!isUndef(constr._super)) {\n      var superDefs = this._collectDefaults(constr._super);\n      for (var i = 0; i < superDefs.length; i++) {\n        if (ret.indexOf(superDefs[i]) === -1) {\n          ret.push(superDefs[i]);\n        }\n      }\n    }\n    return ret;\n  };\n  Tone.prototype.toString = function () {\n    for (var className in Tone) {\n      var isLetter = className[0].match(/^[A-Z]$/);\n      var sameConstructor = Tone[className] === this.constructor;\n      if (isFunction(Tone[className]) && isLetter && sameConstructor) {\n        return className;\n      }\n    }\n    return 'Tone';\n  };\n  Tone.context = audioContext;\n  Tone.prototype.context = Tone.context;\n  Tone.prototype.bufferSize = 2048;\n  Tone.prototype.blockTime = 128 / Tone.context.sampleRate;\n  Tone.prototype.dispose = function () {\n    if (!this.isUndef(this.input)) {\n      if (this.input instanceof AudioNode) {\n        this.input.disconnect();\n      }\n      this.input = null;\n    }\n    if (!this.isUndef(this.output)) {\n      if (this.output instanceof AudioNode) {\n        this.output.disconnect();\n      }\n      this.output = null;\n    }\n    return this;\n  };\n  var _silentNode = null;\n  Tone.prototype.noGC = function () {\n    this.output.connect(_silentNode);\n    return this;\n  };\n  AudioNode.prototype.noGC = function () {\n    this.connect(_silentNode);\n    return this;\n  };\n  Tone.prototype.connect = function (unit, outputNum, inputNum) {\n    if (Array.isArray(this.output)) {\n      outputNum = this.defaultArg(outputNum, 0);\n      this.output[outputNum].connect(unit, 0, inputNum);\n    } else {\n      this.output.connect(unit, outputNum, inputNum);\n    }\n    return this;\n  };\n  Tone.prototype.disconnect = function (outputNum) {\n    if (Array.isArray(this.output)) {\n      outputNum = this.defaultArg(outputNum, 0);\n      this.output[outputNum].disconnect();\n    } else {\n      this.output.disconnect();\n    }\n    return this;\n  };\n  Tone.prototype.connectSeries = function () {\n    if (arguments.length > 1) {\n      var currentUnit = arguments[0];\n      for (var i = 1; i < arguments.length; i++) {\n        var toUnit = arguments[i];\n        currentUnit.connect(toUnit);\n        currentUnit = toUnit;\n      }\n    }\n    return this;\n  };\n  Tone.prototype.connectParallel = function () {\n    var connectFrom = arguments[0];\n    if (arguments.length > 1) {\n      for (var i = 1; i < arguments.length; i++) {\n        var connectTo = arguments[i];\n        connectFrom.connect(connectTo);\n      }\n    }\n    return this;\n  };\n  Tone.prototype.chain = function () {\n    if (arguments.length > 0) {\n      var currentUnit = this;\n      for (var i = 0; i < arguments.length; i++) {\n        var toUnit = arguments[i];\n        currentUnit.connect(toUnit);\n        currentUnit = toUnit;\n      }\n    }\n    return this;\n  };\n  Tone.prototype.fan = function () {\n    if (arguments.length > 0) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.connect(arguments[i]);\n      }\n    }\n    return this;\n  };\n  AudioNode.prototype.chain = Tone.prototype.chain;\n  AudioNode.prototype.fan = Tone.prototype.fan;\n  Tone.prototype.defaultArg = function (given, fallback) {\n    if (this.isObject(given) && this.isObject(fallback)) {\n      var ret = {};\n      for (var givenProp in given) {\n        ret[givenProp] = this.defaultArg(fallback[givenProp], given[givenProp]);\n      }\n      for (var fallbackProp in fallback) {\n        ret[fallbackProp] = this.defaultArg(given[fallbackProp], fallback[fallbackProp]);\n      }\n      return ret;\n    } else {\n      return isUndef(given) ? fallback : given;\n    }\n  };\n  Tone.prototype.optionsObject = function (values, keys, defaults) {\n    var options = {};\n    if (values.length === 1 && this.isObject(values[0])) {\n      options = values[0];\n    } else {\n      for (var i = 0; i < keys.length; i++) {\n        options[keys[i]] = values[i];\n      }\n    }\n    if (!this.isUndef(defaults)) {\n      return this.defaultArg(options, defaults);\n    } else {\n      return options;\n    }\n  };\n  Tone.prototype.isUndef = isUndef;\n  Tone.prototype.isFunction = isFunction;\n  Tone.prototype.isNumber = function (arg) {\n    return typeof arg === 'number';\n  };\n  Tone.prototype.isObject = function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Object]' && arg.constructor === Object;\n  };\n  Tone.prototype.isBoolean = function (arg) {\n    return typeof arg === 'boolean';\n  };\n  Tone.prototype.isArray = function (arg) {\n    return Array.isArray(arg);\n  };\n  Tone.prototype.isString = function (arg) {\n    return typeof arg === 'string';\n  };\n  Tone.noOp = function () {\n  };\n  Tone.prototype._readOnly = function (property) {\n    if (Array.isArray(property)) {\n      for (var i = 0; i < property.length; i++) {\n        this._readOnly(property[i]);\n      }\n    } else {\n      Object.defineProperty(this, property, {\n        writable: false,\n        enumerable: true\n      });\n    }\n  };\n  Tone.prototype._writable = function (property) {\n    if (Array.isArray(property)) {\n      for (var i = 0; i < property.length; i++) {\n        this._writable(property[i]);\n      }\n    } else {\n      Object.defineProperty(this, property, { writable: true });\n    }\n  };\n  Tone.State = {\n    Started: 'started',\n    Stopped: 'stopped',\n    Paused: 'paused'\n  };\n  Tone.prototype.equalPowerScale = function (percent) {\n    var piFactor = 0.5 * Math.PI;\n    return Math.sin(percent * piFactor);\n  };\n  Tone.prototype.dbToGain = function (db) {\n    return Math.pow(2, db / 6);\n  };\n  Tone.prototype.gainToDb = function (gain) {\n    return 20 * (Math.log(gain) / Math.LN10);\n  };\n  Tone.prototype.now = function () {\n    return this.context.currentTime;\n  };\n  Tone.extend = function (child, parent) {\n    if (isUndef(parent)) {\n      parent = Tone;\n    }\n    function TempConstructor() {\n    }\n    TempConstructor.prototype = parent.prototype;\n    child.prototype = new TempConstructor();\n    child.prototype.constructor = child;\n    child._super = parent;\n  };\n  var newContextCallbacks = [];\n  Tone._initAudioContext = function (callback) {\n    callback(Tone.context);\n    newContextCallbacks.push(callback);\n  };\n  Tone.setContext = function (ctx) {\n    Tone.prototype.context = ctx;\n    Tone.context = ctx;\n    for (var i = 0; i < newContextCallbacks.length; i++) {\n      newContextCallbacks[i](ctx);\n    }\n  };\n  Tone.startMobile = function () {\n    var osc = Tone.context.createOscillator();\n    var silent = Tone.context.createGain();\n    silent.gain.value = 0;\n    osc.connect(silent);\n    silent.connect(Tone.context.destination);\n    var now = Tone.context.currentTime;\n    osc.start(now);\n    osc.stop(now + 1);\n  };\n  Tone._initAudioContext(function (audioContext) {\n    Tone.prototype.blockTime = 128 / audioContext.sampleRate;\n    _silentNode = audioContext.createGain();\n    _silentNode.gain.value = 0;\n    _silentNode.connect(audioContext.destination);\n  });\n  Tone.version = 'r7-dev';\n  return Tone;\n}();\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_SignalBase;\nTone_signal_SignalBase = function (Tone) {\n  'use strict';\n  Tone.SignalBase = function () {\n  };\n  Tone.extend(Tone.SignalBase);\n  Tone.SignalBase.prototype.connect = function (node, outputNumber, inputNumber) {\n    if (Tone.Signal && Tone.Signal === node.constructor || Tone.Param && Tone.Param === node.constructor || Tone.TimelineSignal && Tone.TimelineSignal === node.constructor) {\n      node._param.cancelScheduledValues(0);\n      node._param.value = 0;\n      node.overridden = true;\n    } else if (node instanceof AudioParam) {\n      node.cancelScheduledValues(0);\n      node.value = 0;\n    }\n    Tone.prototype.connect.call(this, node, outputNumber, inputNumber);\n    return this;\n  };\n  return Tone.SignalBase;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_WaveShaper;\nTone_signal_WaveShaper = function (Tone) {\n  'use strict';\n  Tone.WaveShaper = function (mapping, bufferLen) {\n    this._shaper = this.input = this.output = this.context.createWaveShaper();\n    this._curve = null;\n    if (Array.isArray(mapping)) {\n      this.curve = mapping;\n    } else if (isFinite(mapping) || this.isUndef(mapping)) {\n      this._curve = new Float32Array(this.defaultArg(mapping, 1024));\n    } else if (this.isFunction(mapping)) {\n      this._curve = new Float32Array(this.defaultArg(bufferLen, 1024));\n      this.setMap(mapping);\n    }\n  };\n  Tone.extend(Tone.WaveShaper, Tone.SignalBase);\n  Tone.WaveShaper.prototype.setMap = function (mapping) {\n    for (var i = 0, len = this._curve.length; i < len; i++) {\n      var normalized = i / len * 2 - 1;\n      this._curve[i] = mapping(normalized, i);\n    }\n    this._shaper.curve = this._curve;\n    return this;\n  };\n  Object.defineProperty(Tone.WaveShaper.prototype, 'curve', {\n    get: function () {\n      return this._shaper.curve;\n    },\n    set: function (mapping) {\n      this._curve = new Float32Array(mapping);\n      this._shaper.curve = this._curve;\n    }\n  });\n  Object.defineProperty(Tone.WaveShaper.prototype, 'oversample', {\n    get: function () {\n      return this._shaper.oversample;\n    },\n    set: function (oversampling) {\n      if ([\n          'none',\n          '2x',\n          '4x'\n        ].indexOf(oversampling) !== -1) {\n        this._shaper.oversample = oversampling;\n      } else {\n        throw new Error('invalid oversampling: ' + oversampling);\n      }\n    }\n  });\n  Tone.WaveShaper.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._shaper.disconnect();\n    this._shaper = null;\n    this._curve = null;\n    return this;\n  };\n  return Tone.WaveShaper;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Type;\nTone_core_Type = function (Tone) {\n  'use strict';\n  Tone.Type = {\n    Default: 'number',\n    Time: 'time',\n    Frequency: 'frequency',\n    NormalRange: 'normalRange',\n    AudioRange: 'audioRange',\n    Decibels: 'db',\n    Interval: 'interval',\n    BPM: 'bpm',\n    Positive: 'positive',\n    Cents: 'cents',\n    Degrees: 'degrees',\n    MIDI: 'midi',\n    TransportTime: 'transportTime',\n    Ticks: 'tick',\n    Note: 'note',\n    Milliseconds: 'milliseconds',\n    Notation: 'notation'\n  };\n  Tone.prototype.isNowRelative = function () {\n    var nowRelative = new RegExp(/^\\s*\\+(.)+/i);\n    return function (note) {\n      return nowRelative.test(note);\n    };\n  }();\n  Tone.prototype.isTicks = function () {\n    var tickFormat = new RegExp(/^\\d+i$/i);\n    return function (note) {\n      return tickFormat.test(note);\n    };\n  }();\n  Tone.prototype.isNotation = function () {\n    var notationFormat = new RegExp(/^[0-9]+[mnt]$/i);\n    return function (note) {\n      return notationFormat.test(note);\n    };\n  }();\n  Tone.prototype.isTransportTime = function () {\n    var transportTimeFormat = new RegExp(/^(\\d+(\\.\\d+)?\\:){1,2}(\\d+(\\.\\d+)?)?$/i);\n    return function (transportTime) {\n      return transportTimeFormat.test(transportTime);\n    };\n  }();\n  Tone.prototype.isNote = function () {\n    var noteFormat = new RegExp(/^[a-g]{1}(b|#|x|bb)?-?[0-9]+$/i);\n    return function (note) {\n      return noteFormat.test(note);\n    };\n  }();\n  Tone.prototype.isFrequency = function () {\n    var freqFormat = new RegExp(/^\\d*\\.?\\d+hz$/i);\n    return function (freq) {\n      return freqFormat.test(freq);\n    };\n  }();\n  function getTransportBpm() {\n    if (Tone.Transport && Tone.Transport.bpm) {\n      return Tone.Transport.bpm.value;\n    } else {\n      return 120;\n    }\n  }\n  function getTransportTimeSignature() {\n    if (Tone.Transport && Tone.Transport.timeSignature) {\n      return Tone.Transport.timeSignature;\n    } else {\n      return 4;\n    }\n  }\n  Tone.prototype.notationToSeconds = function (notation, bpm, timeSignature) {\n    bpm = this.defaultArg(bpm, getTransportBpm());\n    timeSignature = this.defaultArg(timeSignature, getTransportTimeSignature());\n    var beatTime = 60 / bpm;\n    if (notation === '1n') {\n      notation = '1m';\n    }\n    var subdivision = parseInt(notation, 10);\n    var beats = 0;\n    if (subdivision === 0) {\n      beats = 0;\n    }\n    var lastLetter = notation.slice(-1);\n    if (lastLetter === 't') {\n      beats = 4 / subdivision * 2 / 3;\n    } else if (lastLetter === 'n') {\n      beats = 4 / subdivision;\n    } else if (lastLetter === 'm') {\n      beats = subdivision * timeSignature;\n    } else {\n      beats = 0;\n    }\n    return beatTime * beats;\n  };\n  Tone.prototype.transportTimeToSeconds = function (transportTime, bpm, timeSignature) {\n    bpm = this.defaultArg(bpm, getTransportBpm());\n    timeSignature = this.defaultArg(timeSignature, getTransportTimeSignature());\n    var measures = 0;\n    var quarters = 0;\n    var sixteenths = 0;\n    var split = transportTime.split(':');\n    if (split.length === 2) {\n      measures = parseFloat(split[0]);\n      quarters = parseFloat(split[1]);\n    } else if (split.length === 1) {\n      quarters = parseFloat(split[0]);\n    } else if (split.length === 3) {\n      measures = parseFloat(split[0]);\n      quarters = parseFloat(split[1]);\n      sixteenths = parseFloat(split[2]);\n    }\n    var beats = measures * timeSignature + quarters + sixteenths / 4;\n    return beats * (60 / bpm);\n  };\n  Tone.prototype.ticksToSeconds = function (ticks, bpm) {\n    if (this.isUndef(Tone.Transport)) {\n      return 0;\n    }\n    ticks = parseFloat(ticks);\n    bpm = this.defaultArg(bpm, getTransportBpm());\n    var tickTime = 60 / bpm / Tone.Transport.PPQ;\n    return tickTime * ticks;\n  };\n  Tone.prototype.frequencyToSeconds = function (freq) {\n    return 1 / parseFloat(freq);\n  };\n  Tone.prototype.samplesToSeconds = function (samples) {\n    return samples / this.context.sampleRate;\n  };\n  Tone.prototype.secondsToSamples = function (seconds) {\n    return seconds * this.context.sampleRate;\n  };\n  Tone.prototype.secondsToTransportTime = function (seconds, bpm, timeSignature) {\n    bpm = this.defaultArg(bpm, getTransportBpm());\n    timeSignature = this.defaultArg(timeSignature, getTransportTimeSignature());\n    var quarterTime = 60 / bpm;\n    var quarters = seconds / quarterTime;\n    var measures = Math.floor(quarters / timeSignature);\n    var sixteenths = quarters % 1 * 4;\n    quarters = Math.floor(quarters) % timeSignature;\n    var progress = [\n      measures,\n      quarters,\n      sixteenths\n    ];\n    return progress.join(':');\n  };\n  Tone.prototype.secondsToFrequency = function (seconds) {\n    return 1 / seconds;\n  };\n  Tone.prototype.toTransportTime = function (time, bpm, timeSignature) {\n    var seconds = this.toSeconds(time);\n    return this.secondsToTransportTime(seconds, bpm, timeSignature);\n  };\n  Tone.prototype.toFrequency = function (freq, now) {\n    if (this.isFrequency(freq)) {\n      return parseFloat(freq);\n    } else if (this.isNotation(freq) || this.isTransportTime(freq)) {\n      return this.secondsToFrequency(this.toSeconds(freq, now));\n    } else if (this.isNote(freq)) {\n      return this.noteToFrequency(freq);\n    } else {\n      return freq;\n    }\n  };\n  Tone.prototype.toTicks = function (time) {\n    if (this.isUndef(Tone.Transport)) {\n      return 0;\n    }\n    var bpm = Tone.Transport.bpm.value;\n    var plusNow = 0;\n    if (this.isNowRelative(time)) {\n      time = time.replace('+', '');\n      plusNow = Tone.Transport.ticks;\n    } else if (this.isUndef(time)) {\n      return Tone.Transport.ticks;\n    }\n    var seconds = this.toSeconds(time);\n    var quarter = 60 / bpm;\n    var quarters = seconds / quarter;\n    var tickNum = quarters * Tone.Transport.PPQ;\n    return Math.round(tickNum + plusNow);\n  };\n  Tone.prototype.toSamples = function (time) {\n    var seconds = this.toSeconds(time);\n    return Math.round(seconds * this.context.sampleRate);\n  };\n  Tone.prototype.toSeconds = function (time, now) {\n    now = this.defaultArg(now, this.now());\n    if (this.isNumber(time)) {\n      return time;\n    } else if (this.isString(time)) {\n      var plusTime = 0;\n      if (this.isNowRelative(time)) {\n        time = time.replace('+', '');\n        plusTime = now;\n      }\n      var betweenParens = time.match(/\\(([^)(]+)\\)/g);\n      if (betweenParens) {\n        for (var j = 0; j < betweenParens.length; j++) {\n          var symbol = betweenParens[j].replace(/[\\(\\)]/g, '');\n          var symbolVal = this.toSeconds(symbol);\n          time = time.replace(betweenParens[j], symbolVal);\n        }\n      }\n      if (time.indexOf('@') !== -1) {\n        var quantizationSplit = time.split('@');\n        if (!this.isUndef(Tone.Transport)) {\n          var toQuantize = quantizationSplit[0].trim();\n          if (toQuantize === '') {\n            toQuantize = undefined;\n          }\n          if (plusTime > 0) {\n            toQuantize = '+' + toQuantize;\n            plusTime = 0;\n          }\n          var subdivision = quantizationSplit[1].trim();\n          time = Tone.Transport.quantize(toQuantize, subdivision);\n        } else {\n          throw new Error('quantization requires Tone.Transport');\n        }\n      } else {\n        var components = time.split(/[\\(\\)\\-\\+\\/\\*]/);\n        if (components.length > 1) {\n          var originalTime = time;\n          for (var i = 0; i < components.length; i++) {\n            var symb = components[i].trim();\n            if (symb !== '') {\n              var val = this.toSeconds(symb);\n              time = time.replace(symb, val);\n            }\n          }\n          try {\n            time = eval(time);\n          } catch (e) {\n            throw new EvalError('cannot evaluate Time: ' + originalTime);\n          }\n        } else if (this.isNotation(time)) {\n          time = this.notationToSeconds(time);\n        } else if (this.isTransportTime(time)) {\n          time = this.transportTimeToSeconds(time);\n        } else if (this.isFrequency(time)) {\n          time = this.frequencyToSeconds(time);\n        } else if (this.isTicks(time)) {\n          time = this.ticksToSeconds(time);\n        } else {\n          time = parseFloat(time);\n        }\n      }\n      return time + plusTime;\n    } else {\n      return now;\n    }\n  };\n  Tone.prototype.toNotation = function (time, bpm, timeSignature) {\n    var testNotations = [\n      '1m',\n      '2n',\n      '4n',\n      '8n',\n      '16n',\n      '32n',\n      '64n',\n      '128n'\n    ];\n    var retNotation = toNotationHelper.call(this, time, bpm, timeSignature, testNotations);\n    var testTripletNotations = [\n      '1m',\n      '2n',\n      '2t',\n      '4n',\n      '4t',\n      '8n',\n      '8t',\n      '16n',\n      '16t',\n      '32n',\n      '32t',\n      '64n',\n      '64t',\n      '128n'\n    ];\n    var retTripletNotation = toNotationHelper.call(this, time, bpm, timeSignature, testTripletNotations);\n    if (retTripletNotation.split('+').length < retNotation.split('+').length) {\n      return retTripletNotation;\n    } else {\n      return retNotation;\n    }\n  };\n  function toNotationHelper(time, bpm, timeSignature, testNotations) {\n    var seconds = this.toSeconds(time);\n    var threshold = this.notationToSeconds(testNotations[testNotations.length - 1], bpm, timeSignature);\n    var retNotation = '';\n    for (var i = 0; i < testNotations.length; i++) {\n      var notationTime = this.notationToSeconds(testNotations[i], bpm, timeSignature);\n      var multiple = seconds / notationTime;\n      var floatingPointError = 0.000001;\n      if (1 - multiple % 1 < floatingPointError) {\n        multiple += floatingPointError;\n      }\n      multiple = Math.floor(multiple);\n      if (multiple > 0) {\n        if (multiple === 1) {\n          retNotation += testNotations[i];\n        } else {\n          retNotation += multiple.toString() + '*' + testNotations[i];\n        }\n        seconds -= multiple * notationTime;\n        if (seconds < threshold) {\n          break;\n        } else {\n          retNotation += ' + ';\n        }\n      }\n    }\n    if (retNotation === '') {\n      retNotation = '0';\n    }\n    return retNotation;\n  }\n  Tone.prototype.fromUnits = function (val, units) {\n    if (this.convert || this.isUndef(this.convert)) {\n      switch (units) {\n      case Tone.Type.Time:\n        return this.toSeconds(val);\n      case Tone.Type.Frequency:\n        return this.toFrequency(val);\n      case Tone.Type.Decibels:\n        return this.dbToGain(val);\n      case Tone.Type.NormalRange:\n        return Math.min(Math.max(val, 0), 1);\n      case Tone.Type.AudioRange:\n        return Math.min(Math.max(val, -1), 1);\n      case Tone.Type.Positive:\n        return Math.max(val, 0);\n      default:\n        return val;\n      }\n    } else {\n      return val;\n    }\n  };\n  Tone.prototype.toUnits = function (val, units) {\n    if (this.convert || this.isUndef(this.convert)) {\n      switch (units) {\n      case Tone.Type.Decibels:\n        return this.gainToDb(val);\n      default:\n        return val;\n      }\n    } else {\n      return val;\n    }\n  };\n  var noteToScaleIndex = {\n    'cbb': -2,\n    'cb': -1,\n    'c': 0,\n    'c#': 1,\n    'cx': 2,\n    'dbb': 0,\n    'db': 1,\n    'd': 2,\n    'd#': 3,\n    'dx': 4,\n    'ebb': 2,\n    'eb': 3,\n    'e': 4,\n    'e#': 5,\n    'ex': 6,\n    'fbb': 3,\n    'fb': 4,\n    'f': 5,\n    'f#': 6,\n    'fx': 7,\n    'gbb': 5,\n    'gb': 6,\n    'g': 7,\n    'g#': 8,\n    'gx': 9,\n    'abb': 7,\n    'ab': 8,\n    'a': 9,\n    'a#': 10,\n    'ax': 11,\n    'bbb': 9,\n    'bb': 10,\n    'b': 11,\n    'b#': 12,\n    'bx': 13\n  };\n  var scaleIndexToNote = [\n    'C',\n    'C#',\n    'D',\n    'D#',\n    'E',\n    'F',\n    'F#',\n    'G',\n    'G#',\n    'A',\n    'A#',\n    'B'\n  ];\n  Tone.A4 = 440;\n  Tone.prototype.noteToFrequency = function (note) {\n    var parts = note.split(/(-?\\d+)/);\n    if (parts.length === 3) {\n      var index = noteToScaleIndex[parts[0].toLowerCase()];\n      var octave = parts[1];\n      var noteNumber = index + (parseInt(octave, 10) + 1) * 12;\n      return this.midiToFrequency(noteNumber);\n    } else {\n      return 0;\n    }\n  };\n  Tone.prototype.frequencyToNote = function (freq) {\n    var log = Math.log(freq / Tone.A4) / Math.LN2;\n    var noteNumber = Math.round(12 * log) + 57;\n    var octave = Math.floor(noteNumber / 12);\n    if (octave < 0) {\n      noteNumber += -12 * octave;\n    }\n    var noteName = scaleIndexToNote[noteNumber % 12];\n    return noteName + octave.toString();\n  };\n  Tone.prototype.intervalToFrequencyRatio = function (interval) {\n    return Math.pow(2, interval / 12);\n  };\n  Tone.prototype.midiToNote = function (midiNumber) {\n    var octave = Math.floor(midiNumber / 12) - 1;\n    var note = midiNumber % 12;\n    return scaleIndexToNote[note] + octave;\n  };\n  Tone.prototype.noteToMidi = function (note) {\n    var parts = note.split(/(\\d+)/);\n    if (parts.length === 3) {\n      var index = noteToScaleIndex[parts[0].toLowerCase()];\n      var octave = parts[1];\n      return index + (parseInt(octave, 10) + 1) * 12;\n    } else {\n      return 0;\n    }\n  };\n  Tone.prototype.midiToFrequency = function (midi) {\n    return Tone.A4 * Math.pow(2, (midi - 69) / 12);\n  };\n  return Tone;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Param;\nTone_core_Param = function (Tone) {\n  'use strict';\n  Tone.Param = function () {\n    var options = this.optionsObject(arguments, [\n      'param',\n      'units',\n      'convert'\n    ], Tone.Param.defaults);\n    this._param = this.input = options.param;\n    this.units = options.units;\n    this.convert = options.convert;\n    this.overridden = false;\n    if (!this.isUndef(options.value)) {\n      this.value = options.value;\n    }\n  };\n  Tone.extend(Tone.Param);\n  Tone.Param.defaults = {\n    'units': Tone.Type.Default,\n    'convert': true,\n    'param': undefined\n  };\n  Object.defineProperty(Tone.Param.prototype, 'value', {\n    get: function () {\n      return this._toUnits(this._param.value);\n    },\n    set: function (value) {\n      var convertedVal = this._fromUnits(value);\n      this._param.value = convertedVal;\n    }\n  });\n  Tone.Param.prototype._fromUnits = function (val) {\n    if (this.convert || this.isUndef(this.convert)) {\n      switch (this.units) {\n      case Tone.Type.Time:\n        return this.toSeconds(val);\n      case Tone.Type.Frequency:\n        return this.toFrequency(val);\n      case Tone.Type.Decibels:\n        return this.dbToGain(val);\n      case Tone.Type.NormalRange:\n        return Math.min(Math.max(val, 0), 1);\n      case Tone.Type.AudioRange:\n        return Math.min(Math.max(val, -1), 1);\n      case Tone.Type.Positive:\n        return Math.max(val, 0);\n      default:\n        return val;\n      }\n    } else {\n      return val;\n    }\n  };\n  Tone.Param.prototype._toUnits = function (val) {\n    if (this.convert || this.isUndef(this.convert)) {\n      switch (this.units) {\n      case Tone.Type.Decibels:\n        return this.gainToDb(val);\n      default:\n        return val;\n      }\n    } else {\n      return val;\n    }\n  };\n  Tone.Param.prototype._minOutput = 0.00001;\n  Tone.Param.prototype.setValueAtTime = function (value, time) {\n    value = this._fromUnits(value);\n    this._param.setValueAtTime(value, this.toSeconds(time));\n    return this;\n  };\n  Tone.Param.prototype.setRampPoint = function (now) {\n    now = this.defaultArg(now, this.now());\n    var currentVal = this._param.value;\n    this._param.setValueAtTime(currentVal, now);\n    return this;\n  };\n  Tone.Param.prototype.linearRampToValueAtTime = function (value, endTime) {\n    value = this._fromUnits(value);\n    this._param.linearRampToValueAtTime(value, this.toSeconds(endTime));\n    return this;\n  };\n  Tone.Param.prototype.exponentialRampToValueAtTime = function (value, endTime) {\n    value = this._fromUnits(value);\n    value = Math.max(this._minOutput, value);\n    this._param.exponentialRampToValueAtTime(value, this.toSeconds(endTime));\n    return this;\n  };\n  Tone.Param.prototype.exponentialRampToValue = function (value, rampTime) {\n    var now = this.now();\n    var currentVal = this.value;\n    this.setValueAtTime(Math.max(currentVal, this._minOutput), now);\n    this.exponentialRampToValueAtTime(value, now + this.toSeconds(rampTime));\n    return this;\n  };\n  Tone.Param.prototype.linearRampToValue = function (value, rampTime) {\n    var now = this.now();\n    this.setRampPoint(now);\n    this.linearRampToValueAtTime(value, now + this.toSeconds(rampTime));\n    return this;\n  };\n  Tone.Param.prototype.setTargetAtTime = function (value, startTime, timeConstant) {\n    value = this._fromUnits(value);\n    value = Math.max(this._minOutput, value);\n    timeConstant = Math.max(this._minOutput, timeConstant);\n    this._param.setTargetAtTime(value, this.toSeconds(startTime), timeConstant);\n    return this;\n  };\n  Tone.Param.prototype.setValueCurveAtTime = function (values, startTime, duration) {\n    for (var i = 0; i < values.length; i++) {\n      values[i] = this._fromUnits(values[i]);\n    }\n    this._param.setValueCurveAtTime(values, this.toSeconds(startTime), this.toSeconds(duration));\n    return this;\n  };\n  Tone.Param.prototype.cancelScheduledValues = function (startTime) {\n    this._param.cancelScheduledValues(this.toSeconds(startTime));\n    return this;\n  };\n  Tone.Param.prototype.rampTo = function (value, rampTime) {\n    rampTime = this.defaultArg(rampTime, 0);\n    if (this.units === Tone.Type.Frequency || this.units === Tone.Type.BPM) {\n      this.exponentialRampToValue(value, rampTime);\n    } else {\n      this.linearRampToValue(value, rampTime);\n    }\n    return this;\n  };\n  Tone.Param.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._param = null;\n    return this;\n  };\n  return Tone.Param;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Gain;\nTone_core_Gain = function (Tone) {\n  'use strict';\n  Tone.Gain = function () {\n    var options = this.optionsObject(arguments, [\n      'gain',\n      'units'\n    ], Tone.Gain.defaults);\n    this.input = this.output = this._gainNode = this.context.createGain();\n    this.gain = new Tone.Param({\n      'param': this._gainNode.gain,\n      'units': options.units,\n      'value': options.gain,\n      'convert': options.convert\n    });\n    this._readOnly('gain');\n  };\n  Tone.extend(Tone.Gain);\n  Tone.Gain.defaults = {\n    'gain': 1,\n    'convert': true\n  };\n  Tone.Gain.prototype.dispose = function () {\n    Tone.Param.prototype.dispose.call(this);\n    this._gainNode.disconnect();\n    this._gainNode = null;\n    this._writable('gain');\n    this.gain.dispose();\n    this.gain = null;\n  };\n  return Tone.Gain;\n}(Tone_core_Tone, Tone_core_Param);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_Signal;\nTone_signal_Signal = function (Tone) {\n  'use strict';\n  Tone.Signal = function () {\n    var options = this.optionsObject(arguments, [\n      'value',\n      'units'\n    ], Tone.Signal.defaults);\n    this.output = this._gain = this.context.createGain();\n    options.param = this._gain.gain;\n    Tone.Param.call(this, options);\n    this.input = this._param = this._gain.gain;\n    Tone.Signal._constant.chain(this._gain);\n  };\n  Tone.extend(Tone.Signal, Tone.Param);\n  Tone.Signal.defaults = {\n    'value': 0,\n    'units': Tone.Type.Default,\n    'convert': true\n  };\n  Tone.Signal.prototype.connect = Tone.SignalBase.prototype.connect;\n  Tone.Signal.prototype.dispose = function () {\n    Tone.Param.prototype.dispose.call(this);\n    this._param = null;\n    this._gain.disconnect();\n    this._gain = null;\n    return this;\n  };\n  Tone.Signal._constant = null;\n  Tone._initAudioContext(function (audioContext) {\n    var buffer = audioContext.createBuffer(1, 128, audioContext.sampleRate);\n    var arr = buffer.getChannelData(0);\n    for (var i = 0; i < arr.length; i++) {\n      arr[i] = 1;\n    }\n    Tone.Signal._constant = audioContext.createBufferSource();\n    Tone.Signal._constant.channelCount = 1;\n    Tone.Signal._constant.channelCountMode = 'explicit';\n    Tone.Signal._constant.buffer = buffer;\n    Tone.Signal._constant.loop = true;\n    Tone.Signal._constant.start(0);\n    Tone.Signal._constant.noGC();\n  });\n  return Tone.Signal;\n}(Tone_core_Tone, Tone_signal_WaveShaper, Tone_core_Type, Tone_core_Param);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_Add;\nTone_signal_Add = function (Tone) {\n  'use strict';\n  Tone.Add = function (value) {\n    Tone.call(this, 2, 0);\n    this._sum = this.input[0] = this.input[1] = this.output = this.context.createGain();\n    this._param = this.input[1] = new Tone.Signal(value);\n    this._param.connect(this._sum);\n  };\n  Tone.extend(Tone.Add, Tone.Signal);\n  Tone.Add.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._sum.disconnect();\n    this._sum = null;\n    this._param.dispose();\n    this._param = null;\n    return this;\n  };\n  return Tone.Add;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_Multiply;\nTone_signal_Multiply = function (Tone) {\n  'use strict';\n  Tone.Multiply = function (value) {\n    Tone.call(this, 2, 0);\n    this._mult = this.input[0] = this.output = this.context.createGain();\n    this._param = this.input[1] = this.output.gain;\n    this._param.value = this.defaultArg(value, 0);\n  };\n  Tone.extend(Tone.Multiply, Tone.Signal);\n  Tone.Multiply.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._mult.disconnect();\n    this._mult = null;\n    this._param = null;\n    return this;\n  };\n  return Tone.Multiply;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_Scale;\nTone_signal_Scale = function (Tone) {\n  'use strict';\n  Tone.Scale = function (outputMin, outputMax) {\n    this._outputMin = this.defaultArg(outputMin, 0);\n    this._outputMax = this.defaultArg(outputMax, 1);\n    this._scale = this.input = new Tone.Multiply(1);\n    this._add = this.output = new Tone.Add(0);\n    this._scale.connect(this._add);\n    this._setRange();\n  };\n  Tone.extend(Tone.Scale, Tone.SignalBase);\n  Object.defineProperty(Tone.Scale.prototype, 'min', {\n    get: function () {\n      return this._outputMin;\n    },\n    set: function (min) {\n      this._outputMin = min;\n      this._setRange();\n    }\n  });\n  Object.defineProperty(Tone.Scale.prototype, 'max', {\n    get: function () {\n      return this._outputMax;\n    },\n    set: function (max) {\n      this._outputMax = max;\n      this._setRange();\n    }\n  });\n  Tone.Scale.prototype._setRange = function () {\n    this._add.value = this._outputMin;\n    this._scale.value = this._outputMax - this._outputMin;\n  };\n  Tone.Scale.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._add.dispose();\n    this._add = null;\n    this._scale.dispose();\n    this._scale = null;\n    return this;\n  };\n  return Tone.Scale;\n}(Tone_core_Tone, Tone_signal_Add, Tone_signal_Multiply);\nvar signal;\nsignal = function () {\n  'use strict';\n  // Signal is built with the Tone.js signal by Yotam Mann\n  // https://github.com/TONEnoTONE/Tone.js/\n  var Signal = Tone_signal_Signal;\n  var Add = Tone_signal_Add;\n  var Mult = Tone_signal_Multiply;\n  var Scale = Tone_signal_Scale;\n  var Tone = Tone_core_Tone;\n  var p5sound = master;\n  Tone.setContext(p5sound.audiocontext);\n  /**\n   *  <p>p5.Signal is a constant audio-rate signal used by p5.Oscillator\n   *  and p5.Envelope for modulation math.</p>\n   *\n   *  <p>This is necessary because Web Audio is processed on a seprate clock.\n   *  For example, the p5 draw loop runs about 60 times per second. But\n   *  the audio clock must process samples 44100 times per second. If we\n   *  want to add a value to each of those samples, we can't do it in the\n   *  draw loop, but we can do it by adding a constant-rate audio signal.This class mostly functions behind the scenes in p5.sound, and returns\n   *  a Tone.Signal from the Tone.js library by Yotam Mann.\n   *  If you want to work directly with audio signals for modular\n   *  synthesis, check out\n   *  <a href=\"http://bit.ly/1oIoEng\" target=\"_'blank'\">tone.js.</a></p>\n   *\n   *  @class  p5.Signal\n   *  @constructor\n   *  @return {Tone.Signal} A Signal object from the Tone.js library\n   *  @example\n   *  <div><code>\n   *  function setup() {\n   *    carrier = new p5.Oscillator('sine');\n   *    carrier.amp(1); // set amplitude\n   *    carrier.freq(220); // set frequency\n   *    carrier.start(); // start oscillating\n   *    \n   *    modulator = new p5.Oscillator('sawtooth');\n   *    modulator.disconnect();\n   *    modulator.amp(1);\n   *    modulator.freq(4);\n   *    modulator.start();\n   *\n   *    // Modulator's default amplitude range is -1 to 1.\n   *    // Multiply it by -200, so the range is -200 to 200\n   *    // then add 220 so the range is 20 to 420\n   *    carrier.freq( modulator.mult(-200).add(220) );\n   *  }\n   *  </code></div>\n   */\n  p5.Signal = function (value) {\n    var s = new Signal(value);\n    // p5sound.soundArray.push(s);\n    return s;\n  };\n  /**\n   *  Fade to value, for smooth transitions\n   *\n   *  @method  fade\n   *  @param  {Number} value          Value to set this signal\n   *  @param  {[Number]} secondsFromNow Length of fade, in seconds from now\n   */\n  Signal.prototype.fade = Signal.prototype.linearRampToValueAtTime;\n  Mult.prototype.fade = Signal.prototype.fade;\n  Add.prototype.fade = Signal.prototype.fade;\n  Scale.prototype.fade = Signal.prototype.fade;\n  /**\n   *  Connect a p5.sound object or Web Audio node to this\n   *  p5.Signal so that its amplitude values can be scaled.\n   *  \n   *  @param {Object} input\n   */\n  Signal.prototype.setInput = function (_input) {\n    _input.connect(this);\n  };\n  Mult.prototype.setInput = Signal.prototype.setInput;\n  Add.prototype.setInput = Signal.prototype.setInput;\n  Scale.prototype.setInput = Signal.prototype.setInput;\n  // signals can add / mult / scale themselves\n  /**\n   *  Add a constant value to this audio signal,\n   *  and return the resulting audio signal. Does\n   *  not change the value of the original signal,\n   *  instead it returns a new p5.SignalAdd.\n   *  \n   *  @method  add\n   *  @param {Number} number\n   *  @return {p5.SignalAdd} object\n   */\n  Signal.prototype.add = function (num) {\n    var add = new Add(num);\n    // add.setInput(this);\n    this.connect(add);\n    return add;\n  };\n  Mult.prototype.add = Signal.prototype.add;\n  Add.prototype.add = Signal.prototype.add;\n  Scale.prototype.add = Signal.prototype.add;\n  /**\n   *  Multiply this signal by a constant value,\n   *  and return the resulting audio signal. Does\n   *  not change the value of the original signal,\n   *  instead it returns a new p5.SignalMult.\n   *  \n   *  @method  mult\n   *  @param {Number} number to multiply\n   *  @return {Tone.Multiply} object\n   */\n  Signal.prototype.mult = function (num) {\n    var mult = new Mult(num);\n    // mult.setInput(this);\n    this.connect(mult);\n    return mult;\n  };\n  Mult.prototype.mult = Signal.prototype.mult;\n  Add.prototype.mult = Signal.prototype.mult;\n  Scale.prototype.mult = Signal.prototype.mult;\n  /**\n   *  Scale this signal value to a given range,\n   *  and return the result as an audio signal. Does\n   *  not change the value of the original signal,\n   *  instead it returns a new p5.SignalScale.\n   *  \n   *  @method  scale\n   *  @param {Number} number to multiply\n   *  @param  {Number} inMin  input range minumum\n   *  @param  {Number} inMax  input range maximum\n   *  @param  {Number} outMin input range minumum\n   *  @param  {Number} outMax input range maximum\n   *  @return {p5.SignalScale} object\n   */\n  Signal.prototype.scale = function (inMin, inMax, outMin, outMax) {\n    var mapOutMin, mapOutMax;\n    if (arguments.length === 4) {\n      mapOutMin = p5.prototype.map(outMin, inMin, inMax, 0, 1) - 0.5;\n      mapOutMax = p5.prototype.map(outMax, inMin, inMax, 0, 1) - 0.5;\n    } else {\n      mapOutMin = arguments[0];\n      mapOutMax = arguments[1];\n    }\n    var scale = new Scale(mapOutMin, mapOutMax);\n    this.connect(scale);\n    return scale;\n  };\n  Mult.prototype.scale = Signal.prototype.scale;\n  Add.prototype.scale = Signal.prototype.scale;\n  Scale.prototype.scale = Signal.prototype.scale;\n}(Tone_signal_Signal, Tone_signal_Add, Tone_signal_Multiply, Tone_signal_Scale, Tone_core_Tone, master);\nvar oscillator;\noscillator = function () {\n  'use strict';\n  var p5sound = master;\n  var Signal = Tone_signal_Signal;\n  var Add = Tone_signal_Add;\n  var Mult = Tone_signal_Multiply;\n  var Scale = Tone_signal_Scale;\n  /**\n   *  <p>Creates a signal that oscillates between -1.0 and 1.0.\n   *  By default, the oscillation takes the form of a sinusoidal\n   *  shape ('sine'). Additional types include 'triangle',\n   *  'sawtooth' and 'square'. The frequency defaults to\n   *  440 oscillations per second (440Hz, equal to the pitch of an\n   *  'A' note).</p> \n   *\n   *  <p>Set the type of oscillation with setType(), or by creating a\n   *  specific oscillator.</p> For example:\n   *  <code>new p5.SinOsc(freq)</code>\n   *  <code>new p5.TriOsc(freq)</code>\n   *  <code>new p5.SqrOsc(freq)</code>\n   *  <code>new p5.SawOsc(freq)</code>.\n   *  <p></p>\n   *  \n   *  @class p5.Oscillator\n   *  @constructor\n   *  @param {Number} [freq] frequency defaults to 440Hz\n   *  @param {String} [type] type of oscillator. Options:\n   *                         'sine' (default), 'triangle',\n   *                         'sawtooth', 'square'\n   *  @return {Object}    Oscillator object\n   *  @example\n   *  <div><code>\n   *  var osc;\n   *  var playing = false;\n   *  \n   *  function setup() {\n   *    backgroundColor = color(255,0,255);\n   *    textAlign(CENTER);\n   *    \n   *    osc = new p5.Oscillator();\n   *    osc.setType('sine');\n   *    osc.freq(240);\n   *    osc.amp(0);\n   *    osc.start();\n   *  }\n   *\n   *  function draw() {\n   *    background(backgroundColor)\n   *    text('click to play', width/2, height/2);\n   *  }\n   *\n   *  function mouseClicked() {\n   *    if (mouseX > 0 && mouseX < width && mouseY < height && mouseY > 0) {\n   *      if (!playing) {\n   *        // ramp amplitude to 0.5 over 0.1 seconds\n   *        osc.amp(0.5, 0.05);\n   *        playing = true;\n   *        backgroundColor = color(0,255,255);\n   *      } else {\n   *        // ramp amplitude to 0 over 0.5 seconds\n   *        osc.amp(0, 0.5);\n   *        playing = false;\n   *        backgroundColor = color(255,0,255);\n   *      }\n   *    }\n   *  }\n   *  </code> </div>\n   */\n  p5.Oscillator = function (freq, type) {\n    if (typeof freq === 'string') {\n      var f = type;\n      type = freq;\n      freq = f;\n    }\n    if (typeof type === 'number') {\n      var f = type;\n      type = freq;\n      freq = f;\n    }\n    this.started = false;\n    // components\n    this.phaseAmount = undefined;\n    this.oscillator = p5sound.audiocontext.createOscillator();\n    this.f = freq || 440;\n    // frequency\n    this.oscillator.frequency.setValueAtTime(this.f, p5sound.audiocontext.currentTime);\n    this.oscillator.type = type || 'sine';\n    var o = this.oscillator;\n    // connections\n    this.input = p5sound.audiocontext.createGain();\n    this.output = p5sound.audiocontext.createGain();\n    this._freqMods = [];\n    // modulators connected to this oscillator's frequency\n    // set default output gain to 0.5\n    this.output.gain.value = 0.5;\n    this.output.gain.setValueAtTime(0.5, p5sound.audiocontext.currentTime);\n    this.oscillator.connect(this.output);\n    // stereo panning\n    this.panPosition = 0;\n    this.connection = p5sound.input;\n    // connect to p5sound by default\n    this.panner = new p5.Panner(this.output, this.connection, 1);\n    //array of math operation signal chaining\n    this.mathOps = [this.output];\n    // add to the soundArray so we can dispose of the osc later\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Start an oscillator. Accepts an optional parameter to\n   *  determine how long (in seconds from now) until the\n   *  oscillator starts.\n   *\n   *  @method  start\n   *  @param  {Number} [time] startTime in seconds from now.\n   *  @param  {Number} [frequency] frequency in Hz.\n   */\n  p5.Oscillator.prototype.start = function (time, f) {\n    if (this.started) {\n      var now = p5sound.audiocontext.currentTime;\n      this.stop(now);\n    }\n    if (!this.started) {\n      var freq = f || this.f;\n      var type = this.oscillator.type;\n      // var detune = this.oscillator.frequency.value;\n      this.oscillator = p5sound.audiocontext.createOscillator();\n      this.oscillator.frequency.exponentialRampToValueAtTime(Math.abs(freq), p5sound.audiocontext.currentTime);\n      this.oscillator.type = type;\n      // this.oscillator.detune.value = detune;\n      this.oscillator.connect(this.output);\n      time = time || 0;\n      this.oscillator.start(time + p5sound.audiocontext.currentTime);\n      this.freqNode = this.oscillator.frequency;\n      // if other oscillators are already connected to this osc's freq\n      for (var i in this._freqMods) {\n        if (typeof this._freqMods[i].connect !== 'undefined') {\n          this._freqMods[i].connect(this.oscillator.frequency);\n        }\n      }\n      this.started = true;\n    }\n  };\n  /**\n   *  Stop an oscillator. Accepts an optional parameter\n   *  to determine how long (in seconds from now) until the\n   *  oscillator stops.\n   *\n   *  @method  stop\n   *  @param  {Number} secondsFromNow Time, in seconds from now.\n   */\n  p5.Oscillator.prototype.stop = function (time) {\n    if (this.started) {\n      var t = time || 0;\n      var now = p5sound.audiocontext.currentTime;\n      this.oscillator.stop(t + now);\n      this.started = false;\n    }\n  };\n  /**\n   *  Set the amplitude between 0 and 1.0. Or, pass in an object\n   *  such as an oscillator to modulate amplitude with an audio signal.\n   *\n   *  @method  amp\n   *  @param  {Number|Object} vol between 0 and 1.0\n   *                              or a modulating signal/oscillator\n   *  @param {Number} [rampTime] create a fade that lasts rampTime \n   *  @param {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   *  @return  {AudioParam} gain  If no value is provided,\n   *                              returns the Web Audio API\n   *                              AudioParam that controls\n   *                              this oscillator's\n   *                              gain/amplitude/volume)\n   */\n  p5.Oscillator.prototype.amp = function (vol, rampTime, tFromNow) {\n    var self = this;\n    if (typeof vol === 'number') {\n      var rampTime = rampTime || 0;\n      var tFromNow = tFromNow || 0;\n      var now = p5sound.audiocontext.currentTime;\n      var currentVol = this.output.gain.value;\n      this.output.gain.cancelScheduledValues(now);\n      this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n      this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n    } else if (vol) {\n      vol.connect(self.output.gain);\n    } else {\n      // return the Gain Node\n      return this.output.gain;\n    }\n  };\n  // these are now the same thing\n  p5.Oscillator.prototype.fade = p5.Oscillator.prototype.amp;\n  p5.Oscillator.prototype.getAmp = function () {\n    return this.output.gain.value;\n  };\n  /**\n   *  Set frequency of an oscillator to a value. Or, pass in an object\n   *  such as an oscillator to modulate the frequency with an audio signal.\n   *\n   *  @method  freq\n   *  @param  {Number|Object} Frequency Frequency in Hz\n   *                                        or modulating signal/oscillator\n   *  @param  {Number} [rampTime] Ramp time (in seconds)\n   *  @param  {Number} [timeFromNow] Schedule this event to happen\n   *                                   at x seconds from now\n   *  @return  {AudioParam} Frequency If no value is provided,\n   *                                  returns the Web Audio API\n   *                                  AudioParam that controls\n   *                                  this oscillator's frequency\n   *  @example\n   *  <div><code>\n   *  var osc = new p5.Oscillator(300);\n   *  osc.start();\n   *  osc.freq(40, 10);\n   *  </code></div>\n   */\n  p5.Oscillator.prototype.freq = function (val, rampTime, tFromNow) {\n    if (typeof val === 'number' && !isNaN(val)) {\n      this.f = val;\n      var now = p5sound.audiocontext.currentTime;\n      var rampTime = rampTime || 0;\n      var tFromNow = tFromNow || 0;\n      // var currentFreq = this.oscillator.frequency.value;\n      // this.oscillator.frequency.cancelScheduledValues(now);\n      if (rampTime == 0) {\n        this.oscillator.frequency.cancelScheduledValues(now);\n        this.oscillator.frequency.setValueAtTime(val, tFromNow + now);\n      } else {\n        if (val > 0) {\n          this.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n        } else {\n          this.oscillator.frequency.linearRampToValueAtTime(val, tFromNow + rampTime + now);\n        }\n      }\n      // reset phase if oscillator has a phase\n      if (this.phaseAmount) {\n        this.phase(this.phaseAmount);\n      }\n    } else if (val) {\n      if (val.output) {\n        val = val.output;\n      }\n      val.connect(this.oscillator.frequency);\n      // keep track of what is modulating this param\n      // so it can be re-connected if \n      this._freqMods.push(val);\n    } else {\n      // return the Frequency Node\n      return this.oscillator.frequency;\n    }\n  };\n  p5.Oscillator.prototype.getFreq = function () {\n    return this.oscillator.frequency.value;\n  };\n  /**\n   *  Set type to 'sine', 'triangle', 'sawtooth' or 'square'.\n   *\n   *  @method  setType\n   *  @param {String} type 'sine', 'triangle', 'sawtooth' or 'square'.\n   */\n  p5.Oscillator.prototype.setType = function (type) {\n    this.oscillator.type = type;\n  };\n  p5.Oscillator.prototype.getType = function () {\n    return this.oscillator.type;\n  };\n  /**\n   *  Connect to a p5.sound / Web Audio object.\n   *\n   *  @method  connect\n   *  @param  {Object} unit A p5.sound or Web Audio object\n   */\n  p5.Oscillator.prototype.connect = function (unit) {\n    if (!unit) {\n      this.panner.connect(p5sound.input);\n    } else if (unit.hasOwnProperty('input')) {\n      this.panner.connect(unit.input);\n      this.connection = unit.input;\n    } else {\n      this.panner.connect(unit);\n      this.connection = unit;\n    }\n  };\n  /**\n   *  Disconnect all outputs\n   *\n   *  @method  disconnect\n   */\n  p5.Oscillator.prototype.disconnect = function (unit) {\n    this.output.disconnect();\n    this.panner.disconnect();\n    this.output.connect(this.panner);\n    this.oscMods = [];\n  };\n  /**\n   *  Pan between Left (-1) and Right (1)\n   *\n   *  @method  pan\n   *  @param  {Number} panning Number between -1 and 1\n   *  @param  {Number} timeFromNow schedule this event to happen\n   *                                seconds from now\n   */\n  p5.Oscillator.prototype.pan = function (pval, tFromNow) {\n    this.panPosition = pval;\n    this.panner.pan(pval, tFromNow);\n  };\n  p5.Oscillator.prototype.getPan = function () {\n    return this.panPosition;\n  };\n  // get rid of the oscillator\n  p5.Oscillator.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    if (this.oscillator) {\n      var now = p5sound.audiocontext.currentTime;\n      this.stop(now);\n      this.disconnect();\n      this.oscillator.disconnect();\n      this.panner = null;\n      this.oscillator = null;\n    }\n    // if it is a Pulse\n    if (this.osc2) {\n      this.osc2.dispose();\n    }\n  };\n  /**\n   *  Set the phase of an oscillator between 0.0 and 1.0.\n   *  In this implementation, phase is a delay time\n   *  based on the oscillator's current frequency.\n   *  \n   *  @method  phase\n   *  @param  {Number} phase float between 0.0 and 1.0\n   */\n  p5.Oscillator.prototype.phase = function (p) {\n    var delayAmt = p5.prototype.map(p, 0, 1, 0, 1 / this.f);\n    var now = p5sound.audiocontext.currentTime;\n    this.phaseAmount = p;\n    if (!this.dNode) {\n      // create a delay node\n      this.dNode = p5sound.audiocontext.createDelay();\n      // put the delay node in between output and panner\n      this.oscillator.disconnect();\n      this.oscillator.connect(this.dNode);\n      this.dNode.connect(this.output);\n    }\n    // set delay time to match phase:\n    this.dNode.delayTime.setValueAtTime(delayAmt, now);\n  };\n  // ========================== //\n  // SIGNAL MATH FOR MODULATION //\n  // ========================== //\n  // return sigChain(this, scale, thisChain, nextChain, Scale);\n  var sigChain = function (o, mathObj, thisChain, nextChain, type) {\n    var chainSource = o.oscillator;\n    // if this type of math already exists in the chain, replace it\n    for (var i in o.mathOps) {\n      if (o.mathOps[i] instanceof type) {\n        chainSource.disconnect();\n        o.mathOps[i].dispose();\n        thisChain = i;\n        // assume nextChain is output gain node unless...\n        if (thisChain < o.mathOps.length - 2) {\n          nextChain = o.mathOps[i + 1];\n        }\n      }\n    }\n    if (thisChain == o.mathOps.length - 1) {\n      o.mathOps.push(nextChain);\n    }\n    // assume source is the oscillator unless i > 0\n    if (i > 0) {\n      chainSource = o.mathOps[i - 1];\n    }\n    chainSource.disconnect();\n    chainSource.connect(mathObj);\n    mathObj.connect(nextChain);\n    o.mathOps[thisChain] = mathObj;\n    return o;\n  };\n  /**\n   *  Add a value to the p5.Oscillator's output amplitude,\n   *  and return the oscillator. Calling this method again\n   *  will override the initial add() with a new value.\n   *  \n   *  @method  add\n   *  @param {Number} number Constant number to add\n   *  @return {p5.Oscillator} Oscillator Returns this oscillator\n   *                                     with scaled output\n   *  \n   */\n  p5.Oscillator.prototype.add = function (num) {\n    var add = new Add(num);\n    var thisChain = this.mathOps.length - 1;\n    var nextChain = this.output;\n    return sigChain(this, add, thisChain, nextChain, Add);\n  };\n  /**\n   *  Multiply the p5.Oscillator's output amplitude\n   *  by a fixed value (i.e. turn it up!). Calling this method\n   *  again will override the initial mult() with a new value.\n   *  \n   *  @method  mult\n   *  @param {Number} number Constant number to multiply\n   *  @return {p5.Oscillator} Oscillator Returns this oscillator\n   *                                     with multiplied output\n   */\n  p5.Oscillator.prototype.mult = function (num) {\n    var mult = new Mult(num);\n    var thisChain = this.mathOps.length - 1;\n    var nextChain = this.output;\n    return sigChain(this, mult, thisChain, nextChain, Mult);\n  };\n  /**\n   *  Scale this oscillator's amplitude values to a given\n   *  range, and return the oscillator. Calling this method\n   *  again will override the initial scale() with new values.\n   *  \n   *  @method  scale\n   *  @param  {Number} inMin  input range minumum\n   *  @param  {Number} inMax  input range maximum\n   *  @param  {Number} outMin input range minumum\n   *  @param  {Number} outMax input range maximum\n   *  @return {p5.Oscillator} Oscillator Returns this oscillator\n   *                                     with scaled output\n   */\n  p5.Oscillator.prototype.scale = function (inMin, inMax, outMin, outMax) {\n    var mapOutMin, mapOutMax;\n    if (arguments.length === 4) {\n      mapOutMin = p5.prototype.map(outMin, inMin, inMax, 0, 1) - 0.5;\n      mapOutMax = p5.prototype.map(outMax, inMin, inMax, 0, 1) - 0.5;\n    } else {\n      mapOutMin = arguments[0];\n      mapOutMax = arguments[1];\n    }\n    var scale = new Scale(mapOutMin, mapOutMax);\n    var thisChain = this.mathOps.length - 1;\n    var nextChain = this.output;\n    return sigChain(this, scale, thisChain, nextChain, Scale);\n  };\n  // ============================== //\n  // SinOsc, TriOsc, SqrOsc, SawOsc //\n  // ============================== //\n  /**\n   *  Constructor: <code>new p5.SinOsc()</code>.\n   *  This creates a Sine Wave Oscillator and is\n   *  equivalent to <code> new p5.Oscillator('sine')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('sine')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @method  p5.SinOsc\n   *  @param {[Number]} freq Set the frequency\n   */\n  p5.SinOsc = function (freq) {\n    p5.Oscillator.call(this, freq, 'sine');\n  };\n  p5.SinOsc.prototype = Object.create(p5.Oscillator.prototype);\n  /**\n   *  Constructor: <code>new p5.TriOsc()</code>.\n   *  This creates a Triangle Wave Oscillator and is\n   *  equivalent to <code>new p5.Oscillator('triangle')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('triangle')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @method  p5.TriOsc\n   *  @param {[Number]} freq Set the frequency\n   */\n  p5.TriOsc = function (freq) {\n    p5.Oscillator.call(this, freq, 'triangle');\n  };\n  p5.TriOsc.prototype = Object.create(p5.Oscillator.prototype);\n  /**\n   *  Constructor: <code>new p5.SawOsc()</code>.\n   *  This creates a SawTooth Wave Oscillator and is\n   *  equivalent to <code> new p5.Oscillator('sawtooth')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('sawtooth')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @method  p5.SawOsc\n   *  @param {[Number]} freq Set the frequency\n   */\n  p5.SawOsc = function (freq) {\n    p5.Oscillator.call(this, freq, 'sawtooth');\n  };\n  p5.SawOsc.prototype = Object.create(p5.Oscillator.prototype);\n  /**\n   *  Constructor: <code>new p5.SqrOsc()</code>.\n   *  This creates a Square Wave Oscillator and is\n   *  equivalent to <code> new p5.Oscillator('square')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('square')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @method  p5.SqrOsc\n   *  @param {[Number]} freq Set the frequency\n   */\n  p5.SqrOsc = function (freq) {\n    p5.Oscillator.call(this, freq, 'square');\n  };\n  p5.SqrOsc.prototype = Object.create(p5.Oscillator.prototype);\n}(master, Tone_signal_Signal, Tone_signal_Add, Tone_signal_Multiply, Tone_signal_Scale);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Timeline;\nTone_core_Timeline = function (Tone) {\n  'use strict';\n  Tone.Timeline = function () {\n    var options = this.optionsObject(arguments, ['memory'], Tone.Timeline.defaults);\n    this._timeline = [];\n    this._toRemove = [];\n    this._iterating = false;\n    this.memory = options.memory;\n  };\n  Tone.extend(Tone.Timeline);\n  Tone.Timeline.defaults = { 'memory': Infinity };\n  Object.defineProperty(Tone.Timeline.prototype, 'length', {\n    get: function () {\n      return this._timeline.length;\n    }\n  });\n  Tone.Timeline.prototype.addEvent = function (event) {\n    if (this.isUndef(event.time)) {\n      throw new Error('events must have a time attribute');\n    }\n    event.time = this.toSeconds(event.time);\n    if (this._timeline.length) {\n      var index = this._search(event.time);\n      this._timeline.splice(index + 1, 0, event);\n    } else {\n      this._timeline.push(event);\n    }\n    if (this.length > this.memory) {\n      var diff = this.length - this.memory;\n      this._timeline.splice(0, diff);\n    }\n    return this;\n  };\n  Tone.Timeline.prototype.removeEvent = function (event) {\n    if (this._iterating) {\n      this._toRemove.push(event);\n    } else {\n      var index = this._timeline.indexOf(event);\n      if (index !== -1) {\n        this._timeline.splice(index, 1);\n      }\n    }\n    return this;\n  };\n  Tone.Timeline.prototype.getEvent = function (time) {\n    time = this.toSeconds(time);\n    var index = this._search(time);\n    if (index !== -1) {\n      return this._timeline[index];\n    } else {\n      return null;\n    }\n  };\n  Tone.Timeline.prototype.getEventAfter = function (time) {\n    time = this.toSeconds(time);\n    var index = this._search(time);\n    if (index + 1 < this._timeline.length) {\n      return this._timeline[index + 1];\n    } else {\n      return null;\n    }\n  };\n  Tone.Timeline.prototype.getEventBefore = function (time) {\n    time = this.toSeconds(time);\n    var index = this._search(time);\n    if (index - 1 >= 0) {\n      return this._timeline[index - 1];\n    } else {\n      return null;\n    }\n  };\n  Tone.Timeline.prototype.cancel = function (after) {\n    if (this._timeline.length > 1) {\n      after = this.toSeconds(after);\n      var index = this._search(after);\n      if (index >= 0) {\n        this._timeline = this._timeline.slice(0, index);\n      } else {\n        this._timeline = [];\n      }\n    } else if (this._timeline.length === 1) {\n      if (this._timeline[0].time >= after) {\n        this._timeline = [];\n      }\n    }\n    return this;\n  };\n  Tone.Timeline.prototype.cancelBefore = function (time) {\n    if (this._timeline.length) {\n      time = this.toSeconds(time);\n      var index = this._search(time);\n      if (index >= 0) {\n        this._timeline = this._timeline.slice(index + 1);\n      }\n    }\n    return this;\n  };\n  Tone.Timeline.prototype._search = function (time) {\n    var beginning = 0;\n    var len = this._timeline.length;\n    var end = len;\n    while (beginning <= end=\"\" &&=\"\" beginning=\"\" <=\"\" len)=\"\" {=\"\" var=\"\" midpoint=\"Math.floor(beginning\" +=\"\" (end=\"\" -=\"\" beginning)=\"\" 2);=\"\" event=\"this._timeline[midPoint];\" if=\"\" (event.time=\"==\" time)=\"\" for=\"\" (var=\"\" i=\"midPoint;\" this._timeline.length;=\"\" i++)=\"\" testevent=\"this._timeline[i];\" (testevent.time=\"==\" }=\"\" return=\"\" midpoint;=\"\" else=\"\"> time) {\n        end = midPoint - 1;\n      } else if (event.time < time) {\n        beginning = midPoint + 1;\n      }\n    }\n    return beginning - 1;\n  };\n  Tone.Timeline.prototype._iterate = function (callback, lowerBound, upperBound) {\n    this._iterating = true;\n    lowerBound = this.defaultArg(lowerBound, 0);\n    upperBound = this.defaultArg(upperBound, this._timeline.length - 1);\n    for (var i = lowerBound; i <= upperbound;=\"\" i++)=\"\" {=\"\" callback(this._timeline[i]);=\"\" }=\"\" this._iterating=\"false;\" if=\"\" (this._toremove.length=\"\"> 0) {\n      for (var j = 0; j < this._toRemove.length; j++) {\n        var index = this._timeline.indexOf(this._toRemove[j]);\n        if (index !== -1) {\n          this._timeline.splice(index, 1);\n        }\n      }\n      this._toRemove = [];\n    }\n  };\n  Tone.Timeline.prototype.forEach = function (callback) {\n    this._iterate(callback);\n    return this;\n  };\n  Tone.Timeline.prototype.forEachBefore = function (time, callback) {\n    time = this.toSeconds(time);\n    var upperBound = this._search(time);\n    if (upperBound !== -1) {\n      this._iterate(callback, 0, upperBound);\n    }\n    return this;\n  };\n  Tone.Timeline.prototype.forEachAfter = function (time, callback) {\n    time = this.toSeconds(time);\n    var lowerBound = this._search(time);\n    this._iterate(callback, lowerBound + 1);\n    return this;\n  };\n  Tone.Timeline.prototype.forEachFrom = function (time, callback) {\n    time = this.toSeconds(time);\n    var lowerBound = this._search(time);\n    while (lowerBound >= 0 && this._timeline[lowerBound].time >= time) {\n      lowerBound--;\n    }\n    this._iterate(callback, lowerBound + 1);\n    return this;\n  };\n  Tone.Timeline.prototype.forEachAtTime = function (time, callback) {\n    time = this.toSeconds(time);\n    var upperBound = this._search(time);\n    if (upperBound !== -1) {\n      this._iterate(function (event) {\n        if (event.time === time) {\n          callback(event);\n        }\n      }, 0, upperBound);\n    }\n    return this;\n  };\n  Tone.Timeline.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._timeline = null;\n    this._toRemove = null;\n  };\n  return Tone.Timeline;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_TimelineSignal;\nTone_signal_TimelineSignal = function (Tone) {\n  'use strict';\n  Tone.TimelineSignal = function () {\n    var options = this.optionsObject(arguments, [\n      'value',\n      'units'\n    ], Tone.Signal.defaults);\n    Tone.Signal.apply(this, options);\n    options.param = this._param;\n    Tone.Param.call(this, options);\n    this._events = new Tone.Timeline(10);\n    this._initial = this._fromUnits(this._param.value);\n  };\n  Tone.extend(Tone.TimelineSignal, Tone.Param);\n  Tone.TimelineSignal.Type = {\n    Linear: 'linear',\n    Exponential: 'exponential',\n    Target: 'target',\n    Set: 'set'\n  };\n  Object.defineProperty(Tone.TimelineSignal.prototype, 'value', {\n    get: function () {\n      return this._toUnits(this._param.value);\n    },\n    set: function (value) {\n      var convertedVal = this._fromUnits(value);\n      this._initial = convertedVal;\n      this._param.value = convertedVal;\n    }\n  });\n  Tone.TimelineSignal.prototype.setValueAtTime = function (value, startTime) {\n    value = this._fromUnits(value);\n    startTime = this.toSeconds(startTime);\n    this._events.addEvent({\n      'type': Tone.TimelineSignal.Type.Set,\n      'value': value,\n      'time': startTime\n    });\n    this._param.setValueAtTime(value, startTime);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.linearRampToValueAtTime = function (value, endTime) {\n    value = this._fromUnits(value);\n    endTime = this.toSeconds(endTime);\n    this._events.addEvent({\n      'type': Tone.TimelineSignal.Type.Linear,\n      'value': value,\n      'time': endTime\n    });\n    this._param.linearRampToValueAtTime(value, endTime);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.exponentialRampToValueAtTime = function (value, endTime) {\n    value = this._fromUnits(value);\n    value = Math.max(this._minOutput, value);\n    endTime = this.toSeconds(endTime);\n    this._events.addEvent({\n      'type': Tone.TimelineSignal.Type.Exponential,\n      'value': value,\n      'time': endTime\n    });\n    this._param.exponentialRampToValueAtTime(value, endTime);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.setTargetAtTime = function (value, startTime, timeConstant) {\n    value = this._fromUnits(value);\n    value = Math.max(this._minOutput, value);\n    timeConstant = Math.max(this._minOutput, timeConstant);\n    startTime = this.toSeconds(startTime);\n    this._events.addEvent({\n      'type': Tone.TimelineSignal.Type.Target,\n      'value': value,\n      'time': startTime,\n      'constant': timeConstant\n    });\n    this._param.setTargetAtTime(value, startTime, timeConstant);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.cancelScheduledValues = function (after) {\n    this._events.cancel(after);\n    this._param.cancelScheduledValues(this.toSeconds(after));\n    return this;\n  };\n  Tone.TimelineSignal.prototype.setRampPoint = function (time) {\n    time = this.toSeconds(time);\n    var val = this.getValueAtTime(time);\n    var after = this._searchAfter(time);\n    if (after) {\n      this.cancelScheduledValues(time);\n      if (after.type === Tone.TimelineSignal.Type.Linear) {\n        this.linearRampToValueAtTime(val, time);\n      } else if (after.type === Tone.TimelineSignal.Type.Exponential) {\n        this.exponentialRampToValueAtTime(val, time);\n      }\n    }\n    this.setValueAtTime(val, time);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.linearRampToValueBetween = function (value, start, finish) {\n    this.setRampPoint(start);\n    this.linearRampToValueAtTime(value, finish);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.exponentialRampToValueBetween = function (value, start, finish) {\n    this.setRampPoint(start);\n    this.exponentialRampToValueAtTime(value, finish);\n    return this;\n  };\n  Tone.TimelineSignal.prototype._searchBefore = function (time) {\n    return this._events.getEvent(time);\n  };\n  Tone.TimelineSignal.prototype._searchAfter = function (time) {\n    return this._events.getEventAfter(time);\n  };\n  Tone.TimelineSignal.prototype.getValueAtTime = function (time) {\n    var after = this._searchAfter(time);\n    var before = this._searchBefore(time);\n    var value = this._initial;\n    if (before === null) {\n      value = this._initial;\n    } else if (before.type === Tone.TimelineSignal.Type.Target) {\n      var previous = this._events.getEventBefore(before.time);\n      var previouVal;\n      if (previous === null) {\n        previouVal = this._initial;\n      } else {\n        previouVal = previous.value;\n      }\n      value = this._exponentialApproach(before.time, previouVal, before.value, before.constant, time);\n    } else if (after === null) {\n      value = before.value;\n    } else if (after.type === Tone.TimelineSignal.Type.Linear) {\n      value = this._linearInterpolate(before.time, before.value, after.time, after.value, time);\n    } else if (after.type === Tone.TimelineSignal.Type.Exponential) {\n      value = this._exponentialInterpolate(before.time, before.value, after.time, after.value, time);\n    } else {\n      value = before.value;\n    }\n    return value;\n  };\n  Tone.TimelineSignal.prototype.connect = Tone.SignalBase.prototype.connect;\n  Tone.TimelineSignal.prototype._exponentialApproach = function (t0, v0, v1, timeConstant, t) {\n    return v1 + (v0 - v1) * Math.exp(-(t - t0) / timeConstant);\n  };\n  Tone.TimelineSignal.prototype._linearInterpolate = function (t0, v0, t1, v1, t) {\n    return v0 + (v1 - v0) * ((t - t0) / (t1 - t0));\n  };\n  Tone.TimelineSignal.prototype._exponentialInterpolate = function (t0, v0, t1, v1, t) {\n    v0 = Math.max(this._minOutput, v0);\n    return v0 * Math.pow(v1 / v0, (t - t0) / (t1 - t0));\n  };\n  Tone.TimelineSignal.prototype.dispose = function () {\n    Tone.Signal.prototype.dispose.call(this);\n    Tone.Param.prototype.dispose.call(this);\n    this._events.dispose();\n    this._events = null;\n  };\n  return Tone.TimelineSignal;\n}(Tone_core_Tone, Tone_signal_Signal);\nvar env;\nenv = function () {\n  'use strict';\n  var p5sound = master;\n  var Add = Tone_signal_Add;\n  var Mult = Tone_signal_Multiply;\n  var Scale = Tone_signal_Scale;\n  var TimelineSignal = Tone_signal_TimelineSignal;\n  var Tone = Tone_core_Tone;\n  Tone.setContext(p5sound.audiocontext);\n  /**\n   *  <p>Envelopes are pre-defined amplitude distribution over time.\n   *  Typically, envelopes are used to control the output volume\n   *  of an object, a series of fades referred to as Attack, Decay,\n   *  Sustain and Release (\n   *  <a href=\"https://upload.wikimedia.org/wikipedia/commons/e/ea/ADSR_parameter.svg\" target=\"_blank\" rel=\"external\">ADSR</a>\n   *  ). Envelopes can also control other Web Audio Parametersfor example, a p5.Env can \n   *  control an Oscillator's frequency like this: <code>osc.freq(env)</code>.</p>\n   *  <p>Use <code><a href=\"#/p5.Env/setRange\">setRange</a></code> to change the attack/release level.\n   *  Use <code><a href=\"#/p5.Env/setADSR\">setADSR</a></code> to change attackTime, decayTime, sustainPercent and releaseTime.</p>\n   *  <p>Use the <code><a href=\"#/p5.Env/play\">play</a></code> method to play the entire envelope,\n   *  the <code><a href=\"#/p5.Env/ramp\">ramp</a></code> method for a pingable trigger,\n   *  or <code><a href=\"#/p5.Env/triggerAttack\">triggerAttack</a></code>/\n   *  <code><a href=\"#/p5.Env/triggerRelease\">triggerRelease</a></code> to trigger noteOn/noteOff.</p>\n   *  \n   *  @class p5.Env\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *\n   *  var attackTime = 0.001\n   *  var decayTime = 0.2;\n   *  var susPercent = 0.2;\n   *  var releaseTime = 0.5;\n   *\n   *  var env, triOsc;\n   *\n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *\n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *\n   *    cnv.mousePressed(playEnv);\n   *  }\n   *\n   *  function playEnv(){\n   *    env.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Env = function (t1, l1, t2, l2, t3, l3) {\n    var now = p5sound.audiocontext.currentTime;\n    /**\n     * Time until envelope reaches attackLevel\n     * @property attackTime\n     */\n    this.aTime = t1 || 0.1;\n    /**\n     * Level once attack is complete.\n     * @property attackLevel\n     */\n    this.aLevel = l1 || 1;\n    /**\n     * Time until envelope reaches decayLevel.\n     * @property decayTime\n     */\n    this.dTime = t2 || 0.5;\n    /**\n     * Level after decay. The envelope will sustain here until it is released.\n     * @property decayLevel\n     */\n    this.dLevel = l2 || 0;\n    /**\n     * Duration of the release portion of the envelope.\n     * @property releaseTime\n     */\n    this.rTime = t3 || 0;\n    /**\n     * Level at the end of the release.\n     * @property releaseLevel\n     */\n    this.rLevel = l3 || 0;\n    this._rampHighPercentage = 0.98;\n    this._rampLowPercentage = 0.02;\n    this.output = p5sound.audiocontext.createGain();\n    this.control = new TimelineSignal();\n    this._init();\n    // this makes sure the envelope starts at zero\n    this.control.connect(this.output);\n    // connect to the output\n    this.connection = null;\n    // store connection\n    //array of math operation signal chaining\n    this.mathOps = [this.control];\n    //whether envelope should be linear or exponential curve\n    this.isExponential = false;\n    // oscillator or buffer source to clear on env complete\n    // to save resources if/when it is retriggered\n    this.sourceToClear = null;\n    // set to true if attack is set, then false on release\n    this.wasTriggered = false;\n    // add to the soundArray so we can dispose of the env later\n    p5sound.soundArray.push(this);\n  };\n  // this init function just smooths the starting value to zero and gives a start point for the timeline\n  // - it was necessary to remove glitches at the beginning.\n  p5.Env.prototype._init = function () {\n    var now = p5sound.audiocontext.currentTime;\n    var t = now;\n    this.control.setTargetAtTime(0.00001, t, 0.001);\n    //also, compute the correct time constants\n    this._setRampAD(this.aTime, this.dTime);\n  };\n  /**\n   *  Reset the envelope with a series of time/value pairs.\n   *\n   *  @method  set\n   *  @param {Number} attackTime     Time (in seconds) before level\n   *                                 reaches attackLevel\n   *  @param {Number} attackLevel    Typically an amplitude between\n   *                                 0.0 and 1.0\n   *  @param {Number} decayTime      Time\n   *  @param {Number} decayLevel   Amplitude (In a standard ADSR envelope,\n   *                                 decayLevel = sustainLevel)\n   *  @param {Number} releaseTime   Release Time (in seconds)\n   *  @param {Number} releaseLevel  Amplitude\n   */\n  p5.Env.prototype.set = function (t1, l1, t2, l2, t3, l3) {\n    this.aTime = t1;\n    this.aLevel = l1;\n    this.dTime = t2 || 0;\n    this.dLevel = l2 || 0;\n    this.rTime = t4 || 0;\n    this.rLevel = l4 || 0;\n    // set time constants for ramp\n    this._setRampAD(t1, t2);\n  };\n  /**\n   *  Set values like a traditional\n   *  <a href=\"https://en.wikipedia.org/wiki/Synthesizer#/media/File:ADSR_parameter.svg\" target=\"_blank\" rel=\"external\">\n   *  ADSR envelope\n   *  </a>.\n   *  \n   *  @method  setADSR\n   *  @param {Number} attackTime    Time (in seconds before envelope\n   *                                reaches Attack Level\n   *  @param {Number} [decayTime]    Time (in seconds) before envelope\n   *                                reaches Decay/Sustain Level\n   *  @param {Number} [susRatio]    Ratio between attackLevel and releaseLevel, on a scale from 0 to 1,\n   *                                where 1.0 = attackLevel, 0.0 = releaseLevel.\n   *                                The susRatio determines the decayLevel and the level at which the\n   *                                sustain portion of the envelope will sustain.\n   *                                For example, if attackLevel is 0.4, releaseLevel is 0,\n   *                                and susAmt is 0.5, the decayLevel would be 0.2. If attackLevel is\n   *                                increased to 1.0 (using <code>setRange</code>),\n   *                                then decayLevel would increase proportionally, to become 0.5.\n   *  @param {Number} [releaseTime]   Time in seconds from now (defaults to 0)\n   *  @example\n   *  <div><code>\n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *\n   *  var attackTime = 0.001\n   *  var decayTime = 0.2;\n   *  var susPercent = 0.2;\n   *  var releaseTime = 0.5;\n   *\n   *  var env, triOsc;\n   *\n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *\n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *\n   *    cnv.mousePressed(playEnv);\n   *  }\n   *\n   *  function playEnv(){\n   *    env.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.setADSR = function (aTime, dTime, sPercent, rTime) {\n    this.aTime = aTime;\n    this.dTime = dTime || 0;\n    // lerp\n    this.sPercent = sPercent || 0;\n    this.dLevel = typeof sPercent !== 'undefined' ? sPercent * (this.aLevel - this.rLevel) + this.rLevel : 0;\n    this.rTime = rTime || 0;\n    // also set time constants for ramp\n    this._setRampAD(aTime, dTime);\n  };\n  /**\n   *  Set max (attackLevel) and min (releaseLevel) of envelope.\n   *  \n   *  @method  setRange\n   *  @param {Number} aLevel attack level (defaults to 1)\n   *  @param {Number} rLevel release level (defaults to 0)\n   *  @example\n   *  <div><code>\n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *\n   *  var attackTime = 0.001\n   *  var decayTime = 0.2;\n   *  var susPercent = 0.2;\n   *  var releaseTime = 0.5;\n   *\n   *  var env, triOsc;\n   *\n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *\n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *\n   *    cnv.mousePressed(playEnv);\n   *  }\n   *\n   *  function playEnv(){\n   *    env.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.setRange = function (aLevel, rLevel) {\n    this.aLevel = aLevel || 1;\n    this.rLevel = rLevel || 0;\n  };\n  //  private (undocumented) method called when ADSR is set to set time constants for ramp\n  //\n  //  Set the <a href=\"https://en.wikipedia.org/wiki/RC_time_constant\" target=\"_blank\" rel=\"external\">\n  //  time constants</a> for simple exponential ramps.\n  //  The larger the time constant value, the slower the\n  //  transition will be.\n  //\n  //  method  _setRampAD\n  //  param {Number} attackTimeConstant  attack time constant\n  //  param {Number} decayTimeConstant   decay time constant\n  //\n  p5.Env.prototype._setRampAD = function (t1, t2) {\n    this._rampAttackTime = this.checkExpInput(t1);\n    this._rampDecayTime = this.checkExpInput(t2);\n    var TCDenominator = 1;\n    /// Aatish Bhatia's calculation for time constant for rise(to adjust 1/1-e calculation to any percentage)\n    TCDenominator = Math.log(1 / this.checkExpInput(1 - this._rampHighPercentage));\n    this._rampAttackTC = t1 / this.checkExpInput(TCDenominator);\n    TCDenominator = Math.log(1 / this._rampLowPercentage);\n    this._rampDecayTC = t2 / this.checkExpInput(TCDenominator);\n  };\n  // private method\n  p5.Env.prototype.setRampPercentages = function (p1, p2) {\n    //set the percentages that the simple exponential ramps go to\n    this._rampHighPercentage = this.checkExpInput(p1);\n    this._rampLowPercentage = this.checkExpInput(p2);\n    var TCDenominator = 1;\n    //now re-compute the time constants based on those percentages\n    /// Aatish Bhatia's calculation for time constant for rise(to adjust 1/1-e calculation to any percentage)\n    TCDenominator = Math.log(1 / this.checkExpInput(1 - this._rampHighPercentage));\n    this._rampAttackTC = this._rampAttackTime / this.checkExpInput(TCDenominator);\n    TCDenominator = Math.log(1 / this._rampLowPercentage);\n    this._rampDecayTC = this._rampDecayTime / this.checkExpInput(TCDenominator);\n  };\n  /**\n   *  Assign a parameter to be controlled by this envelope.\n   *  If a p5.Sound object is given, then the p5.Env will control its\n   *  output gain. If multiple inputs are provided, the env will\n   *  control all of them.\n   *  \n   *  @method  setInput\n   *  @param  {Object} unit         A p5.sound object or\n   *                                Web Audio Param.\n   */\n  p5.Env.prototype.setInput = function (unit) {\n    for (var i = 0; i < arguments.length; i++) {\n      this.connect(arguments[i]);\n    }\n  };\n  /**\n   *  Set whether the envelope ramp is linear (default) or exponential.\n   *  Exponential ramps can be useful because we perceive amplitude\n   *  and frequency logarithmically.\n   *  \n   *  @method  setExp\n   *  @param {Boolean} isExp true is exponential, false is linear\n   */\n  p5.Env.prototype.setExp = function (isExp) {\n    this.isExponential = isExp;\n  };\n  //helper method to protect against zero values being sent to exponential functions\n  p5.Env.prototype.checkExpInput = function (value) {\n    if (value <= 0)=\"\" {=\"\" value=\"0.0001;\" }=\"\" return=\"\" value;=\"\" };=\"\" **=\"\" *=\"\" play=\"\" tells=\"\" the=\"\" envelope=\"\" to=\"\" start=\"\" acting=\"\" on=\"\" a=\"\" given=\"\" input.=\"\" if=\"\" input=\"\" is=\"\" p5.sound=\"\" object=\"\" (i.e.=\"\" audioin,=\"\" oscillator,=\"\" soundfile),=\"\" then=\"\" env=\"\" will=\"\" control=\"\" its=\"\" output=\"\" volume.=\"\" envelopes=\"\" can=\"\" also=\"\" be=\"\" used=\"\" any=\"\" <a=\"\" href=\"\n   *  http://docs.webplatform.org/wiki/apis/webaudio/AudioParam\">\n   *  Web Audio Audio Param.\n   *\n   *  @method  play\n   *  @param  {Object} unit         A p5.sound object or\n   *                                Web Audio Param.\n   *  @param  {Number} [startTime]  time from now (in seconds) at which to play\n   *  @param  {Number} [sustainTime] time to sustain before releasing the envelope\n   *  @example\n   *  <div><code>\n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *\n   *  var attackTime = 0.001\n   *  var decayTime = 0.2;\n   *  var susPercent = 0.2;\n   *  var releaseTime = 0.5;\n   *\n   *  var env, triOsc;\n   *\n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *\n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *\n   *    cnv.mousePressed(playEnv);\n   *  }\n   *\n   *  function playEnv(){\n   *    // trigger env on triOsc, 0 seconds from now\n   *    // After decay, sustain for 0.2 seconds before release\n   *    env.play(triOsc, 0, 0.2);\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.play = function (unit, secondsFromNow, susTime) {\n    var now = p5sound.audiocontext.currentTime;\n    var tFromNow = secondsFromNow || 0;\n    var susTime = susTime || 0;\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n    this.triggerAttack(unit, tFromNow);\n    this.triggerRelease(unit, tFromNow + this.aTime + this.dTime + susTime);\n  };\n  /**\n   *  Trigger the Attack, and Decay portion of the Envelope.\n   *  Similar to holding down a key on a piano, but it will\n   *  hold the sustain level until you let go. Input can be\n   *  any p5.sound object, or a <a href=\"\n   *  http://docs.webplatform.org/wiki/apis/webaudio/AudioParam\">\n   *  Web Audio Param</a>.\n   *\n   *  @method  triggerAttack\n   *  @param  {Object} unit p5.sound Object or Web Audio Param\n   *  @param  {Number} secondsFromNow time from now (in seconds)\n   *  @example\n   *  <div><code>\n   *  \n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *  \n   *  var attackTime = 0.001\n   *  var decayTime = 0.3;\n   *  var susPercent = 0.4;\n   *  var releaseTime = 0.5;\n   *  \n   *  var env, triOsc;\n   *  \n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *    background(200);\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *  \n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *  \n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *  \n   *    cnv.mousePressed(envAttack);\n   *  }\n   *  \n   *  function envAttack(){\n   *    console.log('trigger attack');\n   *    env.triggerAttack();\n   *  \n   *    background(0,255,0);\n   *    text('attack!', width/2, height/2);\n   *  }\n   *  \n   *  function mouseReleased() {\n   *    env.triggerRelease();\n   *  \n   *    background(200);\n   *    text('click to play', width/2, height/2);\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.triggerAttack = function (unit, secondsFromNow) {\n    var now = p5sound.audiocontext.currentTime;\n    var tFromNow = secondsFromNow || 0;\n    var t = now + tFromNow;\n    this.lastAttack = t;\n    this.wasTriggered = true;\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n    // get and set value (with linear ramp) to anchor automation\n    var valToSet = this.control.getValueAtTime(t);\n    this.control.cancelScheduledValues(t);\n    // not sure if this is necessary\n    if (this.isExponential == true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(valToSet), t);\n    } else {\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n    // after each ramp completes, cancel scheduled values\n    // (so they can be overridden in case env has been re-triggered)\n    // then, set current value (with linearRamp to avoid click)\n    // then, schedule the next automation...\n    // attack\n    t += this.aTime;\n    if (this.isExponential == true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(this.aLevel), t);\n      valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n      this.control.cancelScheduledValues(t);\n      this.control.exponentialRampToValueAtTime(valToSet, t);\n    } else {\n      this.control.linearRampToValueAtTime(this.aLevel, t);\n      valToSet = this.control.getValueAtTime(t);\n      this.control.cancelScheduledValues(t);\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n    // decay to decay level (if using ADSR, then decay level == sustain level)\n    t += this.dTime;\n    if (this.isExponential == true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(this.dLevel), t);\n      valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n      this.control.cancelScheduledValues(t);\n      this.control.exponentialRampToValueAtTime(valToSet, t);\n    } else {\n      this.control.linearRampToValueAtTime(this.dLevel, t);\n      valToSet = this.control.getValueAtTime(t);\n      this.control.cancelScheduledValues(t);\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n  };\n  /**\n   *  Trigger the Release of the Envelope. This is similar to releasing\n   *  the key on a piano and letting the sound fade according to the\n   *  release level and release time.\n   *\n   *  @method  triggerRelease\n   *  @param  {Object} unit p5.sound Object or Web Audio Param\n   *  @param  {Number} secondsFromNow time to trigger the release\n   *  @example\n   *  <div><code>\n   *  \n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *  \n   *  var attackTime = 0.001\n   *  var decayTime = 0.3;\n   *  var susPercent = 0.4;\n   *  var releaseTime = 0.5;\n   *  \n   *  var env, triOsc;\n   *  \n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *    background(200);\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *  \n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *  \n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *  \n   *    cnv.mousePressed(envAttack);\n   *  }\n   *  \n   *  function envAttack(){\n   *    console.log('trigger attack');\n   *    env.triggerAttack();\n   *  \n   *    background(0,255,0);\n   *    text('attack!', width/2, height/2);\n   *  }\n   *  \n   *  function mouseReleased() {\n   *    env.triggerRelease();\n   *  \n   *    background(200);\n   *    text('click to play', width/2, height/2);\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.triggerRelease = function (unit, secondsFromNow) {\n    // only trigger a release if an attack was triggered\n    if (!this.wasTriggered) {\n      // this currently causes a bit of trouble:\n      // if a later release has been scheduled (via the play function)\n      // a new earlier release won't interrupt it, because \n      // this.wasTriggered has already been set to false.\n      // If we want new earlier releases to override, then we need to \n      // keep track of the last release time, and if the new release time is \n      // earlier, then use it.\n      return;\n    }\n    var now = p5sound.audiocontext.currentTime;\n    var tFromNow = secondsFromNow || 0;\n    var t = now + tFromNow;\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n    // get and set value (with linear or exponential ramp) to anchor automation\n    var valToSet = this.control.getValueAtTime(t);\n    this.control.cancelScheduledValues(t);\n    // not sure if this is necessary\n    if (this.isExponential == true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(valToSet), t);\n    } else {\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n    // release\n    t += this.rTime;\n    if (this.isExponential == true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(this.rLevel), t);\n      valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n      this.control.cancelScheduledValues(t);\n      this.control.exponentialRampToValueAtTime(valToSet, t);\n    } else {\n      this.control.linearRampToValueAtTime(this.rLevel, t);\n      valToSet = this.control.getValueAtTime(t);\n      this.control.cancelScheduledValues(t);\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n    this.wasTriggered = false;\n  };\n  /**\n   *  Exponentially ramp to a value using the first two\n   *  values from <code><a href=\"#/p5.Env/setADSR\">setADSR(attackTime, decayTime)</a></code>\n   *  as <a href=\"https://en.wikipedia.org/wiki/RC_time_constant\" target=\"_blank\" rel=\"external\">\n   *  time constants</a> for simple exponential ramps.\n   *  If the value is higher than current value, it uses attackTime,\n   *  while a decrease uses decayTime.\n   *\n   *  @method  ramp\n   *  @param  {Object} unit           p5.sound Object or Web Audio Param\n   *  @param  {Number} secondsFromNow When to trigger the ramp\n   *  @param  {Number} v              Target value\n   *  @param  {Number} [v2]           Second target value (optional)\n   *  @example\n   *  <div><code>\n   *  var env, osc, amp, cnv;\n   *  \n   *  var attackTime = 0.001;\n   *  var decayTime = 0.2;\n   *  var attackLevel = 1;\n   *  var decayLevel = 0;\n   *  \n   *  function setup() {\n   *    cnv = createCanvas(100, 100);\n   *    fill(0,255,0);\n   *    noStroke();\n   *  \n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime);\n   *  \n   *    osc = new p5.Oscillator();\n   *    osc.amp(env);\n   *    osc.start();\n   *  \n   *    amp = new p5.Amplitude();\n   *  \n   *    cnv.mousePressed(triggerRamp);\n   *  }\n   *  \n   *  function triggerRamp() {\n   *    env.ramp(osc, 0, attackLevel, decayLevel);\n   *  }\n   *  \n   *  function draw() {\n   *    background(20,20,20);\n   *    text('click me', 10, 20);\n   *    var h = map(amp.getLevel(), 0, 0.4, 0, height);;\n   *  \n   *    rect(0, height, width, -h);\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.ramp = function (unit, secondsFromNow, v1, v2) {\n    var now = p5sound.audiocontext.currentTime;\n    var tFromNow = secondsFromNow || 0;\n    var t = now + tFromNow;\n    var destination1 = this.checkExpInput(v1);\n    var destination2 = typeof v2 !== 'undefined' ? this.checkExpInput(v2) : undefined;\n    // connect env to unit if not already connected\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n    //get current value\n    var currentVal = this.checkExpInput(this.control.getValueAtTime(t));\n    this.control.cancelScheduledValues(t);\n    //if it's going up\n    if (destination1 > currentVal) {\n      this.control.setTargetAtTime(destination1, t, this._rampAttackTC);\n      t += this._rampAttackTime;\n    } else if (destination1 < currentVal) {\n      this.control.setTargetAtTime(destination1, t, this._rampDecayTC);\n      t += this._rampDecayTime;\n    }\n    // Now the second part of envelope begins\n    if (destination2 === undefined)\n      return;\n    //if it's going up\n    if (destination2 > destination1) {\n      this.control.setTargetAtTime(destination2, t, this._rampAttackTC);\n    } else if (destination2 < destination1) {\n      this.control.setTargetAtTime(destination2, t, this._rampDecayTC);\n    }\n  };\n  p5.Env.prototype.connect = function (unit) {\n    this.connection = unit;\n    // assume we're talking about output gain\n    // unless given a different audio param\n    if (unit instanceof p5.Oscillator || unit instanceof p5.SoundFile || unit instanceof p5.AudioIn || unit instanceof p5.Reverb || unit instanceof p5.Noise || unit instanceof p5.Filter || unit instanceof p5.Delay) {\n      unit = unit.output.gain;\n    }\n    if (unit instanceof AudioParam) {\n      //set the initial value\n      unit.setValueAtTime(0, p5sound.audiocontext.currentTime);\n    }\n    if (unit instanceof p5.Signal) {\n      unit.setValue(0);\n    }\n    this.output.connect(unit);\n  };\n  p5.Env.prototype.disconnect = function (unit) {\n    this.output.disconnect();\n  };\n  // Signal Math\n  /**\n   *  Add a value to the p5.Oscillator's output amplitude,\n   *  and return the oscillator. Calling this method\n   *  again will override the initial add() with new values.\n   *  \n   *  @method  add\n   *  @param {Number} number Constant number to add\n   *  @return {p5.Env} Envelope Returns this envelope\n   *                                     with scaled output\n   */\n  p5.Env.prototype.add = function (num) {\n    var add = new Add(num);\n    var thisChain = this.mathOps.length;\n    var nextChain = this.output;\n    return p5.prototype._mathChain(this, add, thisChain, nextChain, Add);\n  };\n  /**\n   *  Multiply the p5.Env's output amplitude\n   *  by a fixed value. Calling this method\n   *  again will override the initial mult() with new values.\n   *  \n   *  @method  mult\n   *  @param {Number} number Constant number to multiply\n   *  @return {p5.Env} Envelope Returns this envelope\n   *                                     with scaled output\n   */\n  p5.Env.prototype.mult = function (num) {\n    var mult = new Mult(num);\n    var thisChain = this.mathOps.length;\n    var nextChain = this.output;\n    return p5.prototype._mathChain(this, mult, thisChain, nextChain, Mult);\n  };\n  /**\n   *  Scale this envelope's amplitude values to a given\n   *  range, and return the envelope. Calling this method\n   *  again will override the initial scale() with new values.\n   *  \n   *  @method  scale\n   *  @param  {Number} inMin  input range minumum\n   *  @param  {Number} inMax  input range maximum\n   *  @param  {Number} outMin input range minumum\n   *  @param  {Number} outMax input range maximum\n   *  @return {p5.Env} Envelope Returns this envelope\n   *                                     with scaled output\n   */\n  p5.Env.prototype.scale = function (inMin, inMax, outMin, outMax) {\n    var scale = new Scale(inMin, inMax, outMin, outMax);\n    var thisChain = this.mathOps.length;\n    var nextChain = this.output;\n    return p5.prototype._mathChain(this, scale, thisChain, nextChain, Scale);\n  };\n  // get rid of the oscillator\n  p5.Env.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    var now = p5sound.audiocontext.currentTime;\n    this.disconnect();\n    try {\n      this.control.dispose();\n      this.control = null;\n    } catch (e) {\n    }\n    for (var i = 1; i < this.mathOps.length; i++) {\n      mathOps[i].dispose();\n    }\n  };\n}(master, Tone_signal_Add, Tone_signal_Multiply, Tone_signal_Scale, Tone_signal_TimelineSignal, Tone_core_Tone);\nvar pulse;\npulse = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   *  Creates a Pulse object, an oscillator that implements\n   *  Pulse Width Modulation.\n   *  The pulse is created with two oscillators.\n   *  Accepts a parameter for frequency, and to set the\n   *  width between the pulses. See <a href=\"\n   *  http://p5js.org/reference/#/p5.Oscillator\">\n   *  <code>p5.Oscillator</code> for a full list of methods.\n   *  \n   *  @class p5.Pulse\n   *  @constructor\n   *  @param {Number} [freq] Frequency in oscillations per second (Hz)\n   *  @param {Number} [w]    Width between the pulses (0 to 1.0,\n   *                         defaults to 0)\n   *  @example\n   *  <div><code>\n   *  var pulse;\n   *  function setup() {\n   *    background(0);\n   *    \n   *    // Create and start the pulse wave oscillator\n   *    pulse = new p5.Pulse();\n   *    pulse.amp(0.5);\n   *    pulse.freq(220);\n   *    pulse.start();\n   *  }\n   *\n   *  function draw() {\n   *    var w = map(mouseX, 0, width, 0, 1);\n   *    w = constrain(w, 0, 1);\n   *    pulse.width(w)\n   *  }\n   *  </code></div>\n   */\n  p5.Pulse = function (freq, w) {\n    p5.Oscillator.call(this, freq, 'sawtooth');\n    // width of PWM, should be betw 0 to 1.0\n    this.w = w || 0;\n    // create a second oscillator with inverse frequency\n    this.osc2 = new p5.SawOsc(freq);\n    // create a delay node\n    this.dNode = p5sound.audiocontext.createDelay();\n    // dc offset\n    this.dcOffset = createDCOffset();\n    this.dcGain = p5sound.audiocontext.createGain();\n    this.dcOffset.connect(this.dcGain);\n    this.dcGain.connect(this.output);\n    // set delay time based on PWM width\n    this.f = freq || 440;\n    var mW = this.w / this.oscillator.frequency.value;\n    this.dNode.delayTime.value = mW;\n    this.dcGain.gain.value = 1.7 * (0.5 - this.w);\n    // disconnect osc2 and connect it to delay, which is connected to output\n    this.osc2.disconnect();\n    this.osc2.panner.disconnect();\n    this.osc2.amp(-1);\n    // inverted amplitude\n    this.osc2.output.connect(this.dNode);\n    this.dNode.connect(this.output);\n    this.output.gain.value = 1;\n    this.output.connect(this.panner);\n  };\n  p5.Pulse.prototype = Object.create(p5.Oscillator.prototype);\n  /**\n   *  Set the width of a Pulse object (an oscillator that implements\n   *  Pulse Width Modulation).\n   *\n   *  @method  width\n   *  @param {Number} [width]    Width between the pulses (0 to 1.0,\n   *                         defaults to 0)\n   */\n  p5.Pulse.prototype.width = function (w) {\n    if (typeof w === 'number') {\n      if (w <= 1=\"\" &&=\"\" w=\"\">= 0) {\n        this.w = w;\n        // set delay time based on PWM width\n        // var mW = map(this.w, 0, 1.0, 0, 1/this.f);\n        var mW = this.w / this.oscillator.frequency.value;\n        this.dNode.delayTime.value = mW;\n      }\n      this.dcGain.gain.value = 1.7 * (0.5 - this.w);\n    } else {\n      w.connect(this.dNode.delayTime);\n      var sig = new p5.SignalAdd(-0.5);\n      sig.setInput(w);\n      sig = sig.mult(-1);\n      sig = sig.mult(1.7);\n      sig.connect(this.dcGain.gain);\n    }\n  };\n  p5.Pulse.prototype.start = function (f, time) {\n    var now = p5sound.audiocontext.currentTime;\n    var t = time || 0;\n    if (!this.started) {\n      var freq = f || this.f;\n      var type = this.oscillator.type;\n      this.oscillator = p5sound.audiocontext.createOscillator();\n      this.oscillator.frequency.setValueAtTime(freq, now);\n      this.oscillator.type = type;\n      this.oscillator.connect(this.output);\n      this.oscillator.start(t + now);\n      // set up osc2\n      this.osc2.oscillator = p5sound.audiocontext.createOscillator();\n      this.osc2.oscillator.frequency.setValueAtTime(freq, t + now);\n      this.osc2.oscillator.type = type;\n      this.osc2.oscillator.connect(this.osc2.output);\n      this.osc2.start(t + now);\n      this.freqNode = [\n        this.oscillator.frequency,\n        this.osc2.oscillator.frequency\n      ];\n      // start dcOffset, too\n      this.dcOffset = createDCOffset();\n      this.dcOffset.connect(this.dcGain);\n      this.dcOffset.start(t + now);\n      // if LFO connections depend on these oscillators\n      if (this.mods !== undefined && this.mods.frequency !== undefined) {\n        this.mods.frequency.connect(this.freqNode[0]);\n        this.mods.frequency.connect(this.freqNode[1]);\n      }\n      this.started = true;\n      this.osc2.started = true;\n    }\n  };\n  p5.Pulse.prototype.stop = function (time) {\n    if (this.started) {\n      var t = time || 0;\n      var now = p5sound.audiocontext.currentTime;\n      this.oscillator.stop(t + now);\n      this.osc2.oscillator.stop(t + now);\n      this.dcOffset.stop(t + now);\n      this.started = false;\n      this.osc2.started = false;\n    }\n  };\n  p5.Pulse.prototype.freq = function (val, rampTime, tFromNow) {\n    if (typeof val === 'number') {\n      this.f = val;\n      var now = p5sound.audiocontext.currentTime;\n      var rampTime = rampTime || 0;\n      var tFromNow = tFromNow || 0;\n      var currentFreq = this.oscillator.frequency.value;\n      this.oscillator.frequency.cancelScheduledValues(now);\n      this.oscillator.frequency.setValueAtTime(currentFreq, now + tFromNow);\n      this.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n      this.osc2.oscillator.frequency.cancelScheduledValues(now);\n      this.osc2.oscillator.frequency.setValueAtTime(currentFreq, now + tFromNow);\n      this.osc2.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n      if (this.freqMod) {\n        this.freqMod.output.disconnect();\n        this.freqMod = null;\n      }\n    } else if (val.output) {\n      val.output.disconnect();\n      val.output.connect(this.oscillator.frequency);\n      val.output.connect(this.osc2.oscillator.frequency);\n      this.freqMod = val;\n    }\n  };\n  // inspiration: http://webaudiodemos.appspot.com/oscilloscope/\n  function createDCOffset() {\n    var ac = p5sound.audiocontext;\n    var buffer = ac.createBuffer(1, 2048, ac.sampleRate);\n    var data = buffer.getChannelData(0);\n    for (var i = 0; i < 2048; i++)\n      data[i] = 1;\n    var bufferSource = ac.createBufferSource();\n    bufferSource.buffer = buffer;\n    bufferSource.loop = true;\n    return bufferSource;\n  }\n}(master, oscillator);\nvar noise;\nnoise = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   *  Noise is a type of oscillator that generates a buffer with random values.\n   *\n   *  @class p5.Noise\n   *  @constructor\n   *  @param {String} type Type of noise can be 'white' (default),\n   *                       'brown' or 'pink'.\n   *  @return {Object}    Noise Object\n   */\n  p5.Noise = function (type) {\n    p5.Oscillator.call(this);\n    delete this.f;\n    delete this.freq;\n    delete this.oscillator;\n    this.buffer = _whiteNoise;\n  };\n  p5.Noise.prototype = Object.create(p5.Oscillator.prototype);\n  // generate noise buffers\n  var _whiteNoise = function () {\n    var bufferSize = 2 * p5sound.audiocontext.sampleRate;\n    var whiteBuffer = p5sound.audiocontext.createBuffer(1, bufferSize, p5sound.audiocontext.sampleRate);\n    var noiseData = whiteBuffer.getChannelData(0);\n    for (var i = 0; i < bufferSize; i++) {\n      noiseData[i] = Math.random() * 2 - 1;\n    }\n    whiteBuffer.type = 'white';\n    return whiteBuffer;\n  }();\n  var _pinkNoise = function () {\n    var bufferSize = 2 * p5sound.audiocontext.sampleRate;\n    var pinkBuffer = p5sound.audiocontext.createBuffer(1, bufferSize, p5sound.audiocontext.sampleRate);\n    var noiseData = pinkBuffer.getChannelData(0);\n    var b0, b1, b2, b3, b4, b5, b6;\n    b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0;\n    for (var i = 0; i < bufferSize; i++) {\n      var white = Math.random() * 2 - 1;\n      b0 = 0.99886 * b0 + white * 0.0555179;\n      b1 = 0.99332 * b1 + white * 0.0750759;\n      b2 = 0.969 * b2 + white * 0.153852;\n      b3 = 0.8665 * b3 + white * 0.3104856;\n      b4 = 0.55 * b4 + white * 0.5329522;\n      b5 = -0.7616 * b5 - white * 0.016898;\n      noiseData[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;\n      noiseData[i] *= 0.11;\n      // (roughly) compensate for gain\n      b6 = white * 0.115926;\n    }\n    pinkBuffer.type = 'pink';\n    return pinkBuffer;\n  }();\n  var _brownNoise = function () {\n    var bufferSize = 2 * p5sound.audiocontext.sampleRate;\n    var brownBuffer = p5sound.audiocontext.createBuffer(1, bufferSize, p5sound.audiocontext.sampleRate);\n    var noiseData = brownBuffer.getChannelData(0);\n    var lastOut = 0;\n    for (var i = 0; i < bufferSize; i++) {\n      var white = Math.random() * 2 - 1;\n      noiseData[i] = (lastOut + 0.02 * white) / 1.02;\n      lastOut = noiseData[i];\n      noiseData[i] *= 3.5;\n    }\n    brownBuffer.type = 'brown';\n    return brownBuffer;\n  }();\n  /**\n   *  Set type of noise to 'white', 'pink' or 'brown'.\n   *  White is the default.\n   *\n   *  @method setType\n   *  @param {String} [type] 'white', 'pink' or 'brown'\n   */\n  p5.Noise.prototype.setType = function (type) {\n    switch (type) {\n    case 'white':\n      this.buffer = _whiteNoise;\n      break;\n    case 'pink':\n      this.buffer = _pinkNoise;\n      break;\n    case 'brown':\n      this.buffer = _brownNoise;\n      break;\n    default:\n      this.buffer = _whiteNoise;\n    }\n    if (this.started) {\n      var now = p5sound.audiocontext.currentTime;\n      this.stop(now);\n      this.start(now + 0.01);\n    }\n  };\n  p5.Noise.prototype.getType = function () {\n    return this.buffer.type;\n  };\n  /**\n   *  Start the noise\n   *\n   *  @method start\n   */\n  p5.Noise.prototype.start = function () {\n    if (this.started) {\n      this.stop();\n    }\n    this.noise = p5sound.audiocontext.createBufferSource();\n    this.noise.buffer = this.buffer;\n    this.noise.loop = true;\n    this.noise.connect(this.output);\n    var now = p5sound.audiocontext.currentTime;\n    this.noise.start(now);\n    this.started = true;\n  };\n  /**\n   *  Stop the noise.\n   *\n   *  @method  stop\n   */\n  p5.Noise.prototype.stop = function () {\n    var now = p5sound.audiocontext.currentTime;\n    if (this.noise) {\n      this.noise.stop(now);\n      this.started = false;\n    }\n  };\n  /**\n   *  Pan the noise.\n   *\n   *  @method  pan\n   *  @param  {Number} panning Number between -1 (left)\n   *                           and 1 (right)\n   *  @param  {Number} timeFromNow schedule this event to happen\n   *                                seconds from now\n   */\n  /**\n   *  Set the amplitude of the noise between 0 and 1.0. Or,\n   *  modulate amplitude with an audio signal such as an oscillator.\n   *  \n   *  @param  {Number|Object} volume amplitude between 0 and 1.0\n   *                                     or modulating signal/oscillator\n   *  @param {Number} [rampTime] create a fade that lasts rampTime \n   *  @param {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   */\n  /**\n   *  Send output to a p5.sound or web audio object\n   *  \n   *  @method  connect\n   *  @param  {Object} unit\n   */\n  /**\n   *  Disconnect all output.\n   *  \n   *  @method disconnect\n   */\n  p5.Noise.prototype.dispose = function () {\n    var now = p5sound.audiocontext.currentTime;\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    if (this.noise) {\n      this.noise.disconnect();\n      this.stop(now);\n    }\n    if (this.output) {\n      this.output.disconnect();\n    }\n    if (this.panner) {\n      this.panner.disconnect();\n    }\n    this.output = null;\n    this.panner = null;\n    this.buffer = null;\n    this.noise = null;\n  };\n}(master);\nvar audioin;\naudioin = function () {\n  'use strict';\n  var p5sound = master;\n  var CustomError = errorHandler;\n  /**\n   *  <p>Get audio from an input, i.e. your computer's microphone.</p>\n   *\n   *  <p>Turn the mic on/off with the start() and stop() methods. When the mic\n   *  is on, its volume can be measured with getLevel or by connecting an\n   *  FFT object.</p>\n   *  \n   *  <p>If you want to hear the AudioIn, use the .connect() method. \n   *  AudioIn does not connect to p5.sound output by default to prevent\n   *  feedback.</p> \n   *\n   *  <p><em>Note: This uses the <a href=\"http://caniuse.com/stream\" target=\"_blank\" rel=\"external\">getUserMedia/\n   *  Stream</a> API, which is not supported by certain browsers.</em></p>\n   *\n   *  @class p5.AudioIn\n   *  @constructor\n   *  @return {Object} AudioIn\n   *  @example\n   *  <div><code>\n   *  var mic;\n   *  function setup(){\n   *    mic = new p5.AudioIn()\n   *    mic.start();\n   *  }\n   *  function draw(){\n   *    background(0);\n   *    micLevel = mic.getLevel();\n   *    ellipse(width/2, constrain(height-micLevel*height*5, 0, height), 10, 10);\n   *  }\n   *  </code></div>\n   */\n  p5.AudioIn = function () {\n    // set up audio input\n    this.input = p5sound.audiocontext.createGain();\n    this.output = p5sound.audiocontext.createGain();\n    this.stream = null;\n    this.mediaStream = null;\n    this.currentSource = 0;\n    /**\n     *  Client must allow browser to access their microphone / audioin source.\n     *  Default: false. Will become true when the client enables acces.\n     *\n     *  @property {Boolean} enabled\n     */\n    this.enabled = false;\n    // create an amplitude, connect to it by default but not to master out\n    this.amplitude = new p5.Amplitude();\n    this.output.connect(this.amplitude.input);\n    // Some browsers let developer determine their input sources\n    if (typeof window.MediaStreamTrack === 'undefined') {\n      window.alert('This browser does not support MediaStreamTrack');\n    } else if (typeof window.MediaStreamTrack.getSources === 'function') {\n      // Chrome supports getSources to list inputs. Dev picks default\n      window.MediaStreamTrack.getSources(this._gotSources);\n    } else {\n    }\n    // add to soundArray so we can dispose on close\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Start processing audio input. This enables the use of other\n   *  AudioIn methods like getLevel(). Note that by default, AudioIn\n   *  is not connected to p5.sound's output. So you won't hear\n   *  anything unless you use the connect() method.<br>\n   *\n   *  @method start\n   *  @param {Function} successCallback Name of a function to call on\n   *                                    success.\n   *  @param {Function} errorCallback Name of a function to call if\n   *                                    there was an error. For example,\n   *                                    some browsers do not support\n   *                                    getUserMedia.\n   */\n  p5.AudioIn.prototype.start = function (successCallback, errorCallback) {\n    var self = this;\n    // if _gotSources() i.e. developers determine which source to use\n    if (p5sound.inputSources[self.currentSource]) {\n      // set the audio source\n      var audioSource = p5sound.inputSources[self.currentSource].id;\n      var constraints = { audio: { optional: [{ sourceId: audioSource }] } };\n      window.navigator.getUserMedia(constraints, this._onStream = function (stream) {\n        self.stream = stream;\n        self.enabled = true;\n        // Wrap a MediaStreamSourceNode around the live input\n        self.mediaStream = p5sound.audiocontext.createMediaStreamSource(stream);\n        self.mediaStream.connect(self.output);\n        if (successCallback)\n          successCallback();\n        // only send to the Amplitude reader, so we can see it but not hear it.\n        self.amplitude.setInput(self.output);\n      }, this._onStreamError = function (e) {\n        if (errorCallback)\n          errorCallback(e);\n        else\n          console.error(e);\n      });\n    } else {\n      // if Firefox where users select their source via browser\n      // if (typeof MediaStreamTrack.getSources === 'undefined') {\n      // Only get the audio stream.\n      window.navigator.getUserMedia({ 'audio': true }, this._onStream = function (stream) {\n        self.stream = stream;\n        self.enabled = true;\n        // Wrap a MediaStreamSourceNode around the live input\n        self.mediaStream = p5sound.audiocontext.createMediaStreamSource(stream);\n        self.mediaStream.connect(self.output);\n        // only send to the Amplitude reader, so we can see it but not hear it.\n        self.amplitude.setInput(self.output);\n        if (successCallback)\n          successCallback();\n      }, this._onStreamError = function (e) {\n        if (errorCallback)\n          errorCallback(e);\n        else\n          console.error(e);\n      });\n    }\n  };\n  /**\n   *  Turn the AudioIn off. If the AudioIn is stopped, it cannot getLevel().<br>\n   *\n   *  @method stop\n   */\n  p5.AudioIn.prototype.stop = function () {\n    if (this.stream) {\n      this.stream.stop();\n    }\n  };\n  /**\n   *  Connect to an audio unit. If no parameter is provided, will\n   *  connect to the master output (i.e. your speakers).<br>\n   *  \n   *  @method  connect\n   *  @param  {Object} [unit] An object that accepts audio input,\n   *                          such as an FFT\n   */\n  p5.AudioIn.prototype.connect = function (unit) {\n    if (unit) {\n      if (unit.hasOwnProperty('input')) {\n        this.output.connect(unit.input);\n      } else if (unit.hasOwnProperty('analyser')) {\n        this.output.connect(unit.analyser);\n      } else {\n        this.output.connect(unit);\n      }\n    } else {\n      this.output.connect(p5sound.input);\n    }\n  };\n  /**\n   *  Disconnect the AudioIn from all audio units. For example, if\n   *  connect() had been called, disconnect() will stop sending \n   *  signal to your speakers.<br>\n   *\n   *  @method  disconnect\n   */\n  p5.AudioIn.prototype.disconnect = function (unit) {\n    this.output.disconnect(unit);\n    // stay connected to amplitude even if not outputting to p5\n    this.output.connect(this.amplitude.input);\n  };\n  /**\n   *  Read the Amplitude (volume level) of an AudioIn. The AudioIn\n   *  class contains its own instance of the Amplitude class to help\n   *  make it easy to get a microphone's volume level. Accepts an\n   *  optional smoothing value (0.0 < 1.0). <em>NOTE: AudioIn must\n   *  .start() before using .getLevel().</em><br>\n   *  \n   *  @method  getLevel\n   *  @param  {Number} [smoothing] Smoothing is 0.0 by default.\n   *                               Smooths values based on previous values.\n   *  @return {Number}           Volume level (between 0.0 and 1.0)\n   */\n  p5.AudioIn.prototype.getLevel = function (smoothing) {\n    if (smoothing) {\n      this.amplitude.smoothing = smoothing;\n    }\n    return this.amplitude.getLevel();\n  };\n  /**\n   *  Add input sources to the list of available sources.\n   *  \n   *  @private\n   */\n  p5.AudioIn.prototype._gotSources = function (sourceInfos) {\n    for (var i = 0; i < sourceInfos.length; i++) {\n      var sourceInfo = sourceInfos[i];\n      if (sourceInfo.kind === 'audio') {\n        // add the inputs to inputSources\n        //p5sound.inputSources.push(sourceInfo);\n        return sourceInfo;\n      }\n    }\n  };\n  /**\n   *  Set amplitude (volume) of a mic input between 0 and 1.0. <br>\n   *\n   *  @method  amp\n   *  @param  {Number} vol between 0 and 1.0\n   *  @param {Number} [time] ramp time (optional)\n   */\n  p5.AudioIn.prototype.amp = function (vol, t) {\n    if (t) {\n      var rampTime = t || 0;\n      var currentVol = this.output.gain.value;\n      this.output.gain.cancelScheduledValues(p5sound.audiocontext.currentTime);\n      this.output.gain.setValueAtTime(currentVol, p5sound.audiocontext.currentTime);\n      this.output.gain.linearRampToValueAtTime(vol, rampTime + p5sound.audiocontext.currentTime);\n    } else {\n      this.output.gain.cancelScheduledValues(p5sound.audiocontext.currentTime);\n      this.output.gain.setValueAtTime(vol, p5sound.audiocontext.currentTime);\n    }\n  };\n  p5.AudioIn.prototype.listSources = function () {\n    console.log('listSources is deprecated - please use AudioIn.getSources');\n    console.log('input sources: ');\n    if (p5sound.inputSources.length > 0) {\n      return p5sound.inputSources;\n    } else {\n      return 'This browser does not support MediaStreamTrack.getSources()';\n    }\n  };\n  /**\n   * Chrome only. Returns a list of available input sources \n   * and allows the user to set the media source. Firefox allows \n   * the user to choose from input sources in the permissions dialogue\n   * instead of enumerating available sources and selecting one.\n   * Note: in order to have descriptive media names your page must be \n   * served over a secure (HTTPS) connection and the page should \n   * request user media before enumerating devices. Otherwise device \n   * ID will be a long device ID number and does not specify device \n   * type. For example see \n   * https://simpl.info/getusermedia/sources/index.html vs.\n   * http://simpl.info/getusermedia/sources/index.html\n   *\n   * @method  getSources\n   * @param  {Function} callback a callback to handle the sources \n   *                               when they have been enumerated\n   * @example\n   *  <div><code>\n   *  var audiograb;\n   *      \n   *  function setup(){\n   *    //new audioIn\n   *    audioGrab = new p5.AudioIn();\n   *    \n   *    audioGrab.getSources(function(sourceList) {\n   *      //print out the array of available sources\n   *      console.log(sourceList);\n   *      //set the source to the first item in the inputSources array\n   *      audioGrab.setSource(0);\n   *    });\n   *  }\n   *  </code></div>\n   */\n  p5.AudioIn.prototype.getSources = function (callback) {\n    if (typeof window.MediaStreamTrack.getSources === 'function') {\n      window.MediaStreamTrack.getSources(function (data) {\n        for (var i = 0, max = data.length; i < max; i++) {\n          var sourceInfo = data[i];\n          if (sourceInfo.kind === 'audio') {\n            // add the inputs to inputSources\n            p5sound.inputSources.push(sourceInfo);\n          }\n        }\n        callback(p5sound.inputSources);\n      });\n    } else {\n      console.log('This browser does not support MediaStreamTrack.getSources()');\n    }\n  };\n  /**\n   *  Set the input source. Accepts a number representing a\n   *  position in the array returned by listSources().\n   *  This is only available in browsers that support \n   *  MediaStreamTrack.getSources(). Instead, some browsers\n   *  give users the option to set their own media source.<br>\n   *  \n   *  @method setSource\n   *  @param {number} num position of input source in the array\n   */\n  p5.AudioIn.prototype.setSource = function (num) {\n    // TO DO - set input by string or # (array position)\n    var self = this;\n    if (p5sound.inputSources.length > 0 && num < p5sound.inputSources.length) {\n      // set the current source\n      self.currentSource = num;\n      console.log('set source to ' + p5sound.inputSources[self.currentSource].id);\n    } else {\n      console.log('unable to set input source');\n    }\n  };\n  // private method\n  p5.AudioIn.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.stop();\n    if (this.output) {\n      this.output.disconnect();\n    }\n    if (this.amplitude) {\n      this.amplitude.disconnect();\n    }\n    this.amplitude = null;\n    this.output = null;\n  };\n}(master, errorHandler);\nvar filter;\nfilter = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   *  A p5.Filter uses a Web Audio Biquad Filter to filter\n   *  the frequency response of an input source. Inheriting\n   *  classes include:<br>\n   *  * <code>p5.LowPass</code> - allows frequencies below\n   *  the cutoff frequency to pass through, and attenuates\n   *  frequencies above the cutoff.<br>\n   *  * <code>p5.HighPass</code> - the opposite of a lowpass\n   *  filter. <br>\n   *  * <code>p5.BandPass</code> -  allows a range of\n   *  frequencies to pass through and attenuates the frequencies\n   *  below and above this frequency range.<br>\n   *\n   *  The <code>.res()</code> method controls either width of the\n   *  bandpass, or resonance of the low/highpass cutoff frequency.\n   *\n   *  @class p5.Filter\n   *  @constructor\n   *  @param {[String]} type 'lowpass' (default), 'highpass', 'bandpass'\n   *  @return {Object} p5.Filter\n   *  @example\n   *  <div><code>\n   *  var fft, noise, filter;\n   *\n   *  function setup() {\n   *    fill(255, 40, 255);\n   *\n   *    filter = new p5.BandPass();\n   *\n   *    noise = new p5.Noise();\n   *    // disconnect unfiltered noise,\n   *    // and connect to filter\n   *    noise.disconnect();\n   *    noise.connect(filter);\n   *    noise.start();\n   *\n   *    fft = new p5.FFT();\n   *  }\n   *\n   *  function draw() {\n   *    background(30);\n   *\n   *    // set the BandPass frequency based on mouseX\n   *    var freq = map(mouseX, 0, width, 20, 10000);\n   *    filter.freq(freq);\n   *    // give the filter a narrow band (lower res = wider bandpass)\n   *    filter.res(50);\n   *\n   *    // draw filtered spectrum\n   *    var spectrum = fft.analyze();\n   *    noStroke();\n   *    for (var i = 0; i < spectrum.length; i++) {\n   *      var x = map(i, 0, spectrum.length, 0, width);\n   *      var h = -height + map(spectrum[i], 0, 255, height, 0);\n   *      rect(x, height, width/spectrum.length, h);\n   *    }\n   *    \n   *    isMouseOverCanvas();\n   *  }\n   *\n   *  function isMouseOverCanvas() {\n   *    var mX = mouseX, mY = mouseY;\n   *    if (mX > 0 && mX < width && mY < height && mY > 0) {\n   *      noise.amp(0.5, 0.2);\n   *    } else {\n   *      noise.amp(0, 0.2);\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.Filter = function (type) {\n    this.ac = p5sound.audiocontext;\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain();\n    /**\n     *  The p5.Filter is built with a\n     *  <a href=\"http://www.w3.org/TR/webaudio/#BiquadFilterNode\" target=\"_blank\" rel=\"external\">\n     *  Web Audio BiquadFilter Node</a>.\n     *  \n     *  @property biquadFilter\n     *  @type {Object}  Web Audio Delay Node\n     */\n    this.biquad = this.ac.createBiquadFilter();\n    this.input.connect(this.biquad);\n    this.biquad.connect(this.output);\n    this.connect();\n    if (type) {\n      this.setType(type);\n    }\n    // add to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Filter an audio signal according to a set\n   *  of filter parameters.\n   *  \n   *  @method  process\n   *  @param  {Object} Signal  An object that outputs audio\n   *  @param {[Number]} freq Frequency in Hz, from 10 to 22050\n   *  @param {[Number]} res Resonance/Width of the filter frequency\n   *                        from 0.001 to 1000\n   */\n  p5.Filter.prototype.process = function (src, freq, res) {\n    src.connect(this.input);\n    this.set(freq, res);\n  };\n  /**\n   *  Set the frequency and the resonance of the filter.\n   *\n   *  @method  set\n   *  @param {Number} freq Frequency in Hz, from 10 to 22050\n   *  @param {Number} res  Resonance (Q) from 0.001 to 1000\n   *  @param {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   */\n  p5.Filter.prototype.set = function (freq, res, time) {\n    if (freq) {\n      this.freq(freq, time);\n    }\n    if (res) {\n      this.res(res, time);\n    }\n  };\n  /**\n   *  Set the filter frequency, in Hz, from 10 to 22050 (the range of\n   *  human hearing, although in reality most people hear in a narrower\n   *  range).\n   *\n   *  @method  freq\n   *  @param  {Number} freq Filter Frequency\n   *  @param {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   *  @return {Number} value  Returns the current frequency value\n   */\n  p5.Filter.prototype.freq = function (freq, time) {\n    var self = this;\n    var t = time || 0;\n    if (freq <= 0=\"\" 1000=\"\" 0)=\"\" {=\"\" freq=\"1;\" }=\"\" if=\"\" (typeof=\"\" 'number')=\"\" self.biquad.frequency.value=\"freq;\" self.biquad.frequency.cancelscheduledvalues(this.ac.currenttime=\"\" +=\"\" 0.01=\"\" t);=\"\" self.biquad.frequency.exponentialramptovalueattime(freq,=\"\" this.ac.currenttime=\"\" 0.02=\"\" else=\"\" (freq)=\"\" freq.connect(this.biquad.frequency);=\"\" return=\"\" self.biquad.frequency.value;=\"\" };=\"\" **=\"\" *=\"\" controls either=\"\" width=\"\" of=\"\" a=\"\" bandpass=\"\" frequency,=\"\" or=\"\" the=\"\" resonance=\"\" low=\"\" highpass=\"\" cutoff=\"\" frequency.=\"\" @method=\"\" res=\"\" @param=\"\" {number}=\"\" filter=\"\" from=\"\" 0.001=\"\" to=\"\" [timefromnow]=\"\" schedule=\"\" this=\"\" event=\"\" happen=\"\" seconds=\"\" now=\"\" @return=\"\" value=\"\" returns=\"\" current=\"\" p5.filter.prototype.res=\"function\" (res,=\"\" time)=\"\" var=\"\" self=\"this;\" t=\"time\" ||=\"\" 0;=\"\" self.biquad.q.value=\"res;\" self.biquad.q.cancelscheduledvalues(self.ac.currenttime=\"\" self.biquad.q.linearramptovalueattime(res,=\"\" self.ac.currenttime=\"\" (res)=\"\" freq.connect(this.biquad.q);=\"\" self.biquad.q.value;=\"\" set=\"\" type=\"\" p5.filter.=\"\" possible=\"\" types=\"\" include:=\"\" \"lowpass\"=\"\" (default),=\"\" \"highpass\",=\"\" \"bandpass\",=\"\" \"lowshelf\",=\"\" \"highshelf\",=\"\" \"peaking\",=\"\" \"notch\",=\"\" \"allpass\".=\"\" settype=\"\" {string}=\"\" p5.filter.prototype.settype=\"function\" (t)=\"\" this.biquad.type=\"t;\" output=\"\" level=\"\" filter.=\"\" amp=\"\" volume=\"\" amplitude=\"\" between=\"\" and=\"\" 1.0=\"\" [ramptime]=\"\" create=\"\" fade=\"\" that=\"\" lasts=\"\" ramptime=\"\" p5.filter.prototype.amp=\"function\" (vol,=\"\" ramptime,=\"\" tfromnow)=\"\" tfromnow=\"tFromNow\" currentvol=\"this.output.gain.value;\" this.output.gain.cancelscheduledvalues(now);=\"\" this.output.gain.linearramptovalueattime(currentvol,=\"\" 0.001);=\"\" this.output.gain.linearramptovalueattime(vol,=\"\" send=\"\" p5.sound=\"\" web=\"\" audio=\"\" object=\"\" connect=\"\" {object}=\"\" unit=\"\" p5.filter.prototype.connect=\"function\" (unit)=\"\" u=\"unit\" p5.soundout.input;=\"\" this.output.connect(u);=\"\" disconnect=\"\" all=\"\" output.=\"\" p5.filter.prototype.disconnect=\"function\" ()=\"\" this.output.disconnect();=\"\" p5.filter.prototype.dispose=\"function\" remove=\"\" reference=\"\" soundarray=\"\" index=\"p5sound.soundArray.indexOf(this);\" p5sound.soundarray.splice(index,=\"\" 1);=\"\" this.input.disconnect();=\"\" this.input=\"undefined;\" this.output=\"undefined;\" this.biquad.disconnect();=\"\" this.biquad=\"undefined;\" constructor:=\"\" <code=\"\">new p5.LowPass() Filter.\n   *  This is the same as creating a p5.Filter and then calling\n   *  its method <code>setType('lowpass')</code>.\n   *  See p5.Filter for methods.\n   *  \n   *  @method p5.LowPass\n   */\n  p5.LowPass = function () {\n    p5.Filter.call(this, 'lowpass');\n  };\n  p5.LowPass.prototype = Object.create(p5.Filter.prototype);\n  /**\n   *  Constructor: <code>new p5.HighPass()</code> Filter.\n   *  This is the same as creating a p5.Filter and then calling\n   *  its method <code>setType('highpass')</code>.\n   *  See p5.Filter for methods.\n   *  \n   *  @method p5.HighPass\n   */\n  p5.HighPass = function () {\n    p5.Filter.call(this, 'highpass');\n  };\n  p5.HighPass.prototype = Object.create(p5.Filter.prototype);\n  /**\n   *  Constructor: <code>new p5.BandPass()</code> Filter.\n   *  This is the same as creating a p5.Filter and then calling\n   *  its method <code>setType('bandpass')</code>.\n   *  See p5.Filter for methods. \n   *  \n   *  @method p5.BandPass\n   */\n  p5.BandPass = function () {\n    p5.Filter.call(this, 'bandpass');\n  };\n  p5.BandPass.prototype = Object.create(p5.Filter.prototype);\n}(master);\nvar delay;\ndelay = function () {\n  'use strict';\n  var p5sound = master;\n  var Filter = filter;\n  /**\n   *  Delay is an echo effect. It processes an existing sound source,\n   *  and outputs a delayed version of that sound. The p5.Delay can\n   *  produce different effects depending on the delayTime, feedback,\n   *  filter, and type. In the example below, a feedback of 0.5 will\n   *  produce a looping delay that decreases in volume by\n   *  50% each repeat. A filter will cut out the high frequencies so\n   *  that the delay does not sound as piercing as the original source.\n   *  \n   *  @class p5.Delay\n   *  @constructor\n   *  @return {Object} Returns a p5.Delay object\n   *  @example\n   *  <div><code>\n   *  var noise, env, delay;\n   *  \n   *  function setup() {\n   *    background(0);\n   *    noStroke();\n   *    fill(255);\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *    \n   *    noise = new p5.Noise('brown');\n   *    noise.amp(0);\n   *    noise.start();\n   *    \n   *    delay = new p5.Delay();\n   *\n   *    // delay.process() accepts 4 parameters:\n   *    // source, delayTime, feedback, filter frequency\n   *    // play with these numbers!!\n   *    delay.process(noise, .12, .7, 2300);\n   *    \n   *    // play the noise with an envelope,\n   *    // a series of fades ( time / value pairs )\n   *    env = new p5.Env(.01, 0.2, .2, .1);\n   *  }\n   *\n   *  // mouseClick triggers envelope\n   *  function mouseClicked() {\n   *    // is mouse over canvas?\n   *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n   *      env.play(noise);\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.Delay = function () {\n    this.ac = p5sound.audiocontext;\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain();\n    this._split = this.ac.createChannelSplitter(2);\n    this._merge = this.ac.createChannelMerger(2);\n    this._leftGain = this.ac.createGain();\n    this._rightGain = this.ac.createGain();\n    /**\n     *  The p5.Delay is built with two\n     *  <a href=\"http://www.w3.org/TR/webaudio/#DelayNode\" target=\"_blank\" rel=\"external\">\n     *  Web Audio Delay Nodes</a>, one for each stereo channel.\n     *  \n     *  @property leftDelay\n     *  @type {Object}  Web Audio Delay Node\n     */\n    this.leftDelay = this.ac.createDelay();\n    /**\n     *  The p5.Delay is built with two\n     *  <a href=\"http://www.w3.org/TR/webaudio/#DelayNode\" target=\"_blank\" rel=\"external\">\n     *  Web Audio Delay Nodes</a>, one for each stereo channel.\n     *  \n     *  @property rightDelay\n     *  @type {Object}  Web Audio Delay Node\n     */\n    this.rightDelay = this.ac.createDelay();\n    this._leftFilter = new p5.Filter();\n    this._rightFilter = new p5.Filter();\n    this._leftFilter.disconnect();\n    this._rightFilter.disconnect();\n    this._leftFilter.biquad.frequency.setValueAtTime(1200, this.ac.currentTime);\n    this._rightFilter.biquad.frequency.setValueAtTime(1200, this.ac.currentTime);\n    this._leftFilter.biquad.Q.setValueAtTime(0.3, this.ac.currentTime);\n    this._rightFilter.biquad.Q.setValueAtTime(0.3, this.ac.currentTime);\n    // graph routing\n    this.input.connect(this._split);\n    this.leftDelay.connect(this._leftGain);\n    this.rightDelay.connect(this._rightGain);\n    this._leftGain.connect(this._leftFilter.input);\n    this._rightGain.connect(this._rightFilter.input);\n    this._merge.connect(this.output);\n    this.output.connect(p5.soundOut.input);\n    this._leftFilter.biquad.gain.setValueAtTime(1, this.ac.currentTime);\n    this._rightFilter.biquad.gain.setValueAtTime(1, this.ac.currentTime);\n    // default routing\n    this.setType(0);\n    this._maxDelay = this.leftDelay.delayTime.maxValue;\n    // add this p5.SoundFile to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Add delay to an audio signal according to a set\n   *  of delay parameters.\n   *  \n   *  @method  process\n   *  @param  {Object} Signal  An object that outputs audio\n   *  @param  {Number} [delayTime] Time (in seconds) of the delay/echo.\n   *                               Some browsers limit delayTime to\n   *                               1 second.\n   *  @param  {Number} [feedback]  sends the delay back through itself\n   *                               in a loop that decreases in volume\n   *                               each time.\n   *  @param  {Number} [lowPass]   Cutoff frequency. Only frequencies\n   *                               below the lowPass will be part of the\n   *                               delay.\n   */\n  p5.Delay.prototype.process = function (src, _delayTime, _feedback, _filter) {\n    var feedback = _feedback || 0;\n    var delayTime = _delayTime || 0;\n    if (feedback >= 1) {\n      throw new Error('Feedback value will force a positive feedback loop.');\n    }\n    if (delayTime >= this._maxDelay) {\n      throw new Error('Delay Time exceeds maximum delay time of ' + this._maxDelay + ' second.');\n    }\n    src.connect(this.input);\n    this.leftDelay.delayTime.setValueAtTime(delayTime, this.ac.currentTime);\n    this.rightDelay.delayTime.setValueAtTime(delayTime, this.ac.currentTime);\n    this._leftGain.gain.setValueAtTime(feedback, this.ac.currentTime);\n    this._rightGain.gain.setValueAtTime(feedback, this.ac.currentTime);\n    if (_filter) {\n      this._leftFilter.freq(_filter);\n      this._rightFilter.freq(_filter);\n    }\n  };\n  /**\n   *  Set the delay (echo) time, in seconds. Usually this value will be\n   *  a floating point number between 0.0 and 1.0.\n   *\n   *  @method  delayTime\n   *  @param {Number} delayTime Time (in seconds) of the delay\n   */\n  p5.Delay.prototype.delayTime = function (t) {\n    // if t is an audio node...\n    if (typeof t !== 'number') {\n      t.connect(this.leftDelay.delayTime);\n      t.connect(this.rightDelay.delayTime);\n    } else {\n      this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime);\n      this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime);\n      this.leftDelay.delayTime.linearRampToValueAtTime(t, this.ac.currentTime);\n      this.rightDelay.delayTime.linearRampToValueAtTime(t, this.ac.currentTime);\n    }\n  };\n  /**\n   *  Feedback occurs when Delay sends its signal back through its input\n   *  in a loop. The feedback amount determines how much signal to send each\n   *  time through the loop. A feedback greater than 1.0 is not desirable because\n   *  it will increase the overall output each time through the loop,\n   *  creating an infinite feedback loop.\n   *  \n   *  @method  feedback\n   *  @param {Number|Object} feedback 0.0 to 1.0, or an object such as an\n   *                                  Oscillator that can be used to\n   *                                  modulate this param\n   */\n  p5.Delay.prototype.feedback = function (f) {\n    // if f is an audio node...\n    if (typeof f !== 'number') {\n      f.connect(this._leftGain.gain);\n      f.connect(this._rightGain.gain);\n    } else if (f >= 1) {\n      throw new Error('Feedback value will force a positive feedback loop.');\n    } else {\n      this._leftGain.gain.exponentialRampToValueAtTime(f, this.ac.currentTime);\n      this._rightGain.gain.exponentialRampToValueAtTime(f, this.ac.currentTime);\n    }\n  };\n  /**\n   *  Set a lowpass filter frequency for the delay. A lowpass filter\n   *  will cut off any frequencies higher than the filter frequency.\n   *   \n   *  @method  filter\n   *  @param {Number|Object} cutoffFreq  A lowpass filter will cut off any \n   *                              frequencies higher than the filter frequency.\n   *  @param {Number|Object} res  Resonance of the filter frequency\n   *                              cutoff, or an object (i.e. a p5.Oscillator)\n   *                              that can be used to modulate this parameter.\n   *                              High numbers (i.e. 15) will produce a resonance,\n   *                              low numbers (i.e. .2) will produce a slope.\n   */\n  p5.Delay.prototype.filter = function (freq, q) {\n    this._leftFilter.set(freq, q);\n    this._rightFilter.set(freq, q);\n  };\n  /**\n   *  Choose a preset type of delay. 'pingPong' bounces the signal\n   *  from the left to the right channel to produce a stereo effect.\n   *  Any other parameter will revert to the default delay setting.\n   *  \n   *  @method  setType\n   *  @param {String|Number} type 'pingPong' (1) or 'default' (0)\n   */\n  p5.Delay.prototype.setType = function (t) {\n    if (t === 1) {\n      t = 'pingPong';\n    }\n    this._split.disconnect();\n    this._leftFilter.disconnect();\n    this._rightFilter.disconnect();\n    this._split.connect(this.leftDelay, 0);\n    this._split.connect(this.rightDelay, 1);\n    switch (t) {\n    case 'pingPong':\n      this._rightFilter.setType(this._leftFilter.biquad.type);\n      this._leftFilter.output.connect(this._merge, 0, 0);\n      this._rightFilter.output.connect(this._merge, 0, 1);\n      this._leftFilter.output.connect(this.rightDelay);\n      this._rightFilter.output.connect(this.leftDelay);\n      break;\n    default:\n      this._leftFilter.output.connect(this._merge, 0, 0);\n      this._leftFilter.output.connect(this._merge, 0, 1);\n      this._leftFilter.output.connect(this.leftDelay);\n      this._leftFilter.output.connect(this.rightDelay);\n    }\n  };\n  /**\n   *  Set the output level of the delay effect.\n   *  \n   *  @method  amp\n   *  @param  {Number} volume amplitude between 0 and 1.0\n   *  @param {Number} [rampTime] create a fade that lasts rampTime \n   *  @param {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   */\n  p5.Delay.prototype.amp = function (vol, rampTime, tFromNow) {\n    var rampTime = rampTime || 0;\n    var tFromNow = tFromNow || 0;\n    var now = p5sound.audiocontext.currentTime;\n    var currentVol = this.output.gain.value;\n    this.output.gain.cancelScheduledValues(now);\n    this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow + 0.001);\n    this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime + 0.001);\n  };\n  /**\n   *  Send output to a p5.sound or web audio object\n   *  \n   *  @method  connect\n   *  @param  {Object} unit\n   */\n  p5.Delay.prototype.connect = function (unit) {\n    var u = unit || p5.soundOut.input;\n    this.output.connect(u);\n  };\n  /**\n   *  Disconnect all output.\n   *  \n   *  @method disconnect\n   */\n  p5.Delay.prototype.disconnect = function () {\n    this.output.disconnect();\n  };\n  p5.Delay.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.input.disconnect();\n    this.output.disconnect();\n    this._split.disconnect();\n    this._leftFilter.disconnect();\n    this._rightFilter.disconnect();\n    this._merge.disconnect();\n    this._leftGain.disconnect();\n    this._rightGain.disconnect();\n    this.leftDelay.disconnect();\n    this.rightDelay.disconnect();\n    this.input = undefined;\n    this.output = undefined;\n    this._split = undefined;\n    this._leftFilter = undefined;\n    this._rightFilter = undefined;\n    this._merge = undefined;\n    this._leftGain = undefined;\n    this._rightGain = undefined;\n    this.leftDelay = undefined;\n    this.rightDelay = undefined;\n  };\n}(master, filter);\nvar reverb;\nreverb = function () {\n  'use strict';\n  var p5sound = master;\n  var CustomError = errorHandler;\n  /**\n   *  Reverb adds depth to a sound through a large number of decaying\n   *  echoes. It creates the perception that sound is occurring in a\n   *  physical space. The p5.Reverb has paramters for Time (how long does the\n   *  reverb last) and decayRate (how much the sound decays with each echo)\n   *  that can be set with the .set() or .process() methods. The p5.Convolver\n   *  extends p5.Reverb allowing you to recreate the sound of actual physical\n   *  spaces through convolution.\n   *  \n   *  @class p5.Reverb\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *  var soundFile, reverb;\n   *  function preload() {\n   *    soundFile = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    reverb = new p5.Reverb();\n   *    soundFile.disconnect(); // so we'll only hear reverb...\n   *\n   *    // connect soundFile to reverb, process w/\n   *    // 3 second reverbTime, decayRate of 2%\n   *    reverb.process(soundFile, 3, 2);\n   *    soundFile.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Reverb = function () {\n    this.ac = p5sound.audiocontext;\n    this.convolverNode = this.ac.createConvolver();\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain();\n    // otherwise, Safari distorts\n    this.input.gain.value = 0.5;\n    this.input.connect(this.convolverNode);\n    this.convolverNode.connect(this.output);\n    // default params\n    this._seconds = 3;\n    this._decay = 2;\n    this._reverse = false;\n    this._buildImpulse();\n    this.connect();\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Connect a source to the reverb, and assign reverb parameters.\n   *  \n   *  @method  process\n   *  @param  {Object} src     p5.sound / Web Audio object with a sound\n   *                           output.\n   *  @param  {Number} [seconds] Duration of the reverb, in seconds.\n   *                           Min: 0, Max: 10. Defaults to 3.\n   *  @param  {Number} [decayRate] Percentage of decay with each echo.\n   *                            Min: 0, Max: 100. Defaults to 2.\n   *  @param  {Boolean} [reverse] Play the reverb backwards or forwards.\n   */\n  p5.Reverb.prototype.process = function (src, seconds, decayRate, reverse) {\n    src.connect(this.input);\n    var rebuild = false;\n    if (seconds) {\n      this._seconds = seconds;\n      rebuild = true;\n    }\n    if (decayRate) {\n      this._decay = decayRate;\n    }\n    if (reverse) {\n      this._reverse = reverse;\n    }\n    if (rebuild) {\n      this._buildImpulse();\n    }\n  };\n  /**\n   *  Set the reverb settings. Similar to .process(), but without\n   *  assigning a new input.\n   *  \n   *  @method  set\n   *  @param  {Number} [seconds] Duration of the reverb, in seconds.\n   *                           Min: 0, Max: 10. Defaults to 3.\n   *  @param  {Number} [decayRate] Percentage of decay with each echo.\n   *                            Min: 0, Max: 100. Defaults to 2.\n   *  @param  {Boolean} [reverse] Play the reverb backwards or forwards.\n   */\n  p5.Reverb.prototype.set = function (seconds, decayRate, reverse) {\n    var rebuild = false;\n    if (seconds) {\n      this._seconds = seconds;\n      rebuild = true;\n    }\n    if (decayRate) {\n      this._decay = decayRate;\n    }\n    if (reverse) {\n      this._reverse = reverse;\n    }\n    if (rebuild) {\n      this._buildImpulse();\n    }\n  };\n  /**\n   *  Set the output level of the delay effect.\n   *  \n   *  @method  amp\n   *  @param  {Number} volume amplitude between 0 and 1.0\n   *  @param  {Number} [rampTime] create a fade that lasts rampTime \n   *  @param  {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   */\n  p5.Reverb.prototype.amp = function (vol, rampTime, tFromNow) {\n    var rampTime = rampTime || 0;\n    var tFromNow = tFromNow || 0;\n    var now = p5sound.audiocontext.currentTime;\n    var currentVol = this.output.gain.value;\n    this.output.gain.cancelScheduledValues(now);\n    this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow + 0.001);\n    this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime + 0.001);\n  };\n  /**\n   *  Send output to a p5.sound or web audio object\n   *  \n   *  @method  connect\n   *  @param  {Object} unit\n   */\n  p5.Reverb.prototype.connect = function (unit) {\n    var u = unit || p5.soundOut.input;\n    this.output.connect(u.input ? u.input : u);\n  };\n  /**\n   *  Disconnect all output.\n   *  \n   *  @method disconnect\n   */\n  p5.Reverb.prototype.disconnect = function () {\n    this.output.disconnect();\n  };\n  /**\n   *  Inspired by Simple Reverb by Jordan Santell\n   *  https://github.com/web-audio-components/simple-reverb/blob/master/index.js\n   * \n   *  Utility function for building an impulse response\n   *  based on the module parameters.\n   *\n   *  @private\n   */\n  p5.Reverb.prototype._buildImpulse = function () {\n    var rate = this.ac.sampleRate;\n    var length = rate * this._seconds;\n    var decay = this._decay;\n    var impulse = this.ac.createBuffer(2, length, rate);\n    var impulseL = impulse.getChannelData(0);\n    var impulseR = impulse.getChannelData(1);\n    var n, i;\n    for (i = 0; i < length; i++) {\n      n = this.reverse ? length - i : i;\n      impulseL[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);\n      impulseR[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);\n    }\n    this.convolverNode.buffer = impulse;\n  };\n  p5.Reverb.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    if (this.convolverNode) {\n      this.convolverNode.buffer = null;\n      this.convolverNode = null;\n    }\n    if (typeof this.output !== 'undefined') {\n      this.output.disconnect();\n      this.output = null;\n    }\n    if (typeof this.panner !== 'undefined') {\n      this.panner.disconnect();\n      this.panner = null;\n    }\n  };\n  // =======================================================================\n  //                          *** p5.Convolver ***\n  // =======================================================================\n  /**\n   *  <p>p5.Convolver extends p5.Reverb. It can emulate the sound of real\n   *  physical spaces through a process called <a href=\"\n   *  https://en.wikipedia.org/wiki/Convolution_reverb#Real_space_simulation\">\n   *  convolution</a>.</p>\n   *  \n   *  <p>Convolution multiplies any audio input by an \"impulse response\"\n   *  to simulate the dispersion of sound over time. The impulse response is\n   *  generated from an audio file that you provide. One way to\n   *  generate an impulse response is to pop a balloon in a reverberant space\n   *  and record the echo. Convolution can also be used to experiment with\n   *  sound.</p>\n   *\n   *  <p>Use the method <code>createConvolution(path)</code> to instantiate a\n   *  p5.Convolver with a path to your impulse response audio file.</p>\n   *  \n   *  @class p5.Convolver\n   *  @constructor\n   *  @param  {String}   path     path to a sound file\n   *  @param  {Function} [callback] function to call when loading succeeds\n   *  @param  {Function} [errorCallback] function to call if loading fails.\n   *                                     This function will receive an error or\n   *                                     XMLHttpRequest object with information\n   *                                     about what went wrong.\n   *  @example\n   *  <div><code>\n   *  var cVerb, sound;\n   *  function preload() {\n   *    // We have both MP3 and OGG versions of all sound assets\n   *    soundFormats('ogg', 'mp3');\n   *    \n   *    // Try replacing 'bx-spring' with other soundfiles like\n   *    // 'concrete-tunnel' 'small-plate' 'drum' 'beatbox'\n   *    cVerb = createConvolver('assets/bx-spring.mp3');\n   *\n   *    // Try replacing 'Damscray_DancingTiger' with\n   *    // 'beat', 'doorbell', lucky_dragons_-_power_melody'\n   *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *  \n   *  function setup() {\n   *    // disconnect from master output...\n   *    sound.disconnect();\n   *    \n   *    // ...and process with cVerb\n   *    // so that we only hear the convolution\n   *    cVerb.process(sound);\n   *    \n   *    sound.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Convolver = function (path, callback, errorCallback) {\n    this.ac = p5sound.audiocontext;\n    /**\n     *  Internally, the p5.Convolver uses the a\n     *  <a href=\"http://www.w3.org/TR/webaudio/#ConvolverNode\" target=\"_blank\" rel=\"external\">\n     *  Web Audio Convolver Node</a>.\n     *  \n     *  @property convolverNode\n     *  @type {Object}  Web Audio Convolver Node\n     */\n    this.convolverNode = this.ac.createConvolver();\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain();\n    // otherwise, Safari distorts\n    this.input.gain.value = 0.5;\n    this.input.connect(this.convolverNode);\n    this.convolverNode.connect(this.output);\n    if (path) {\n      this.impulses = [];\n      this._loadBuffer(path, callback, errorCallback);\n    } else {\n      // parameters\n      this._seconds = 3;\n      this._decay = 2;\n      this._reverse = false;\n      this._buildImpulse();\n    }\n    this.connect();\n    p5sound.soundArray.push(this);\n  };\n  p5.Convolver.prototype = Object.create(p5.Reverb.prototype);\n  p5.prototype.registerPreloadMethod('createConvolver', p5.prototype);\n  /**\n   *  Create a p5.Convolver. Accepts a path to a soundfile \n   *  that will be used to generate an impulse response.\n   *\n   *  @method  createConvolver\n   *  @param  {String}   path     path to a sound file\n   *  @param  {Function} [callback] function to call if loading is successful.\n   *                                The object will be passed in as the argument\n   *                                to the callback function.\n   *  @param  {Function} [errorCallback] function to call if loading is not successful.\n   *                                A custom error will be passed in as the argument\n   *                                to the callback function.\n   *  @return {p5.Convolver}\n   *  @example\n   *  <div><code>\n   *  var cVerb, sound;\n   *  function preload() {\n   *    // We have both MP3 and OGG versions of all sound assets\n   *    soundFormats('ogg', 'mp3');\n   *    \n   *    // Try replacing 'bx-spring' with other soundfiles like\n   *    // 'concrete-tunnel' 'small-plate' 'drum' 'beatbox'\n   *    cVerb = createConvolver('assets/bx-spring.mp3');\n   *\n   *    // Try replacing 'Damscray_DancingTiger' with\n   *    // 'beat', 'doorbell', lucky_dragons_-_power_melody'\n   *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *  \n   *  function setup() {\n   *    // disconnect from master output...\n   *    sound.disconnect();\n   *    \n   *    // ...and process with cVerb\n   *    // so that we only hear the convolution\n   *    cVerb.process(sound);\n   *    \n   *    sound.play();\n   *  }\n   *  </code></div>\n   */\n  p5.prototype.createConvolver = function (path, callback, errorCallback) {\n    // if loading locally without a server\n    if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n      alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n    }\n    var cReverb = new p5.Convolver(path, callback, errorCallback);\n    cReverb.impulses = [];\n    return cReverb;\n  };\n  /**\n   *  Private method to load a buffer as an Impulse Response,\n   *  assign it to the convolverNode, and add to the Array of .impulses.\n   *  \n   *  @param   {String}   path\n   *  @param   {Function} callback\n   *  @param   {Function} errorCallback\n   *  @private\n   */\n  p5.Convolver.prototype._loadBuffer = function (path, callback, errorCallback) {\n    var path = p5.prototype._checkFileFormats(path);\n    var self = this;\n    var errorTrace = new Error().stack;\n    var ac = p5.prototype.getAudioContext();\n    var request = new XMLHttpRequest();\n    request.open('GET', path, true);\n    request.responseType = 'arraybuffer';\n    request.onload = function () {\n      if (request.status == 200) {\n        // on success loading file:\n        ac.decodeAudioData(request.response, function (buff) {\n          var buffer = {};\n          var chunks = path.split('/');\n          buffer.name = chunks[chunks.length - 1];\n          buffer.audioBuffer = buff;\n          self.impulses.push(buffer);\n          self.convolverNode.buffer = buffer.audioBuffer;\n          if (callback) {\n            callback(buffer);\n          }\n        }, // error decoding buffer. \"e\" is undefined in Chrome 11/22/2015\n        function (e) {\n          var err = new CustomError('decodeAudioData', errorTrace, self.url);\n          var msg = 'AudioContext error at decodeAudioData for ' + self.url;\n          if (errorCallback) {\n            err.msg = msg;\n            errorCallback(err);\n          } else {\n            console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n          }\n        });\n      } else {\n        var err = new CustomError('loadConvolver', errorTrace, self.url);\n        var msg = 'Unable to load ' + self.url + '. The request status was: ' + request.status + ' (' + request.statusText + ')';\n        if (errorCallback) {\n          err.message = msg;\n          errorCallback(err);\n        } else {\n          console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n        }\n      }\n    };\n    // if there is another error, aside from 404...\n    request.onerror = function (e) {\n      var err = new CustomError('loadConvolver', errorTrace, self.url);\n      var msg = 'There was no response from the server at ' + self.url + '. Check the url and internet connectivity.';\n      if (errorCallback) {\n        err.message = msg;\n        errorCallback(err);\n      } else {\n        console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n      }\n    };\n    request.send();\n  };\n  p5.Convolver.prototype.set = null;\n  /**\n   *  Connect a source to the reverb, and assign reverb parameters.\n   *  \n   *  @method  process\n   *  @param  {Object} src     p5.sound / Web Audio object with a sound\n   *                           output.\n   *  @example\n   *  <div><code>\n   *  var cVerb, sound;\n   *  function preload() {\n   *    soundFormats('ogg', 'mp3');\n   *    \n   *    cVerb = createConvolver('assets/concrete-tunnel.mp3');\n   *\n   *    sound = loadSound('assets/beat.mp3');\n   *  }\n   *  \n   *  function setup() {\n   *    // disconnect from master output...\n   *    sound.disconnect();\n   *    \n   *    // ...and process with (i.e. connect to) cVerb\n   *    // so that we only hear the convolution\n   *    cVerb.process(sound);\n   *    \n   *    sound.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Convolver.prototype.process = function (src) {\n    src.connect(this.input);\n  };\n  /**\n   *  If you load multiple impulse files using the .addImpulse method,\n   *  they will be stored as Objects in this Array. Toggle between them\n   *  with the <code>toggleImpulse(id)</code> method.\n   *  \n   *  @property impulses\n   *  @type {Array} Array of Web Audio Buffers\n   */\n  p5.Convolver.prototype.impulses = [];\n  /**\n   *  Load and assign a new Impulse Response to the p5.Convolver.\n   *  The impulse is added to the <code>.impulses</code> array. Previous\n   *  impulses can be accessed with the <code>.toggleImpulse(id)</code>\n   *  method.\n   *  \n   *  @method  addImpulse\n   *  @param  {String}   path     path to a sound file\n   *  @param  {Function} callback function (optional)\n   *  @param  {Function} errorCallback function (optional)\n   */\n  p5.Convolver.prototype.addImpulse = function (path, callback, errorCallback) {\n    // if loading locally without a server\n    if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n      alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n    }\n    this._loadBuffer(path, callback, errorCallback);\n  };\n  /**\n   *  Similar to .addImpulse, except that the <code>.impulses</code>\n   *  Array is reset to save memory. A new <code>.impulses</code>\n   *  array is created with this impulse as the only item. \n   *\n   *  @method  resetImpulse\n   *  @param  {String}   path     path to a sound file\n   *  @param  {Function} callback function (optional)\n   *  @param  {Function} errorCallback function (optional)\n   */\n  p5.Convolver.prototype.resetImpulse = function (path, callback, errorCallback) {\n    // if loading locally without a server\n    if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n      alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n    }\n    this.impulses = [];\n    this._loadBuffer(path, callback, errorCallback);\n  };\n  /**\n   *  If you have used <code>.addImpulse()</code> to add multiple impulses\n   *  to a p5.Convolver, then you can use this method to toggle between\n   *  the items in the <code>.impulses</code> Array. Accepts a parameter\n   *  to identify which impulse you wish to use, identified either by its\n   *  original filename (String) or by its position in the <code>.impulses\n   *  </code> Array (Number).<br>\n   *  You can access the objects in the .impulses Array directly. Each\n   *  Object has two attributes: an <code>.audioBuffer</code> (type:\n   *  Web Audio <a href=\"\n   *  http://webaudio.github.io/web-audio-api/#the-audiobuffer-interface\">\n   *  AudioBuffer)</a> and a <code>.name</code>, a String that corresponds\n   *  with the original filename. \n   *  \n   *  @method toggleImpulse\n   *  @param {String|Number} id Identify the impulse by its original filename\n   *                            (String), or by its position in the\n   *                            <code>.impulses</code> Array (Number).\n   */\n  p5.Convolver.prototype.toggleImpulse = function (id) {\n    if (typeof id === 'number' && id < this.impulses.length) {\n      this.convolverNode.buffer = this.impulses[id].audioBuffer;\n    }\n    if (typeof id === 'string') {\n      for (var i = 0; i < this.impulses.length; i++) {\n        if (this.impulses[i].name === id) {\n          this.convolverNode.buffer = this.impulses[i].audioBuffer;\n          break;\n        }\n      }\n    }\n  };\n  p5.Convolver.prototype.dispose = function () {\n    // remove all the Impulse Response buffers\n    for (var i in this.impulses) {\n      this.impulses[i] = null;\n    }\n    this.convolverNode.disconnect();\n    this.concolverNode = null;\n    if (typeof this.output !== 'undefined') {\n      this.output.disconnect();\n      this.output = null;\n    }\n    if (typeof this.panner !== 'undefined') {\n      this.panner.disconnect();\n      this.panner = null;\n    }\n  };\n}(master, errorHandler, sndcore);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_TimelineState;\nTone_core_TimelineState = function (Tone) {\n  'use strict';\n  Tone.TimelineState = function (initial) {\n    Tone.Timeline.call(this);\n    this._initial = initial;\n  };\n  Tone.extend(Tone.TimelineState, Tone.Timeline);\n  Tone.TimelineState.prototype.getStateAtTime = function (time) {\n    var event = this.getEvent(time);\n    if (event !== null) {\n      return event.state;\n    } else {\n      return this._initial;\n    }\n  };\n  Tone.TimelineState.prototype.setStateAtTime = function (state, time) {\n    this.addEvent({\n      'state': state,\n      'time': this.toSeconds(time)\n    });\n  };\n  return Tone.TimelineState;\n}(Tone_core_Tone, Tone_core_Timeline);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Clock;\nTone_core_Clock = function (Tone) {\n  'use strict';\n  Tone.Clock = function () {\n    var options = this.optionsObject(arguments, [\n      'callback',\n      'frequency'\n    ], Tone.Clock.defaults);\n    this.callback = options.callback;\n    this._lookAhead = 'auto';\n    this._computedLookAhead = 1 / 60;\n    this._threshold = 0.5;\n    this._nextTick = -1;\n    this._lastUpdate = 0;\n    this._loopID = -1;\n    this.frequency = new Tone.TimelineSignal(options.frequency, Tone.Type.Frequency);\n    this.ticks = 0;\n    this._state = new Tone.TimelineState(Tone.State.Stopped);\n    this._boundLoop = this._loop.bind(this);\n    this._readOnly('frequency');\n    this._loop();\n  };\n  Tone.extend(Tone.Clock);\n  Tone.Clock.defaults = {\n    'callback': Tone.noOp,\n    'frequency': 1,\n    'lookAhead': 'auto'\n  };\n  Object.defineProperty(Tone.Clock.prototype, 'state', {\n    get: function () {\n      return this._state.getStateAtTime(this.now());\n    }\n  });\n  Object.defineProperty(Tone.Clock.prototype, 'lookAhead', {\n    get: function () {\n      return this._lookAhead;\n    },\n    set: function (val) {\n      if (val === 'auto') {\n        this._lookAhead = 'auto';\n      } else {\n        this._lookAhead = this.toSeconds(val);\n      }\n    }\n  });\n  Tone.Clock.prototype.start = function (time, offset) {\n    time = this.toSeconds(time);\n    if (this._state.getStateAtTime(time) !== Tone.State.Started) {\n      this._state.addEvent({\n        'state': Tone.State.Started,\n        'time': time,\n        'offset': offset\n      });\n    }\n    return this;\n  };\n  Tone.Clock.prototype.stop = function (time) {\n    time = this.toSeconds(time);\n    if (this._state.getStateAtTime(time) !== Tone.State.Stopped) {\n      this._state.setStateAtTime(Tone.State.Stopped, time);\n    }\n    return this;\n  };\n  Tone.Clock.prototype.pause = function (time) {\n    time = this.toSeconds(time);\n    if (this._state.getStateAtTime(time) === Tone.State.Started) {\n      this._state.setStateAtTime(Tone.State.Paused, time);\n    }\n    return this;\n  };\n  Tone.Clock.prototype._loop = function (time) {\n    this._loopID = requestAnimationFrame(this._boundLoop);\n    if (this._lookAhead === 'auto') {\n      if (!this.isUndef(time)) {\n        var diff = (time - this._lastUpdate) / 1000;\n        this._lastUpdate = time;\n        if (diff < this._threshold) {\n          this._computedLookAhead = (9 * this._computedLookAhead + diff) / 10;\n        }\n      }\n    } else {\n      this._computedLookAhead = this._lookAhead;\n    }\n    var now = this.now();\n    var lookAhead = this._computedLookAhead * 2;\n    var event = this._state.getEvent(now + lookAhead);\n    var state = Tone.State.Stopped;\n    if (event) {\n      state = event.state;\n      if (this._nextTick === -1 && state === Tone.State.Started) {\n        this._nextTick = event.time;\n        if (!this.isUndef(event.offset)) {\n          this.ticks = event.offset;\n        }\n      }\n    }\n    if (state === Tone.State.Started) {\n      while (now + lookAhead > this._nextTick) {\n        if (now > this._nextTick + this._threshold) {\n          this._nextTick = now;\n        }\n        var tickTime = this._nextTick;\n        this._nextTick += 1 / this.frequency.getValueAtTime(this._nextTick);\n        this.callback(tickTime);\n        this.ticks++;\n      }\n    } else if (state === Tone.State.Stopped) {\n      this._nextTick = -1;\n      this.ticks = 0;\n    }\n  };\n  Tone.Clock.prototype.getStateAtTime = function (time) {\n    return this._state.getStateAtTime(time);\n  };\n  Tone.Clock.prototype.dispose = function () {\n    cancelAnimationFrame(this._loopID);\n    Tone.TimelineState.prototype.dispose.call(this);\n    this._writable('frequency');\n    this.frequency.dispose();\n    this.frequency = null;\n    this._boundLoop = Tone.noOp;\n    this._nextTick = Infinity;\n    this.callback = null;\n    this._state.dispose();\n    this._state = null;\n  };\n  return Tone.Clock;\n}(Tone_core_Tone, Tone_signal_TimelineSignal);\nvar metro;\nmetro = function () {\n  'use strict';\n  var p5sound = master;\n  // requires the Tone.js library's Clock (MIT license, Yotam Mann)\n  // https://github.com/TONEnoTONE/Tone.js/\n  var Clock = Tone_core_Clock;\n  var ac = p5sound.audiocontext;\n  // var upTick = false;\n  p5.Metro = function () {\n    this.clock = new Clock({ 'callback': this.ontick.bind(this) });\n    this.syncedParts = [];\n    this.bpm = 120;\n    // gets overridden by p5.Part\n    this._init();\n    this.tickCallback = function () {\n    };\n  };\n  var prevTick = 0;\n  var tatumTime = 0;\n  p5.Metro.prototype.ontick = function (tickTime) {\n    var elapsedTime = tickTime - prevTick;\n    var secondsFromNow = tickTime - p5sound.audiocontext.currentTime;\n    if (elapsedTime - tatumTime <= 0=\"\" -0.02)=\"\" {=\"\" return;=\"\" }=\"\" else=\"\" prevtick=\"tickTime;\" for=\"\" all=\"\" of=\"\" the=\"\" active=\"\" things=\"\" on=\"\" metro:=\"\" (var=\"\" i=\"\" in=\"\" this.syncedparts)=\"\" var=\"\" thispart=\"this.syncedParts[i];\" thispart.incrementstep(secondsfromnow);=\"\" each=\"\" synced=\"\" source=\"\" keeps=\"\" track=\"\" its=\"\" own=\"\" beat=\"\" number=\"\" j=\"\" thispart.phrases)=\"\" thisphrase=\"thisPart.phrases[j];\" phrasearray=\"thisPhrase.sequence;\" bnum=\"this.metroTicks\" %=\"\" phrasearray.length;=\"\" if=\"\" (phrasearray[bnum]=\"\" !=\"=\" &&=\"\" (this.metroticks=\"\" <=\"\" phrasearray.length=\"\" ||=\"\" !thisphrase.looping))=\"\" thisphrase.callback(secondsfromnow,=\"\" phrasearray[bnum]);=\"\" this.metroticks=\"\" +=\"1;\" this.tickcallback(secondsfromnow);=\"\" };=\"\" p5.metro.prototype.setbpm=\"function\" (bpm,=\"\" ramptime)=\"\" beattime=\"60\" (bpm=\"\" *=\"\" this.tatums);=\"\" now=\"p5sound.audiocontext.currentTime;\" tatumtime=\"beatTime;\" ramptime=\"rampTime\" 0;=\"\" this.clock.frequency.setvalueattime(this.clock.frequency.value,=\"\" now);=\"\" this.clock.frequency.linearramptovalueattime(bpm,=\"\" ramptime);=\"\" this.bpm=\"bpm;\" p5.metro.prototype.getbpm=\"function\" (tempo)=\"\" return=\"\" this.clock.getrate()=\"\" this.tatums=\"\" 60;=\"\" p5.metro.prototype._init=\"function\" ()=\"\" clear=\"\" existing=\"\" parts,=\"\" add=\"\" only=\"\" this=\"\" one=\"\" p5.metro.prototype.resetsync=\"function\" (part)=\"\" this.syncedparts=\"[part];\" push=\"\" a=\"\" new=\"\" part=\"\" to=\"\" array=\"\" p5.metro.prototype.pushsync=\"function\" this.syncedparts.push(part);=\"\" p5.metro.prototype.start=\"function\" (timefromnow)=\"\" t=\"timeFromNow\" this.clock.start(now=\"\" t);=\"\" this.setbpm(this.bpm);=\"\" p5.metro.prototype.stop=\"function\" (this.clock._oscillator)=\"\" this.clock.stop(now=\"\" p5.metro.prototype.beatlength=\"function\" (tatums)=\"\" tatums=\"\" 4;=\"\" }(master,=\"\" tone_core_clock);=\"\" looper;=\"\" looper=\"function\" 'use=\"\" strict';=\"\" p5sound=\"master;\" bpm=\"120;\" **=\"\" set=\"\" global=\"\" tempo,=\"\" beats=\"\" per=\"\" minute,=\"\" p5.parts.=\"\" method=\"\" will=\"\" impact=\"\" @param=\"\" {number}=\"\" minute=\"\" seconds=\"\" from=\"\" p5.prototype.setbpm=\"function\" p5sound.parts)=\"\" p5sound.parts[i].setbpm(bpm,=\"\" <p=\"\">A phrase is a pattern of musical events over time, i.e.\n   *  a series of notes and rests.<p></p>\n   *  \n   *  <p>Phrases must be added to a p5.Part for playback, and\n   *  each part can play multiple phrases at the same time.\n   *  For example, one Phrase might be a kick drum, another\n   *  could be a snare, and another could be the bassline.</p>\n   *  \n   *  <p>The first parameter is a name so that the phrase can be\n   *  modified or deleted later. The callback is a a function that\n   *  this phrase will call at every stepfor example it might be\n   *  called <code>playNote(value){}</code>. The array determines\n   *  which value is passed into the callback at each step of the\n   *  phrase. It can be numbers, an object with multiple numbers,\n   *  or a zero (0) indicates a rest so the callback won't be called).</p>\n   * \n   *  @class p5.Phrase\n   *  @constructor\n   *  @param {String}   name     Name so that you can access the Phrase.\n   *  @param {Function} callback The name of a function that this phrase\n   *                             will call. Typically it will play a sound,\n   *                             and accept two parameters: a time at which\n   *                             to play the sound (in seconds from now),\n   *                             and a value from the sequence array. The\n   *                             time should be passed into the play() or\n   *                             start() method to ensure precision.\n   *  @param {Array}   sequence    Array of values to pass into the callback\n   *                            at each step of the phrase.\n   *  @example\n   *  <div><code>\n   *  var mySound, myPhrase, myPart;\n   *  var pattern = [1,0,0,2,0,2,0,0];\n   *  var msg = 'click to play';\n   *  \n   *  function preload() {\n   *    mySound = loadSound('assets/beatbox.mp3');\n   *  }\n   *  \n   *  function setup() {\n   *    noStroke();\n   *    fill(255);\n   *    textAlign(CENTER);\n   *    masterVolume(0.1);\n   *    \n   *    myPhrase = new p5.Phrase('bbox', makeSound, pattern);\n   *    myPart = new p5.Part();\n   *    myPart.addPhrase(myPhrase);\n   *    myPart.setBPM(60);\n   *  }\n   *\n   *  function draw() {\n   *    background(0);\n   *    text(msg, width/2, height/2);\n   *  }\n   *\n   *  function makeSound(time, playbackRate) {\n   *    mySound.rate(playbackRate);\n   *    mySound.play(time);\n   *  }\n   *  \n   *  function mouseClicked() {\n   *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n   *      myPart.start();\n   *      msg = 'playing pattern';\n   *    }\n   *  }\n   *\n   *  </code></div>\n   */\n  p5.Phrase = function (name, callback, sequence) {\n    this.phraseStep = 0;\n    this.name = name;\n    this.callback = callback;\n    /**\n     * Array of values to pass into the callback\n     * at each step of the phrase. Depending on the callback\n     * function's requirements, these values may be numbers,\n     * strings, or an object with multiple parameters.\n     * Zero (0) indicates a rest.\n     * \n     * @property sequence\n     * @type {Array}\n     */\n    this.sequence = sequence;\n  };\n  /**\n   *  <p>A p5.Part plays back one or more p5.Phrases. Instantiate a part\n   *  with steps and tatums. By default, each step represents 1/16th note.</p>\n   *\n   *  <p>See p5.Phrase for more about musical timing.</p>\n   *  \n   *  @class p5.Part\n   *  @constructor\n   *  @param {Number} [steps]   Steps in the part\n   *  @param {Number} [tatums] Divisions of a beat (default is 1/16, a quarter note)\n   *  @example\n   *  <div><code>\n   *  var box, drum, myPart;\n   *  var boxPat = [1,0,0,2,0,2,0,0];\n   *  var drumPat = [0,1,1,0,2,0,1,0];\n   *  var msg = 'click to play';\n   *  \n   *  function preload() {\n   *    box = loadSound('assets/beatbox.mp3');\n   *    drum = loadSound('assets/drum.mp3');\n   *  }\n   *  \n   *  function setup() {\n   *    noStroke();\n   *    fill(255);\n   *    textAlign(CENTER);\n   *    masterVolume(0.1);\n   *\n   *    var boxPhrase = new p5.Phrase('box', playBox, boxPat);\n   *    var drumPhrase = new p5.Phrase('drum', playDrum, drumPat);\n   *    myPart = new p5.Part();\n   *    myPart.addPhrase(boxPhrase);\n   *    myPart.addPhrase(drumPhrase);\n   *    myPart.setBPM(60);\n   *    masterVolume(0.1);\n   *  }\n   *\n   *  function draw() {\n   *    background(0);\n   *    text(msg, width/2, height/2);\n   *  }\n   *\n   *  function playBox(time, playbackRate) {\n   *    box.rate(playbackRate);\n   *    box.play(time);\n   *  }\n   *  \n   *  function playDrum(time, playbackRate) {\n   *    drum.rate(playbackRate);\n   *    drum.play(time);\n   *  }\n   *  \n   *  function mouseClicked() {\n   *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n   *      myPart.start();\n   *      msg = 'playing part';\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.Part = function (steps, bLength) {\n    this.length = steps || 0;\n    // how many beats\n    this.partStep = 0;\n    this.phrases = [];\n    this.looping = false;\n    this.isPlaying = false;\n    // what does this looper do when it gets to the last step?\n    this.onended = function () {\n      this.stop();\n    };\n    this.tatums = bLength || 0.0625;\n    // defaults to quarter note\n    this.metro = new p5.Metro();\n    this.metro._init();\n    this.metro.beatLength(this.tatums);\n    this.metro.setBPM(bpm);\n    p5sound.parts.push(this);\n    this.callback = function () {\n    };\n  };\n  /**\n   *  Set the tempo of this part, in Beats Per Minute. \n   *  \n   *  @method  setBPM\n   *  @param {Number} BPM      Beats Per Minute\n   *  @param {Number} [rampTime] Seconds from now\n   */\n  p5.Part.prototype.setBPM = function (tempo, rampTime) {\n    this.metro.setBPM(tempo, rampTime);\n  };\n  /**\n   *  Returns the Beats Per Minute of this currently part.\n   *  \n   *  @method getBPM\n   *  @return {Number} \n   */\n  p5.Part.prototype.getBPM = function () {\n    return this.metro.getBPM();\n  };\n  /**\n   *  Start playback of this part. It will play\n   *  through all of its phrases at a speed\n   *  determined by setBPM.\n   *  \n   *  @method  start\n   *  @param  {Number} [time] seconds from now\n   */\n  p5.Part.prototype.start = function (time) {\n    if (!this.isPlaying) {\n      this.isPlaying = true;\n      this.metro.resetSync(this);\n      var t = time || 0;\n      this.metro.start(t);\n    }\n  };\n  /**\n   *  Loop playback of this part. It will begin\n   *  looping through all of its phrases at a speed\n   *  determined by setBPM.\n   *  \n   *  @method  loop\n   *  @param  {Number} [time] seconds from now\n   */\n  p5.Part.prototype.loop = function (time) {\n    this.looping = true;\n    // rest onended function\n    this.onended = function () {\n      this.partStep = 0;\n    };\n    var t = time || 0;\n    this.start(t);\n  };\n  /**\n   *  Tell the part to stop looping.\n   *\n   *  @method  noLoop\n   */\n  p5.Part.prototype.noLoop = function () {\n    this.looping = false;\n    // rest onended function\n    this.onended = function () {\n      this.stop();\n    };\n  };\n  /**\n   *  Stop the part and cue it to step 0.\n   *  \n   *  @method  stop\n   *  @param  {Number} [time] seconds from now\n   */\n  p5.Part.prototype.stop = function (time) {\n    this.partStep = 0;\n    this.pause(time);\n  };\n  /**\n   *  Pause the part. Playback will resume\n   *  from the current step.\n   *  \n   *  @method  pause\n   *  @param  {Number} time seconds from now\n   */\n  p5.Part.prototype.pause = function (time) {\n    this.isPlaying = false;\n    var t = time || 0;\n    this.metro.stop(t);\n  };\n  /**\n   *  Add a p5.Phrase to this Part.\n   *\n   *  @method  addPhrase\n   *  @param {p5.Phrase}   phrase   reference to a p5.Phrase\n   */\n  p5.Part.prototype.addPhrase = function (name, callback, array) {\n    var p;\n    if (arguments.length === 3) {\n      p = new p5.Phrase(name, callback, array);\n    } else if (arguments[0] instanceof p5.Phrase) {\n      p = arguments[0];\n    } else {\n      throw 'invalid input. addPhrase accepts name, callback, array or a p5.Phrase';\n    }\n    this.phrases.push(p);\n    // reset the length if phrase is longer than part's existing length\n    if (p.sequence.length > this.length) {\n      this.length = p.sequence.length;\n    }\n  };\n  /**\n   *  Remove a phrase from this part, based on the name it was\n   *  given when it was created.\n   *  \n   *  @method  removePhrase\n   *  @param  {String} phraseName\n   */\n  p5.Part.prototype.removePhrase = function (name) {\n    for (var i in this.phrases) {\n      if (this.phrases[i].name === name) {\n        this.phrases.split(i, 1);\n      }\n    }\n  };\n  /**\n   *  Get a phrase from this part, based on the name it was\n   *  given when it was created. Now you can modify its array.\n   *  \n   *  @method  getPhrase\n   *  @param  {String} phraseName\n   */\n  p5.Part.prototype.getPhrase = function (name) {\n    for (var i in this.phrases) {\n      if (this.phrases[i].name === name) {\n        return this.phrases[i];\n      }\n    }\n  };\n  /**\n   *  Get a phrase from this part, based on the name it was\n   *  given when it was created. Now you can modify its array.\n   *  \n   *  @method  replaceSequence\n   *  @param  {String} phraseName\n   *  @param  {Array} sequence  Array of values to pass into the callback\n   *                            at each step of the phrase.\n   */\n  p5.Part.prototype.replaceSequence = function (name, array) {\n    for (var i in this.phrases) {\n      if (this.phrases[i].name === name) {\n        this.phrases[i].sequence = array;\n      }\n    }\n  };\n  p5.Part.prototype.incrementStep = function (time) {\n    if (this.partStep < this.length - 1) {\n      this.callback(time);\n      this.partStep += 1;\n    } else {\n      if (this.looping) {\n        this.callback(time);\n      }\n      this.onended();\n      this.partStep = 0;\n    }\n  };\n  /**\n   *  Fire a callback function at every step.\n   *\n   *  @method onStep\n   *  @param  {Function} callback The name of the callback\n   *                              you want to fire\n   *                              on every beat/tatum.\n   */\n  p5.Part.prototype.onStep = function (callback) {\n    this.callback = callback;\n  };\n  // ===============\n  // p5.Score\n  // ===============\n  /**\n   *  A Score consists of a series of Parts. The parts will\n   *  be played back in order. For example, you could have an\n   *  A part, a B part, and a C part, and play them back in this order\n   *  <code>new p5.Score(a, a, b, a, c)</code>\n   *\n   *  @class p5.Score\n   *  @constructor\n   *  @param {p5.Part} part(s) One or multiple parts, to be played in sequence.\n   *  @return {p5.Score}\n   */\n  p5.Score = function () {\n    // for all of the arguments\n    this.parts = [];\n    this.currentPart = 0;\n    var thisScore = this;\n    for (var i in arguments) {\n      this.parts[i] = arguments[i];\n      this.parts[i].nextPart = this.parts[i + 1];\n      this.parts[i].onended = function () {\n        thisScore.resetPart(i);\n        playNextPart(thisScore);\n      };\n    }\n    this.looping = false;\n  };\n  p5.Score.prototype.onended = function () {\n    if (this.looping) {\n      // this.resetParts();\n      this.parts[0].start();\n    } else {\n      this.parts[this.parts.length - 1].onended = function () {\n        this.stop();\n        this.resetParts();\n      };\n    }\n    this.currentPart = 0;\n  };\n  /**\n   *  Start playback of the score.\n   *  \n   *  @method  start\n   */\n  p5.Score.prototype.start = function () {\n    this.parts[this.currentPart].start();\n    this.scoreStep = 0;\n  };\n  /**\n   *  Stop playback of the score.\n   *  \n   *  @method  stop\n   */\n  p5.Score.prototype.stop = function () {\n    this.parts[this.currentPart].stop();\n    this.currentPart = 0;\n    this.scoreStep = 0;\n  };\n  /**\n   *  Pause playback of the score.\n   *  \n   *  @method  pause\n   */\n  p5.Score.prototype.pause = function () {\n    this.parts[this.currentPart].stop();\n  };\n  /**\n   *  Loop playback of the score.\n   *  \n   *  @method  loop\n   */\n  p5.Score.prototype.loop = function () {\n    this.looping = true;\n    this.start();\n  };\n  /**\n   *  Stop looping playback of the score. If it\n   *  is currently playing, this will go into effect\n   *  after the current round of playback completes.\n   *  \n   *  @method  noLoop\n   */\n  p5.Score.prototype.noLoop = function () {\n    this.looping = false;\n  };\n  p5.Score.prototype.resetParts = function () {\n    for (var i in this.parts) {\n      this.resetPart(i);\n    }\n  };\n  p5.Score.prototype.resetPart = function (i) {\n    this.parts[i].stop();\n    this.parts[i].partStep = 0;\n    for (var p in this.parts[i].phrases) {\n      this.parts[i].phrases[p].phraseStep = 0;\n    }\n  };\n  /**\n   *  Set the tempo for all parts in the score\n   *  \n   *  @param {Number} BPM      Beats Per Minute\n   *  @param {Number} rampTime Seconds from now\n   */\n  p5.Score.prototype.setBPM = function (bpm, rampTime) {\n    for (var i in this.parts) {\n      this.parts[i].setBPM(bpm, rampTime);\n    }\n  };\n  function playNextPart(aScore) {\n    aScore.currentPart++;\n    if (aScore.currentPart >= aScore.parts.length) {\n      aScore.scoreStep = 0;\n      aScore.onended();\n    } else {\n      aScore.scoreStep = 0;\n      aScore.parts[aScore.currentPart - 1].stop();\n      aScore.parts[aScore.currentPart].start();\n    }\n  }\n}(master);\nvar soundRecorder;\nsoundRecorder = function () {\n  'use strict';\n  var p5sound = master;\n  var ac = p5sound.audiocontext;\n  /**\n   *  <p>Record sounds for playback and/or to save as a .wav file.\n   *  The p5.SoundRecorder records all sound output from your sketch,\n   *  or can be assigned a specific source with setInput().</p>\n   *  <p>The record() method accepts a p5.SoundFile as a parameter.\n   *  When playback is stopped (either after the given amount of time,\n   *  or with the stop() method), the p5.SoundRecorder will send its\n   *  recording to that p5.SoundFile for playback.</p>\n   *  \n   *  @class p5.SoundRecorder\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *  var mic, recorder, soundFile;\n   *  var state = 0;\n   *  \n   *  function setup() {\n   *    background(200);\n   *    // create an audio in\n   *    mic = new p5.AudioIn();\n   *    \n   *    // prompts user to enable their browser mic\n   *    mic.start();\n   *    \n   *    // create a sound recorder\n   *    recorder = new p5.SoundRecorder();\n   *    \n   *    // connect the mic to the recorder\n   *    recorder.setInput(mic);\n   *    \n   *    // this sound file will be used to\n   *    // playback & save the recording\n   *    soundFile = new p5.SoundFile();\n   *\n   *    text('keyPress to record', 20, 20);\n   *  }\n   *\n   *  function keyPressed() {\n   *    // make sure user enabled the mic\n   *    if (state === 0 && mic.enabled) {\n   *    \n   *      // record to our p5.SoundFile\n   *      recorder.record(soundFile);\n   *      \n   *      background(255,0,0);\n   *      text('Recording!', 20, 20);\n   *      state++;\n   *    }\n   *    else if (state === 1) {\n   *      background(0,255,0);\n   *\n   *      // stop recorder and\n   *      // send result to soundFile\n   *      recorder.stop(); \n   *      \n   *      text('Stopped', 20, 20);\n   *      state++;\n   *    }\n   *    \n   *    else if (state === 2) {\n   *      soundFile.play(); // play the result!\n   *      save(soundFile, 'mySound.wav');\n   *      state++;\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.SoundRecorder = function () {\n    this.input = ac.createGain();\n    this.output = ac.createGain();\n    this.recording = false;\n    this.bufferSize = 1024;\n    this._channels = 2;\n    // stereo (default)\n    this._clear();\n    // initialize variables\n    this._jsNode = ac.createScriptProcessor(this.bufferSize, this._channels, 2);\n    this._jsNode.onaudioprocess = this._audioprocess.bind(this);\n    /** \n     *  callback invoked when the recording is over\n     *  @private\n     *  @type {function(Float32Array)}\n     */\n    this._callback = function () {\n    };\n    // connections\n    this._jsNode.connect(p5.soundOut._silentNode);\n    this.setInput();\n    // add this p5.SoundFile to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Connect a specific device to the p5.SoundRecorder.\n   *  If no parameter is given, p5.SoundRecorer will record\n   *  all audible p5.sound from your sketch.\n   *  \n   *  @method  setInput\n   *  @param {Object} [unit] p5.sound object or a web audio unit\n   *                         that outputs sound\n   */\n  p5.SoundRecorder.prototype.setInput = function (unit) {\n    this.input.disconnect();\n    this.input = null;\n    this.input = ac.createGain();\n    this.input.connect(this._jsNode);\n    this.input.connect(this.output);\n    if (unit) {\n      unit.connect(this.input);\n    } else {\n      p5.soundOut.output.connect(this.input);\n    }\n  };\n  /**\n   *  Start recording. To access the recording, provide\n   *  a p5.SoundFile as the first parameter. The p5.SoundRecorder\n   *  will send its recording to that p5.SoundFile for playback once\n   *  recording is complete. Optional parameters include duration\n   *  (in seconds) of the recording, and a callback function that\n   *  will be called once the complete recording has been\n   *  transfered to the p5.SoundFile.\n   *  \n   *  @method  record\n   *  @param  {p5.SoundFile}   soundFile    p5.SoundFile\n   *  @param  {Number}   [duration] Time (in seconds)\n   *  @param  {Function} [callback] The name of a function that will be\n   *                                called once the recording completes\n   */\n  p5.SoundRecorder.prototype.record = function (sFile, duration, callback) {\n    this.recording = true;\n    if (duration) {\n      this.sampleLimit = Math.round(duration * ac.sampleRate);\n    }\n    if (sFile && callback) {\n      this._callback = function () {\n        this.buffer = this._getBuffer();\n        sFile.setBuffer(this.buffer);\n        callback();\n      };\n    } else if (sFile) {\n      this._callback = function () {\n        this.buffer = this._getBuffer();\n        sFile.setBuffer(this.buffer);\n      };\n    }\n  };\n  /**\n   *  Stop the recording. Once the recording is stopped,\n   *  the results will be sent to the p5.SoundFile that\n   *  was given on .record(), and if a callback function\n   *  was provided on record, that function will be called.\n   *  \n   *  @method  stop\n   */\n  p5.SoundRecorder.prototype.stop = function () {\n    this.recording = false;\n    this._callback();\n    this._clear();\n  };\n  p5.SoundRecorder.prototype._clear = function () {\n    this._leftBuffers = [];\n    this._rightBuffers = [];\n    this.recordedSamples = 0;\n    this.sampleLimit = null;\n  };\n  /**\n   *  internal method called on audio process\n   *  \n   *  @private\n   *  @param   {AudioProcessorEvent} event \n   */\n  p5.SoundRecorder.prototype._audioprocess = function (event) {\n    if (this.recording === false) {\n      return;\n    } else if (this.recording === true) {\n      // if we are past the duration, then stop... else:\n      if (this.sampleLimit && this.recordedSamples >= this.sampleLimit) {\n        this.stop();\n      } else {\n        // get channel data\n        var left = event.inputBuffer.getChannelData(0);\n        var right = event.inputBuffer.getChannelData(1);\n        // clone the samples\n        this._leftBuffers.push(new Float32Array(left));\n        this._rightBuffers.push(new Float32Array(right));\n        this.recordedSamples += this.bufferSize;\n      }\n    }\n  };\n  p5.SoundRecorder.prototype._getBuffer = function () {\n    var buffers = [];\n    buffers.push(this._mergeBuffers(this._leftBuffers));\n    buffers.push(this._mergeBuffers(this._rightBuffers));\n    return buffers;\n  };\n  p5.SoundRecorder.prototype._mergeBuffers = function (channelBuffer) {\n    var result = new Float32Array(this.recordedSamples);\n    var offset = 0;\n    var lng = channelBuffer.length;\n    for (var i = 0; i < lng; i++) {\n      var buffer = channelBuffer[i];\n      result.set(buffer, offset);\n      offset += buffer.length;\n    }\n    return result;\n  };\n  p5.SoundRecorder.prototype.dispose = function () {\n    this._clear();\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this._callback = function () {\n    };\n    if (this.input) {\n      this.input.disconnect();\n    }\n    this.input = null;\n    this._jsNode = null;\n  };\n  /**\n   *  Save a p5.SoundFile as a .wav audio file.\n   *  \n   *  @method saveSound\n   *  @param  {p5.SoundFile} soundFile p5.SoundFile that you wish to save\n   *  @param  {String} name      name of the resulting .wav file.\n   */\n  p5.prototype.saveSound = function (soundFile, name) {\n    var leftChannel = soundFile.buffer.getChannelData(0);\n    var rightChannel = soundFile.buffer.getChannelData(1);\n    var interleaved = interleave(leftChannel, rightChannel);\n    // create the buffer and view to create the .WAV file\n    var buffer = new ArrayBuffer(44 + interleaved.length * 2);\n    var view = new DataView(buffer);\n    // write the WAV container,\n    // check spec at: https://ccrma.stanford.edu/courses/422/projects/WaveFormat/\n    // RIFF chunk descriptor\n    writeUTFBytes(view, 0, 'RIFF');\n    view.setUint32(4, 44 + interleaved.length * 2, true);\n    writeUTFBytes(view, 8, 'WAVE');\n    // FMT sub-chunk\n    writeUTFBytes(view, 12, 'fmt ');\n    view.setUint32(16, 16, true);\n    view.setUint16(20, 1, true);\n    // stereo (2 channels)\n    view.setUint16(22, 2, true);\n    view.setUint32(24, 44100, true);\n    view.setUint32(28, 44100 * 4, true);\n    view.setUint16(32, 4, true);\n    view.setUint16(34, 16, true);\n    // data sub-chunk\n    writeUTFBytes(view, 36, 'data');\n    view.setUint32(40, interleaved.length * 2, true);\n    // write the PCM samples\n    var lng = interleaved.length;\n    var index = 44;\n    var volume = 1;\n    for (var i = 0; i < lng; i++) {\n      view.setInt16(index, interleaved[i] * (32767 * volume), true);\n      index += 2;\n    }\n    p5.prototype.writeFile([view], name, 'wav');\n  };\n  // helper methods to save waves\n  function interleave(leftChannel, rightChannel) {\n    var length = leftChannel.length + rightChannel.length;\n    var result = new Float32Array(length);\n    var inputIndex = 0;\n    for (var index = 0; index < length;) {\n      result[index++] = leftChannel[inputIndex];\n      result[index++] = rightChannel[inputIndex];\n      inputIndex++;\n    }\n    return result;\n  }\n  function writeUTFBytes(view, offset, string) {\n    var lng = string.length;\n    for (var i = 0; i < lng; i++) {\n      view.setUint8(offset + i, string.charCodeAt(i));\n    }\n  }\n}(sndcore, master);\nvar peakdetect;\npeakdetect = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   *  <p>PeakDetect works in conjunction with p5.FFT to\n   *  look for onsets in some or all of the frequency spectrum.\n   *  </p>\n   *  <p>\n   *  To use p5.PeakDetect, call <code>update</code> in the draw loop\n   *  and pass in a p5.FFT object.\n   *  </p>\n   *  <p>\n   *  You can listen for a specific part of the frequency spectrum by\n   *  setting the range between <code>freq1</code> and <code>freq2</code>.\n   *  </p>\n   *\n   *  <p><code>threshold</code> is the threshold for detecting a peak,\n   *  scaled between 0 and 1. It is logarithmic, so 0.1 is half as loud\n   *  as 1.0.</p>\n   *\n   *  <p>\n   *  The update method is meant to be run in the draw loop, and\n   *  <b>frames</b> determines how many loops must pass before\n   *  another peak can be detected.\n   *  For example, if the frameRate() = 60, you could detect the beat of a\n   *  120 beat-per-minute song with this equation:\n   *  <code> framesPerPeak = 60 / (estimatedBPM / 60 );</code>\n   *  </p>\n   *\n   *  <p>\n   *  Based on example contribtued by @b2renger, and a simple beat detection\n   *  explanation by <a *=\"\" href=\"http://www.airtightinteractive.com/2013/10/making-audio-reactive-visuals/\" target=\"_blank\">Felix Turner</a>.\n   *  </p>\n   *  \n   *  @class  p5.PeakDetect\n   *  @constructor\n   *  @param {Number} [freq1]     lowFrequency - defaults to 20Hz\n   *  @param {Number} [freq2]     highFrequency - defaults to 20000 Hz\n   *  @param {Number} [threshold] Threshold for detecting a beat between 0 and 1\n   *                            scaled logarithmically where 0.1 is 1/2 the loudness\n   *                            of 1.0. Defaults to 0.35.\n   *  @param {Number} [framesPerPeak]     Defaults to 20.\n   *  @example\n   *  <div><code>\n   *  \n   *  var cnv, soundFile, fft, peakDetect;\n   *  var ellipseWidth = 10;\n   *\n   *  function setup() {\n   *    background(0);\n   *    noStroke();\n   *    fill(255);\n   *    textAlign(CENTER);\n   *\n   *    soundFile = loadSound('assets/beat.mp3');\n   *\n   *    // p5.PeakDetect requires a p5.FFT\n   *    fft = new p5.FFT();\n   *    peakDetect = new p5.PeakDetect();\n   *\n   *  }\n   *\n   *  function draw() {\n   *    background(0);\n   *    text('click to play/pause', width/2, height/2);\n   *\n   *    // peakDetect accepts an fft post-analysis\n   *    fft.analyze();\n   *    peakDetect.update(fft);\n   *\n   *    if ( peakDetect.isDetected ) {\n   *      ellipseWidth = 50;\n   *    } else {\n   *      ellipseWidth *= 0.95;\n   *    }\n   *\n   *    ellipse(width/2, height/2, ellipseWidth, ellipseWidth);\n   *  }\n   *\n   *  // toggle play/stop when canvas is clicked\n   *  function mouseClicked() {\n   *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n   *      if (soundFile.isPlaying() ) {\n   *        soundFile.stop();\n   *      } else {\n   *        soundFile.play();\n   *      }\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.PeakDetect = function (freq1, freq2, threshold, _framesPerPeak) {\n    var framesPerPeak;\n    // framesPerPeak determines how often to look for a beat.\n    // If a beat is provided, try to look for a beat based on bpm\n    this.framesPerPeak = _framesPerPeak || 20;\n    this.framesSinceLastPeak = 0;\n    this.decayRate = 0.95;\n    this.threshold = threshold || 0.35;\n    this.cutoff = 0;\n    // how much to increase the cutoff \n    // TO DO: document this / figure out how to make it accessible\n    this.cutoffMult = 1.5;\n    this.energy = 0;\n    this.penergy = 0;\n    // TO DO: document this property / figure out how to make it accessible\n    this.currentValue = 0;\n    /**\n     *  isDetected is set to true when a peak is detected.\n     *  \n     *  @attribute isDetected\n     *  @type {Boolean}\n     *  @default  false\n     */\n    this.isDetected = false;\n    this.f1 = freq1 || 40;\n    this.f2 = freq2 || 20000;\n    // function to call when a peak is detected\n    this._onPeak = function () {\n    };\n  };\n  /**\n   *  The update method is run in the draw loop.\n   *\n   *  Accepts an FFT object. You must call .analyze()\n   *  on the FFT object prior to updating the peakDetect\n   *  because it relies on a completed FFT analysis.\n   *\n   *  @method  update\n   *  @param  {p5.FFT} fftObject A p5.FFT object\n   */\n  p5.PeakDetect.prototype.update = function (fftObject) {\n    var nrg = this.energy = fftObject.getEnergy(this.f1, this.f2) / 255;\n    if (nrg > this.cutoff && nrg > this.threshold && nrg - this.penergy > 0) {\n      // trigger callback\n      this._onPeak();\n      this.isDetected = true;\n      // debounce\n      this.cutoff = nrg * this.cutoffMult;\n      this.framesSinceLastPeak = 0;\n    } else {\n      this.isDetected = false;\n      if (this.framesSinceLastPeak <= this.framesperpeak)=\"\" {=\"\" this.framessincelastpeak++;=\"\" }=\"\" else=\"\" this.cutoff=\"\" *=\"this.decayRate;\" this.threshold);=\"\" this.currentvalue=\"nrg;\" this.penergy=\"nrg;\" };=\"\" **=\"\" onpeak=\"\" accepts=\"\" two=\"\" arguments:=\"\" a=\"\" function=\"\" to=\"\" call=\"\" when=\"\" peak=\"\" is=\"\" detected.=\"\" the=\"\" value=\"\" of=\"\" peak,=\"\" between=\"\" 0.0=\"\" and=\"\" 1.0,=\"\" passed=\"\" callback.=\"\" @method=\"\" @param=\"\" {function}=\"\" callback=\"\" name=\"\" that=\"\" will=\"\" be=\"\" called=\"\" {object}=\"\" [val]=\"\" optional=\"\" pass=\"\" into=\"\" @example=\"\" <div=\"\"><code>\n   *  var cnv, soundFile, fft, peakDetect;\n   *  var ellipseWidth = 0;\n   *  \n   *  function setup() {\n   *    cnv = createCanvas(100,100);\n   *    textAlign(CENTER);\n   *  \n   *    soundFile = loadSound('assets/beat.mp3');\n   *    fft = new p5.FFT();\n   *    peakDetect = new p5.PeakDetect();\n   *  \n   *    setupSound();\n   *  \n   *    // when a beat is detected, call triggerBeat()\n   *    peakDetect.onPeak(triggerBeat);\n   *  }\n   *  \n   *  function draw() {\n   *    background(0);\n   *    fill(255);\n   *    text('click to play', width/2, height/2);\n   *  \n   *    fft.analyze();\n   *    peakDetect.update(fft);\n   *  \n   *    ellipseWidth *= 0.95;\n   *    ellipse(width/2, height/2, ellipseWidth, ellipseWidth);\n   *  }\n   *  \n   *  // this function is called by peakDetect.onPeak\n   *  function triggerBeat() {\n   *    ellipseWidth = 50;\n   *  }\n   *  \n   *  // mouseclick starts/stops sound\n   *  function setupSound() {\n   *    cnv.mouseClicked( function() {\n   *      if (soundFile.isPlaying() ) {\n   *        soundFile.stop();\n   *      } else {\n   *        soundFile.play();\n   *      }\n   *    });\n   *  }\n   *  </code>\n   */\n  p5.PeakDetect.prototype.onPeak = function (callback, val) {\n    var self = this;\n    self._onPeak = function () {\n      callback(self.energy, val);\n    };\n  };\n}(master);\nvar gain;\ngain = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n  *  A gain node is usefull to set the relative volume of sound.\n  *  It's typically used to build mixers.   \n  *\n  *  @class p5.Gain\n  *  @constructor\n  *  @example\n  *  <div><code>\n  *\n  * // load two soundfile and crossfade beetween them\n  * var sound1,sound2;\n  * var gain1, gain2, gain3;\n  * \n  * function preload(){\n  *   soundFormats('ogg', 'mp3');\n  *   sound1 = loadSound('../_files/Damscray_-_Dancing_Tiger_01');\n  *   sound2 = loadSound('../_files/beat.mp3');\n  * }\n  *\n  * function setup() {\n  *   createCanvas(400,200);\n  *\n  *   // create a 'master' gain to which we will connect both soundfiles\n  *   gain3 = new p5.Gain();\n  *   gain3.connect();\n  *\n  *   // setup first sound for playing\n  *   sound1.rate(1);\n  *   sound1.loop();\n  *   sound1.disconnect(); // diconnect from p5 output\n  *\n  *   gain1 = new p5.Gain(); // setup a gain node\n  *   gain1.setInput(sound1); // connect the first sound to its input\n  *   gain1.connect(gain3); // connect its output to the 'master'\n  *\n  *   sound2.rate(1);\n  *   sound2.disconnect();\n  *   sound2.loop();\n  *\n  *   gain2 = new p5.Gain();\n  *   gain2.setInput(sound2);\n  *   gain2.connect(gain3);\n  *\n  * }\n  *\n  * function draw(){\n  *   background(180);\n  *  \n  *   // calculate the horizontal distance beetween the mouse and the right of the screen\n  *   var d = dist(mouseX,0,width,0);\n  *\n  *   // map the horizontal position of the mouse to values useable for volume control of sound1\n  *   var vol1 = map(mouseX,0,width,0,1); \n  *   var vol2 = 1-vol1; // when sound1 is loud, sound2 is quiet and vice versa\n  *\n  *   gain1.amp(vol1,0.5,0);\n  *   gain2.amp(vol2,0.5,0);\n  *\n  *   // map the vertical position of the mouse to values useable for 'master volume control'\n  *   var vol3 = map(mouseY,0,height,0,1); \n  *   gain3.amp(vol3,0.5,0);\n  * }\n  *</code></div>\n  *\n  */\n  p5.Gain = function () {\n    this.ac = p5sound.audiocontext;\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain();\n    // otherwise, Safari distorts\n    this.input.gain.value = 0.5;\n    this.input.connect(this.output);\n    // add  to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Connect a source to the gain node.\n   *  \n   *  @method  setInput\n   *  @param  {Object} src     p5.sound / Web Audio object with a sound\n   *                           output.\n   */\n  p5.Gain.prototype.setInput = function (src) {\n    src.connect(this.input);\n  };\n  /**\n   *  Send output to a p5.sound or web audio object\n   *  \n   *  @method  connect\n   *  @param  {Object} unit\n   */\n  p5.Gain.prototype.connect = function (unit) {\n    var u = unit || p5.soundOut.input;\n    this.output.connect(u.input ? u.input : u);\n  };\n  /**\n   *  Disconnect all output.\n   *  \n   *  @method disconnect\n   */\n  p5.Gain.prototype.disconnect = function () {\n    this.output.disconnect();\n  };\n  /**\n   *  Set the output level of the gain node.\n   *  \n   *  @method  amp\n   *  @param  {Number} volume amplitude between 0 and 1.0\n   *  @param  {Number} [rampTime] create a fade that lasts rampTime \n   *  @param  {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   */\n  p5.Gain.prototype.amp = function (vol, rampTime, tFromNow) {\n    var rampTime = rampTime || 0;\n    var tFromNow = tFromNow || 0;\n    var now = p5sound.audiocontext.currentTime;\n    var currentVol = this.output.gain.value;\n    this.output.gain.cancelScheduledValues(now);\n    this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n    this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n  };\n  p5.Gain.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.output.disconnect();\n    this.input.disconnect();\n    this.output = undefined;\n    this.input = undefined;\n  };\n}(master, sndcore);\nvar src_app;\nsrc_app = function () {\n  'use strict';\n  var p5SOUND = sndcore;\n  return p5SOUND;\n}(sndcore, master, helpers, errorHandler, panner, soundfile, amplitude, fft, signal, oscillator, env, pulse, noise, audioin, filter, delay, reverb, metro, looper, soundRecorder, peakdetect, gain);\n}));</=></=></=></=></a></=></=></=></=></=></=></=></=></-->","source":"libraries/p5.sound.js","raw":"/*! p5.sound.js v0.3.0 2016-01-31 */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd)\n    define('p5.sound', ['p5'], function (p5) { (factory(p5));});\n  else if (typeof exports === 'object')\n    factory(require('../p5'));\n  else\n    factory(root['p5']);\n}(this, function (p5) {\n  /**\n *  p5.sound extends p5 with <a href=\"http://caniuse.com/audio-api\" *=\"\" target=\"_blank\">Web Audio</a> functionality including audio input,\n *  playback, analysis and synthesis.\n *  <br><br>\n *  <a href=\"#/p5.SoundFile\"><b>p5.SoundFile</b></a>: Load and play sound files.<br>\n *  <a href=\"#/p5.Amplitude\"><b>p5.Amplitude</b></a>: Get the current volume of a sound.<br>\n *  <a href=\"#/p5.AudioIn\"><b>p5.AudioIn</b></a>: Get sound from an input source, typically\n *    a computer microphone.<br>\n *  <a href=\"#/p5.FFT\"><b>p5.FFT</b></a>: Analyze the frequency of sound. Returns\n *    results from the frequency spectrum or time domain (waveform).<br>\n *  <a href=\"#/p5.Oscillator\"><b>p5.Oscillator</b></a>: Generate Sine,\n *    Triangle, Square and Sawtooth waveforms. Base class of\n *    <a href=\"#/p5.Noise\">p5.Noise</a> and <a href=\"#/p5.Pulse\">p5.Pulse</a>.\n *    <br>\n *  <a href=\"#/p5.Env\"><b>p5.Env</b></a>: An Envelope is a series\n *    of fades over time. Often used to control an object's\n *    output gain level as an \"ADSR Envelope\" (Attack, Decay,\n *    Sustain, Release). Can also modulate other parameters.<br>\n *  <a href=\"#/p5.Delay\"><b>p5.Delay</b></a>: A delay effect with\n *    parameters for feedback, delayTime, and lowpass filter.<br>\n *  <a href=\"#/p5.Filter\"><b>p5.Filter</b></a>: Filter the frequency range of a\n *    sound.\n *  <br>\n *  <a href=\"#/p5.Reverb\"><b>p5.Reverb</b></a>: Add reverb to a sound by specifying\n *    duration and decay. <br>\n *  <b><a href=\"#/p5.Convolver\">p5.Convolver</a>:</b> Extends\n *  <a href=\"#/p5.Reverb\">p5.Reverb</a> to simulate the sound of real\n *    physical spaces through convolution.<br>\n *  <b><a href=\"#/p5.SoundRecorder\">p5.SoundRecorder</a></b>: Record sound for playback \n *    / save the .wav file.\n *  <b><a href=\"#/p5.Phrase\">p5.Phrase</a></b>, <b><a href=\"#/p5.Part\">p5.Part</a></b> and\n *  <b><a href=\"#/p5.Score\">p5.Score</a></b>: Compose musical sequences.\n *  <br><br>\n *  p5.sound is on <a href=\"https://github.com/therewasaguy/p5.sound/\" target=\"_blank\" rel=\"external\">GitHub</a>.\n *  Download the latest version \n *  <a href=\"https://github.com/therewasaguy/p5.sound/blob/master/lib/p5.sound.js\" target=\"_blank\" rel=\"external\">here</a>.\n *  \n *  @module p5.sound\n *  @submodule p5.sound\n *  @for p5.sound\n *  @main\n */\n/**\n *  p5.sound developed by Jason Sigal for the Processing Foundation, Google Summer of Code 2014. The MIT License (MIT).\n *  \n *  http://github.com/therewasaguy/p5.sound\n *\n *  Some of the many audio libraries & resources that inspire p5.sound:\n *   - TONE.js (c) Yotam Mann, 2014. Licensed under The MIT License (MIT). https://github.com/TONEnoTONE/Tone.js\n *   - buzz.js (c) Jay Salvat, 2013. Licensed under The MIT License (MIT). http://buzz.jaysalvat.com/\n *   - Boris Smus Web Audio API book, 2013. Licensed under the Apache License http://www.apache.org/licenses/LICENSE-2.0\n *   - wavesurfer.js https://github.com/katspaugh/wavesurfer.js\n *   - Web Audio Components by Jordan Santell https://github.com/web-audio-components\n *   - Wilm Thoben's Sound library for Processing https://github.com/processing/processing/tree/master/java/libraries/sound\n *   \n *   Web Audio API: http://w3.org/TR/webaudio/\n */\nvar sndcore;\nsndcore = function () {\n  'use strict';\n  /* AudioContext Monkeypatch\n     Copyright 2013 Chris Wilson\n     Licensed under the Apache License, Version 2.0 (the \"License\");\n     you may not use this file except in compliance with the License.\n     You may obtain a copy of the License at\n         http://www.apache.org/licenses/LICENSE-2.0\n     Unless required by applicable law or agreed to in writing, software\n     distributed under the License is distributed on an \"AS IS\" BASIS,\n     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     See the License for the specific language governing permissions and\n     limitations under the License.\n  */\n  (function (global, exports, perf) {\n    exports = exports || {};\n    'use strict';\n    function fixSetTarget(param) {\n      if (!param)\n        // if NYI, just return\n        return;\n      if (!param.setTargetAtTime)\n        param.setTargetAtTime = param.setTargetValueAtTime;\n    }\n    if (window.hasOwnProperty('webkitAudioContext') && !window.hasOwnProperty('AudioContext')) {\n      window.AudioContext = webkitAudioContext;\n      if (!AudioContext.prototype.hasOwnProperty('createGain'))\n        AudioContext.prototype.createGain = AudioContext.prototype.createGainNode;\n      if (!AudioContext.prototype.hasOwnProperty('createDelay'))\n        AudioContext.prototype.createDelay = AudioContext.prototype.createDelayNode;\n      if (!AudioContext.prototype.hasOwnProperty('createScriptProcessor'))\n        AudioContext.prototype.createScriptProcessor = AudioContext.prototype.createJavaScriptNode;\n      if (!AudioContext.prototype.hasOwnProperty('createPeriodicWave'))\n        AudioContext.prototype.createPeriodicWave = AudioContext.prototype.createWaveTable;\n      AudioContext.prototype.internal_createGain = AudioContext.prototype.createGain;\n      AudioContext.prototype.createGain = function () {\n        var node = this.internal_createGain();\n        fixSetTarget(node.gain);\n        return node;\n      };\n      AudioContext.prototype.internal_createDelay = AudioContext.prototype.createDelay;\n      AudioContext.prototype.createDelay = function (maxDelayTime) {\n        var node = maxDelayTime ? this.internal_createDelay(maxDelayTime) : this.internal_createDelay();\n        fixSetTarget(node.delayTime);\n        return node;\n      };\n      AudioContext.prototype.internal_createBufferSource = AudioContext.prototype.createBufferSource;\n      AudioContext.prototype.createBufferSource = function () {\n        var node = this.internal_createBufferSource();\n        if (!node.start) {\n          node.start = function (when, offset, duration) {\n            if (offset || duration)\n              this.noteGrainOn(when || 0, offset, duration);\n            else\n              this.noteOn(when || 0);\n          };\n        } else {\n          node.internal_start = node.start;\n          node.start = function (when, offset, duration) {\n            if (typeof duration !== 'undefined')\n              node.internal_start(when || 0, offset, duration);\n            else\n              node.internal_start(when || 0, offset || 0);\n          };\n        }\n        if (!node.stop) {\n          node.stop = function (when) {\n            this.noteOff(when || 0);\n          };\n        } else {\n          node.internal_stop = node.stop;\n          node.stop = function (when) {\n            node.internal_stop(when || 0);\n          };\n        }\n        fixSetTarget(node.playbackRate);\n        return node;\n      };\n      AudioContext.prototype.internal_createDynamicsCompressor = AudioContext.prototype.createDynamicsCompressor;\n      AudioContext.prototype.createDynamicsCompressor = function () {\n        var node = this.internal_createDynamicsCompressor();\n        fixSetTarget(node.threshold);\n        fixSetTarget(node.knee);\n        fixSetTarget(node.ratio);\n        fixSetTarget(node.reduction);\n        fixSetTarget(node.attack);\n        fixSetTarget(node.release);\n        return node;\n      };\n      AudioContext.prototype.internal_createBiquadFilter = AudioContext.prototype.createBiquadFilter;\n      AudioContext.prototype.createBiquadFilter = function () {\n        var node = this.internal_createBiquadFilter();\n        fixSetTarget(node.frequency);\n        fixSetTarget(node.detune);\n        fixSetTarget(node.Q);\n        fixSetTarget(node.gain);\n        return node;\n      };\n      if (AudioContext.prototype.hasOwnProperty('createOscillator')) {\n        AudioContext.prototype.internal_createOscillator = AudioContext.prototype.createOscillator;\n        AudioContext.prototype.createOscillator = function () {\n          var node = this.internal_createOscillator();\n          if (!node.start) {\n            node.start = function (when) {\n              this.noteOn(when || 0);\n            };\n          } else {\n            node.internal_start = node.start;\n            node.start = function (when) {\n              node.internal_start(when || 0);\n            };\n          }\n          if (!node.stop) {\n            node.stop = function (when) {\n              this.noteOff(when || 0);\n            };\n          } else {\n            node.internal_stop = node.stop;\n            node.stop = function (when) {\n              node.internal_stop(when || 0);\n            };\n          }\n          if (!node.setPeriodicWave)\n            node.setPeriodicWave = node.setWaveTable;\n          fixSetTarget(node.frequency);\n          fixSetTarget(node.detune);\n          return node;\n        };\n      }\n    }\n    if (window.hasOwnProperty('webkitOfflineAudioContext') && !window.hasOwnProperty('OfflineAudioContext')) {\n      window.OfflineAudioContext = webkitOfflineAudioContext;\n    }\n    return exports;\n  }(window));\n  // <-- end=\"\" monkeypatch.=\"\" create=\"\" the=\"\" audio=\"\" context=\"\" var=\"\" audiocontext=\"new\" window.audiocontext();=\"\" **=\"\" *=\"\" <p=\"\">Returns the Audio Context for this sketch. Useful for users\n   * who would like to dig deeper into the <a target=\"_blank\" href=\"*\" 'http:=\"\" webaudio.github.io=\"\" web-audio-api=\"\" '=\"\">Web Audio API\n   * </a>.<p></p>\n   *\n   * @method getAudioContext\n   * @return {Object}    AudioContext for this sketch\n   */\n  p5.prototype.getAudioContext = function () {\n    return audiocontext;\n  };\n  // Polyfill for AudioIn, also handled by p5.dom createCapture\n  navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n  /**\n   * Determine which filetypes are supported (inspired by buzz.js)\n   * The audio element (el) will only be used to test browser support for various audio formats\n   */\n  var el = document.createElement('audio');\n  p5.prototype.isSupported = function () {\n    return !!el.canPlayType;\n  };\n  var isOGGSupported = function () {\n    return !!el.canPlayType && el.canPlayType('audio/ogg; codecs=\"vorbis\"');\n  };\n  var isMP3Supported = function () {\n    return !!el.canPlayType && el.canPlayType('audio/mpeg;');\n  };\n  var isWAVSupported = function () {\n    return !!el.canPlayType && el.canPlayType('audio/wav; codecs=\"1\"');\n  };\n  var isAACSupported = function () {\n    return !!el.canPlayType && (el.canPlayType('audio/x-m4a;') || el.canPlayType('audio/aac;'));\n  };\n  var isAIFSupported = function () {\n    return !!el.canPlayType && el.canPlayType('audio/x-aiff;');\n  };\n  p5.prototype.isFileSupported = function (extension) {\n    switch (extension.toLowerCase()) {\n    case 'mp3':\n      return isMP3Supported();\n    case 'wav':\n      return isWAVSupported();\n    case 'ogg':\n      return isOGGSupported();\n    case 'aac', 'm4a', 'mp4':\n      return isAACSupported();\n    case 'aif', 'aiff':\n      return isAIFSupported();\n    default:\n      return false;\n    }\n  };\n  // if it is iOS, we have to have a user interaction to start Web Audio\n  // http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n  var iOS = navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? true : false;\n  if (iOS) {\n    var iosStarted = false;\n    var startIOS = function () {\n      if (iosStarted)\n        return;\n      // create empty buffer\n      var buffer = audiocontext.createBuffer(1, 1, 22050);\n      var source = audiocontext.createBufferSource();\n      source.buffer = buffer;\n      // connect to output (your speakers)\n      source.connect(audiocontext.destination);\n      // play the file\n      source.start(0);\n      console.log('start ios!');\n      if (audiocontext.state === 'running') {\n        iosStarted = true;\n      }\n    };\n    document.addEventListener('touchend', startIOS, false);\n    document.addEventListener('touchstart', startIOS, false);\n  }\n}();\nvar master;\nmaster = function () {\n  'use strict';\n  /**\n   * Master contains AudioContext and the master sound output.\n   */\n  var Master = function () {\n    var audiocontext = p5.prototype.getAudioContext();\n    this.input = audiocontext.createGain();\n    this.output = audiocontext.createGain();\n    //put a hard limiter on the output\n    this.limiter = audiocontext.createDynamicsCompressor();\n    this.limiter.threshold.value = 0;\n    this.limiter.ratio.value = 100;\n    this.audiocontext = audiocontext;\n    this.output.disconnect();\n    // an array of input sources\n    this.inputSources = [];\n    // connect input to limiter\n    this.input.connect(this.limiter);\n    // connect limiter to output\n    this.limiter.connect(this.output);\n    // meter is just for global Amplitude / FFT analysis\n    this.meter = audiocontext.createGain();\n    this.fftMeter = audiocontext.createGain();\n    this.output.connect(this.meter);\n    this.output.connect(this.fftMeter);\n    // connect output to destination\n    this.output.connect(this.audiocontext.destination);\n    // an array of all sounds in the sketch\n    this.soundArray = [];\n    // an array of all musical parts in the sketch\n    this.parts = [];\n    // file extensions to search for\n    this.extensions = [];\n  };\n  // create a single instance of the p5Sound / master output for use within this sketch\n  var p5sound = new Master();\n  /**\n   * Returns a number representing the master amplitude (volume) for sound \n   * in this sketch.\n   * \n   * @method getMasterVolume\n   * @return {Number} Master amplitude (volume) for sound in this sketch.\n   *                  Should be between 0.0 (silence) and 1.0.\n   */\n  p5.prototype.getMasterVolume = function () {\n    return p5sound.output.gain.value;\n  };\n  /**\n   *  <p>Scale the output of all sound in this sketch</p>\n   *  Scaled between 0.0 (silence) and 1.0 (full volume).\n   *  1.0 is the maximum amplitude of a digital sound, so multiplying\n   *  by greater than 1.0 may cause digital distortion. To\n   *  fade, provide a <code>rampTime</code> parameter. For more\n   *  complex fades, see the Env class.\n   *\n   *  Alternately, you can pass in a signal source such as an\n   *  oscillator to modulate the amplitude with an audio signal.\n   *\n   *  <p><b>How This Works</b>: When you load the p5.sound module, it\n   *  creates a single instance of p5sound. All sound objects in this\n   *  module output to p5sound before reaching your computer's output.\n   *  So if you change the amplitude of p5sound, it impacts all of the\n   *  sound in this module.</p>\n   *\n   *  <p>If no value is provided, returns a Web Audio API Gain Node</p>\n   *\n   *  @method  masterVolume\n   *  @param {Number|Object} volume  Volume (amplitude) between 0.0\n   *                                     and 1.0 or modulating signal/oscillator\n   *  @param {Number} [rampTime]  Fade for t seconds\n   *  @param {Number} [timeFromNow]  Schedule this event to happen at\n   *                                 t seconds in the future\n   */\n  p5.prototype.masterVolume = function (vol, rampTime, tFromNow) {\n    if (typeof vol === 'number') {\n      var rampTime = rampTime || 0;\n      var tFromNow = tFromNow || 0;\n      var now = p5sound.audiocontext.currentTime;\n      var currentVol = p5sound.output.gain.value;\n      p5sound.output.gain.cancelScheduledValues(now + tFromNow);\n      p5sound.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n      p5sound.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n    } else if (vol) {\n      vol.connect(p5sound.output.gain);\n    } else {\n      // return the Gain Node\n      return p5sound.output.gain;\n    }\n  };\n  /**\n   *  p5.soundOut is the p5.sound master output. It sends output to\n   *  the destination of this window's web audio context. It contains \n   *  Web Audio API nodes including a dyanmicsCompressor (<code>.limiter</code>),\n   *  and Gain Nodes for <code>.input</code> and <code>.output</code>.\n   *  \n   *  @property p5.soundOut\n   *  @type {Object}\n   */\n  p5.soundOut = p5sound;\n  /**\n   *  a silent connection to the DesinationNode\n   *  which will ensure that anything connected to it\n   *  will not be garbage collected\n   *  \n   *  @private\n   */\n  p5.soundOut._silentNode = p5sound.audiocontext.createGain();\n  p5.soundOut._silentNode.gain.value = 0;\n  p5.soundOut._silentNode.connect(p5sound.audiocontext.destination);\n  return p5sound;\n}(sndcore);\nvar helpers;\nhelpers = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   * Returns a number representing the sample rate, in samples per second,\n   * of all sound objects in this audio context. It is determined by the\n   * sampling rate of your operating system's sound card, and it is not\n   * currently possile to change.\n   * It is often 44100, or twice the range of human hearing.\n   *\n   * @method sampleRate\n   * @return {Number} samplerate samples per second\n   */\n  p5.prototype.sampleRate = function () {\n    return p5sound.audiocontext.sampleRate;\n  };\n  /**\n   *  Returns the closest MIDI note value for\n   *  a given frequency.\n   *  \n   *  @param  {Number} frequency A freqeuncy, for example, the \"A\"\n   *                             above Middle C is 440Hz\n   *  @return {Number}   MIDI note value\n   */\n  p5.prototype.freqToMidi = function (f) {\n    var mathlog2 = Math.log(f / 440) / Math.log(2);\n    var m = Math.round(12 * mathlog2) + 57;\n    return m;\n  };\n  /**\n   *  Returns the frequency value of a MIDI note value.\n   *  General MIDI treats notes as integers where middle C\n   *  is 60, C# is 61, D is 62 etc. Useful for generating\n   *  musical frequencies with oscillators.\n   *  \n   *  @method  midiToFreq\n   *  @param  {Number} midiNote The number of a MIDI note\n   *  @return {Number} Frequency value of the given MIDI note\n   *  @example\n   *  <div><code>\n   *  var notes = [60, 64, 67, 72];\n   *  var i = 0;\n   *  \n   *  function setup() {\n   *    osc = new p5.Oscillator('Triangle');\n   *    osc.start();\n   *    frameRate(1);\n   *  }\n   *  \n   *  function draw() {\n   *    var freq = midiToFreq(notes[i]);\n   *    osc.freq(freq);\n   *    i++;\n   *    if (i >= notes.length){\n   *      i = 0;\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.prototype.midiToFreq = function (m) {\n    return 440 * Math.pow(2, (m - 69) / 12);\n  };\n  /**\n   *  List the SoundFile formats that you will include. LoadSound \n   *  will search your directory for these extensions, and will pick\n   *  a format that is compatable with the client's web browser.\n   *  <a href=\"http://media.io/\" target=\"_blank\" rel=\"external\">Here</a> is a free online file\n   *  converter.\n   *  \n   *  @method soundFormats\n   *  @param {String|Strings} formats i.e. 'mp3', 'wav', 'ogg'\n   *  @example\n   *  <div><code>\n   *  function preload() {\n   *    // set the global sound formats\n   *    soundFormats('mp3', 'ogg');\n   *    \n   *    // load either beatbox.mp3, or .ogg, depending on browser\n   *    mySound = loadSound('../sounds/beatbox.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    mySound.play();\n   *  }\n   *  </code></div>\n   */\n  p5.prototype.soundFormats = function () {\n    // reset extensions array\n    p5sound.extensions = [];\n    // add extensions\n    for (var i = 0; i < arguments.length; i++) {\n      arguments[i] = arguments[i].toLowerCase();\n      if ([\n          'mp3',\n          'wav',\n          'ogg',\n          'm4a',\n          'aac'\n        ].indexOf(arguments[i]) > -1) {\n        p5sound.extensions.push(arguments[i]);\n      } else {\n        throw arguments[i] + ' is not a valid sound format!';\n      }\n    }\n  };\n  p5.prototype.disposeSound = function () {\n    for (var i = 0; i < p5sound.soundArray.length; i++) {\n      p5sound.soundArray[i].dispose();\n    }\n  };\n  // register removeSound to dispose of p5sound SoundFiles, Convolvers,\n  // Oscillators etc when sketch ends\n  p5.prototype.registerMethod('remove', p5.prototype.disposeSound);\n  p5.prototype._checkFileFormats = function (paths) {\n    var path;\n    // if path is a single string, check to see if extension is provided\n    if (typeof paths === 'string') {\n      path = paths;\n      // see if extension is provided\n      var extTest = path.split('.').pop();\n      // if an extension is provided...\n      if ([\n          'mp3',\n          'wav',\n          'ogg',\n          'm4a',\n          'aac'\n        ].indexOf(extTest) > -1) {\n        var supported = p5.prototype.isFileSupported(extTest);\n        if (supported) {\n          path = path;\n        } else {\n          var pathSplit = path.split('.');\n          var pathCore = pathSplit[pathSplit.length - 1];\n          for (var i = 0; i < p5sound.extensions.length; i++) {\n            var extension = p5sound.extensions[i];\n            var supported = p5.prototype.isFileSupported(extension);\n            if (supported) {\n              pathCore = '';\n              if (pathSplit.length === 2) {\n                pathCore += pathSplit[0];\n              }\n              for (var i = 1; i <= pathsplit.length=\"\" -=\"\" 2;=\"\" i++)=\"\" {=\"\" var=\"\" p=\"pathSplit[i];\" pathcore=\"\" +=\".\" p;=\"\" }=\"\" path=\"pathCore\" ;=\"\" break;=\"\" else=\"\" for=\"\" (var=\"\" i=\"0;\" <=\"\" p5sound.extensions.length;=\"\" extension=\"p5sound.extensions[i];\" supported=\"p5.prototype.isFileSupported(extension);\" if=\"\" (supported)=\"\" '.'=\"\" extension;=\"\" (typeof=\"\" paths=\"==\" 'object')=\"\" paths.length;=\"\" console.log('.'+extension=\"\" '=\"\" is=\"\" by=\"\" your=\"\" browser.');=\"\" return=\"\" path;=\"\" };=\"\" **=\"\" *=\"\" used=\"\" osc=\"\" and=\"\" env=\"\" to=\"\" chain=\"\" signal=\"\" math=\"\" p5.prototype._mathchain=\"function\" (o,=\"\" math,=\"\" thischain,=\"\" nextchain,=\"\" type)=\"\" this=\"\" type=\"\" of=\"\" already=\"\" exists=\"\" in=\"\" the=\"\" chain,=\"\" replace=\"\" it=\"\" o.mathops)=\"\" (o.mathops[i]=\"\" instanceof=\"\" o.mathops[i].dispose();=\"\" thischain=\"i;\" (thischain=\"\" o.mathops.length=\"\" 1)=\"\" nextchain=\"o.mathOps[i\" 1];=\"\" o.mathops[thischain=\"\" 1].disconnect();=\"\" 1].connect(math);=\"\" math.connect(nextchain);=\"\" o.mathops[thischain]=\"math;\" o;=\"\" }(master);=\"\" errorhandler;=\"\" errorhandler=\"function\" ()=\"\" 'use=\"\" strict';=\"\" helper=\"\" function=\"\" generate=\"\" an=\"\" error=\"\" with=\"\" a=\"\" custom=\"\" stack=\"\" trace=\"\" that=\"\" points=\"\" sketch=\"\" removes=\"\" other=\"\" parts=\"\" trace.=\"\" @private=\"\" @param=\"\" {string}=\"\" name=\"\" errortrace=\"\" failedpath=\"\" file=\"\" failed=\"\" load=\"\" @property=\"\" message=\"\" back=\"\" line=\"\" user's=\"\" sketch.=\"\" note:=\"\" edits=\"\" out=\"\" within=\"\" p5.js=\"\" p5.sound.=\"\" originalstack=\"\" unedited,=\"\" original=\"\" @return=\"\" {error}=\"\" returns=\"\" object=\"\" customerror=\"function\" (name,=\"\" errortrace,=\"\" failedpath)=\"\" err=\"new\" error();=\"\" tempstack,=\"\" splitstack;=\"\" err.name=\"name;\" err.originalstack=\"err.stack\" errortrace;=\"\" tempstack=\"err.stack\" err.failedpath=\"failedPath;\" only=\"\" print=\"\" part=\"\" refers=\"\" user=\"\" code:=\"\" splitstack=\"tempStack.split('\\n');\" (ln)=\"\" !ln.match(=\"\" (p5.|native=\"\" code|globalinit)=\"\" g);=\"\" });=\"\" err.stack=\"splitStack.join('\\n');\" err;=\"\" customerror;=\"\" }();=\"\" panner;=\"\" panner=\"function\" p5sound=\"master;\" ac=\"p5sound.audiocontext;\" stereo=\"\" there=\"\" node=\"\" use=\"\" ac.createstereopanner=\"\" !=\"=\" 'undefined')=\"\" p5.panner=\"function\" (input,=\"\" output,=\"\" numinputchannels)=\"\" this.stereopanner=\"this.input\" ==\"\" ac.createstereopanner();=\"\" input.connect(this.stereopanner);=\"\" this.stereopanner.connect(output);=\"\" p5.panner.prototype.pan=\"function\" (val,=\"\" tfromnow)=\"\" time=\"tFromNow\" ||=\"\" 0;=\"\" t=\"ac.currentTime\" time;=\"\" this.stereopanner.pan.linearramptovalueattime(val,=\"\" t);=\"\" p5.panner.prototype.inputchannels=\"function\" (numchannels)=\"\" p5.panner.prototype.connect=\"function\" (obj)=\"\" this.stereopanner.connect(obj);=\"\" p5.panner.prototype.disconnect=\"function\" this.stereopanner.disconnect();=\"\" no=\"\" createstereopanner=\"\" such=\"\" as=\"\" safari=\"\" 7.1.7=\"\" at=\"\" writing=\"\" method=\"\" create=\"\" effect=\"\" this.input=\"ac.createGain();\" input.connect(this.input);=\"\" this.left=\"ac.createGain();\" this.right=\"ac.createGain();\" this.left.channelinterpretation=\"discrete\" this.right.channelinterpretation=\"discrete\" input=\"\" (numinputchannels=\"\"> 1) {\n        this.splitter = ac.createChannelSplitter(2);\n        this.input.connect(this.splitter);\n        this.splitter.connect(this.left, 1);\n        this.splitter.connect(this.right, 0);\n      } else {\n        this.input.connect(this.left);\n        this.input.connect(this.right);\n      }\n      this.output = ac.createChannelMerger(2);\n      this.left.connect(this.output, 0, 1);\n      this.right.connect(this.output, 0, 0);\n      this.output.connect(output);\n    };\n    // -1 is left, +1 is right\n    p5.Panner.prototype.pan = function (val, tFromNow) {\n      var time = tFromNow || 0;\n      var t = ac.currentTime + time;\n      var v = (val + 1) / 2;\n      var rightVal = Math.cos(v * Math.PI / 2);\n      var leftVal = Math.sin(v * Math.PI / 2);\n      this.left.gain.linearRampToValueAtTime(leftVal, t);\n      this.right.gain.linearRampToValueAtTime(rightVal, t);\n    };\n    p5.Panner.prototype.inputChannels = function (numChannels) {\n      if (numChannels === 1) {\n        this.input.disconnect();\n        this.input.connect(this.left);\n        this.input.connect(this.right);\n      } else if (numChannels === 2) {\n        if (typeof (this.splitter === 'undefined')) {\n          this.splitter = ac.createChannelSplitter(2);\n        }\n        this.input.disconnect();\n        this.input.connect(this.splitter);\n        this.splitter.connect(this.left, 1);\n        this.splitter.connect(this.right, 0);\n      }\n    };\n    p5.Panner.prototype.connect = function (obj) {\n      this.output.connect(obj);\n    };\n    p5.Panner.prototype.disconnect = function (obj) {\n      this.output.disconnect();\n    };\n  }\n  // 3D panner\n  p5.Panner3D = function (input, output) {\n    var panner3D = ac.createPanner();\n    panner3D.panningModel = 'HRTF';\n    panner3D.distanceModel = 'linear';\n    panner3D.setPosition(0, 0, 0);\n    input.connect(panner3D);\n    panner3D.connect(output);\n    panner3D.pan = function (xVal, yVal, zVal) {\n      panner3D.setPosition(xVal, yVal, zVal);\n    };\n    return panner3D;\n  };\n}(master);\nvar soundfile;\nsoundfile = function () {\n  'use strict';\n  var CustomError = errorHandler;\n  var p5sound = master;\n  var ac = p5sound.audiocontext;\n  /**\n   *  <p>SoundFile object with a path to a file.</p>\n   *  \n   *  <p>The p5.SoundFile may not be available immediately because\n   *  it loads the file information asynchronously.</p>\n   * \n   *  <p>To do something with the sound as soon as it loads\n   *  pass the name of a function as the second parameter.</p>\n   *  \n   *  <p>Only one file path is required. However, audio file formats \n   *  (i.e. mp3, ogg, wav and m4a/aac) are not supported by all\n   *  web browsers. If you want to ensure compatability, instead of a single\n   *  file path, you may include an Array of filepaths, and the browser will\n   *  choose a format that works.</p>\n   * \n   *  @class p5.SoundFile\n   *  @constructor\n   *  @param {String/Array} path   path to a sound file (String). Optionally,\n   *                               you may include multiple file formats in\n   *                               an array. Alternately, accepts an object\n   *                               from the HTML5 File API, or a p5.File.\n   *  @param {Function} [successCallback]   Name of a function to call once file loads\n   *  @param {Function} [errorCallback]   Name of a function to call if file fails to\n   *                                      load. This function will receive an error or\n   *                                     XMLHttpRequest object with information\n   *                                     about what went wrong.\n   *  @param {Function} [whileLoadingCallback]   Name of a function to call while file\n   *                                             is loading. That function will\n   *                                             receive percentage loaded\n   *                                             (between 0 and 1) as a\n   *                                             parameter.\n   *                                             \n   *  @return {Object}    p5.SoundFile Object\n   *  @example \n   *  <div><code>\n   *  \n   *  function preload() {\n   *    mySound = loadSound('assets/doorbell.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    mySound.setVolume(0.1);\n   *    mySound.play();\n   *  }\n   * \n   * </code></div>\n   */\n  p5.SoundFile = function (paths, onload, onerror, whileLoading) {\n    if (typeof paths !== 'undefined') {\n      if (typeof paths == 'string' || typeof paths[0] == 'string') {\n        var path = p5.prototype._checkFileFormats(paths);\n        this.url = path;\n      } else if (typeof paths == 'object') {\n        if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n          // The File API isn't supported in this browser \n          throw 'Unable to load file because the File API is not supported';\n        }\n      }\n      // if type is a p5.File...get the actual file\n      if (paths.file) {\n        paths = paths.file;\n      }\n      this.file = paths;\n    }\n    // private _onended callback, set by the method: onended(callback)\n    this._onended = function () {\n    };\n    this._looping = false;\n    this._playing = false;\n    this._paused = false;\n    this._pauseTime = 0;\n    // cues for scheduling events with addCue() removeCue()\n    this._cues = [];\n    //  position of the most recently played sample\n    this._lastPos = 0;\n    this._counterNode;\n    this._scopeNode;\n    // array of sources so that they can all be stopped!\n    this.bufferSourceNodes = [];\n    // current source\n    this.bufferSourceNode = null;\n    this.buffer = null;\n    this.playbackRate = 1;\n    this.gain = 1;\n    this.input = p5sound.audiocontext.createGain();\n    this.output = p5sound.audiocontext.createGain();\n    this.reversed = false;\n    // start and end of playback / loop\n    this.startTime = 0;\n    this.endTime = null;\n    this.pauseTime = 0;\n    // \"restart\" would stop playback before retriggering\n    this.mode = 'sustain';\n    // time that playback was started, in millis\n    this.startMillis = null;\n    // stereo panning\n    this.panPosition = 0;\n    this.panner = new p5.Panner(this.output, p5sound.input, 2);\n    // it is possible to instantiate a soundfile with no path\n    if (this.url || this.file) {\n      this.load(onload, onerror);\n    }\n    // add this p5.SoundFile to the soundArray\n    p5sound.soundArray.push(this);\n    if (typeof whileLoading === 'function') {\n      this._whileLoading = whileLoading;\n    } else {\n      this._whileLoading = function () {\n      };\n    }\n  };\n  // register preload handling of loadSound\n  p5.prototype.registerPreloadMethod('loadSound', p5.prototype);\n  /**\n   *  loadSound() returns a new p5.SoundFile from a specified\n   *  path. If called during preload(), the p5.SoundFile will be ready\n   *  to play in time for setup() and draw(). If called outside of\n   *  preload, the p5.SoundFile will not be ready immediately, so\n   *  loadSound accepts a callback as the second parameter. Using a\n   *  <a href=\"https://github.com/processing/p5.js/wiki/Local-server\" target=\"_blank\" rel=\"external\">\n   *  local server</a> is recommended when loading external files.\n   *  \n   *  @method loadSound\n   *  @param  {String/Array}   path     Path to the sound file, or an array with\n   *                                    paths to soundfiles in multiple formats\n   *                                    i.e. ['sound.ogg', 'sound.mp3'].\n   *                                    Alternately, accepts an object: either\n   *                                    from the HTML5 File API, or a p5.File.\n   *  @param {Function} [successCallback]   Name of a function to call once file loads\n   *  @param {Function} [errorCallback]   Name of a function to call if there is\n   *                                      an error loading the file.\n   *  @param {Function} [whileLoading] Name of a function to call while file is loading.\n   *                                 This function will receive the percentage loaded\n   *                                 so far, from 0.0 to 1.0.\n   *  @return {SoundFile}            Returns a p5.SoundFile\n   *  @example \n   *  <div><code>\n   *  function preload() {\n   *   mySound = loadSound('assets/doorbell.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    mySound.setVolume(0.1);\n   *    mySound.play();\n   *  }\n   *  </code></div>\n   */\n  p5.prototype.loadSound = function (path, callback, onerror, whileLoading) {\n    // if loading locally without a server\n    if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n      alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n    }\n    var s = new p5.SoundFile(path, callback, onerror, whileLoading);\n    return s;\n  };\n  /**\n   * This is a helper function that the p5.SoundFile calls to load\n   * itself. Accepts a callback (the name of another function)\n   * as an optional parameter.\n   *\n   * @private\n   * @param {Function} [successCallback]   Name of a function to call once file loads\n   * @param {Function} [errorCallback]   Name of a function to call if there is an error\n   */\n  p5.SoundFile.prototype.load = function (callback, errorCallback) {\n    var loggedError = false;\n    var self = this;\n    var errorTrace = new Error().stack;\n    if (this.url != undefined && this.url != '') {\n      var request = new XMLHttpRequest();\n      request.addEventListener('progress', function (evt) {\n        self._updateProgress(evt);\n      }, false);\n      request.open('GET', this.url, true);\n      request.responseType = 'arraybuffer';\n      request.onload = function () {\n        if (request.status == 200) {\n          // on sucess loading file:\n          ac.decodeAudioData(request.response, // success decoding buffer:\n          function (buff) {\n            self.buffer = buff;\n            self.panner.inputChannels(buff.numberOfChannels);\n            if (callback) {\n              callback(self);\n            }\n          }, // error decoding buffer. \"e\" is undefined in Chrome 11/22/2015\n          function (e) {\n            var err = new CustomError('decodeAudioData', errorTrace, self.url);\n            var msg = 'AudioContext error at decodeAudioData for ' + self.url;\n            if (errorCallback) {\n              err.msg = msg;\n              errorCallback(err);\n            } else {\n              console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n            }\n          });\n        } else {\n          var err = new CustomError('loadSound', errorTrace, self.url);\n          var msg = 'Unable to load ' + self.url + '. The request status was: ' + request.status + ' (' + request.statusText + ')';\n          if (errorCallback) {\n            err.message = msg;\n            errorCallback(err);\n          } else {\n            console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n          }\n        }\n      };\n      // if there is another error, aside from 404...\n      request.onerror = function (e) {\n        var err = new CustomError('loadSound', errorTrace, self.url);\n        var msg = 'There was no response from the server at ' + self.url + '. Check the url and internet connectivity.';\n        if (errorCallback) {\n          err.message = msg;\n          errorCallback(err);\n        } else {\n          console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n        }\n      };\n      request.send();\n    } else if (this.file != undefined) {\n      var reader = new FileReader();\n      var self = this;\n      reader.onload = function () {\n        ac.decodeAudioData(reader.result, function (buff) {\n          self.buffer = buff;\n          self.panner.inputChannels(buff.numberOfChannels);\n          if (callback) {\n            callback(self);\n          }\n        });\n      };\n      reader.onerror = function (e) {\n        if (onerror)\n          onerror(e);\n      };\n      reader.readAsArrayBuffer(this.file);\n    }\n  };\n  // TO DO: use this method to create a loading bar that shows progress during file upload/decode.\n  p5.SoundFile.prototype._updateProgress = function (evt) {\n    if (evt.lengthComputable) {\n      var percentComplete = Math.log(evt.loaded / evt.total * 9.9);\n      this._whileLoading(percentComplete);\n    } else {\n      // Unable to compute progress information since the total size is unknown\n      this._whileLoading('size unknown');\n    }\n  };\n  /**\n   *  Returns true if the sound file finished loading successfully.\n   *  \n   *  @method  isLoaded\n   *  @return {Boolean} \n   */\n  p5.SoundFile.prototype.isLoaded = function () {\n    if (this.buffer) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * Play the p5.SoundFile\n   *\n   * @method play\n   * @param {Number} [startTime]            (optional) schedule playback to start (in seconds from now).\n   * @param {Number} [rate]             (optional) playback rate\n   * @param {Number} [amp]              (optional) amplitude (volume)\n   *                                     of playback\n   * @param {Number} [cueStart]        (optional) cue start time in seconds\n   * @param {Number} [duration]          (optional) duration of playback in seconds\n   */\n  p5.SoundFile.prototype.play = function (time, rate, amp, _cueStart, duration) {\n    var self = this;\n    var now = p5sound.audiocontext.currentTime;\n    var cueStart, cueEnd;\n    var time = time || 0;\n    if (time < 0) {\n      time = 0;\n    }\n    time = time + now;\n    // TO DO: if already playing, create array of buffers for easy stop()\n    if (this.buffer) {\n      // reset the pause time (if it was paused)\n      this._pauseTime = 0;\n      // handle restart playmode\n      if (this.mode === 'restart' && this.buffer && this.bufferSourceNode) {\n        var now = p5sound.audiocontext.currentTime;\n        this.bufferSourceNode.stop(time);\n        this._counterNode.stop(time);\n      }\n      // make a new source and counter. They are automatically assigned playbackRate and buffer\n      this.bufferSourceNode = this._initSourceNode();\n      // garbage collect counterNode and create a new one\n      if (this._counterNode)\n        this._counterNode = undefined;\n      this._counterNode = this._initCounterNode();\n      if (_cueStart) {\n        if (_cueStart >= 0 && _cueStart < this.buffer.duration) {\n          // this.startTime = cueStart;\n          cueStart = _cueStart;\n        } else {\n          throw 'start time out of range';\n        }\n      } else {\n        cueStart = 0;\n      }\n      if (duration) {\n        // if duration is greater than buffer.duration, just play entire file anyway rather than throw an error\n        duration = duration <= 1=\"\" this.buffer.duration=\"\" -=\"\" cuestart=\"\" ?=\"\" duration=\"\" :=\"\" this.buffer.duration;=\"\" }=\"\" else=\"\" {=\"\" cuestart;=\"\" to=\"\" do:=\"\" fix=\"\" this.=\"\" it=\"\" broke=\"\" in=\"\" safari=\"\" method=\"\" of=\"\" controlling=\"\" gain=\"\" for=\"\" individual=\"\" buffersourcenodes,=\"\" without=\"\" resetting=\"\" overall=\"\" soundfile=\"\" volume=\"\" if=\"\" (typeof(this.buffersourcenode.gain=\"==\" 'undefined'=\"\" )=\"\" this.buffersourcenode.gain=\"p5sound.audiocontext.createGain();\" this.buffersourcenode.connect(this.buffersourcenode.gain);=\"\" set=\"\" local=\"\" amp=\"\" provided,=\"\" otherwise=\"\" var=\"\" a=\"amp\" ||=\"\" 1;=\"\" this.buffersourcenode.gain.gain.setvalueattime(a,=\"\" p5sound.audiocontext.currenttime);=\"\" this.buffersourcenode.gain.connect(this.output);=\"\" this.buffersourcenode.connect(this.output);=\"\" this.output.gain.value=\"a;\" not=\"\" necessary=\"\" with=\"\" _initbuffersource=\"\" this.buffersourcenode.playbackrate.cancelscheduledvalues(now);=\"\" rate=\"rate\" math.abs(this.playbackrate);=\"\" this.buffersourcenode.playbackrate.setvalueattime(rate,=\"\" now);=\"\" was=\"\" paused,=\"\" play=\"\" at=\"\" the=\"\" pause=\"\" position=\"\" (this._paused)=\"\" this.buffersourcenode.start(time,=\"\" this.pausetime,=\"\" duration);=\"\" this._counternode.start(time,=\"\" cuestart,=\"\" this._playing=\"true;\" this._paused=\"false;\" add=\"\" source=\"\" sources=\"\" array,=\"\" which=\"\" is=\"\" used=\"\" stopall()=\"\" this.buffersourcenodes.push(this.buffersourcenode);=\"\" this.buffersourcenode._arrayindex=\"this.bufferSourceNodes.length\" delete=\"\" this.buffersourcenode=\"\" from=\"\" array=\"\" when=\"\" done=\"\" playing:=\"\" clearonend=\"function\" (e)=\"\" this.removeeventlistener('ended',=\"\" clearonend,=\"\" false);=\"\" call=\"\" onended=\"\" callback=\"\" self._onended(self);=\"\" self.buffersourcenodes.foreach(function=\"\" (n,=\"\" i)=\"\" (n._playing=\"==\" false)=\"\" self.buffersourcenodes.splice(i);=\"\" });=\"\" (self.buffersourcenodes.length=\"==\" 0)=\"\" self._playing=\"false;\" };=\"\" this.buffersourcenode.onended=\"clearOnEnd;\" throw=\"\" 'not=\"\" ready=\"\" file,=\"\" buffer=\"\" has=\"\" yet=\"\" load.=\"\" try=\"\" preload()';=\"\" looping,=\"\" will=\"\" restart=\"\" original=\"\" time=\"\" this.buffersourcenode.loop=\"this._looping;\" this._counternode.loop=\"this._looping;\" (this._looping=\"==\" true)=\"\" cueend=\"cueStart\" +=\"\" duration;=\"\" this.buffersourcenode.loopstart=\"cueStart;\" this.buffersourcenode.loopend=\"cueEnd;\" this._counternode.loopstart=\"cueStart;\" this._counternode.loopend=\"cueEnd;\" **=\"\" *=\"\" p5.soundfile=\"\" two=\"\" modes:=\"\" <code=\"\">restart and\n   *  <code>sustain</code>. Play Mode determines what happens to a\n   *  p5.SoundFile if it is triggered while in the middle of playback.\n   *  In sustain mode, playback will continue simultaneous to the\n   *  new playback. In restart mode, play() will stop playback\n   *  and start over. Sustain is the default mode. \n   *  \n   *  @method  playMode\n   *  @param  {String} str 'restart' or 'sustain'\n   *  @example\n   *  <div><code>\n   *  function setup(){\n   *    mySound = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *  function mouseClicked() {\n   *    mySound.playMode('sustain');\n   *    mySound.play();\n   *  }\n   *  function keyPressed() {\n   *    mySound.playMode('restart');\n   *    mySound.play();\n   *  }\n   * \n   * </code></div>\n   */\n  p5.SoundFile.prototype.playMode = function (str) {\n    var s = str.toLowerCase();\n    // if restart, stop all other sounds from playing\n    if (s === 'restart' && this.buffer && this.bufferSourceNode) {\n      for (var i = 0; i < this.bufferSourceNodes.length - 1; i++) {\n        var now = p5sound.audiocontext.currentTime;\n        this.bufferSourceNodes[i].stop(now);\n      }\n    }\n    // set play mode to effect future playback\n    if (s === 'restart' || s === 'sustain') {\n      this.mode = s;\n    } else {\n      throw 'Invalid play mode. Must be either \"restart\" or \"sustain\"';\n    }\n  };\n  /**\n   *  Pauses a file that is currently playing. If the file is not\n   *  playing, then nothing will happen.\n   *\n   *  After pausing, .play() will resume from the paused\n   *  position.\n   *  If p5.SoundFile had been set to loop before it was paused,\n   *  it will continue to loop after it is unpaused with .play().\n   *\n   *  @method pause\n   *  @param {Number} [startTime] (optional) schedule event to occur\n   *                               seconds from now\n   *  @example\n   *  <div><code>\n   *  var soundFile;\n   *  \n   *  function preload() {\n   *    soundFormats('ogg', 'mp3');\n   *    soundFile = loadSound('assets/Damscray_-_Dancing_Tiger_02.mp3');\n   *  }\n   *  function setup() {\n   *    background(0, 255, 0);\n   *    soundFile.setVolume(0.1);\n   *    soundFile.loop();\n   *  }\n   *  function keyTyped() {\n   *    if (key == 'p') {\n   *      soundFile.pause();\n   *      background(255, 0, 0);\n   *    }\n   *  }\n   *  \n   *  function keyReleased() {\n   *    if (key == 'p') {\n   *      soundFile.play();\n   *      background(0, 255, 0);\n   *    }\n   *  </code>\n   *  </div>\n   */\n  p5.SoundFile.prototype.pause = function (time) {\n    var now = p5sound.audiocontext.currentTime;\n    var time = time || 0;\n    var pTime = time + now;\n    if (this.isPlaying() && this.buffer && this.bufferSourceNode) {\n      this.pauseTime = this.currentTime();\n      this.bufferSourceNode.stop(pTime);\n      this._counterNode.stop(pTime);\n      this._paused = true;\n      this._playing = false;\n      this._pauseTime = this.currentTime();\n    } else {\n      this._pauseTime = 0;\n    }\n  };\n  /**\n   * Loop the p5.SoundFile. Accepts optional parameters to set the\n   * playback rate, playback volume, loopStart, loopEnd.\n   *\n   * @method loop\n   * @param {Number} [startTime] (optional) schedule event to occur\n   *                             seconds from now\n   * @param {Number} [rate]        (optional) playback rate\n   * @param {Number} [amp]         (optional) playback volume\n   * @param {Number} [cueLoopStart](optional) startTime in seconds\n   * @param {Number} [duration]  (optional) loop duration in seconds\n   */\n  p5.SoundFile.prototype.loop = function (startTime, rate, amp, loopStart, duration) {\n    this._looping = true;\n    this.play(startTime, rate, amp, loopStart, duration);\n  };\n  /**\n   * Set a p5.SoundFile's looping flag to true or false. If the sound\n   * is currently playing, this change will take effect when it\n   * reaches the end of the current playback. \n   * \n   * @param {Boolean} Boolean   set looping to true or false\n   */\n  p5.SoundFile.prototype.setLoop = function (bool) {\n    if (bool === true) {\n      this._looping = true;\n    } else if (bool === false) {\n      this._looping = false;\n    } else {\n      throw 'Error: setLoop accepts either true or false';\n    }\n    if (this.bufferSourceNode) {\n      this.bufferSourceNode.loop = this._looping;\n      this._counterNode.loop = this._looping;\n    }\n  };\n  /**\n   * Returns 'true' if a p5.SoundFile is currently looping and playing, 'false' if not.\n   *\n   * @return {Boolean}\n   */\n  p5.SoundFile.prototype.isLooping = function () {\n    if (!this.bufferSourceNode) {\n      return false;\n    }\n    if (this._looping === true && this.isPlaying() === true) {\n      return true;\n    }\n    return false;\n  };\n  /**\n   *  Returns true if a p5.SoundFile is playing, false if not (i.e.\n   *  paused or stopped).\n   *\n   *  @method isPlaying\n   *  @return {Boolean}\n   */\n  p5.SoundFile.prototype.isPlaying = function () {\n    return this._playing;\n  };\n  /**\n   *  Returns true if a p5.SoundFile is paused, false if not (i.e.\n   *  playing or stopped).\n   *\n   *  @method  isPaused\n   *  @return {Boolean}\n   */\n  p5.SoundFile.prototype.isPaused = function () {\n    return this._paused;\n  };\n  /**\n   * Stop soundfile playback.\n   *\n   * @method stop\n   * @param {Number} [startTime] (optional) schedule event to occur\n   *                             in seconds from now\n   */\n  p5.SoundFile.prototype.stop = function (timeFromNow) {\n    var time = timeFromNow || 0;\n    if (this.mode == 'sustain') {\n      this.stopAll(time);\n      this._playing = false;\n      this.pauseTime = 0;\n      this._paused = false;\n    } else if (this.buffer && this.bufferSourceNode) {\n      var now = p5sound.audiocontext.currentTime;\n      var t = time || 0;\n      this.pauseTime = 0;\n      this.bufferSourceNode.stop(now + t);\n      this._counterNode.stop(now + t);\n      this._playing = false;\n      this._paused = false;\n    }\n  };\n  /**\n   *  Stop playback on all of this soundfile's sources.\n   *  @private\n   */\n  p5.SoundFile.prototype.stopAll = function (_time) {\n    var now = p5sound.audiocontext.currentTime;\n    var time = _time || 0;\n    if (this.buffer && this.bufferSourceNode) {\n      for (var i = 0; i < this.bufferSourceNodes.length; i++) {\n        if (typeof this.bufferSourceNodes[i] != undefined) {\n          try {\n            this.bufferSourceNodes[i].onended = function () {\n            };\n            this.bufferSourceNodes[i].stop(now + time);\n          } catch (e) {\n          }\n        }\n      }\n      this._counterNode.stop(now + time);\n      this._onended(this);\n    }\n  };\n  /**\n   *  Multiply the output volume (amplitude) of a sound file\n   *  between 0.0 (silence) and 1.0 (full volume).\n   *  1.0 is the maximum amplitude of a digital sound, so multiplying\n   *  by greater than 1.0 may cause digital distortion. To\n   *  fade, provide a <code>rampTime</code> parameter. For more\n   *  complex fades, see the Env class.\n   *\n   *  Alternately, you can pass in a signal source such as an\n   *  oscillator to modulate the amplitude with an audio signal.\n   *\n   *  @method  setVolume\n   *  @param {Number|Object} volume  Volume (amplitude) between 0.0\n   *                                     and 1.0 or modulating signal/oscillator\n   *  @param {Number} [rampTime]  Fade for t seconds\n   *  @param {Number} [timeFromNow]  Schedule this event to happen at\n   *                                 t seconds in the future\n   */\n  p5.SoundFile.prototype.setVolume = function (vol, rampTime, tFromNow) {\n    if (typeof vol === 'number') {\n      var rampTime = rampTime || 0;\n      var tFromNow = tFromNow || 0;\n      var now = p5sound.audiocontext.currentTime;\n      var currentVol = this.output.gain.value;\n      this.output.gain.cancelScheduledValues(now + tFromNow);\n      this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n      this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n    } else if (vol) {\n      vol.connect(this.output.gain);\n    } else {\n      // return the Gain Node\n      return this.output.gain;\n    }\n  };\n  // same as setVolume, to match Processing Sound\n  p5.SoundFile.prototype.amp = p5.SoundFile.prototype.setVolume;\n  // these are the same thing\n  p5.SoundFile.prototype.fade = p5.SoundFile.prototype.setVolume;\n  p5.SoundFile.prototype.getVolume = function () {\n    return this.output.gain.value;\n  };\n  /**\n   * Set the stereo panning of a p5.sound object to\n   * a floating point number between -1.0 (left) and 1.0 (right).\n   * Default is 0.0 (center).\n   *\n   * @method pan\n   * @param {Number} [panValue]     Set the stereo panner\n   * @param  {Number} timeFromNow schedule this event to happen\n   *                                seconds from now\n   * @example\n   * <div><code>\n   *\n   *  var ball = {};\n   *  var soundFile;\n   *\n   *  function setup() {\n   *    soundFormats('ogg', 'mp3');\n   *    soundFile = loadSound('assets/beatbox.mp3');\n   *  }\n   *  \n   *  function draw() {\n   *    background(0);\n   *    ball.x = constrain(mouseX, 0, width);\n   *    ellipse(ball.x, height/2, 20, 20)\n   *  }\n   *  \n   *  function mousePressed(){\n   *    // map the ball's x location to a panning degree \n   *    // between -1.0 (left) and 1.0 (right)\n   *    var panning = map(ball.x, 0., width,-1.0, 1.0);\n   *    soundFile.pan(panning);\n   *    soundFile.play();\n   *  }\n   *  </code></div>\n   */\n  p5.SoundFile.prototype.pan = function (pval, tFromNow) {\n    this.panPosition = pval;\n    this.panner.pan(pval, tFromNow);\n  };\n  /**\n   * Returns the current stereo pan position (-1.0 to 1.0)\n   *\n   * @return {Number} Returns the stereo pan setting of the Oscillator\n   *                          as a number between -1.0 (left) and 1.0 (right).\n   *                          0.0 is center and default.\n   */\n  p5.SoundFile.prototype.getPan = function () {\n    return this.panPosition;\n  };\n  /**\n   *  Set the playback rate of a sound file. Will change the speed and the pitch.\n   *  Values less than zero will reverse the audio buffer.\n   *\n   *  @method rate\n   *  @param {Number} [playbackRate]     Set the playback rate. 1.0 is normal,\n   *                                     .5 is half-speed, 2.0 is twice as fast.\n   *                                     Must be greater than zero.\n   *  @example\n   *  <div><code>\n   *  var song;\n   *  \n   *  function preload() {\n   *    song = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    song.loop();\n   *  }\n   *\n   *  function draw() {\n   *    background(200);\n   *    \n   *    // Set the rate to a range between 0.1 and 4\n   *    // Changing the rate also alters the pitch\n   *    var speed = map(mouseY, 0.1, height, 0, 2);\n   *    speed = constrain(speed, 0.01, 4);\n   *    song.rate(speed);\n   *    \n   *    // Draw a circle to show what is going on\n   *    stroke(0);\n   *    fill(51, 100);\n   *    ellipse(mouseX, 100, 48, 48);\n   *  }\n   *  \n   * </code>\n   * </div>\n   *  \n   */\n  p5.SoundFile.prototype.rate = function (playbackRate) {\n    if (this.playbackRate === playbackRate && this.bufferSourceNode) {\n      if (this.bufferSourceNode.playbackRate.value === playbackRate) {\n        return;\n      }\n    }\n    this.playbackRate = playbackRate;\n    var rate = playbackRate;\n    if (this.playbackRate === 0 && this._playing) {\n      this.pause();\n    }\n    if (this.playbackRate < 0 && !this.reversed) {\n      var cPos = this.currentTime();\n      var cRate = this.bufferSourceNode.playbackRate.value;\n      // this.pause();\n      this.reverseBuffer();\n      rate = Math.abs(playbackRate);\n      var newPos = (cPos - this.duration()) / rate;\n      this.pauseTime = newPos;\n    } else if (this.playbackRate > 0 && this.reversed) {\n      this.reverseBuffer();\n    }\n    if (this.bufferSourceNode) {\n      var now = p5sound.audiocontext.currentTime;\n      this.bufferSourceNode.playbackRate.cancelScheduledValues(now);\n      this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(rate), now);\n      this._counterNode.playbackRate.cancelScheduledValues(now);\n      this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(rate), now);\n    }\n  };\n  // TO DO: document this\n  p5.SoundFile.prototype.setPitch = function (num) {\n    var newPlaybackRate = midiToFreq(num) / midiToFreq(60);\n    this.rate(newPlaybackRate);\n  };\n  p5.SoundFile.prototype.getPlaybackRate = function () {\n    return this.playbackRate;\n  };\n  /**\n   * Returns the duration of a sound file in seconds.\n   *\n   * @method duration\n   * @return {Number} The duration of the soundFile in seconds.\n   */\n  p5.SoundFile.prototype.duration = function () {\n    // Return Duration\n    if (this.buffer) {\n      return this.buffer.duration;\n    } else {\n      return 0;\n    }\n  };\n  /**\n   * Return the current position of the p5.SoundFile playhead, in seconds.\n   * Note that if you change the playbackRate while the p5.SoundFile is\n   * playing, the results may not be accurate.\n   *\n   * @method currentTime\n   * @return {Number}   currentTime of the soundFile in seconds.\n   */\n  p5.SoundFile.prototype.currentTime = function () {\n    // TO DO --> make reverse() flip these values appropriately\n    if (this._pauseTime > 0) {\n      return this._pauseTime;\n    } else {\n      return this._lastPos / ac.sampleRate;\n    }\n  };\n  /**\n   * Move the playhead of the song to a position, in seconds. Start\n   * and Stop time. If none are given, will reset the file to play\n   * entire duration from start to finish.\n   *\n   * @method jump\n   * @param {Number} cueTime    cueTime of the soundFile in seconds.\n   * @param {Number} uuration    duration in seconds.\n   */\n  p5.SoundFile.prototype.jump = function (cueTime, duration) {\n    if (cueTime < 0 || cueTime > this.buffer.duration) {\n      throw 'jump time out of range';\n    }\n    if (duration > this.buffer.duration - cueTime) {\n      throw 'end time out of range';\n    }\n    var cTime = cueTime || 0;\n    var eTime = duration || this.buffer.duration - cueTime;\n    if (this.isPlaying()) {\n      this.stop();\n    }\n    this.play(0, this.playbackRate, this.output.gain.value, cTime, eTime);\n  };\n  /**\n  * Return the number of channels in a sound file.\n  * For example, Mono = 1, Stereo = 2.\n  *\n  * @method channels\n  * @return {Number} [channels]\n  */\n  p5.SoundFile.prototype.channels = function () {\n    return this.buffer.numberOfChannels;\n  };\n  /**\n  * Return the sample rate of the sound file.\n  *\n  * @method sampleRate\n  * @return {Number} [sampleRate]\n  */\n  p5.SoundFile.prototype.sampleRate = function () {\n    return this.buffer.sampleRate;\n  };\n  /**\n  * Return the number of samples in a sound file.\n  * Equal to sampleRate * duration.\n  *\n  * @method frames\n  * @return {Number} [sampleCount]\n  */\n  p5.SoundFile.prototype.frames = function () {\n    return this.buffer.length;\n  };\n  /**\n   * Returns an array of amplitude peaks in a p5.SoundFile that can be\n   * used to draw a static waveform. Scans through the p5.SoundFile's\n   * audio buffer to find the greatest amplitudes. Accepts one\n   * parameter, 'length', which determines size of the array.\n   * Larger arrays result in more precise waveform visualizations.\n   * \n   * Inspired by Wavesurfer.js.\n   * \n   * @method  getPeaks\n   * @params {Number} [length] length is the size of the returned array.\n   *                          Larger length results in more precision.\n   *                          Defaults to 5*width of the browser window.\n   * @returns {Float32Array} Array of peaks.\n   */\n  p5.SoundFile.prototype.getPeaks = function (length) {\n    if (this.buffer) {\n      // set length to window's width if no length is provided\n      if (!length) {\n        length = window.width * 5;\n      }\n      if (this.buffer) {\n        var buffer = this.buffer;\n        var sampleSize = buffer.length / length;\n        var sampleStep = ~~(sampleSize / 10) || 1;\n        var channels = buffer.numberOfChannels;\n        var peaks = new Float32Array(Math.round(length));\n        for (var c = 0; c < channels; c++) {\n          var chan = buffer.getChannelData(c);\n          for (var i = 0; i < length; i++) {\n            var start = ~~(i * sampleSize);\n            var end = ~~(start + sampleSize);\n            var max = 0;\n            for (var j = start; j < end; j += sampleStep) {\n              var value = chan[j];\n              if (value > max) {\n                max = value;\n              } else if (-value > max) {\n                max = value;\n              }\n            }\n            if (c === 0 || Math.abs(max) > peaks[i]) {\n              peaks[i] = max;\n            }\n          }\n        }\n        return peaks;\n      }\n    } else {\n      throw 'Cannot load peaks yet, buffer is not loaded';\n    }\n  };\n  /**\n   *  Reverses the p5.SoundFile's buffer source.\n   *  Playback must be handled separately (see example).\n   *\n   *  @method  reverseBuffer\n   *  @example\n   *  <div><code>\n   *  var drum;\n   *  \n   *  function preload() {\n   *    drum = loadSound('assets/drum.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    drum.reverseBuffer();\n   *    drum.play();\n   *  }\n   *  \n   * </code>\n   * </div>\n   */\n  p5.SoundFile.prototype.reverseBuffer = function () {\n    var curVol = this.getVolume();\n    this.setVolume(0, 0.01, 0);\n    this.pause();\n    if (this.buffer) {\n      for (var i = 0; i < this.buffer.numberOfChannels; i++) {\n        Array.prototype.reverse.call(this.buffer.getChannelData(i));\n      }\n      // set reversed flag\n      this.reversed = !this.reversed;\n    } else {\n      throw 'SoundFile is not done loading';\n    }\n    this.setVolume(curVol, 0.01, 0.0101);\n    this.play();\n  };\n  /**\n   *  Schedule an event to be called when the soundfile\n   *  reaches the end of a buffer. If the soundfile is\n   *  playing through once, this will be called when it\n   *  ends. If it is looping, it will be called when\n   *  stop is called.\n   *  \n   *  @method  onended\n   *  @param  {Function} callback function to call when the\n   *                              soundfile has ended.\n   */\n  p5.SoundFile.prototype.onended = function (callback) {\n    this._onended = callback;\n    return this;\n  };\n  p5.SoundFile.prototype.add = function () {\n  };\n  p5.SoundFile.prototype.dispose = function () {\n    var now = p5sound.audiocontext.currentTime;\n    // remove reference to soundfile\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.stop(now);\n    if (this.buffer && this.bufferSourceNode) {\n      for (var i = 0; i < this.bufferSourceNodes.length - 1; i++) {\n        if (this.bufferSourceNodes[i] !== null) {\n          this.bufferSourceNodes[i].disconnect();\n          try {\n            this.bufferSourceNodes[i].stop(now);\n          } catch (e) {\n          }\n          this.bufferSourceNodes[i] = null;\n        }\n      }\n      if (this.isPlaying()) {\n        try {\n          this._counterNode.stop(now);\n        } catch (e) {\n          console.log(e);\n        }\n        this._counterNode = null;\n      }\n    }\n    if (this.output) {\n      this.output.disconnect();\n      this.output = null;\n    }\n    if (this.panner) {\n      this.panner.disconnect();\n      this.panner = null;\n    }\n  };\n  /**\n   * Connects the output of a p5sound object to input of another\n   * p5.sound object. For example, you may connect a p5.SoundFile to an\n   * FFT or an Effect. If no parameter is given, it will connect to\n   * the master output. Most p5sound objects connect to the master\n   * output when they are created.\n   *\n   * @method connect\n   * @param {Object} [object] Audio object that accepts an input\n   */\n  p5.SoundFile.prototype.connect = function (unit) {\n    if (!unit) {\n      this.panner.connect(p5sound.input);\n    } else {\n      if (unit.hasOwnProperty('input')) {\n        this.panner.connect(unit.input);\n      } else {\n        this.panner.connect(unit);\n      }\n    }\n  };\n  /**\n   * Disconnects the output of this p5sound object.\n   *\n   * @method disconnect\n   */\n  p5.SoundFile.prototype.disconnect = function (unit) {\n    this.panner.disconnect(unit);\n  };\n  /**\n   */\n  p5.SoundFile.prototype.getLevel = function (smoothing) {\n    console.warn('p5.SoundFile.getLevel has been removed from the library. Use p5.Amplitude instead');\n  };\n  /**\n   *  Reset the source for this SoundFile to a\n   *  new path (URL).\n   *\n   *  @method  setPath\n   *  @param {String}   path     path to audio file\n   *  @param {Function} callback Callback\n   */\n  p5.SoundFile.prototype.setPath = function (p, callback) {\n    var path = p5.prototype._checkFileFormats(p);\n    this.url = path;\n    this.load(callback);\n  };\n  /**\n   *  Replace the current Audio Buffer with a new Buffer.\n   *  \n   *  @param {Array} buf Array of Float32 Array(s). 2 Float32 Arrays\n   *                     will create a stereo source. 1 will create\n   *                     a mono source.\n   */\n  p5.SoundFile.prototype.setBuffer = function (buf) {\n    var numChannels = buf.length;\n    var size = buf[0].length;\n    var newBuffer = ac.createBuffer(numChannels, size, ac.sampleRate);\n    if (!buf[0] instanceof Float32Array) {\n      buf[0] = new Float32Array(buf[0]);\n    }\n    for (var channelNum = 0; channelNum < numChannels; channelNum++) {\n      var channel = newBuffer.getChannelData(channelNum);\n      channel.set(buf[channelNum]);\n    }\n    this.buffer = newBuffer;\n    // set numbers of channels on input to the panner\n    this.panner.inputChannels(numChannels);\n  };\n  //////////////////////////////////////////////////\n  // script processor node with an empty buffer to help\n  // keep a sample-accurate position in playback buffer.\n  // Inspired by Chinmay Pendharkar's technique for Sonoport --> http://bit.ly/1HwdCsV\n  // Copyright [2015] [Sonoport (Asia) Pte. Ltd.],\n  // Licensed under the Apache License http://apache.org/licenses/LICENSE-2.0\n  ////////////////////////////////////////////////////////////////////////////////////\n  // initialize counterNode, set its initial buffer and playbackRate\n  p5.SoundFile.prototype._initCounterNode = function () {\n    var self = this;\n    var now = ac.currentTime;\n    var cNode = ac.createBufferSource();\n    // dispose of scope node if it already exists\n    if (self._scopeNode) {\n      self._scopeNode.disconnect();\n      self._scopeNode.onaudioprocess = undefined;\n      self._scopeNode = null;\n    }\n    self._scopeNode = ac.createScriptProcessor(256, 1, 1);\n    // create counter buffer of the same length as self.buffer\n    cNode.buffer = _createCounterBuffer(self.buffer);\n    cNode.playbackRate.setValueAtTime(self.playbackRate, now);\n    cNode.connect(self._scopeNode);\n    self._scopeNode.connect(p5.soundOut._silentNode);\n    self._scopeNode.onaudioprocess = function (processEvent) {\n      var inputBuffer = processEvent.inputBuffer.getChannelData(0);\n      // update the lastPos\n      self._lastPos = inputBuffer[inputBuffer.length - 1] || 0;\n      // do any callbacks that have been scheduled\n      self._onTimeUpdate(self._lastPos);\n    };\n    return cNode;\n  };\n  // initialize sourceNode, set its initial buffer and playbackRate\n  p5.SoundFile.prototype._initSourceNode = function () {\n    var self = this;\n    var now = ac.currentTime;\n    var bufferSourceNode = ac.createBufferSource();\n    bufferSourceNode.buffer = self.buffer;\n    bufferSourceNode.playbackRate.setValueAtTime(self.playbackRate, now);\n    return bufferSourceNode;\n  };\n  var _createCounterBuffer = function (buffer) {\n    var array = new Float32Array(buffer.length);\n    var audioBuf = ac.createBuffer(1, buffer.length, 44100);\n    for (var index = 0; index < buffer.length; index++) {\n      array[index] = index;\n    }\n    audioBuf.getChannelData(0).set(array);\n    return audioBuf;\n  };\n  /**\n   *  processPeaks returns an array of timestamps where it thinks there is a beat.\n   *\n   *  This is an asynchronous function that processes the soundfile in an offline audio context,\n   *  and sends the results to your callback function.\n   *\n   *  The process involves running the soundfile through a lowpass filter, and finding all of the\n   *  peaks above the initial threshold. If the total number of peaks are below the minimum number of peaks,\n   *  it decreases the threshold and re-runs the analysis until either minPeaks or minThreshold are reached.\n   *  \n   *  @method  processPeaks\n   *  @param  {Function} callback       a function to call once this data is returned\n   *  @param  {Number}   [initThreshold] initial threshold defaults to 0.9\n   *  @param  {Number}   [minThreshold]   minimum threshold defaults to 0.22\n   *  @param  {Number}   [minPeaks]       minimum number of peaks defaults to 200\n   *  @return {Array}                  Array of timestamped peaks\n   */\n  p5.SoundFile.prototype.processPeaks = function (callback, _initThreshold, _minThreshold, _minPeaks) {\n    var bufLen = this.buffer.length;\n    var sampleRate = this.buffer.sampleRate;\n    var buffer = this.buffer;\n    var initialThreshold = _initThreshold || 0.9, threshold = initialThreshold, minThreshold = _minThreshold || 0.22, minPeaks = _minPeaks || 200;\n    // Create offline context\n    var offlineContext = new OfflineAudioContext(1, bufLen, sampleRate);\n    // create buffer source\n    var source = offlineContext.createBufferSource();\n    source.buffer = buffer;\n    // Create filter. TO DO: allow custom setting of filter\n    var filter = offlineContext.createBiquadFilter();\n    filter.type = 'lowpass';\n    source.connect(filter);\n    filter.connect(offlineContext.destination);\n    // start playing at time:0\n    source.start(0);\n    offlineContext.startRendering();\n    // Render the song\n    // act on the result\n    offlineContext.oncomplete = function (e) {\n      var data = {};\n      var filteredBuffer = e.renderedBuffer;\n      var bufferData = filteredBuffer.getChannelData(0);\n      // step 1: \n      // create Peak instances, add them to array, with strength and sampleIndex\n      do {\n        allPeaks = getPeaksAtThreshold(bufferData, threshold);\n        threshold -= 0.005;\n      } while (Object.keys(allPeaks).length < minPeaks && threshold >= minThreshold);\n      // step 2:\n      // find intervals for each peak in the sampleIndex, add tempos array\n      var intervalCounts = countIntervalsBetweenNearbyPeaks(allPeaks);\n      // step 3: find top tempos\n      var groups = groupNeighborsByTempo(intervalCounts, filteredBuffer.sampleRate);\n      // sort top intervals\n      var topTempos = groups.sort(function (intA, intB) {\n        return intB.count - intA.count;\n      }).splice(0, 5);\n      // set this SoundFile's tempo to the top tempo ??\n      this.tempo = topTempos[0].tempo;\n      // step 4:\n      // new array of peaks at top tempo within a bpmVariance\n      var bpmVariance = 5;\n      var tempoPeaks = getPeaksAtTopTempo(allPeaks, topTempos[0].tempo, filteredBuffer.sampleRate, bpmVariance);\n      callback(tempoPeaks);\n    };\n  };\n  // process peaks\n  var Peak = function (amp, i) {\n    this.sampleIndex = i;\n    this.amplitude = amp;\n    this.tempos = [];\n    this.intervals = [];\n  };\n  var allPeaks = [];\n  // 1. for processPeaks() Function to identify peaks above a threshold\n  // returns an array of peak indexes as frames (samples) of the original soundfile\n  function getPeaksAtThreshold(data, threshold) {\n    var peaksObj = {};\n    var length = data.length;\n    for (var i = 0; i < length; i++) {\n      if (data[i] > threshold) {\n        var amp = data[i];\n        var peak = new Peak(amp, i);\n        peaksObj[i] = peak;\n        // Skip forward ~ 1/8s to get past this peak.\n        i += 6000;\n      }\n      i++;\n    }\n    return peaksObj;\n  }\n  // 2. for processPeaks()\n  function countIntervalsBetweenNearbyPeaks(peaksObj) {\n    var intervalCounts = [];\n    var peaksArray = Object.keys(peaksObj).sort();\n    for (var index = 0; index < peaksArray.length; index++) {\n      // find intervals in comparison to nearby peaks\n      for (var i = 0; i < 10; i++) {\n        var startPeak = peaksObj[peaksArray[index]];\n        var endPeak = peaksObj[peaksArray[index + i]];\n        if (startPeak && endPeak) {\n          var startPos = startPeak.sampleIndex;\n          var endPos = endPeak.sampleIndex;\n          var interval = endPos - startPos;\n          // add a sample interval to the startPeek in the allPeaks array\n          if (interval > 0) {\n            startPeak.intervals.push(interval);\n          }\n          // tally the intervals and return interval counts\n          var foundInterval = intervalCounts.some(function (intervalCount, p) {\n            if (intervalCount.interval === interval) {\n              intervalCount.count++;\n              return intervalCount;\n            }\n          });\n          // store with JSON like formatting\n          if (!foundInterval) {\n            intervalCounts.push({\n              interval: interval,\n              count: 1\n            });\n          }\n        }\n      }\n    }\n    return intervalCounts;\n  }\n  // 3. for processPeaks --> find tempo\n  function groupNeighborsByTempo(intervalCounts, sampleRate) {\n    var tempoCounts = [];\n    intervalCounts.forEach(function (intervalCount, i) {\n      try {\n        // Convert an interval to tempo\n        var theoreticalTempo = Math.abs(60 / (intervalCount.interval / sampleRate));\n        theoreticalTempo = mapTempo(theoreticalTempo);\n        var foundTempo = tempoCounts.some(function (tempoCount) {\n          if (tempoCount.tempo === theoreticalTempo)\n            return tempoCount.count += intervalCount.count;\n        });\n        if (!foundTempo) {\n          if (isNaN(theoreticalTempo)) {\n            return;\n          }\n          tempoCounts.push({\n            tempo: Math.round(theoreticalTempo),\n            count: intervalCount.count\n          });\n        }\n      } catch (e) {\n        throw e;\n      }\n    });\n    return tempoCounts;\n  }\n  // 4. for processPeaks - get peaks at top tempo\n  function getPeaksAtTopTempo(peaksObj, tempo, sampleRate, bpmVariance) {\n    var peaksAtTopTempo = [];\n    var peaksArray = Object.keys(peaksObj).sort();\n    // TO DO: filter out peaks that have the tempo and return\n    for (var i = 0; i < peaksArray.length; i++) {\n      var key = peaksArray[i];\n      var peak = peaksObj[key];\n      for (var j = 0; j < peak.intervals.length; j++) {\n        var intervalBPM = Math.round(Math.abs(60 / (peak.intervals[j] / sampleRate)));\n        intervalBPM = mapTempo(intervalBPM);\n        var dif = intervalBPM - tempo;\n        if (Math.abs(intervalBPM - tempo) < bpmVariance) {\n          // convert sampleIndex to seconds\n          peaksAtTopTempo.push(peak.sampleIndex / 44100);\n        }\n      }\n    }\n    // filter out peaks that are very close to each other\n    peaksAtTopTempo = peaksAtTopTempo.filter(function (peakTime, index, arr) {\n      var dif = arr[index + 1] - peakTime;\n      if (dif > 0.01) {\n        return true;\n      }\n    });\n    return peaksAtTopTempo;\n  }\n  // helper function for processPeaks\n  function mapTempo(theoreticalTempo) {\n    // these scenarios create infinite while loop\n    if (!isFinite(theoreticalTempo) || theoreticalTempo == 0) {\n      return;\n    }\n    // Adjust the tempo to fit within the 90-180 BPM range\n    while (theoreticalTempo < 90)\n      theoreticalTempo *= 2;\n    while (theoreticalTempo > 180 && theoreticalTempo > 90)\n      theoreticalTempo /= 2;\n    return theoreticalTempo;\n  }\n  /*** SCHEDULE EVENTS ***/\n  /**\n   *  Schedule events to trigger every time a MediaElement\n   *  (audio/video) reaches a playback cue point.\n   *\n   *  Accepts a callback function, a time (in seconds) at which to trigger\n   *  the callback, and an optional parameter for the callback.\n   *\n   *  Time will be passed as the first parameter to the callback function,\n   *  and param will be the second parameter.\n   *\n   *\n   *  @method  addCue\n   *  @param {Number}   time     Time in seconds, relative to this media\n   *                             element's playback. For example, to trigger\n   *                             an event every time playback reaches two\n   *                             seconds, pass in the number 2. This will be\n   *                             passed as the first parameter to\n   *                             the callback function.\n   *  @param {Function} callback Name of a function that will be\n   *                             called at the given time. The callback will\n   *                             receive time and (optionally) param as its\n   *                             two parameters.\n   *  @param {Object} [value]    An object to be passed as the\n   *                             second parameter to the\n   *                             callback function.\n   *  @return {Number} id ID of this cue,\n   *                      useful for removeCue(id)\n   *  @example\n   *  <div><code>\n   *  function setup() {\n   *    background(0);\n   *    noStroke();\n   *    fill(255);\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *    \n   *    mySound = loadSound('assets/beat.mp3');\n   *\n   *    // schedule calls to changeText\n   *    mySound.addCue(0.50, changeText, \"hello\" );\n   *    mySound.addCue(1.00, changeText, \"p5\" );\n   *    mySound.addCue(1.50, changeText, \"what\" );\n   *    mySound.addCue(2.00, changeText, \"do\" );\n   *    mySound.addCue(2.50, changeText, \"you\" );\n   *    mySound.addCue(3.00, changeText, \"want\" );\n   *    mySound.addCue(4.00, changeText, \"to\" );\n   *    mySound.addCue(5.00, changeText, \"make\" );\n   *    mySound.addCue(6.00, changeText, \"?\" );\n   *  }\n   *\n   *  function changeText(val) {\n   *    background(0);\n   *    text(val, width/2, height/2);\n   *  }\n   *\n   *  function mouseClicked() {\n   *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n   *      if (mySound.isPlaying() ) {\n   *        mySound.stop();\n   *      } else {\n   *        mySound.play();\n   *      }\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.SoundFile.prototype.addCue = function (time, callback, val) {\n    var id = this._cueIDCounter++;\n    var cue = new Cue(callback, time, id, val);\n    this._cues.push(cue);\n    // if (!this.elt.ontimeupdate) {\n    //   this.elt.ontimeupdate = this._onTimeUpdate.bind(this);\n    // }\n    return id;\n  };\n  /**\n   *  Remove a callback based on its ID. The ID is returned by the\n   *  addCue method.\n   *\n   *  @method removeCue\n   *  @param  {Number} id ID of the cue, as returned by addCue\n   */\n  p5.SoundFile.prototype.removeCue = function (id) {\n    var cueLength = this._cues.length;\n    for (var i = 0; i < cueLength; i++) {\n      var cue = this._cues[i];\n      if (cue.id === id) {\n        this.cues.splice(i, 1);\n      }\n    }\n    if (this._cues.length === 0) {\n    }\n  };\n  /**\n   *  Remove all of the callbacks that had originally been scheduled\n   *  via the addCue method.\n   *\n   *  @method  clearCues\n   */\n  p5.SoundFile.prototype.clearCues = function () {\n    this._cues = [];\n  };\n  // private method that checks for cues to be fired if events\n  // have been scheduled using addCue(callback, time).\n  p5.SoundFile.prototype._onTimeUpdate = function (position) {\n    var playbackTime = position / this.buffer.sampleRate;\n    var cueLength = this._cues.length;\n    for (var i = 0; i < cueLength; i++) {\n      var cue = this._cues[i];\n      var callbackTime = cue.time;\n      var val = cue.val;\n      if (this._prevTime < callbackTime && callbackTime <= 2015=\"\" playbacktime)=\"\" {=\"\" pass=\"\" the=\"\" scheduled=\"\" callbacktime=\"\" as=\"\" parameter=\"\" to=\"\" callback=\"\" cue.callback(val);=\"\" }=\"\" this._prevtime=\"playbackTime;\" };=\"\" cue=\"\" inspired=\"\" by=\"\" javascript=\"\" settimeout,=\"\" and=\"\" tone.js=\"\" transport=\"\" timeline=\"\" event,=\"\" mit=\"\" license=\"\" yotam=\"\" mann=\"\" tonejs.org=\"\" var=\"\" (callback,=\"\" time,=\"\" id,=\"\" val)=\"\" this.callback=\"callback;\" this.time=\"time;\" this.id=\"id;\" this.val=\"val;\" }(sndcore,=\"\" errorhandler,=\"\" master);=\"\" amplitude;=\"\" amplitude=\"function\" ()=\"\" 'use=\"\" strict';=\"\" p5sound=\"master;\" **=\"\" *=\"\" measures=\"\" volume=\"\" between=\"\" 0.0=\"\" 1.0.=\"\" listens=\"\" all=\"\" default,=\"\" or=\"\" use=\"\" setinput()=\"\" listen=\"\" a=\"\" specific=\"\" sound=\"\" source.=\"\" accepts=\"\" an=\"\" optional=\"\" smoothing=\"\" value,=\"\" which=\"\" defaults=\"\" 0.=\"\" @class=\"\" p5.amplitude=\"\" @constructor=\"\" @param=\"\" {number}=\"\" [smoothing]=\"\" .999=\"\" smooth=\"\" readings=\"\" (defaults=\"\" 0)=\"\" @return=\"\" {object}=\"\" object=\"\" @example=\"\" <div=\"\"><code>\n   *  var sound, amplitude, cnv;\n   *  \n   *  function preload(){\n   *    sound = loadSound('assets/beat.mp3');\n   *  }\n   *  function setup() {\n   *    cnv = createCanvas(100,100);\n   *    amplitude = new p5.Amplitude();\n   *\n   *    // start / stop the sound when canvas is clicked\n   *    cnv.mouseClicked(function() {\n   *      if (sound.isPlaying() ){\n   *        sound.stop();\n   *      } else {\n   *        sound.play();\n   *      }\n   *    });\n   *  }\n   *  function draw() {\n   *    background(0);\n   *    fill(255);\n   *    var level = amplitude.getLevel();\n   *    var size = map(level, 0, 1, 0, 200);\n   *    ellipse(width/2, height/2, size, size);\n   *  }\n   *\n   *  </code>\n   */\n  p5.Amplitude = function (smoothing) {\n    // Set to 2048 for now. In future iterations, this should be inherited or parsed from p5sound's default\n    this.bufferSize = 2048;\n    // set audio context\n    this.audiocontext = p5sound.audiocontext;\n    this.processor = this.audiocontext.createScriptProcessor(this.bufferSize, 2, 1);\n    // for connections\n    this.input = this.processor;\n    this.output = this.audiocontext.createGain();\n    // smoothing defaults to 0\n    this.smoothing = smoothing || 0;\n    // the variables to return\n    this.volume = 0;\n    this.average = 0;\n    this.stereoVol = [\n      0,\n      0\n    ];\n    this.stereoAvg = [\n      0,\n      0\n    ];\n    this.stereoVolNorm = [\n      0,\n      0\n    ];\n    this.volMax = 0.001;\n    this.normalize = false;\n    this.processor.onaudioprocess = this._audioProcess.bind(this);\n    this.processor.connect(this.output);\n    this.output.gain.value = 0;\n    // this may only be necessary because of a Chrome bug\n    this.output.connect(this.audiocontext.destination);\n    // connect to p5sound master output by default, unless set by input()\n    p5sound.meter.connect(this.processor);\n    // add this p5.SoundFile to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Connects to the p5sound instance (master output) by default.\n   *  Optionally, you can pass in a specific source (i.e. a soundfile).\n   *\n   *  @method setInput\n   *  @param {soundObject|undefined} [snd] set the sound source\n   *                                       (optional, defaults to\n   *                                       master output)\n   *  @param {Number|undefined} [smoothing] a range between 0.0 and 1.0\n   *                                        to smooth amplitude readings\n   *  @example\n   *  <div><code>\n   *  function preload(){\n   *    sound1 = loadSound('assets/beat.mp3');\n   *    sound2 = loadSound('assets/drum.mp3');\n   *  }\n   *  function setup(){\n   *    amplitude = new p5.Amplitude();\n   *    sound1.play();\n   *    sound2.play();\n   *    amplitude.setInput(sound2);\n   *  }\n   *  function draw() {\n   *    background(0);\n   *    fill(255);\n   *    var level = amplitude.getLevel();\n   *    var size = map(level, 0, 1, 0, 200);\n   *    ellipse(width/2, height/2, size, size);\n   *  }\n   *  function mouseClicked(){\n   *    sound1.stop();\n   *    sound2.stop();\n   *  }\n   *  </code></div>\n   */\n  p5.Amplitude.prototype.setInput = function (source, smoothing) {\n    p5sound.meter.disconnect();\n    if (smoothing) {\n      this.smoothing = smoothing;\n    }\n    // connect to the master out of p5s instance if no snd is provided\n    if (source == null) {\n      console.log('Amplitude input source is not ready! Connecting to master output instead');\n      p5sound.meter.connect(this.processor);\n    } else if (source instanceof p5.Signal) {\n      source.output.connect(this.processor);\n    } else if (source) {\n      source.connect(this.processor);\n      this.processor.disconnect();\n      this.processor.connect(this.output);\n    } else {\n      p5sound.meter.connect(this.processor);\n    }\n  };\n  p5.Amplitude.prototype.connect = function (unit) {\n    if (unit) {\n      if (unit.hasOwnProperty('input')) {\n        this.output.connect(unit.input);\n      } else {\n        this.output.connect(unit);\n      }\n    } else {\n      this.output.connect(this.panner.connect(p5sound.input));\n    }\n  };\n  p5.Amplitude.prototype.disconnect = function (unit) {\n    this.output.disconnect();\n  };\n  // TO DO make this stereo / dependent on # of audio channels\n  p5.Amplitude.prototype._audioProcess = function (event) {\n    for (var channel = 0; channel < event.inputBuffer.numberOfChannels; channel++) {\n      var inputBuffer = event.inputBuffer.getChannelData(channel);\n      var bufLength = inputBuffer.length;\n      var total = 0;\n      var sum = 0;\n      var x;\n      for (var i = 0; i < bufLength; i++) {\n        x = inputBuffer[i];\n        if (this.normalize) {\n          total += Math.max(Math.min(x / this.volMax, 1), -1);\n          sum += Math.max(Math.min(x / this.volMax, 1), -1) * Math.max(Math.min(x / this.volMax, 1), -1);\n        } else {\n          total += x;\n          sum += x * x;\n        }\n      }\n      var average = total / bufLength;\n      // ... then take the square root of the sum.\n      var rms = Math.sqrt(sum / bufLength);\n      this.stereoVol[channel] = Math.max(rms, this.stereoVol[channel] * this.smoothing);\n      this.stereoAvg[channel] = Math.max(average, this.stereoVol[channel] * this.smoothing);\n      this.volMax = Math.max(this.stereoVol[channel], this.volMax);\n    }\n    // add volume from all channels together\n    var self = this;\n    var volSum = this.stereoVol.reduce(function (previousValue, currentValue, index) {\n      self.stereoVolNorm[index - 1] = Math.max(Math.min(self.stereoVol[index - 1] / self.volMax, 1), 0);\n      self.stereoVolNorm[index] = Math.max(Math.min(self.stereoVol[index] / self.volMax, 1), 0);\n      return previousValue + currentValue;\n    });\n    // volume is average of channels\n    this.volume = volSum / this.stereoVol.length;\n    // normalized value\n    this.volNorm = Math.max(Math.min(this.volume / this.volMax, 1), 0);\n  };\n  /**\n   *  Returns a single Amplitude reading at the moment it is called.\n   *  For continuous readings, run in the draw loop.\n   *\n   *  @method getLevel\n   *  @param {Number} [channel] Optionally return only channel 0 (left) or 1 (right)\n   *  @return {Number}       Amplitude as a number between 0.0 and 1.0\n   *  @example\n   *  <div><code>\n   *  function preload(){\n   *    sound = loadSound('assets/beat.mp3');\n   *  }\n   *  function setup() { \n   *    amplitude = new p5.Amplitude();\n   *    sound.play();\n   *  }\n   *  function draw() {\n   *    background(0);\n   *    fill(255);\n   *    var level = amplitude.getLevel();\n   *    var size = map(level, 0, 1, 0, 200);\n   *    ellipse(width/2, height/2, size, size);\n   *  }\n   *  function mouseClicked(){\n   *    sound.stop();\n   *  }\n   *  </code></div>\n   */\n  p5.Amplitude.prototype.getLevel = function (channel) {\n    if (typeof channel !== 'undefined') {\n      if (this.normalize) {\n        return this.stereoVolNorm[channel];\n      } else {\n        return this.stereoVol[channel];\n      }\n    } else if (this.normalize) {\n      return this.volNorm;\n    } else {\n      return this.volume;\n    }\n  };\n  /**\n   * Determines whether the results of Amplitude.process() will be\n   * Normalized. To normalize, Amplitude finds the difference the\n   * loudest reading it has processed and the maximum amplitude of\n   * 1.0. Amplitude adds this difference to all values to produce\n   * results that will reliably map between 0.0 and 1.0. However,\n   * if a louder moment occurs, the amount that Normalize adds to\n   * all the values will change. Accepts an optional boolean parameter\n   * (true or false). Normalizing is off by default.\n   *\n   * @method toggleNormalize\n   * @param {boolean} [boolean] set normalize to true (1) or false (0)\n   */\n  p5.Amplitude.prototype.toggleNormalize = function (bool) {\n    if (typeof bool === 'boolean') {\n      this.normalize = bool;\n    } else {\n      this.normalize = !this.normalize;\n    }\n  };\n  /**\n   *  Smooth Amplitude analysis by averaging with the last analysis \n   *  frame. Off by default.\n   *\n   *  @method smooth\n   *  @param {Number} set smoothing from 0.0 <= 1=\"\" *=\"\" p5.amplitude.prototype.smooth=\"function\" (s)=\"\" {=\"\" if=\"\" (s=\"\">= 0 && s < 1) {\n      this.smoothing = s;\n    } else {\n      console.log('Error: smoothing must be between 0 and 1');\n    }\n  };\n  p5.Amplitude.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.input.disconnect();\n    this.output.disconnect();\n    this.input = this.processor = undefined;\n    this.output = undefined;\n  };\n}(master);\nvar fft;\nfft = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   *  <p>FFT (Fast Fourier Transform) is an analysis algorithm that\n   *  isolates individual\n   *  <a href=\"https://en.wikipedia.org/wiki/Audio_frequency\" target=\"_blank\" rel=\"external\">\n   *  audio frequencies</a> within a waveform.</p>\n   *\n   *  <p>Once instantiated, a p5.FFT object can return an array based on\n   *  two types of analyses: <br>  <code>FFT.waveform()</code> computes\n   *  amplitude values along the time domain. The array indices correspond\n   *  to samples across a brief moment in time. Each value represents\n   *  amplitude of the waveform at that sample of time.<br>\n   *   <code>FFT.analyze() </code> computes amplitude values along the\n   *  frequency domain. The array indices correspond to frequencies (i.e.\n   *  pitches), from the lowest to the highest that humans can hear. Each\n   *  value represents amplitude at that slice of the frequency spectrum.\n   *  Use with <code>getEnergy()</code> to measure amplitude at specific\n   *  frequencies, or within a range of frequencies. </p>\n   *\n   *  <p>FFT analyzes a very short snapshot of sound called a sample\n   *  buffer. It returns an array of amplitude measurements, referred\n   *  to as <code>bins</code>. The array is 1024 bins long by default.\n   *  You can change the bin array length, but it must be a power of 2\n   *  between 16 and 1024 in order for the FFT algorithm to function\n   *  correctly. The actual size of the FFT buffer is twice the \n   *  number of bins, so given a standard sample rate, the buffer is\n   *  2048/44100 seconds long.</p>\n   *  \n   * \n   *  @class p5.FFT\n   *  @constructor\n   *  @param {Number} [smoothing]   Smooth results of Freq Spectrum.\n   *                                0.0 < smoothing < 1.0.\n   *                                Defaults to 0.8.\n   *  @param {Number} [bins]    Length of resulting array.\n   *                            Must be a power of two between\n   *                            16 and 1024. Defaults to 1024.\n   *  @return {Object}    FFT Object\n   *  @example\n   *  <div><code>\n   *  function preload(){\n   *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *  \n   *  function setup(){\n   *    var cnv = createCanvas(100,100);\n   *    cnv.mouseClicked(togglePlay);\n   *    fft = new p5.FFT();\n   *    sound.amp(0.2);\n   *  }\n   *  \n   *  function draw(){\n   *    background(0);\n   *  \n   *    var spectrum = fft.analyze(); \n   *    noStroke();\n   *    fill(0,255,0); // spectrum is green\n   *    for (var i = 0; i< spectrum.length; i++){\n   *      var x = map(i, 0, spectrum.length, 0, width);\n   *      var h = -height + map(spectrum[i], 0, 255, height, 0);\n   *      rect(x, height, width / spectrum.length, h )\n   *    }\n   *  \n   *    var waveform = fft.waveform();\n   *    noFill();\n   *    beginShape();\n   *    stroke(255,0,0); // waveform is red\n   *    strokeWeight(1);\n   *    for (var i = 0; i< waveform.length; i++){\n   *      var x = map(i, 0, waveform.length, 0, width);\n   *      var y = map( waveform[i], -1, 1, 0, height);\n   *      vertex(x,y);\n   *    }\n   *    endShape();\n   *  \n   *    text('click to play/pause', 4, 10);\n   *  }\n   *  \n   *  // fade sound if mouse is over canvas\n   *  function togglePlay() {\n   *    if (sound.isPlaying()) {\n   *      sound.pause();\n   *    } else {\n   *      sound.loop();\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.FFT = function (smoothing, bins) {\n    this.smoothing = smoothing || 0.8;\n    this.bins = bins || 1024;\n    var FFT_SIZE = bins * 2 || 2048;\n    this.input = this.analyser = p5sound.audiocontext.createAnalyser();\n    // default connections to p5sound fftMeter\n    p5sound.fftMeter.connect(this.analyser);\n    this.analyser.smoothingTimeConstant = this.smoothing;\n    this.analyser.fftSize = FFT_SIZE;\n    this.freqDomain = new Uint8Array(this.analyser.frequencyBinCount);\n    this.timeDomain = new Uint8Array(this.analyser.frequencyBinCount);\n    // predefined frequency ranages, these will be tweakable\n    this.bass = [\n      20,\n      140\n    ];\n    this.lowMid = [\n      140,\n      400\n    ];\n    this.mid = [\n      400,\n      2600\n    ];\n    this.highMid = [\n      2600,\n      5200\n    ];\n    this.treble = [\n      5200,\n      14000\n    ];\n    // add this p5.SoundFile to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Set the input source for the FFT analysis. If no source is\n   *  provided, FFT will analyze all sound in the sketch.\n   *\n   *  @method  setInput\n   *  @param {Object} [source] p5.sound object (or web audio API source node)\n   */\n  p5.FFT.prototype.setInput = function (source) {\n    if (!source) {\n      p5sound.fftMeter.connect(this.analyser);\n    } else {\n      if (source.output) {\n        source.output.connect(this.analyser);\n      } else if (source.connect) {\n        source.connect(this.analyser);\n      }\n      p5sound.fftMeter.disconnect();\n    }\n  };\n  /**\n   *  Returns an array of amplitude values (between -1.0 and +1.0) that represent\n   *  a snapshot of amplitude readings in a single buffer. Length will be\n   *  equal to bins (defaults to 1024). Can be used to draw the waveform\n   *  of a sound. \n   *  \n   *  @method waveform\n   *  @param {Number} [bins]    Must be a power of two between\n   *                            16 and 1024. Defaults to 1024.\n   *  @param {String} [precision] If any value is provided, will return results\n   *                              in a Float32 Array which is more precise\n   *                              than a regular array.\n   *  @return {Array}  Array    Array of amplitude values (-1 to 1)\n   *                            over time. Array length = bins.\n   *\n   */\n  p5.FFT.prototype.waveform = function () {\n    var bins, mode, normalArray;\n    for (var i = 0; i < arguments.length; i++) {\n      if (typeof arguments[i] === 'number') {\n        bins = arguments[i];\n        this.analyser.fftSize = bins * 2;\n      }\n      if (typeof arguments[i] === 'string') {\n        mode = arguments[i];\n      }\n    }\n    // getFloatFrequencyData doesnt work in Safari as of 5/2015\n    if (mode && !p5.prototype._isSafari()) {\n      timeToFloat(this, this.timeDomain);\n      this.analyser.getFloatTimeDomainData(this.timeDomain);\n      return this.timeDomain;\n    } else {\n      timeToInt(this, this.timeDomain);\n      this.analyser.getByteTimeDomainData(this.timeDomain);\n      var normalArray = new Array();\n      for (var i = 0; i < this.timeDomain.length; i++) {\n        var scaled = p5.prototype.map(this.timeDomain[i], 0, 255, -1, 1);\n        normalArray.push(scaled);\n      }\n      return normalArray;\n    }\n  };\n  /**\n   *  Returns an array of amplitude values (between 0 and 255)\n   *  across the frequency spectrum. Length is equal to FFT bins\n   *  (1024 by default). The array indices correspond to frequencies\n   *  (i.e. pitches), from the lowest to the highest that humans can\n   *  hear. Each value represents amplitude at that slice of the\n   *  frequency spectrum. Must be called prior to using\n   *  <code>getEnergy()</code>.\n   *\n   *  @method analyze\n   *  @param {Number} [bins]    Must be a power of two between\n   *                             16 and 1024. Defaults to 1024.\n   *  @param {Number} [scale]    If \"dB,\" returns decibel\n   *                             float measurements between\n   *                             -140 and 0 (max).\n   *                             Otherwise returns integers from 0-255.\n   *  @return {Array} spectrum    Array of energy (amplitude/volume)\n   *                              values across the frequency spectrum.\n   *                              Lowest energy (silence) = 0, highest\n   *                              possible is 255.\n   *  @example\n   *  <div><code>\n   *  var osc;\n   *  var fft;\n   *\n   *  function setup(){\n   *    createCanvas(100,100);\n   *    osc = new p5.Oscillator();\n   *    osc.amp(0);\n   *    osc.start();\n   *    fft = new p5.FFT();\n   *  }\n   *\n   *  function draw(){\n   *    background(0);\n   *\n   *    var freq = map(mouseX, 0, 800, 20, 15000);\n   *    freq = constrain(freq, 1, 20000);\n   *    osc.freq(freq);\n   *\n   *    var spectrum = fft.analyze(); \n   *    noStroke();\n   *    fill(0,255,0); // spectrum is green\n   *    for (var i = 0; i< spectrum.length; i++){\n   *      var x = map(i, 0, spectrum.length, 0, width);\n   *      var h = -height + map(spectrum[i], 0, 255, height, 0);\n   *      rect(x, height, width / spectrum.length, h );\n   *    }\n   *\n   *    stroke(255);\n   *    text('Freq: ' + round(freq)+'Hz', 10, 10); \n   *\n   *    isMouseOverCanvas();\n   *  }\n   *\n   *  // only play sound when mouse is over canvas\n   *  function isMouseOverCanvas() {\n   *    var mX = mouseX, mY = mouseY;\n   *    if (mX > 0 && mX < width && mY < height && mY > 0) {\n   *      osc.amp(0.5, 0.2);\n   *    } else {\n   *      osc.amp(0, 0.2);\n   *    }\n   *  }\n   *  </code></div>\n   *                                   \n   *\n   */\n  p5.FFT.prototype.analyze = function () {\n    var bins, mode;\n    for (var i = 0; i < arguments.length; i++) {\n      if (typeof arguments[i] === 'number') {\n        bins = this.bins = arguments[i];\n        this.analyser.fftSize = this.bins * 2;\n      }\n      if (typeof arguments[i] === 'string') {\n        mode = arguments[i];\n      }\n    }\n    if (mode && mode.toLowerCase() === 'db') {\n      freqToFloat(this);\n      this.analyser.getFloatFrequencyData(this.freqDomain);\n      return this.freqDomain;\n    } else {\n      freqToInt(this, this.freqDomain);\n      this.analyser.getByteFrequencyData(this.freqDomain);\n      var normalArray = Array.apply([], this.freqDomain);\n      normalArray.length === this.analyser.fftSize;\n      normalArray.constructor === Array;\n      return normalArray;\n    }\n  };\n  /**\n   *  Returns the amount of energy (volume) at a specific\n   *  <a href=\"en.wikipedia.org/wiki/Audio_frequency\" target=\"_blank\">\n   *  frequency</a>, or the average amount of energy between two\n   *  frequencies. Accepts Number(s) corresponding\n   *  to frequency (in Hz), or a String corresponding to predefined\n   *  frequency ranges (\"bass\", \"lowMid\", \"mid\", \"highMid\", \"treble\").\n   *  Returns a range between 0 (no energy/volume at that frequency) and\n   *  255 (maximum energy). \n   *  <em>NOTE: analyze() must be called prior to getEnergy(). Analyze()\n   *  tells the FFT to analyze frequency data, and getEnergy() uses\n   *  the results determine the value at a specific frequency or\n   *  range of frequencies.</em><p></p>\n   *  \n   *  @method  getEnergy\n   *  @param  {Number|String} frequency1   Will return a value representing\n   *                                energy at this frequency. Alternately,\n   *                                the strings \"bass\", \"lowMid\" \"mid\",\n   *                                \"highMid\", and \"treble\" will return\n   *                                predefined frequency ranges.\n   *  @param  {Number} [frequency2] If a second frequency is given,\n   *                                will return average amount of\n   *                                energy that exists between the\n   *                                two frequencies.\n   *  @return {Number}   Energy   Energy (volume/amplitude) from\n   *                              0 and 255.\n   *                                       \n   */\n  p5.FFT.prototype.getEnergy = function (frequency1, frequency2) {\n    var nyquist = p5sound.audiocontext.sampleRate / 2;\n    if (frequency1 === 'bass') {\n      frequency1 = this.bass[0];\n      frequency2 = this.bass[1];\n    } else if (frequency1 === 'lowMid') {\n      frequency1 = this.lowMid[0];\n      frequency2 = this.lowMid[1];\n    } else if (frequency1 === 'mid') {\n      frequency1 = this.mid[0];\n      frequency2 = this.mid[1];\n    } else if (frequency1 === 'highMid') {\n      frequency1 = this.highMid[0];\n      frequency2 = this.highMid[1];\n    } else if (frequency1 === 'treble') {\n      frequency1 = this.treble[0];\n      frequency2 = this.treble[1];\n    }\n    if (typeof frequency1 !== 'number') {\n      throw 'invalid input for getEnergy()';\n    } else if (!frequency2) {\n      var index = Math.round(frequency1 / nyquist * this.freqDomain.length);\n      return this.freqDomain[index];\n    } else if (frequency1 && frequency2) {\n      // if second is higher than first\n      if (frequency1 > frequency2) {\n        var swap = frequency2;\n        frequency2 = frequency1;\n        frequency1 = swap;\n      }\n      var lowIndex = Math.round(frequency1 / nyquist * this.freqDomain.length);\n      var highIndex = Math.round(frequency2 / nyquist * this.freqDomain.length);\n      var total = 0;\n      var numFrequencies = 0;\n      // add up all of the values for the frequencies\n      for (var i = lowIndex; i <= highindex;=\"\" i++)=\"\" {=\"\" total=\"\" +=\"this.freqDomain[i];\" numfrequencies=\"\" }=\"\" divide=\"\" by=\"\" number=\"\" of=\"\" frequencies=\"\" var=\"\" toreturn=\"total\" numfrequencies;=\"\" return=\"\" toreturn;=\"\" else=\"\" throw=\"\" 'invalid=\"\" input=\"\" for=\"\" getenergy()';=\"\" };=\"\" compatability=\"\" with=\"\" v.012,=\"\" changed=\"\" to=\"\" getenergy=\"\" in=\"\" v.0121.=\"\" will=\"\" be=\"\" deprecated...=\"\" p5.fft.prototype.getfreq=\"function\" (freq1,=\"\" freq2)=\"\" console.log('getfreq()=\"\" is=\"\" deprecated.=\"\" please=\"\" use=\"\" getenergy()=\"\" instead.');=\"\" x=\"this.getEnergy(freq1,\" freq2);=\"\" x;=\"\" **=\"\" *=\"\" returns=\"\" the=\"\" <a=\"\" href=\"http://en.wikipedia.org/wiki/Spectral_centroid\" target=\"_blank\">\n   *  spectral centroid of the input signal.\n   *  <em>NOTE: analyze() must be called prior to getCentroid(). Analyze()\n   *  tells the FFT to analyze frequency data, and getCentroid() uses\n   *  the results determine the spectral centroid.</em><p></p>\n   *  \n   *  @method  getCentroid\n   *  @return {Number}   Spectral Centroid Frequency   Frequency of the spectral centroid in Hz.\n   * \n   *\n   * @example\n   *  <div><code>\n   *\n   *\n   *function setup(){\n   *  cnv = createCanvas(800,400);\n   *  sound = new p5.AudioIn();\n   *  sound.start();\n   *  fft = new p5.FFT();\n   *  sound.connect(fft);\n   *}\n   *\n   *\n   *function draw(){\n   *\n   *  var centroidplot = 0.0;\n   *  var spectralCentroid = 0;\n   *  \n   *  \n   *  background(0);\n   *  stroke(0,255,0);\n   *  var spectrum = fft.analyze(); \n   *  fill(0,255,0); // spectrum is green\n   *  \n   *  //draw the spectrum\n   *  \n   *  for (var i = 0; i< spectrum.length; i++){\n   *    var x = map(log(i), 0, log(spectrum.length), 0, width);\n   *    var h = map(spectrum[i], 0, 255, 0, height);\n   *    var rectangle_width = (log(i+1)-log(i))*(width/log(spectrum.length));\n   *    rect(x, height, rectangle_width, -h )\n   *  }\n  \n   *  var nyquist = 22050;\n   *  \n   *  // get the centroid\n   *  spectralCentroid = fft.getCentroid();\n   *  \n   *  // the mean_freq_index calculation is for the display.\n   *  var mean_freq_index = spectralCentroid/(nyquist/spectrum.length);\n   *\n   *  centroidplot = map(log(mean_freq_index), 0, log(spectrum.length), 0, width);\n   *\n   *\n   *  stroke(255,0,0); // the line showing where the centroid is will be red\n   *  \n   *  rect(centroidplot, 0, width / spectrum.length, height)\n   *  noStroke();\n   *  fill(255,255,255);  // text is white\n   *  textSize(40);\n   *  text(\"centroid: \"+round(spectralCentroid)+\" Hz\", 10, 40);\n   *}\n   * </code></div>\n   */\n  p5.FFT.prototype.getCentroid = function () {\n    var nyquist = p5sound.audiocontext.sampleRate / 2;\n    var cumulative_sum = 0;\n    var centroid_normalization = 0;\n    for (var i = 0; i < this.freqDomain.length; i++) {\n      cumulative_sum += i * this.freqDomain[i];\n      centroid_normalization += this.freqDomain[i];\n    }\n    var mean_freq_index = 0;\n    if (centroid_normalization != 0) {\n      mean_freq_index = cumulative_sum / centroid_normalization;\n    }\n    var spec_centroid_freq = mean_freq_index * (nyquist / this.freqDomain.length);\n    return spec_centroid_freq;\n  };\n  /**\n   *  Smooth FFT analysis by averaging with the last analysis frame.\n   *  \n   *  @method smooth\n   *  @param {Number} smoothing    0.0 < smoothing < 1.0.\n   *                               Defaults to 0.8.\n   */\n  p5.FFT.prototype.smooth = function (s) {\n    if (s) {\n      this.smoothing = s;\n    }\n    this.analyser.smoothingTimeConstant = s;\n  };\n  p5.FFT.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.analyser.disconnect();\n    this.analyser = undefined;\n  };\n  // helper methods to convert type from float (dB) to int (0-255)\n  var freqToFloat = function (fft) {\n    if (fft.freqDomain instanceof Float32Array === false) {\n      fft.freqDomain = new Float32Array(fft.analyser.frequencyBinCount);\n    }\n  };\n  var freqToInt = function (fft) {\n    if (fft.freqDomain instanceof Uint8Array === false) {\n      fft.freqDomain = new Uint8Array(fft.analyser.frequencyBinCount);\n    }\n  };\n  var timeToFloat = function (fft) {\n    if (fft.timeDomain instanceof Float32Array === false) {\n      fft.timeDomain = new Float32Array(fft.analyser.frequencyBinCount);\n    }\n  };\n  var timeToInt = function (fft) {\n    if (fft.timeDomain instanceof Uint8Array === false) {\n      fft.timeDomain = new Uint8Array(fft.analyser.frequencyBinCount);\n    }\n  };\n}(master);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Tone;\nTone_core_Tone = function () {\n  'use strict';\n  function isUndef(val) {\n    return val === void 0;\n  }\n  function isFunction(val) {\n    return typeof val === 'function';\n  }\n  var audioContext;\n  if (isUndef(window.AudioContext)) {\n    window.AudioContext = window.webkitAudioContext;\n  }\n  if (isUndef(window.OfflineAudioContext)) {\n    window.OfflineAudioContext = window.webkitOfflineAudioContext;\n  }\n  if (!isUndef(AudioContext)) {\n    audioContext = new AudioContext();\n  } else {\n    throw new Error('Web Audio is not supported in this browser');\n  }\n  if (!isFunction(AudioContext.prototype.createGain)) {\n    AudioContext.prototype.createGain = AudioContext.prototype.createGainNode;\n  }\n  if (!isFunction(AudioContext.prototype.createDelay)) {\n    AudioContext.prototype.createDelay = AudioContext.prototype.createDelayNode;\n  }\n  if (!isFunction(AudioContext.prototype.createPeriodicWave)) {\n    AudioContext.prototype.createPeriodicWave = AudioContext.prototype.createWaveTable;\n  }\n  if (!isFunction(AudioBufferSourceNode.prototype.start)) {\n    AudioBufferSourceNode.prototype.start = AudioBufferSourceNode.prototype.noteGrainOn;\n  }\n  if (!isFunction(AudioBufferSourceNode.prototype.stop)) {\n    AudioBufferSourceNode.prototype.stop = AudioBufferSourceNode.prototype.noteOff;\n  }\n  if (!isFunction(OscillatorNode.prototype.start)) {\n    OscillatorNode.prototype.start = OscillatorNode.prototype.noteOn;\n  }\n  if (!isFunction(OscillatorNode.prototype.stop)) {\n    OscillatorNode.prototype.stop = OscillatorNode.prototype.noteOff;\n  }\n  if (!isFunction(OscillatorNode.prototype.setPeriodicWave)) {\n    OscillatorNode.prototype.setPeriodicWave = OscillatorNode.prototype.setWaveTable;\n  }\n  AudioNode.prototype._nativeConnect = AudioNode.prototype.connect;\n  AudioNode.prototype.connect = function (B, outNum, inNum) {\n    if (B.input) {\n      if (Array.isArray(B.input)) {\n        if (isUndef(inNum)) {\n          inNum = 0;\n        }\n        this.connect(B.input[inNum]);\n      } else {\n        this.connect(B.input, outNum, inNum);\n      }\n    } else {\n      try {\n        if (B instanceof AudioNode) {\n          this._nativeConnect(B, outNum, inNum);\n        } else {\n          this._nativeConnect(B, outNum);\n        }\n      } catch (e) {\n        throw new Error('error connecting to node: ' + B);\n      }\n    }\n  };\n  var Tone = function (inputs, outputs) {\n    if (isUndef(inputs) || inputs === 1) {\n      this.input = this.context.createGain();\n    } else if (inputs > 1) {\n      this.input = new Array(inputs);\n    }\n    if (isUndef(outputs) || outputs === 1) {\n      this.output = this.context.createGain();\n    } else if (outputs > 1) {\n      this.output = new Array(inputs);\n    }\n  };\n  Tone.prototype.set = function (params, value, rampTime) {\n    if (this.isObject(params)) {\n      rampTime = value;\n    } else if (this.isString(params)) {\n      var tmpObj = {};\n      tmpObj[params] = value;\n      params = tmpObj;\n    }\n    for (var attr in params) {\n      value = params[attr];\n      var parent = this;\n      if (attr.indexOf('.') !== -1) {\n        var attrSplit = attr.split('.');\n        for (var i = 0; i < attrSplit.length - 1; i++) {\n          parent = parent[attrSplit[i]];\n        }\n        attr = attrSplit[attrSplit.length - 1];\n      }\n      var param = parent[attr];\n      if (isUndef(param)) {\n        continue;\n      }\n      if (Tone.Signal && param instanceof Tone.Signal || Tone.Param && param instanceof Tone.Param) {\n        if (param.value !== value) {\n          if (isUndef(rampTime)) {\n            param.value = value;\n          } else {\n            param.rampTo(value, rampTime);\n          }\n        }\n      } else if (param instanceof AudioParam) {\n        if (param.value !== value) {\n          param.value = value;\n        }\n      } else if (param instanceof Tone) {\n        param.set(value);\n      } else if (param !== value) {\n        parent[attr] = value;\n      }\n    }\n    return this;\n  };\n  Tone.prototype.get = function (params) {\n    if (isUndef(params)) {\n      params = this._collectDefaults(this.constructor);\n    } else if (this.isString(params)) {\n      params = [params];\n    }\n    var ret = {};\n    for (var i = 0; i < params.length; i++) {\n      var attr = params[i];\n      var parent = this;\n      var subRet = ret;\n      if (attr.indexOf('.') !== -1) {\n        var attrSplit = attr.split('.');\n        for (var j = 0; j < attrSplit.length - 1; j++) {\n          var subAttr = attrSplit[j];\n          subRet[subAttr] = subRet[subAttr] || {};\n          subRet = subRet[subAttr];\n          parent = parent[subAttr];\n        }\n        attr = attrSplit[attrSplit.length - 1];\n      }\n      var param = parent[attr];\n      if (this.isObject(params[attr])) {\n        subRet[attr] = param.get();\n      } else if (Tone.Signal && param instanceof Tone.Signal) {\n        subRet[attr] = param.value;\n      } else if (Tone.Param && param instanceof Tone.Param) {\n        subRet[attr] = param.value;\n      } else if (param instanceof AudioParam) {\n        subRet[attr] = param.value;\n      } else if (param instanceof Tone) {\n        subRet[attr] = param.get();\n      } else if (!isFunction(param) && !isUndef(param)) {\n        subRet[attr] = param;\n      }\n    }\n    return ret;\n  };\n  Tone.prototype._collectDefaults = function (constr) {\n    var ret = [];\n    if (!isUndef(constr.defaults)) {\n      ret = Object.keys(constr.defaults);\n    }\n    if (!isUndef(constr._super)) {\n      var superDefs = this._collectDefaults(constr._super);\n      for (var i = 0; i < superDefs.length; i++) {\n        if (ret.indexOf(superDefs[i]) === -1) {\n          ret.push(superDefs[i]);\n        }\n      }\n    }\n    return ret;\n  };\n  Tone.prototype.toString = function () {\n    for (var className in Tone) {\n      var isLetter = className[0].match(/^[A-Z]$/);\n      var sameConstructor = Tone[className] === this.constructor;\n      if (isFunction(Tone[className]) && isLetter && sameConstructor) {\n        return className;\n      }\n    }\n    return 'Tone';\n  };\n  Tone.context = audioContext;\n  Tone.prototype.context = Tone.context;\n  Tone.prototype.bufferSize = 2048;\n  Tone.prototype.blockTime = 128 / Tone.context.sampleRate;\n  Tone.prototype.dispose = function () {\n    if (!this.isUndef(this.input)) {\n      if (this.input instanceof AudioNode) {\n        this.input.disconnect();\n      }\n      this.input = null;\n    }\n    if (!this.isUndef(this.output)) {\n      if (this.output instanceof AudioNode) {\n        this.output.disconnect();\n      }\n      this.output = null;\n    }\n    return this;\n  };\n  var _silentNode = null;\n  Tone.prototype.noGC = function () {\n    this.output.connect(_silentNode);\n    return this;\n  };\n  AudioNode.prototype.noGC = function () {\n    this.connect(_silentNode);\n    return this;\n  };\n  Tone.prototype.connect = function (unit, outputNum, inputNum) {\n    if (Array.isArray(this.output)) {\n      outputNum = this.defaultArg(outputNum, 0);\n      this.output[outputNum].connect(unit, 0, inputNum);\n    } else {\n      this.output.connect(unit, outputNum, inputNum);\n    }\n    return this;\n  };\n  Tone.prototype.disconnect = function (outputNum) {\n    if (Array.isArray(this.output)) {\n      outputNum = this.defaultArg(outputNum, 0);\n      this.output[outputNum].disconnect();\n    } else {\n      this.output.disconnect();\n    }\n    return this;\n  };\n  Tone.prototype.connectSeries = function () {\n    if (arguments.length > 1) {\n      var currentUnit = arguments[0];\n      for (var i = 1; i < arguments.length; i++) {\n        var toUnit = arguments[i];\n        currentUnit.connect(toUnit);\n        currentUnit = toUnit;\n      }\n    }\n    return this;\n  };\n  Tone.prototype.connectParallel = function () {\n    var connectFrom = arguments[0];\n    if (arguments.length > 1) {\n      for (var i = 1; i < arguments.length; i++) {\n        var connectTo = arguments[i];\n        connectFrom.connect(connectTo);\n      }\n    }\n    return this;\n  };\n  Tone.prototype.chain = function () {\n    if (arguments.length > 0) {\n      var currentUnit = this;\n      for (var i = 0; i < arguments.length; i++) {\n        var toUnit = arguments[i];\n        currentUnit.connect(toUnit);\n        currentUnit = toUnit;\n      }\n    }\n    return this;\n  };\n  Tone.prototype.fan = function () {\n    if (arguments.length > 0) {\n      for (var i = 0; i < arguments.length; i++) {\n        this.connect(arguments[i]);\n      }\n    }\n    return this;\n  };\n  AudioNode.prototype.chain = Tone.prototype.chain;\n  AudioNode.prototype.fan = Tone.prototype.fan;\n  Tone.prototype.defaultArg = function (given, fallback) {\n    if (this.isObject(given) && this.isObject(fallback)) {\n      var ret = {};\n      for (var givenProp in given) {\n        ret[givenProp] = this.defaultArg(fallback[givenProp], given[givenProp]);\n      }\n      for (var fallbackProp in fallback) {\n        ret[fallbackProp] = this.defaultArg(given[fallbackProp], fallback[fallbackProp]);\n      }\n      return ret;\n    } else {\n      return isUndef(given) ? fallback : given;\n    }\n  };\n  Tone.prototype.optionsObject = function (values, keys, defaults) {\n    var options = {};\n    if (values.length === 1 && this.isObject(values[0])) {\n      options = values[0];\n    } else {\n      for (var i = 0; i < keys.length; i++) {\n        options[keys[i]] = values[i];\n      }\n    }\n    if (!this.isUndef(defaults)) {\n      return this.defaultArg(options, defaults);\n    } else {\n      return options;\n    }\n  };\n  Tone.prototype.isUndef = isUndef;\n  Tone.prototype.isFunction = isFunction;\n  Tone.prototype.isNumber = function (arg) {\n    return typeof arg === 'number';\n  };\n  Tone.prototype.isObject = function (arg) {\n    return Object.prototype.toString.call(arg) === '[object Object]' && arg.constructor === Object;\n  };\n  Tone.prototype.isBoolean = function (arg) {\n    return typeof arg === 'boolean';\n  };\n  Tone.prototype.isArray = function (arg) {\n    return Array.isArray(arg);\n  };\n  Tone.prototype.isString = function (arg) {\n    return typeof arg === 'string';\n  };\n  Tone.noOp = function () {\n  };\n  Tone.prototype._readOnly = function (property) {\n    if (Array.isArray(property)) {\n      for (var i = 0; i < property.length; i++) {\n        this._readOnly(property[i]);\n      }\n    } else {\n      Object.defineProperty(this, property, {\n        writable: false,\n        enumerable: true\n      });\n    }\n  };\n  Tone.prototype._writable = function (property) {\n    if (Array.isArray(property)) {\n      for (var i = 0; i < property.length; i++) {\n        this._writable(property[i]);\n      }\n    } else {\n      Object.defineProperty(this, property, { writable: true });\n    }\n  };\n  Tone.State = {\n    Started: 'started',\n    Stopped: 'stopped',\n    Paused: 'paused'\n  };\n  Tone.prototype.equalPowerScale = function (percent) {\n    var piFactor = 0.5 * Math.PI;\n    return Math.sin(percent * piFactor);\n  };\n  Tone.prototype.dbToGain = function (db) {\n    return Math.pow(2, db / 6);\n  };\n  Tone.prototype.gainToDb = function (gain) {\n    return 20 * (Math.log(gain) / Math.LN10);\n  };\n  Tone.prototype.now = function () {\n    return this.context.currentTime;\n  };\n  Tone.extend = function (child, parent) {\n    if (isUndef(parent)) {\n      parent = Tone;\n    }\n    function TempConstructor() {\n    }\n    TempConstructor.prototype = parent.prototype;\n    child.prototype = new TempConstructor();\n    child.prototype.constructor = child;\n    child._super = parent;\n  };\n  var newContextCallbacks = [];\n  Tone._initAudioContext = function (callback) {\n    callback(Tone.context);\n    newContextCallbacks.push(callback);\n  };\n  Tone.setContext = function (ctx) {\n    Tone.prototype.context = ctx;\n    Tone.context = ctx;\n    for (var i = 0; i < newContextCallbacks.length; i++) {\n      newContextCallbacks[i](ctx);\n    }\n  };\n  Tone.startMobile = function () {\n    var osc = Tone.context.createOscillator();\n    var silent = Tone.context.createGain();\n    silent.gain.value = 0;\n    osc.connect(silent);\n    silent.connect(Tone.context.destination);\n    var now = Tone.context.currentTime;\n    osc.start(now);\n    osc.stop(now + 1);\n  };\n  Tone._initAudioContext(function (audioContext) {\n    Tone.prototype.blockTime = 128 / audioContext.sampleRate;\n    _silentNode = audioContext.createGain();\n    _silentNode.gain.value = 0;\n    _silentNode.connect(audioContext.destination);\n  });\n  Tone.version = 'r7-dev';\n  return Tone;\n}();\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_SignalBase;\nTone_signal_SignalBase = function (Tone) {\n  'use strict';\n  Tone.SignalBase = function () {\n  };\n  Tone.extend(Tone.SignalBase);\n  Tone.SignalBase.prototype.connect = function (node, outputNumber, inputNumber) {\n    if (Tone.Signal && Tone.Signal === node.constructor || Tone.Param && Tone.Param === node.constructor || Tone.TimelineSignal && Tone.TimelineSignal === node.constructor) {\n      node._param.cancelScheduledValues(0);\n      node._param.value = 0;\n      node.overridden = true;\n    } else if (node instanceof AudioParam) {\n      node.cancelScheduledValues(0);\n      node.value = 0;\n    }\n    Tone.prototype.connect.call(this, node, outputNumber, inputNumber);\n    return this;\n  };\n  return Tone.SignalBase;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_WaveShaper;\nTone_signal_WaveShaper = function (Tone) {\n  'use strict';\n  Tone.WaveShaper = function (mapping, bufferLen) {\n    this._shaper = this.input = this.output = this.context.createWaveShaper();\n    this._curve = null;\n    if (Array.isArray(mapping)) {\n      this.curve = mapping;\n    } else if (isFinite(mapping) || this.isUndef(mapping)) {\n      this._curve = new Float32Array(this.defaultArg(mapping, 1024));\n    } else if (this.isFunction(mapping)) {\n      this._curve = new Float32Array(this.defaultArg(bufferLen, 1024));\n      this.setMap(mapping);\n    }\n  };\n  Tone.extend(Tone.WaveShaper, Tone.SignalBase);\n  Tone.WaveShaper.prototype.setMap = function (mapping) {\n    for (var i = 0, len = this._curve.length; i < len; i++) {\n      var normalized = i / len * 2 - 1;\n      this._curve[i] = mapping(normalized, i);\n    }\n    this._shaper.curve = this._curve;\n    return this;\n  };\n  Object.defineProperty(Tone.WaveShaper.prototype, 'curve', {\n    get: function () {\n      return this._shaper.curve;\n    },\n    set: function (mapping) {\n      this._curve = new Float32Array(mapping);\n      this._shaper.curve = this._curve;\n    }\n  });\n  Object.defineProperty(Tone.WaveShaper.prototype, 'oversample', {\n    get: function () {\n      return this._shaper.oversample;\n    },\n    set: function (oversampling) {\n      if ([\n          'none',\n          '2x',\n          '4x'\n        ].indexOf(oversampling) !== -1) {\n        this._shaper.oversample = oversampling;\n      } else {\n        throw new Error('invalid oversampling: ' + oversampling);\n      }\n    }\n  });\n  Tone.WaveShaper.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._shaper.disconnect();\n    this._shaper = null;\n    this._curve = null;\n    return this;\n  };\n  return Tone.WaveShaper;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Type;\nTone_core_Type = function (Tone) {\n  'use strict';\n  Tone.Type = {\n    Default: 'number',\n    Time: 'time',\n    Frequency: 'frequency',\n    NormalRange: 'normalRange',\n    AudioRange: 'audioRange',\n    Decibels: 'db',\n    Interval: 'interval',\n    BPM: 'bpm',\n    Positive: 'positive',\n    Cents: 'cents',\n    Degrees: 'degrees',\n    MIDI: 'midi',\n    TransportTime: 'transportTime',\n    Ticks: 'tick',\n    Note: 'note',\n    Milliseconds: 'milliseconds',\n    Notation: 'notation'\n  };\n  Tone.prototype.isNowRelative = function () {\n    var nowRelative = new RegExp(/^\\s*\\+(.)+/i);\n    return function (note) {\n      return nowRelative.test(note);\n    };\n  }();\n  Tone.prototype.isTicks = function () {\n    var tickFormat = new RegExp(/^\\d+i$/i);\n    return function (note) {\n      return tickFormat.test(note);\n    };\n  }();\n  Tone.prototype.isNotation = function () {\n    var notationFormat = new RegExp(/^[0-9]+[mnt]$/i);\n    return function (note) {\n      return notationFormat.test(note);\n    };\n  }();\n  Tone.prototype.isTransportTime = function () {\n    var transportTimeFormat = new RegExp(/^(\\d+(\\.\\d+)?\\:){1,2}(\\d+(\\.\\d+)?)?$/i);\n    return function (transportTime) {\n      return transportTimeFormat.test(transportTime);\n    };\n  }();\n  Tone.prototype.isNote = function () {\n    var noteFormat = new RegExp(/^[a-g]{1}(b|#|x|bb)?-?[0-9]+$/i);\n    return function (note) {\n      return noteFormat.test(note);\n    };\n  }();\n  Tone.prototype.isFrequency = function () {\n    var freqFormat = new RegExp(/^\\d*\\.?\\d+hz$/i);\n    return function (freq) {\n      return freqFormat.test(freq);\n    };\n  }();\n  function getTransportBpm() {\n    if (Tone.Transport && Tone.Transport.bpm) {\n      return Tone.Transport.bpm.value;\n    } else {\n      return 120;\n    }\n  }\n  function getTransportTimeSignature() {\n    if (Tone.Transport && Tone.Transport.timeSignature) {\n      return Tone.Transport.timeSignature;\n    } else {\n      return 4;\n    }\n  }\n  Tone.prototype.notationToSeconds = function (notation, bpm, timeSignature) {\n    bpm = this.defaultArg(bpm, getTransportBpm());\n    timeSignature = this.defaultArg(timeSignature, getTransportTimeSignature());\n    var beatTime = 60 / bpm;\n    if (notation === '1n') {\n      notation = '1m';\n    }\n    var subdivision = parseInt(notation, 10);\n    var beats = 0;\n    if (subdivision === 0) {\n      beats = 0;\n    }\n    var lastLetter = notation.slice(-1);\n    if (lastLetter === 't') {\n      beats = 4 / subdivision * 2 / 3;\n    } else if (lastLetter === 'n') {\n      beats = 4 / subdivision;\n    } else if (lastLetter === 'm') {\n      beats = subdivision * timeSignature;\n    } else {\n      beats = 0;\n    }\n    return beatTime * beats;\n  };\n  Tone.prototype.transportTimeToSeconds = function (transportTime, bpm, timeSignature) {\n    bpm = this.defaultArg(bpm, getTransportBpm());\n    timeSignature = this.defaultArg(timeSignature, getTransportTimeSignature());\n    var measures = 0;\n    var quarters = 0;\n    var sixteenths = 0;\n    var split = transportTime.split(':');\n    if (split.length === 2) {\n      measures = parseFloat(split[0]);\n      quarters = parseFloat(split[1]);\n    } else if (split.length === 1) {\n      quarters = parseFloat(split[0]);\n    } else if (split.length === 3) {\n      measures = parseFloat(split[0]);\n      quarters = parseFloat(split[1]);\n      sixteenths = parseFloat(split[2]);\n    }\n    var beats = measures * timeSignature + quarters + sixteenths / 4;\n    return beats * (60 / bpm);\n  };\n  Tone.prototype.ticksToSeconds = function (ticks, bpm) {\n    if (this.isUndef(Tone.Transport)) {\n      return 0;\n    }\n    ticks = parseFloat(ticks);\n    bpm = this.defaultArg(bpm, getTransportBpm());\n    var tickTime = 60 / bpm / Tone.Transport.PPQ;\n    return tickTime * ticks;\n  };\n  Tone.prototype.frequencyToSeconds = function (freq) {\n    return 1 / parseFloat(freq);\n  };\n  Tone.prototype.samplesToSeconds = function (samples) {\n    return samples / this.context.sampleRate;\n  };\n  Tone.prototype.secondsToSamples = function (seconds) {\n    return seconds * this.context.sampleRate;\n  };\n  Tone.prototype.secondsToTransportTime = function (seconds, bpm, timeSignature) {\n    bpm = this.defaultArg(bpm, getTransportBpm());\n    timeSignature = this.defaultArg(timeSignature, getTransportTimeSignature());\n    var quarterTime = 60 / bpm;\n    var quarters = seconds / quarterTime;\n    var measures = Math.floor(quarters / timeSignature);\n    var sixteenths = quarters % 1 * 4;\n    quarters = Math.floor(quarters) % timeSignature;\n    var progress = [\n      measures,\n      quarters,\n      sixteenths\n    ];\n    return progress.join(':');\n  };\n  Tone.prototype.secondsToFrequency = function (seconds) {\n    return 1 / seconds;\n  };\n  Tone.prototype.toTransportTime = function (time, bpm, timeSignature) {\n    var seconds = this.toSeconds(time);\n    return this.secondsToTransportTime(seconds, bpm, timeSignature);\n  };\n  Tone.prototype.toFrequency = function (freq, now) {\n    if (this.isFrequency(freq)) {\n      return parseFloat(freq);\n    } else if (this.isNotation(freq) || this.isTransportTime(freq)) {\n      return this.secondsToFrequency(this.toSeconds(freq, now));\n    } else if (this.isNote(freq)) {\n      return this.noteToFrequency(freq);\n    } else {\n      return freq;\n    }\n  };\n  Tone.prototype.toTicks = function (time) {\n    if (this.isUndef(Tone.Transport)) {\n      return 0;\n    }\n    var bpm = Tone.Transport.bpm.value;\n    var plusNow = 0;\n    if (this.isNowRelative(time)) {\n      time = time.replace('+', '');\n      plusNow = Tone.Transport.ticks;\n    } else if (this.isUndef(time)) {\n      return Tone.Transport.ticks;\n    }\n    var seconds = this.toSeconds(time);\n    var quarter = 60 / bpm;\n    var quarters = seconds / quarter;\n    var tickNum = quarters * Tone.Transport.PPQ;\n    return Math.round(tickNum + plusNow);\n  };\n  Tone.prototype.toSamples = function (time) {\n    var seconds = this.toSeconds(time);\n    return Math.round(seconds * this.context.sampleRate);\n  };\n  Tone.prototype.toSeconds = function (time, now) {\n    now = this.defaultArg(now, this.now());\n    if (this.isNumber(time)) {\n      return time;\n    } else if (this.isString(time)) {\n      var plusTime = 0;\n      if (this.isNowRelative(time)) {\n        time = time.replace('+', '');\n        plusTime = now;\n      }\n      var betweenParens = time.match(/\\(([^)(]+)\\)/g);\n      if (betweenParens) {\n        for (var j = 0; j < betweenParens.length; j++) {\n          var symbol = betweenParens[j].replace(/[\\(\\)]/g, '');\n          var symbolVal = this.toSeconds(symbol);\n          time = time.replace(betweenParens[j], symbolVal);\n        }\n      }\n      if (time.indexOf('@') !== -1) {\n        var quantizationSplit = time.split('@');\n        if (!this.isUndef(Tone.Transport)) {\n          var toQuantize = quantizationSplit[0].trim();\n          if (toQuantize === '') {\n            toQuantize = undefined;\n          }\n          if (plusTime > 0) {\n            toQuantize = '+' + toQuantize;\n            plusTime = 0;\n          }\n          var subdivision = quantizationSplit[1].trim();\n          time = Tone.Transport.quantize(toQuantize, subdivision);\n        } else {\n          throw new Error('quantization requires Tone.Transport');\n        }\n      } else {\n        var components = time.split(/[\\(\\)\\-\\+\\/\\*]/);\n        if (components.length > 1) {\n          var originalTime = time;\n          for (var i = 0; i < components.length; i++) {\n            var symb = components[i].trim();\n            if (symb !== '') {\n              var val = this.toSeconds(symb);\n              time = time.replace(symb, val);\n            }\n          }\n          try {\n            time = eval(time);\n          } catch (e) {\n            throw new EvalError('cannot evaluate Time: ' + originalTime);\n          }\n        } else if (this.isNotation(time)) {\n          time = this.notationToSeconds(time);\n        } else if (this.isTransportTime(time)) {\n          time = this.transportTimeToSeconds(time);\n        } else if (this.isFrequency(time)) {\n          time = this.frequencyToSeconds(time);\n        } else if (this.isTicks(time)) {\n          time = this.ticksToSeconds(time);\n        } else {\n          time = parseFloat(time);\n        }\n      }\n      return time + plusTime;\n    } else {\n      return now;\n    }\n  };\n  Tone.prototype.toNotation = function (time, bpm, timeSignature) {\n    var testNotations = [\n      '1m',\n      '2n',\n      '4n',\n      '8n',\n      '16n',\n      '32n',\n      '64n',\n      '128n'\n    ];\n    var retNotation = toNotationHelper.call(this, time, bpm, timeSignature, testNotations);\n    var testTripletNotations = [\n      '1m',\n      '2n',\n      '2t',\n      '4n',\n      '4t',\n      '8n',\n      '8t',\n      '16n',\n      '16t',\n      '32n',\n      '32t',\n      '64n',\n      '64t',\n      '128n'\n    ];\n    var retTripletNotation = toNotationHelper.call(this, time, bpm, timeSignature, testTripletNotations);\n    if (retTripletNotation.split('+').length < retNotation.split('+').length) {\n      return retTripletNotation;\n    } else {\n      return retNotation;\n    }\n  };\n  function toNotationHelper(time, bpm, timeSignature, testNotations) {\n    var seconds = this.toSeconds(time);\n    var threshold = this.notationToSeconds(testNotations[testNotations.length - 1], bpm, timeSignature);\n    var retNotation = '';\n    for (var i = 0; i < testNotations.length; i++) {\n      var notationTime = this.notationToSeconds(testNotations[i], bpm, timeSignature);\n      var multiple = seconds / notationTime;\n      var floatingPointError = 0.000001;\n      if (1 - multiple % 1 < floatingPointError) {\n        multiple += floatingPointError;\n      }\n      multiple = Math.floor(multiple);\n      if (multiple > 0) {\n        if (multiple === 1) {\n          retNotation += testNotations[i];\n        } else {\n          retNotation += multiple.toString() + '*' + testNotations[i];\n        }\n        seconds -= multiple * notationTime;\n        if (seconds < threshold) {\n          break;\n        } else {\n          retNotation += ' + ';\n        }\n      }\n    }\n    if (retNotation === '') {\n      retNotation = '0';\n    }\n    return retNotation;\n  }\n  Tone.prototype.fromUnits = function (val, units) {\n    if (this.convert || this.isUndef(this.convert)) {\n      switch (units) {\n      case Tone.Type.Time:\n        return this.toSeconds(val);\n      case Tone.Type.Frequency:\n        return this.toFrequency(val);\n      case Tone.Type.Decibels:\n        return this.dbToGain(val);\n      case Tone.Type.NormalRange:\n        return Math.min(Math.max(val, 0), 1);\n      case Tone.Type.AudioRange:\n        return Math.min(Math.max(val, -1), 1);\n      case Tone.Type.Positive:\n        return Math.max(val, 0);\n      default:\n        return val;\n      }\n    } else {\n      return val;\n    }\n  };\n  Tone.prototype.toUnits = function (val, units) {\n    if (this.convert || this.isUndef(this.convert)) {\n      switch (units) {\n      case Tone.Type.Decibels:\n        return this.gainToDb(val);\n      default:\n        return val;\n      }\n    } else {\n      return val;\n    }\n  };\n  var noteToScaleIndex = {\n    'cbb': -2,\n    'cb': -1,\n    'c': 0,\n    'c#': 1,\n    'cx': 2,\n    'dbb': 0,\n    'db': 1,\n    'd': 2,\n    'd#': 3,\n    'dx': 4,\n    'ebb': 2,\n    'eb': 3,\n    'e': 4,\n    'e#': 5,\n    'ex': 6,\n    'fbb': 3,\n    'fb': 4,\n    'f': 5,\n    'f#': 6,\n    'fx': 7,\n    'gbb': 5,\n    'gb': 6,\n    'g': 7,\n    'g#': 8,\n    'gx': 9,\n    'abb': 7,\n    'ab': 8,\n    'a': 9,\n    'a#': 10,\n    'ax': 11,\n    'bbb': 9,\n    'bb': 10,\n    'b': 11,\n    'b#': 12,\n    'bx': 13\n  };\n  var scaleIndexToNote = [\n    'C',\n    'C#',\n    'D',\n    'D#',\n    'E',\n    'F',\n    'F#',\n    'G',\n    'G#',\n    'A',\n    'A#',\n    'B'\n  ];\n  Tone.A4 = 440;\n  Tone.prototype.noteToFrequency = function (note) {\n    var parts = note.split(/(-?\\d+)/);\n    if (parts.length === 3) {\n      var index = noteToScaleIndex[parts[0].toLowerCase()];\n      var octave = parts[1];\n      var noteNumber = index + (parseInt(octave, 10) + 1) * 12;\n      return this.midiToFrequency(noteNumber);\n    } else {\n      return 0;\n    }\n  };\n  Tone.prototype.frequencyToNote = function (freq) {\n    var log = Math.log(freq / Tone.A4) / Math.LN2;\n    var noteNumber = Math.round(12 * log) + 57;\n    var octave = Math.floor(noteNumber / 12);\n    if (octave < 0) {\n      noteNumber += -12 * octave;\n    }\n    var noteName = scaleIndexToNote[noteNumber % 12];\n    return noteName + octave.toString();\n  };\n  Tone.prototype.intervalToFrequencyRatio = function (interval) {\n    return Math.pow(2, interval / 12);\n  };\n  Tone.prototype.midiToNote = function (midiNumber) {\n    var octave = Math.floor(midiNumber / 12) - 1;\n    var note = midiNumber % 12;\n    return scaleIndexToNote[note] + octave;\n  };\n  Tone.prototype.noteToMidi = function (note) {\n    var parts = note.split(/(\\d+)/);\n    if (parts.length === 3) {\n      var index = noteToScaleIndex[parts[0].toLowerCase()];\n      var octave = parts[1];\n      return index + (parseInt(octave, 10) + 1) * 12;\n    } else {\n      return 0;\n    }\n  };\n  Tone.prototype.midiToFrequency = function (midi) {\n    return Tone.A4 * Math.pow(2, (midi - 69) / 12);\n  };\n  return Tone;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Param;\nTone_core_Param = function (Tone) {\n  'use strict';\n  Tone.Param = function () {\n    var options = this.optionsObject(arguments, [\n      'param',\n      'units',\n      'convert'\n    ], Tone.Param.defaults);\n    this._param = this.input = options.param;\n    this.units = options.units;\n    this.convert = options.convert;\n    this.overridden = false;\n    if (!this.isUndef(options.value)) {\n      this.value = options.value;\n    }\n  };\n  Tone.extend(Tone.Param);\n  Tone.Param.defaults = {\n    'units': Tone.Type.Default,\n    'convert': true,\n    'param': undefined\n  };\n  Object.defineProperty(Tone.Param.prototype, 'value', {\n    get: function () {\n      return this._toUnits(this._param.value);\n    },\n    set: function (value) {\n      var convertedVal = this._fromUnits(value);\n      this._param.value = convertedVal;\n    }\n  });\n  Tone.Param.prototype._fromUnits = function (val) {\n    if (this.convert || this.isUndef(this.convert)) {\n      switch (this.units) {\n      case Tone.Type.Time:\n        return this.toSeconds(val);\n      case Tone.Type.Frequency:\n        return this.toFrequency(val);\n      case Tone.Type.Decibels:\n        return this.dbToGain(val);\n      case Tone.Type.NormalRange:\n        return Math.min(Math.max(val, 0), 1);\n      case Tone.Type.AudioRange:\n        return Math.min(Math.max(val, -1), 1);\n      case Tone.Type.Positive:\n        return Math.max(val, 0);\n      default:\n        return val;\n      }\n    } else {\n      return val;\n    }\n  };\n  Tone.Param.prototype._toUnits = function (val) {\n    if (this.convert || this.isUndef(this.convert)) {\n      switch (this.units) {\n      case Tone.Type.Decibels:\n        return this.gainToDb(val);\n      default:\n        return val;\n      }\n    } else {\n      return val;\n    }\n  };\n  Tone.Param.prototype._minOutput = 0.00001;\n  Tone.Param.prototype.setValueAtTime = function (value, time) {\n    value = this._fromUnits(value);\n    this._param.setValueAtTime(value, this.toSeconds(time));\n    return this;\n  };\n  Tone.Param.prototype.setRampPoint = function (now) {\n    now = this.defaultArg(now, this.now());\n    var currentVal = this._param.value;\n    this._param.setValueAtTime(currentVal, now);\n    return this;\n  };\n  Tone.Param.prototype.linearRampToValueAtTime = function (value, endTime) {\n    value = this._fromUnits(value);\n    this._param.linearRampToValueAtTime(value, this.toSeconds(endTime));\n    return this;\n  };\n  Tone.Param.prototype.exponentialRampToValueAtTime = function (value, endTime) {\n    value = this._fromUnits(value);\n    value = Math.max(this._minOutput, value);\n    this._param.exponentialRampToValueAtTime(value, this.toSeconds(endTime));\n    return this;\n  };\n  Tone.Param.prototype.exponentialRampToValue = function (value, rampTime) {\n    var now = this.now();\n    var currentVal = this.value;\n    this.setValueAtTime(Math.max(currentVal, this._minOutput), now);\n    this.exponentialRampToValueAtTime(value, now + this.toSeconds(rampTime));\n    return this;\n  };\n  Tone.Param.prototype.linearRampToValue = function (value, rampTime) {\n    var now = this.now();\n    this.setRampPoint(now);\n    this.linearRampToValueAtTime(value, now + this.toSeconds(rampTime));\n    return this;\n  };\n  Tone.Param.prototype.setTargetAtTime = function (value, startTime, timeConstant) {\n    value = this._fromUnits(value);\n    value = Math.max(this._minOutput, value);\n    timeConstant = Math.max(this._minOutput, timeConstant);\n    this._param.setTargetAtTime(value, this.toSeconds(startTime), timeConstant);\n    return this;\n  };\n  Tone.Param.prototype.setValueCurveAtTime = function (values, startTime, duration) {\n    for (var i = 0; i < values.length; i++) {\n      values[i] = this._fromUnits(values[i]);\n    }\n    this._param.setValueCurveAtTime(values, this.toSeconds(startTime), this.toSeconds(duration));\n    return this;\n  };\n  Tone.Param.prototype.cancelScheduledValues = function (startTime) {\n    this._param.cancelScheduledValues(this.toSeconds(startTime));\n    return this;\n  };\n  Tone.Param.prototype.rampTo = function (value, rampTime) {\n    rampTime = this.defaultArg(rampTime, 0);\n    if (this.units === Tone.Type.Frequency || this.units === Tone.Type.BPM) {\n      this.exponentialRampToValue(value, rampTime);\n    } else {\n      this.linearRampToValue(value, rampTime);\n    }\n    return this;\n  };\n  Tone.Param.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._param = null;\n    return this;\n  };\n  return Tone.Param;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Gain;\nTone_core_Gain = function (Tone) {\n  'use strict';\n  Tone.Gain = function () {\n    var options = this.optionsObject(arguments, [\n      'gain',\n      'units'\n    ], Tone.Gain.defaults);\n    this.input = this.output = this._gainNode = this.context.createGain();\n    this.gain = new Tone.Param({\n      'param': this._gainNode.gain,\n      'units': options.units,\n      'value': options.gain,\n      'convert': options.convert\n    });\n    this._readOnly('gain');\n  };\n  Tone.extend(Tone.Gain);\n  Tone.Gain.defaults = {\n    'gain': 1,\n    'convert': true\n  };\n  Tone.Gain.prototype.dispose = function () {\n    Tone.Param.prototype.dispose.call(this);\n    this._gainNode.disconnect();\n    this._gainNode = null;\n    this._writable('gain');\n    this.gain.dispose();\n    this.gain = null;\n  };\n  return Tone.Gain;\n}(Tone_core_Tone, Tone_core_Param);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_Signal;\nTone_signal_Signal = function (Tone) {\n  'use strict';\n  Tone.Signal = function () {\n    var options = this.optionsObject(arguments, [\n      'value',\n      'units'\n    ], Tone.Signal.defaults);\n    this.output = this._gain = this.context.createGain();\n    options.param = this._gain.gain;\n    Tone.Param.call(this, options);\n    this.input = this._param = this._gain.gain;\n    Tone.Signal._constant.chain(this._gain);\n  };\n  Tone.extend(Tone.Signal, Tone.Param);\n  Tone.Signal.defaults = {\n    'value': 0,\n    'units': Tone.Type.Default,\n    'convert': true\n  };\n  Tone.Signal.prototype.connect = Tone.SignalBase.prototype.connect;\n  Tone.Signal.prototype.dispose = function () {\n    Tone.Param.prototype.dispose.call(this);\n    this._param = null;\n    this._gain.disconnect();\n    this._gain = null;\n    return this;\n  };\n  Tone.Signal._constant = null;\n  Tone._initAudioContext(function (audioContext) {\n    var buffer = audioContext.createBuffer(1, 128, audioContext.sampleRate);\n    var arr = buffer.getChannelData(0);\n    for (var i = 0; i < arr.length; i++) {\n      arr[i] = 1;\n    }\n    Tone.Signal._constant = audioContext.createBufferSource();\n    Tone.Signal._constant.channelCount = 1;\n    Tone.Signal._constant.channelCountMode = 'explicit';\n    Tone.Signal._constant.buffer = buffer;\n    Tone.Signal._constant.loop = true;\n    Tone.Signal._constant.start(0);\n    Tone.Signal._constant.noGC();\n  });\n  return Tone.Signal;\n}(Tone_core_Tone, Tone_signal_WaveShaper, Tone_core_Type, Tone_core_Param);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_Add;\nTone_signal_Add = function (Tone) {\n  'use strict';\n  Tone.Add = function (value) {\n    Tone.call(this, 2, 0);\n    this._sum = this.input[0] = this.input[1] = this.output = this.context.createGain();\n    this._param = this.input[1] = new Tone.Signal(value);\n    this._param.connect(this._sum);\n  };\n  Tone.extend(Tone.Add, Tone.Signal);\n  Tone.Add.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._sum.disconnect();\n    this._sum = null;\n    this._param.dispose();\n    this._param = null;\n    return this;\n  };\n  return Tone.Add;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_Multiply;\nTone_signal_Multiply = function (Tone) {\n  'use strict';\n  Tone.Multiply = function (value) {\n    Tone.call(this, 2, 0);\n    this._mult = this.input[0] = this.output = this.context.createGain();\n    this._param = this.input[1] = this.output.gain;\n    this._param.value = this.defaultArg(value, 0);\n  };\n  Tone.extend(Tone.Multiply, Tone.Signal);\n  Tone.Multiply.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._mult.disconnect();\n    this._mult = null;\n    this._param = null;\n    return this;\n  };\n  return Tone.Multiply;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_Scale;\nTone_signal_Scale = function (Tone) {\n  'use strict';\n  Tone.Scale = function (outputMin, outputMax) {\n    this._outputMin = this.defaultArg(outputMin, 0);\n    this._outputMax = this.defaultArg(outputMax, 1);\n    this._scale = this.input = new Tone.Multiply(1);\n    this._add = this.output = new Tone.Add(0);\n    this._scale.connect(this._add);\n    this._setRange();\n  };\n  Tone.extend(Tone.Scale, Tone.SignalBase);\n  Object.defineProperty(Tone.Scale.prototype, 'min', {\n    get: function () {\n      return this._outputMin;\n    },\n    set: function (min) {\n      this._outputMin = min;\n      this._setRange();\n    }\n  });\n  Object.defineProperty(Tone.Scale.prototype, 'max', {\n    get: function () {\n      return this._outputMax;\n    },\n    set: function (max) {\n      this._outputMax = max;\n      this._setRange();\n    }\n  });\n  Tone.Scale.prototype._setRange = function () {\n    this._add.value = this._outputMin;\n    this._scale.value = this._outputMax - this._outputMin;\n  };\n  Tone.Scale.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._add.dispose();\n    this._add = null;\n    this._scale.dispose();\n    this._scale = null;\n    return this;\n  };\n  return Tone.Scale;\n}(Tone_core_Tone, Tone_signal_Add, Tone_signal_Multiply);\nvar signal;\nsignal = function () {\n  'use strict';\n  // Signal is built with the Tone.js signal by Yotam Mann\n  // https://github.com/TONEnoTONE/Tone.js/\n  var Signal = Tone_signal_Signal;\n  var Add = Tone_signal_Add;\n  var Mult = Tone_signal_Multiply;\n  var Scale = Tone_signal_Scale;\n  var Tone = Tone_core_Tone;\n  var p5sound = master;\n  Tone.setContext(p5sound.audiocontext);\n  /**\n   *  <p>p5.Signal is a constant audio-rate signal used by p5.Oscillator\n   *  and p5.Envelope for modulation math.</p>\n   *\n   *  <p>This is necessary because Web Audio is processed on a seprate clock.\n   *  For example, the p5 draw loop runs about 60 times per second. But\n   *  the audio clock must process samples 44100 times per second. If we\n   *  want to add a value to each of those samples, we can't do it in the\n   *  draw loop, but we can do it by adding a constant-rate audio signal.This class mostly functions behind the scenes in p5.sound, and returns\n   *  a Tone.Signal from the Tone.js library by Yotam Mann.\n   *  If you want to work directly with audio signals for modular\n   *  synthesis, check out\n   *  <a href=\"http://bit.ly/1oIoEng\" target=\"_'blank'\">tone.js.</a></p>\n   *\n   *  @class  p5.Signal\n   *  @constructor\n   *  @return {Tone.Signal} A Signal object from the Tone.js library\n   *  @example\n   *  <div><code>\n   *  function setup() {\n   *    carrier = new p5.Oscillator('sine');\n   *    carrier.amp(1); // set amplitude\n   *    carrier.freq(220); // set frequency\n   *    carrier.start(); // start oscillating\n   *    \n   *    modulator = new p5.Oscillator('sawtooth');\n   *    modulator.disconnect();\n   *    modulator.amp(1);\n   *    modulator.freq(4);\n   *    modulator.start();\n   *\n   *    // Modulator's default amplitude range is -1 to 1.\n   *    // Multiply it by -200, so the range is -200 to 200\n   *    // then add 220 so the range is 20 to 420\n   *    carrier.freq( modulator.mult(-200).add(220) );\n   *  }\n   *  </code></div>\n   */\n  p5.Signal = function (value) {\n    var s = new Signal(value);\n    // p5sound.soundArray.push(s);\n    return s;\n  };\n  /**\n   *  Fade to value, for smooth transitions\n   *\n   *  @method  fade\n   *  @param  {Number} value          Value to set this signal\n   *  @param  {[Number]} secondsFromNow Length of fade, in seconds from now\n   */\n  Signal.prototype.fade = Signal.prototype.linearRampToValueAtTime;\n  Mult.prototype.fade = Signal.prototype.fade;\n  Add.prototype.fade = Signal.prototype.fade;\n  Scale.prototype.fade = Signal.prototype.fade;\n  /**\n   *  Connect a p5.sound object or Web Audio node to this\n   *  p5.Signal so that its amplitude values can be scaled.\n   *  \n   *  @param {Object} input\n   */\n  Signal.prototype.setInput = function (_input) {\n    _input.connect(this);\n  };\n  Mult.prototype.setInput = Signal.prototype.setInput;\n  Add.prototype.setInput = Signal.prototype.setInput;\n  Scale.prototype.setInput = Signal.prototype.setInput;\n  // signals can add / mult / scale themselves\n  /**\n   *  Add a constant value to this audio signal,\n   *  and return the resulting audio signal. Does\n   *  not change the value of the original signal,\n   *  instead it returns a new p5.SignalAdd.\n   *  \n   *  @method  add\n   *  @param {Number} number\n   *  @return {p5.SignalAdd} object\n   */\n  Signal.prototype.add = function (num) {\n    var add = new Add(num);\n    // add.setInput(this);\n    this.connect(add);\n    return add;\n  };\n  Mult.prototype.add = Signal.prototype.add;\n  Add.prototype.add = Signal.prototype.add;\n  Scale.prototype.add = Signal.prototype.add;\n  /**\n   *  Multiply this signal by a constant value,\n   *  and return the resulting audio signal. Does\n   *  not change the value of the original signal,\n   *  instead it returns a new p5.SignalMult.\n   *  \n   *  @method  mult\n   *  @param {Number} number to multiply\n   *  @return {Tone.Multiply} object\n   */\n  Signal.prototype.mult = function (num) {\n    var mult = new Mult(num);\n    // mult.setInput(this);\n    this.connect(mult);\n    return mult;\n  };\n  Mult.prototype.mult = Signal.prototype.mult;\n  Add.prototype.mult = Signal.prototype.mult;\n  Scale.prototype.mult = Signal.prototype.mult;\n  /**\n   *  Scale this signal value to a given range,\n   *  and return the result as an audio signal. Does\n   *  not change the value of the original signal,\n   *  instead it returns a new p5.SignalScale.\n   *  \n   *  @method  scale\n   *  @param {Number} number to multiply\n   *  @param  {Number} inMin  input range minumum\n   *  @param  {Number} inMax  input range maximum\n   *  @param  {Number} outMin input range minumum\n   *  @param  {Number} outMax input range maximum\n   *  @return {p5.SignalScale} object\n   */\n  Signal.prototype.scale = function (inMin, inMax, outMin, outMax) {\n    var mapOutMin, mapOutMax;\n    if (arguments.length === 4) {\n      mapOutMin = p5.prototype.map(outMin, inMin, inMax, 0, 1) - 0.5;\n      mapOutMax = p5.prototype.map(outMax, inMin, inMax, 0, 1) - 0.5;\n    } else {\n      mapOutMin = arguments[0];\n      mapOutMax = arguments[1];\n    }\n    var scale = new Scale(mapOutMin, mapOutMax);\n    this.connect(scale);\n    return scale;\n  };\n  Mult.prototype.scale = Signal.prototype.scale;\n  Add.prototype.scale = Signal.prototype.scale;\n  Scale.prototype.scale = Signal.prototype.scale;\n}(Tone_signal_Signal, Tone_signal_Add, Tone_signal_Multiply, Tone_signal_Scale, Tone_core_Tone, master);\nvar oscillator;\noscillator = function () {\n  'use strict';\n  var p5sound = master;\n  var Signal = Tone_signal_Signal;\n  var Add = Tone_signal_Add;\n  var Mult = Tone_signal_Multiply;\n  var Scale = Tone_signal_Scale;\n  /**\n   *  <p>Creates a signal that oscillates between -1.0 and 1.0.\n   *  By default, the oscillation takes the form of a sinusoidal\n   *  shape ('sine'). Additional types include 'triangle',\n   *  'sawtooth' and 'square'. The frequency defaults to\n   *  440 oscillations per second (440Hz, equal to the pitch of an\n   *  'A' note).</p> \n   *\n   *  <p>Set the type of oscillation with setType(), or by creating a\n   *  specific oscillator.</p> For example:\n   *  <code>new p5.SinOsc(freq)</code>\n   *  <code>new p5.TriOsc(freq)</code>\n   *  <code>new p5.SqrOsc(freq)</code>\n   *  <code>new p5.SawOsc(freq)</code>.\n   *  <p></p>\n   *  \n   *  @class p5.Oscillator\n   *  @constructor\n   *  @param {Number} [freq] frequency defaults to 440Hz\n   *  @param {String} [type] type of oscillator. Options:\n   *                         'sine' (default), 'triangle',\n   *                         'sawtooth', 'square'\n   *  @return {Object}    Oscillator object\n   *  @example\n   *  <div><code>\n   *  var osc;\n   *  var playing = false;\n   *  \n   *  function setup() {\n   *    backgroundColor = color(255,0,255);\n   *    textAlign(CENTER);\n   *    \n   *    osc = new p5.Oscillator();\n   *    osc.setType('sine');\n   *    osc.freq(240);\n   *    osc.amp(0);\n   *    osc.start();\n   *  }\n   *\n   *  function draw() {\n   *    background(backgroundColor)\n   *    text('click to play', width/2, height/2);\n   *  }\n   *\n   *  function mouseClicked() {\n   *    if (mouseX > 0 && mouseX < width && mouseY < height && mouseY > 0) {\n   *      if (!playing) {\n   *        // ramp amplitude to 0.5 over 0.1 seconds\n   *        osc.amp(0.5, 0.05);\n   *        playing = true;\n   *        backgroundColor = color(0,255,255);\n   *      } else {\n   *        // ramp amplitude to 0 over 0.5 seconds\n   *        osc.amp(0, 0.5);\n   *        playing = false;\n   *        backgroundColor = color(255,0,255);\n   *      }\n   *    }\n   *  }\n   *  </code> </div>\n   */\n  p5.Oscillator = function (freq, type) {\n    if (typeof freq === 'string') {\n      var f = type;\n      type = freq;\n      freq = f;\n    }\n    if (typeof type === 'number') {\n      var f = type;\n      type = freq;\n      freq = f;\n    }\n    this.started = false;\n    // components\n    this.phaseAmount = undefined;\n    this.oscillator = p5sound.audiocontext.createOscillator();\n    this.f = freq || 440;\n    // frequency\n    this.oscillator.frequency.setValueAtTime(this.f, p5sound.audiocontext.currentTime);\n    this.oscillator.type = type || 'sine';\n    var o = this.oscillator;\n    // connections\n    this.input = p5sound.audiocontext.createGain();\n    this.output = p5sound.audiocontext.createGain();\n    this._freqMods = [];\n    // modulators connected to this oscillator's frequency\n    // set default output gain to 0.5\n    this.output.gain.value = 0.5;\n    this.output.gain.setValueAtTime(0.5, p5sound.audiocontext.currentTime);\n    this.oscillator.connect(this.output);\n    // stereo panning\n    this.panPosition = 0;\n    this.connection = p5sound.input;\n    // connect to p5sound by default\n    this.panner = new p5.Panner(this.output, this.connection, 1);\n    //array of math operation signal chaining\n    this.mathOps = [this.output];\n    // add to the soundArray so we can dispose of the osc later\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Start an oscillator. Accepts an optional parameter to\n   *  determine how long (in seconds from now) until the\n   *  oscillator starts.\n   *\n   *  @method  start\n   *  @param  {Number} [time] startTime in seconds from now.\n   *  @param  {Number} [frequency] frequency in Hz.\n   */\n  p5.Oscillator.prototype.start = function (time, f) {\n    if (this.started) {\n      var now = p5sound.audiocontext.currentTime;\n      this.stop(now);\n    }\n    if (!this.started) {\n      var freq = f || this.f;\n      var type = this.oscillator.type;\n      // var detune = this.oscillator.frequency.value;\n      this.oscillator = p5sound.audiocontext.createOscillator();\n      this.oscillator.frequency.exponentialRampToValueAtTime(Math.abs(freq), p5sound.audiocontext.currentTime);\n      this.oscillator.type = type;\n      // this.oscillator.detune.value = detune;\n      this.oscillator.connect(this.output);\n      time = time || 0;\n      this.oscillator.start(time + p5sound.audiocontext.currentTime);\n      this.freqNode = this.oscillator.frequency;\n      // if other oscillators are already connected to this osc's freq\n      for (var i in this._freqMods) {\n        if (typeof this._freqMods[i].connect !== 'undefined') {\n          this._freqMods[i].connect(this.oscillator.frequency);\n        }\n      }\n      this.started = true;\n    }\n  };\n  /**\n   *  Stop an oscillator. Accepts an optional parameter\n   *  to determine how long (in seconds from now) until the\n   *  oscillator stops.\n   *\n   *  @method  stop\n   *  @param  {Number} secondsFromNow Time, in seconds from now.\n   */\n  p5.Oscillator.prototype.stop = function (time) {\n    if (this.started) {\n      var t = time || 0;\n      var now = p5sound.audiocontext.currentTime;\n      this.oscillator.stop(t + now);\n      this.started = false;\n    }\n  };\n  /**\n   *  Set the amplitude between 0 and 1.0. Or, pass in an object\n   *  such as an oscillator to modulate amplitude with an audio signal.\n   *\n   *  @method  amp\n   *  @param  {Number|Object} vol between 0 and 1.0\n   *                              or a modulating signal/oscillator\n   *  @param {Number} [rampTime] create a fade that lasts rampTime \n   *  @param {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   *  @return  {AudioParam} gain  If no value is provided,\n   *                              returns the Web Audio API\n   *                              AudioParam that controls\n   *                              this oscillator's\n   *                              gain/amplitude/volume)\n   */\n  p5.Oscillator.prototype.amp = function (vol, rampTime, tFromNow) {\n    var self = this;\n    if (typeof vol === 'number') {\n      var rampTime = rampTime || 0;\n      var tFromNow = tFromNow || 0;\n      var now = p5sound.audiocontext.currentTime;\n      var currentVol = this.output.gain.value;\n      this.output.gain.cancelScheduledValues(now);\n      this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n      this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n    } else if (vol) {\n      vol.connect(self.output.gain);\n    } else {\n      // return the Gain Node\n      return this.output.gain;\n    }\n  };\n  // these are now the same thing\n  p5.Oscillator.prototype.fade = p5.Oscillator.prototype.amp;\n  p5.Oscillator.prototype.getAmp = function () {\n    return this.output.gain.value;\n  };\n  /**\n   *  Set frequency of an oscillator to a value. Or, pass in an object\n   *  such as an oscillator to modulate the frequency with an audio signal.\n   *\n   *  @method  freq\n   *  @param  {Number|Object} Frequency Frequency in Hz\n   *                                        or modulating signal/oscillator\n   *  @param  {Number} [rampTime] Ramp time (in seconds)\n   *  @param  {Number} [timeFromNow] Schedule this event to happen\n   *                                   at x seconds from now\n   *  @return  {AudioParam} Frequency If no value is provided,\n   *                                  returns the Web Audio API\n   *                                  AudioParam that controls\n   *                                  this oscillator's frequency\n   *  @example\n   *  <div><code>\n   *  var osc = new p5.Oscillator(300);\n   *  osc.start();\n   *  osc.freq(40, 10);\n   *  </code></div>\n   */\n  p5.Oscillator.prototype.freq = function (val, rampTime, tFromNow) {\n    if (typeof val === 'number' && !isNaN(val)) {\n      this.f = val;\n      var now = p5sound.audiocontext.currentTime;\n      var rampTime = rampTime || 0;\n      var tFromNow = tFromNow || 0;\n      // var currentFreq = this.oscillator.frequency.value;\n      // this.oscillator.frequency.cancelScheduledValues(now);\n      if (rampTime == 0) {\n        this.oscillator.frequency.cancelScheduledValues(now);\n        this.oscillator.frequency.setValueAtTime(val, tFromNow + now);\n      } else {\n        if (val > 0) {\n          this.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n        } else {\n          this.oscillator.frequency.linearRampToValueAtTime(val, tFromNow + rampTime + now);\n        }\n      }\n      // reset phase if oscillator has a phase\n      if (this.phaseAmount) {\n        this.phase(this.phaseAmount);\n      }\n    } else if (val) {\n      if (val.output) {\n        val = val.output;\n      }\n      val.connect(this.oscillator.frequency);\n      // keep track of what is modulating this param\n      // so it can be re-connected if \n      this._freqMods.push(val);\n    } else {\n      // return the Frequency Node\n      return this.oscillator.frequency;\n    }\n  };\n  p5.Oscillator.prototype.getFreq = function () {\n    return this.oscillator.frequency.value;\n  };\n  /**\n   *  Set type to 'sine', 'triangle', 'sawtooth' or 'square'.\n   *\n   *  @method  setType\n   *  @param {String} type 'sine', 'triangle', 'sawtooth' or 'square'.\n   */\n  p5.Oscillator.prototype.setType = function (type) {\n    this.oscillator.type = type;\n  };\n  p5.Oscillator.prototype.getType = function () {\n    return this.oscillator.type;\n  };\n  /**\n   *  Connect to a p5.sound / Web Audio object.\n   *\n   *  @method  connect\n   *  @param  {Object} unit A p5.sound or Web Audio object\n   */\n  p5.Oscillator.prototype.connect = function (unit) {\n    if (!unit) {\n      this.panner.connect(p5sound.input);\n    } else if (unit.hasOwnProperty('input')) {\n      this.panner.connect(unit.input);\n      this.connection = unit.input;\n    } else {\n      this.panner.connect(unit);\n      this.connection = unit;\n    }\n  };\n  /**\n   *  Disconnect all outputs\n   *\n   *  @method  disconnect\n   */\n  p5.Oscillator.prototype.disconnect = function (unit) {\n    this.output.disconnect();\n    this.panner.disconnect();\n    this.output.connect(this.panner);\n    this.oscMods = [];\n  };\n  /**\n   *  Pan between Left (-1) and Right (1)\n   *\n   *  @method  pan\n   *  @param  {Number} panning Number between -1 and 1\n   *  @param  {Number} timeFromNow schedule this event to happen\n   *                                seconds from now\n   */\n  p5.Oscillator.prototype.pan = function (pval, tFromNow) {\n    this.panPosition = pval;\n    this.panner.pan(pval, tFromNow);\n  };\n  p5.Oscillator.prototype.getPan = function () {\n    return this.panPosition;\n  };\n  // get rid of the oscillator\n  p5.Oscillator.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    if (this.oscillator) {\n      var now = p5sound.audiocontext.currentTime;\n      this.stop(now);\n      this.disconnect();\n      this.oscillator.disconnect();\n      this.panner = null;\n      this.oscillator = null;\n    }\n    // if it is a Pulse\n    if (this.osc2) {\n      this.osc2.dispose();\n    }\n  };\n  /**\n   *  Set the phase of an oscillator between 0.0 and 1.0.\n   *  In this implementation, phase is a delay time\n   *  based on the oscillator's current frequency.\n   *  \n   *  @method  phase\n   *  @param  {Number} phase float between 0.0 and 1.0\n   */\n  p5.Oscillator.prototype.phase = function (p) {\n    var delayAmt = p5.prototype.map(p, 0, 1, 0, 1 / this.f);\n    var now = p5sound.audiocontext.currentTime;\n    this.phaseAmount = p;\n    if (!this.dNode) {\n      // create a delay node\n      this.dNode = p5sound.audiocontext.createDelay();\n      // put the delay node in between output and panner\n      this.oscillator.disconnect();\n      this.oscillator.connect(this.dNode);\n      this.dNode.connect(this.output);\n    }\n    // set delay time to match phase:\n    this.dNode.delayTime.setValueAtTime(delayAmt, now);\n  };\n  // ========================== //\n  // SIGNAL MATH FOR MODULATION //\n  // ========================== //\n  // return sigChain(this, scale, thisChain, nextChain, Scale);\n  var sigChain = function (o, mathObj, thisChain, nextChain, type) {\n    var chainSource = o.oscillator;\n    // if this type of math already exists in the chain, replace it\n    for (var i in o.mathOps) {\n      if (o.mathOps[i] instanceof type) {\n        chainSource.disconnect();\n        o.mathOps[i].dispose();\n        thisChain = i;\n        // assume nextChain is output gain node unless...\n        if (thisChain < o.mathOps.length - 2) {\n          nextChain = o.mathOps[i + 1];\n        }\n      }\n    }\n    if (thisChain == o.mathOps.length - 1) {\n      o.mathOps.push(nextChain);\n    }\n    // assume source is the oscillator unless i > 0\n    if (i > 0) {\n      chainSource = o.mathOps[i - 1];\n    }\n    chainSource.disconnect();\n    chainSource.connect(mathObj);\n    mathObj.connect(nextChain);\n    o.mathOps[thisChain] = mathObj;\n    return o;\n  };\n  /**\n   *  Add a value to the p5.Oscillator's output amplitude,\n   *  and return the oscillator. Calling this method again\n   *  will override the initial add() with a new value.\n   *  \n   *  @method  add\n   *  @param {Number} number Constant number to add\n   *  @return {p5.Oscillator} Oscillator Returns this oscillator\n   *                                     with scaled output\n   *  \n   */\n  p5.Oscillator.prototype.add = function (num) {\n    var add = new Add(num);\n    var thisChain = this.mathOps.length - 1;\n    var nextChain = this.output;\n    return sigChain(this, add, thisChain, nextChain, Add);\n  };\n  /**\n   *  Multiply the p5.Oscillator's output amplitude\n   *  by a fixed value (i.e. turn it up!). Calling this method\n   *  again will override the initial mult() with a new value.\n   *  \n   *  @method  mult\n   *  @param {Number} number Constant number to multiply\n   *  @return {p5.Oscillator} Oscillator Returns this oscillator\n   *                                     with multiplied output\n   */\n  p5.Oscillator.prototype.mult = function (num) {\n    var mult = new Mult(num);\n    var thisChain = this.mathOps.length - 1;\n    var nextChain = this.output;\n    return sigChain(this, mult, thisChain, nextChain, Mult);\n  };\n  /**\n   *  Scale this oscillator's amplitude values to a given\n   *  range, and return the oscillator. Calling this method\n   *  again will override the initial scale() with new values.\n   *  \n   *  @method  scale\n   *  @param  {Number} inMin  input range minumum\n   *  @param  {Number} inMax  input range maximum\n   *  @param  {Number} outMin input range minumum\n   *  @param  {Number} outMax input range maximum\n   *  @return {p5.Oscillator} Oscillator Returns this oscillator\n   *                                     with scaled output\n   */\n  p5.Oscillator.prototype.scale = function (inMin, inMax, outMin, outMax) {\n    var mapOutMin, mapOutMax;\n    if (arguments.length === 4) {\n      mapOutMin = p5.prototype.map(outMin, inMin, inMax, 0, 1) - 0.5;\n      mapOutMax = p5.prototype.map(outMax, inMin, inMax, 0, 1) - 0.5;\n    } else {\n      mapOutMin = arguments[0];\n      mapOutMax = arguments[1];\n    }\n    var scale = new Scale(mapOutMin, mapOutMax);\n    var thisChain = this.mathOps.length - 1;\n    var nextChain = this.output;\n    return sigChain(this, scale, thisChain, nextChain, Scale);\n  };\n  // ============================== //\n  // SinOsc, TriOsc, SqrOsc, SawOsc //\n  // ============================== //\n  /**\n   *  Constructor: <code>new p5.SinOsc()</code>.\n   *  This creates a Sine Wave Oscillator and is\n   *  equivalent to <code> new p5.Oscillator('sine')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('sine')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @method  p5.SinOsc\n   *  @param {[Number]} freq Set the frequency\n   */\n  p5.SinOsc = function (freq) {\n    p5.Oscillator.call(this, freq, 'sine');\n  };\n  p5.SinOsc.prototype = Object.create(p5.Oscillator.prototype);\n  /**\n   *  Constructor: <code>new p5.TriOsc()</code>.\n   *  This creates a Triangle Wave Oscillator and is\n   *  equivalent to <code>new p5.Oscillator('triangle')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('triangle')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @method  p5.TriOsc\n   *  @param {[Number]} freq Set the frequency\n   */\n  p5.TriOsc = function (freq) {\n    p5.Oscillator.call(this, freq, 'triangle');\n  };\n  p5.TriOsc.prototype = Object.create(p5.Oscillator.prototype);\n  /**\n   *  Constructor: <code>new p5.SawOsc()</code>.\n   *  This creates a SawTooth Wave Oscillator and is\n   *  equivalent to <code> new p5.Oscillator('sawtooth')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('sawtooth')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @method  p5.SawOsc\n   *  @param {[Number]} freq Set the frequency\n   */\n  p5.SawOsc = function (freq) {\n    p5.Oscillator.call(this, freq, 'sawtooth');\n  };\n  p5.SawOsc.prototype = Object.create(p5.Oscillator.prototype);\n  /**\n   *  Constructor: <code>new p5.SqrOsc()</code>.\n   *  This creates a Square Wave Oscillator and is\n   *  equivalent to <code> new p5.Oscillator('square')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('square')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @method  p5.SqrOsc\n   *  @param {[Number]} freq Set the frequency\n   */\n  p5.SqrOsc = function (freq) {\n    p5.Oscillator.call(this, freq, 'square');\n  };\n  p5.SqrOsc.prototype = Object.create(p5.Oscillator.prototype);\n}(master, Tone_signal_Signal, Tone_signal_Add, Tone_signal_Multiply, Tone_signal_Scale);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Timeline;\nTone_core_Timeline = function (Tone) {\n  'use strict';\n  Tone.Timeline = function () {\n    var options = this.optionsObject(arguments, ['memory'], Tone.Timeline.defaults);\n    this._timeline = [];\n    this._toRemove = [];\n    this._iterating = false;\n    this.memory = options.memory;\n  };\n  Tone.extend(Tone.Timeline);\n  Tone.Timeline.defaults = { 'memory': Infinity };\n  Object.defineProperty(Tone.Timeline.prototype, 'length', {\n    get: function () {\n      return this._timeline.length;\n    }\n  });\n  Tone.Timeline.prototype.addEvent = function (event) {\n    if (this.isUndef(event.time)) {\n      throw new Error('events must have a time attribute');\n    }\n    event.time = this.toSeconds(event.time);\n    if (this._timeline.length) {\n      var index = this._search(event.time);\n      this._timeline.splice(index + 1, 0, event);\n    } else {\n      this._timeline.push(event);\n    }\n    if (this.length > this.memory) {\n      var diff = this.length - this.memory;\n      this._timeline.splice(0, diff);\n    }\n    return this;\n  };\n  Tone.Timeline.prototype.removeEvent = function (event) {\n    if (this._iterating) {\n      this._toRemove.push(event);\n    } else {\n      var index = this._timeline.indexOf(event);\n      if (index !== -1) {\n        this._timeline.splice(index, 1);\n      }\n    }\n    return this;\n  };\n  Tone.Timeline.prototype.getEvent = function (time) {\n    time = this.toSeconds(time);\n    var index = this._search(time);\n    if (index !== -1) {\n      return this._timeline[index];\n    } else {\n      return null;\n    }\n  };\n  Tone.Timeline.prototype.getEventAfter = function (time) {\n    time = this.toSeconds(time);\n    var index = this._search(time);\n    if (index + 1 < this._timeline.length) {\n      return this._timeline[index + 1];\n    } else {\n      return null;\n    }\n  };\n  Tone.Timeline.prototype.getEventBefore = function (time) {\n    time = this.toSeconds(time);\n    var index = this._search(time);\n    if (index - 1 >= 0) {\n      return this._timeline[index - 1];\n    } else {\n      return null;\n    }\n  };\n  Tone.Timeline.prototype.cancel = function (after) {\n    if (this._timeline.length > 1) {\n      after = this.toSeconds(after);\n      var index = this._search(after);\n      if (index >= 0) {\n        this._timeline = this._timeline.slice(0, index);\n      } else {\n        this._timeline = [];\n      }\n    } else if (this._timeline.length === 1) {\n      if (this._timeline[0].time >= after) {\n        this._timeline = [];\n      }\n    }\n    return this;\n  };\n  Tone.Timeline.prototype.cancelBefore = function (time) {\n    if (this._timeline.length) {\n      time = this.toSeconds(time);\n      var index = this._search(time);\n      if (index >= 0) {\n        this._timeline = this._timeline.slice(index + 1);\n      }\n    }\n    return this;\n  };\n  Tone.Timeline.prototype._search = function (time) {\n    var beginning = 0;\n    var len = this._timeline.length;\n    var end = len;\n    while (beginning <= end=\"\" &&=\"\" beginning=\"\" <=\"\" len)=\"\" {=\"\" var=\"\" midpoint=\"Math.floor(beginning\" +=\"\" (end=\"\" -=\"\" beginning)=\"\" 2);=\"\" event=\"this._timeline[midPoint];\" if=\"\" (event.time=\"==\" time)=\"\" for=\"\" (var=\"\" i=\"midPoint;\" this._timeline.length;=\"\" i++)=\"\" testevent=\"this._timeline[i];\" (testevent.time=\"==\" }=\"\" return=\"\" midpoint;=\"\" else=\"\"> time) {\n        end = midPoint - 1;\n      } else if (event.time < time) {\n        beginning = midPoint + 1;\n      }\n    }\n    return beginning - 1;\n  };\n  Tone.Timeline.prototype._iterate = function (callback, lowerBound, upperBound) {\n    this._iterating = true;\n    lowerBound = this.defaultArg(lowerBound, 0);\n    upperBound = this.defaultArg(upperBound, this._timeline.length - 1);\n    for (var i = lowerBound; i <= upperbound;=\"\" i++)=\"\" {=\"\" callback(this._timeline[i]);=\"\" }=\"\" this._iterating=\"false;\" if=\"\" (this._toremove.length=\"\"> 0) {\n      for (var j = 0; j < this._toRemove.length; j++) {\n        var index = this._timeline.indexOf(this._toRemove[j]);\n        if (index !== -1) {\n          this._timeline.splice(index, 1);\n        }\n      }\n      this._toRemove = [];\n    }\n  };\n  Tone.Timeline.prototype.forEach = function (callback) {\n    this._iterate(callback);\n    return this;\n  };\n  Tone.Timeline.prototype.forEachBefore = function (time, callback) {\n    time = this.toSeconds(time);\n    var upperBound = this._search(time);\n    if (upperBound !== -1) {\n      this._iterate(callback, 0, upperBound);\n    }\n    return this;\n  };\n  Tone.Timeline.prototype.forEachAfter = function (time, callback) {\n    time = this.toSeconds(time);\n    var lowerBound = this._search(time);\n    this._iterate(callback, lowerBound + 1);\n    return this;\n  };\n  Tone.Timeline.prototype.forEachFrom = function (time, callback) {\n    time = this.toSeconds(time);\n    var lowerBound = this._search(time);\n    while (lowerBound >= 0 && this._timeline[lowerBound].time >= time) {\n      lowerBound--;\n    }\n    this._iterate(callback, lowerBound + 1);\n    return this;\n  };\n  Tone.Timeline.prototype.forEachAtTime = function (time, callback) {\n    time = this.toSeconds(time);\n    var upperBound = this._search(time);\n    if (upperBound !== -1) {\n      this._iterate(function (event) {\n        if (event.time === time) {\n          callback(event);\n        }\n      }, 0, upperBound);\n    }\n    return this;\n  };\n  Tone.Timeline.prototype.dispose = function () {\n    Tone.prototype.dispose.call(this);\n    this._timeline = null;\n    this._toRemove = null;\n  };\n  return Tone.Timeline;\n}(Tone_core_Tone);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_signal_TimelineSignal;\nTone_signal_TimelineSignal = function (Tone) {\n  'use strict';\n  Tone.TimelineSignal = function () {\n    var options = this.optionsObject(arguments, [\n      'value',\n      'units'\n    ], Tone.Signal.defaults);\n    Tone.Signal.apply(this, options);\n    options.param = this._param;\n    Tone.Param.call(this, options);\n    this._events = new Tone.Timeline(10);\n    this._initial = this._fromUnits(this._param.value);\n  };\n  Tone.extend(Tone.TimelineSignal, Tone.Param);\n  Tone.TimelineSignal.Type = {\n    Linear: 'linear',\n    Exponential: 'exponential',\n    Target: 'target',\n    Set: 'set'\n  };\n  Object.defineProperty(Tone.TimelineSignal.prototype, 'value', {\n    get: function () {\n      return this._toUnits(this._param.value);\n    },\n    set: function (value) {\n      var convertedVal = this._fromUnits(value);\n      this._initial = convertedVal;\n      this._param.value = convertedVal;\n    }\n  });\n  Tone.TimelineSignal.prototype.setValueAtTime = function (value, startTime) {\n    value = this._fromUnits(value);\n    startTime = this.toSeconds(startTime);\n    this._events.addEvent({\n      'type': Tone.TimelineSignal.Type.Set,\n      'value': value,\n      'time': startTime\n    });\n    this._param.setValueAtTime(value, startTime);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.linearRampToValueAtTime = function (value, endTime) {\n    value = this._fromUnits(value);\n    endTime = this.toSeconds(endTime);\n    this._events.addEvent({\n      'type': Tone.TimelineSignal.Type.Linear,\n      'value': value,\n      'time': endTime\n    });\n    this._param.linearRampToValueAtTime(value, endTime);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.exponentialRampToValueAtTime = function (value, endTime) {\n    value = this._fromUnits(value);\n    value = Math.max(this._minOutput, value);\n    endTime = this.toSeconds(endTime);\n    this._events.addEvent({\n      'type': Tone.TimelineSignal.Type.Exponential,\n      'value': value,\n      'time': endTime\n    });\n    this._param.exponentialRampToValueAtTime(value, endTime);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.setTargetAtTime = function (value, startTime, timeConstant) {\n    value = this._fromUnits(value);\n    value = Math.max(this._minOutput, value);\n    timeConstant = Math.max(this._minOutput, timeConstant);\n    startTime = this.toSeconds(startTime);\n    this._events.addEvent({\n      'type': Tone.TimelineSignal.Type.Target,\n      'value': value,\n      'time': startTime,\n      'constant': timeConstant\n    });\n    this._param.setTargetAtTime(value, startTime, timeConstant);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.cancelScheduledValues = function (after) {\n    this._events.cancel(after);\n    this._param.cancelScheduledValues(this.toSeconds(after));\n    return this;\n  };\n  Tone.TimelineSignal.prototype.setRampPoint = function (time) {\n    time = this.toSeconds(time);\n    var val = this.getValueAtTime(time);\n    var after = this._searchAfter(time);\n    if (after) {\n      this.cancelScheduledValues(time);\n      if (after.type === Tone.TimelineSignal.Type.Linear) {\n        this.linearRampToValueAtTime(val, time);\n      } else if (after.type === Tone.TimelineSignal.Type.Exponential) {\n        this.exponentialRampToValueAtTime(val, time);\n      }\n    }\n    this.setValueAtTime(val, time);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.linearRampToValueBetween = function (value, start, finish) {\n    this.setRampPoint(start);\n    this.linearRampToValueAtTime(value, finish);\n    return this;\n  };\n  Tone.TimelineSignal.prototype.exponentialRampToValueBetween = function (value, start, finish) {\n    this.setRampPoint(start);\n    this.exponentialRampToValueAtTime(value, finish);\n    return this;\n  };\n  Tone.TimelineSignal.prototype._searchBefore = function (time) {\n    return this._events.getEvent(time);\n  };\n  Tone.TimelineSignal.prototype._searchAfter = function (time) {\n    return this._events.getEventAfter(time);\n  };\n  Tone.TimelineSignal.prototype.getValueAtTime = function (time) {\n    var after = this._searchAfter(time);\n    var before = this._searchBefore(time);\n    var value = this._initial;\n    if (before === null) {\n      value = this._initial;\n    } else if (before.type === Tone.TimelineSignal.Type.Target) {\n      var previous = this._events.getEventBefore(before.time);\n      var previouVal;\n      if (previous === null) {\n        previouVal = this._initial;\n      } else {\n        previouVal = previous.value;\n      }\n      value = this._exponentialApproach(before.time, previouVal, before.value, before.constant, time);\n    } else if (after === null) {\n      value = before.value;\n    } else if (after.type === Tone.TimelineSignal.Type.Linear) {\n      value = this._linearInterpolate(before.time, before.value, after.time, after.value, time);\n    } else if (after.type === Tone.TimelineSignal.Type.Exponential) {\n      value = this._exponentialInterpolate(before.time, before.value, after.time, after.value, time);\n    } else {\n      value = before.value;\n    }\n    return value;\n  };\n  Tone.TimelineSignal.prototype.connect = Tone.SignalBase.prototype.connect;\n  Tone.TimelineSignal.prototype._exponentialApproach = function (t0, v0, v1, timeConstant, t) {\n    return v1 + (v0 - v1) * Math.exp(-(t - t0) / timeConstant);\n  };\n  Tone.TimelineSignal.prototype._linearInterpolate = function (t0, v0, t1, v1, t) {\n    return v0 + (v1 - v0) * ((t - t0) / (t1 - t0));\n  };\n  Tone.TimelineSignal.prototype._exponentialInterpolate = function (t0, v0, t1, v1, t) {\n    v0 = Math.max(this._minOutput, v0);\n    return v0 * Math.pow(v1 / v0, (t - t0) / (t1 - t0));\n  };\n  Tone.TimelineSignal.prototype.dispose = function () {\n    Tone.Signal.prototype.dispose.call(this);\n    Tone.Param.prototype.dispose.call(this);\n    this._events.dispose();\n    this._events = null;\n  };\n  return Tone.TimelineSignal;\n}(Tone_core_Tone, Tone_signal_Signal);\nvar env;\nenv = function () {\n  'use strict';\n  var p5sound = master;\n  var Add = Tone_signal_Add;\n  var Mult = Tone_signal_Multiply;\n  var Scale = Tone_signal_Scale;\n  var TimelineSignal = Tone_signal_TimelineSignal;\n  var Tone = Tone_core_Tone;\n  Tone.setContext(p5sound.audiocontext);\n  /**\n   *  <p>Envelopes are pre-defined amplitude distribution over time.\n   *  Typically, envelopes are used to control the output volume\n   *  of an object, a series of fades referred to as Attack, Decay,\n   *  Sustain and Release (\n   *  <a href=\"https://upload.wikimedia.org/wikipedia/commons/e/ea/ADSR_parameter.svg\" target=\"_blank\" rel=\"external\">ADSR</a>\n   *  ). Envelopes can also control other Web Audio Parametersfor example, a p5.Env can \n   *  control an Oscillator's frequency like this: <code>osc.freq(env)</code>.</p>\n   *  <p>Use <code><a href=\"#/p5.Env/setRange\">setRange</a></code> to change the attack/release level.\n   *  Use <code><a href=\"#/p5.Env/setADSR\">setADSR</a></code> to change attackTime, decayTime, sustainPercent and releaseTime.</p>\n   *  <p>Use the <code><a href=\"#/p5.Env/play\">play</a></code> method to play the entire envelope,\n   *  the <code><a href=\"#/p5.Env/ramp\">ramp</a></code> method for a pingable trigger,\n   *  or <code><a href=\"#/p5.Env/triggerAttack\">triggerAttack</a></code>/\n   *  <code><a href=\"#/p5.Env/triggerRelease\">triggerRelease</a></code> to trigger noteOn/noteOff.</p>\n   *  \n   *  @class p5.Env\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *\n   *  var attackTime = 0.001\n   *  var decayTime = 0.2;\n   *  var susPercent = 0.2;\n   *  var releaseTime = 0.5;\n   *\n   *  var env, triOsc;\n   *\n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *\n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *\n   *    cnv.mousePressed(playEnv);\n   *  }\n   *\n   *  function playEnv(){\n   *    env.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Env = function (t1, l1, t2, l2, t3, l3) {\n    var now = p5sound.audiocontext.currentTime;\n    /**\n     * Time until envelope reaches attackLevel\n     * @property attackTime\n     */\n    this.aTime = t1 || 0.1;\n    /**\n     * Level once attack is complete.\n     * @property attackLevel\n     */\n    this.aLevel = l1 || 1;\n    /**\n     * Time until envelope reaches decayLevel.\n     * @property decayTime\n     */\n    this.dTime = t2 || 0.5;\n    /**\n     * Level after decay. The envelope will sustain here until it is released.\n     * @property decayLevel\n     */\n    this.dLevel = l2 || 0;\n    /**\n     * Duration of the release portion of the envelope.\n     * @property releaseTime\n     */\n    this.rTime = t3 || 0;\n    /**\n     * Level at the end of the release.\n     * @property releaseLevel\n     */\n    this.rLevel = l3 || 0;\n    this._rampHighPercentage = 0.98;\n    this._rampLowPercentage = 0.02;\n    this.output = p5sound.audiocontext.createGain();\n    this.control = new TimelineSignal();\n    this._init();\n    // this makes sure the envelope starts at zero\n    this.control.connect(this.output);\n    // connect to the output\n    this.connection = null;\n    // store connection\n    //array of math operation signal chaining\n    this.mathOps = [this.control];\n    //whether envelope should be linear or exponential curve\n    this.isExponential = false;\n    // oscillator or buffer source to clear on env complete\n    // to save resources if/when it is retriggered\n    this.sourceToClear = null;\n    // set to true if attack is set, then false on release\n    this.wasTriggered = false;\n    // add to the soundArray so we can dispose of the env later\n    p5sound.soundArray.push(this);\n  };\n  // this init function just smooths the starting value to zero and gives a start point for the timeline\n  // - it was necessary to remove glitches at the beginning.\n  p5.Env.prototype._init = function () {\n    var now = p5sound.audiocontext.currentTime;\n    var t = now;\n    this.control.setTargetAtTime(0.00001, t, 0.001);\n    //also, compute the correct time constants\n    this._setRampAD(this.aTime, this.dTime);\n  };\n  /**\n   *  Reset the envelope with a series of time/value pairs.\n   *\n   *  @method  set\n   *  @param {Number} attackTime     Time (in seconds) before level\n   *                                 reaches attackLevel\n   *  @param {Number} attackLevel    Typically an amplitude between\n   *                                 0.0 and 1.0\n   *  @param {Number} decayTime      Time\n   *  @param {Number} decayLevel   Amplitude (In a standard ADSR envelope,\n   *                                 decayLevel = sustainLevel)\n   *  @param {Number} releaseTime   Release Time (in seconds)\n   *  @param {Number} releaseLevel  Amplitude\n   */\n  p5.Env.prototype.set = function (t1, l1, t2, l2, t3, l3) {\n    this.aTime = t1;\n    this.aLevel = l1;\n    this.dTime = t2 || 0;\n    this.dLevel = l2 || 0;\n    this.rTime = t4 || 0;\n    this.rLevel = l4 || 0;\n    // set time constants for ramp\n    this._setRampAD(t1, t2);\n  };\n  /**\n   *  Set values like a traditional\n   *  <a href=\"https://en.wikipedia.org/wiki/Synthesizer#/media/File:ADSR_parameter.svg\" target=\"_blank\" rel=\"external\">\n   *  ADSR envelope\n   *  </a>.\n   *  \n   *  @method  setADSR\n   *  @param {Number} attackTime    Time (in seconds before envelope\n   *                                reaches Attack Level\n   *  @param {Number} [decayTime]    Time (in seconds) before envelope\n   *                                reaches Decay/Sustain Level\n   *  @param {Number} [susRatio]    Ratio between attackLevel and releaseLevel, on a scale from 0 to 1,\n   *                                where 1.0 = attackLevel, 0.0 = releaseLevel.\n   *                                The susRatio determines the decayLevel and the level at which the\n   *                                sustain portion of the envelope will sustain.\n   *                                For example, if attackLevel is 0.4, releaseLevel is 0,\n   *                                and susAmt is 0.5, the decayLevel would be 0.2. If attackLevel is\n   *                                increased to 1.0 (using <code>setRange</code>),\n   *                                then decayLevel would increase proportionally, to become 0.5.\n   *  @param {Number} [releaseTime]   Time in seconds from now (defaults to 0)\n   *  @example\n   *  <div><code>\n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *\n   *  var attackTime = 0.001\n   *  var decayTime = 0.2;\n   *  var susPercent = 0.2;\n   *  var releaseTime = 0.5;\n   *\n   *  var env, triOsc;\n   *\n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *\n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *\n   *    cnv.mousePressed(playEnv);\n   *  }\n   *\n   *  function playEnv(){\n   *    env.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.setADSR = function (aTime, dTime, sPercent, rTime) {\n    this.aTime = aTime;\n    this.dTime = dTime || 0;\n    // lerp\n    this.sPercent = sPercent || 0;\n    this.dLevel = typeof sPercent !== 'undefined' ? sPercent * (this.aLevel - this.rLevel) + this.rLevel : 0;\n    this.rTime = rTime || 0;\n    // also set time constants for ramp\n    this._setRampAD(aTime, dTime);\n  };\n  /**\n   *  Set max (attackLevel) and min (releaseLevel) of envelope.\n   *  \n   *  @method  setRange\n   *  @param {Number} aLevel attack level (defaults to 1)\n   *  @param {Number} rLevel release level (defaults to 0)\n   *  @example\n   *  <div><code>\n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *\n   *  var attackTime = 0.001\n   *  var decayTime = 0.2;\n   *  var susPercent = 0.2;\n   *  var releaseTime = 0.5;\n   *\n   *  var env, triOsc;\n   *\n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *\n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *\n   *    cnv.mousePressed(playEnv);\n   *  }\n   *\n   *  function playEnv(){\n   *    env.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.setRange = function (aLevel, rLevel) {\n    this.aLevel = aLevel || 1;\n    this.rLevel = rLevel || 0;\n  };\n  //  private (undocumented) method called when ADSR is set to set time constants for ramp\n  //\n  //  Set the <a href=\"https://en.wikipedia.org/wiki/RC_time_constant\" target=\"_blank\" rel=\"external\">\n  //  time constants</a> for simple exponential ramps.\n  //  The larger the time constant value, the slower the\n  //  transition will be.\n  //\n  //  method  _setRampAD\n  //  param {Number} attackTimeConstant  attack time constant\n  //  param {Number} decayTimeConstant   decay time constant\n  //\n  p5.Env.prototype._setRampAD = function (t1, t2) {\n    this._rampAttackTime = this.checkExpInput(t1);\n    this._rampDecayTime = this.checkExpInput(t2);\n    var TCDenominator = 1;\n    /// Aatish Bhatia's calculation for time constant for rise(to adjust 1/1-e calculation to any percentage)\n    TCDenominator = Math.log(1 / this.checkExpInput(1 - this._rampHighPercentage));\n    this._rampAttackTC = t1 / this.checkExpInput(TCDenominator);\n    TCDenominator = Math.log(1 / this._rampLowPercentage);\n    this._rampDecayTC = t2 / this.checkExpInput(TCDenominator);\n  };\n  // private method\n  p5.Env.prototype.setRampPercentages = function (p1, p2) {\n    //set the percentages that the simple exponential ramps go to\n    this._rampHighPercentage = this.checkExpInput(p1);\n    this._rampLowPercentage = this.checkExpInput(p2);\n    var TCDenominator = 1;\n    //now re-compute the time constants based on those percentages\n    /// Aatish Bhatia's calculation for time constant for rise(to adjust 1/1-e calculation to any percentage)\n    TCDenominator = Math.log(1 / this.checkExpInput(1 - this._rampHighPercentage));\n    this._rampAttackTC = this._rampAttackTime / this.checkExpInput(TCDenominator);\n    TCDenominator = Math.log(1 / this._rampLowPercentage);\n    this._rampDecayTC = this._rampDecayTime / this.checkExpInput(TCDenominator);\n  };\n  /**\n   *  Assign a parameter to be controlled by this envelope.\n   *  If a p5.Sound object is given, then the p5.Env will control its\n   *  output gain. If multiple inputs are provided, the env will\n   *  control all of them.\n   *  \n   *  @method  setInput\n   *  @param  {Object} unit         A p5.sound object or\n   *                                Web Audio Param.\n   */\n  p5.Env.prototype.setInput = function (unit) {\n    for (var i = 0; i < arguments.length; i++) {\n      this.connect(arguments[i]);\n    }\n  };\n  /**\n   *  Set whether the envelope ramp is linear (default) or exponential.\n   *  Exponential ramps can be useful because we perceive amplitude\n   *  and frequency logarithmically.\n   *  \n   *  @method  setExp\n   *  @param {Boolean} isExp true is exponential, false is linear\n   */\n  p5.Env.prototype.setExp = function (isExp) {\n    this.isExponential = isExp;\n  };\n  //helper method to protect against zero values being sent to exponential functions\n  p5.Env.prototype.checkExpInput = function (value) {\n    if (value <= 0)=\"\" {=\"\" value=\"0.0001;\" }=\"\" return=\"\" value;=\"\" };=\"\" **=\"\" *=\"\" play=\"\" tells=\"\" the=\"\" envelope=\"\" to=\"\" start=\"\" acting=\"\" on=\"\" a=\"\" given=\"\" input.=\"\" if=\"\" input=\"\" is=\"\" p5.sound=\"\" object=\"\" (i.e.=\"\" audioin,=\"\" oscillator,=\"\" soundfile),=\"\" then=\"\" env=\"\" will=\"\" control=\"\" its=\"\" output=\"\" volume.=\"\" envelopes=\"\" can=\"\" also=\"\" be=\"\" used=\"\" any=\"\" <a=\"\" href=\"\n   *  http://docs.webplatform.org/wiki/apis/webaudio/AudioParam\">\n   *  Web Audio Audio Param.\n   *\n   *  @method  play\n   *  @param  {Object} unit         A p5.sound object or\n   *                                Web Audio Param.\n   *  @param  {Number} [startTime]  time from now (in seconds) at which to play\n   *  @param  {Number} [sustainTime] time to sustain before releasing the envelope\n   *  @example\n   *  <div><code>\n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *\n   *  var attackTime = 0.001\n   *  var decayTime = 0.2;\n   *  var susPercent = 0.2;\n   *  var releaseTime = 0.5;\n   *\n   *  var env, triOsc;\n   *\n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *\n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *\n   *    cnv.mousePressed(playEnv);\n   *  }\n   *\n   *  function playEnv(){\n   *    // trigger env on triOsc, 0 seconds from now\n   *    // After decay, sustain for 0.2 seconds before release\n   *    env.play(triOsc, 0, 0.2);\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.play = function (unit, secondsFromNow, susTime) {\n    var now = p5sound.audiocontext.currentTime;\n    var tFromNow = secondsFromNow || 0;\n    var susTime = susTime || 0;\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n    this.triggerAttack(unit, tFromNow);\n    this.triggerRelease(unit, tFromNow + this.aTime + this.dTime + susTime);\n  };\n  /**\n   *  Trigger the Attack, and Decay portion of the Envelope.\n   *  Similar to holding down a key on a piano, but it will\n   *  hold the sustain level until you let go. Input can be\n   *  any p5.sound object, or a <a href=\"\n   *  http://docs.webplatform.org/wiki/apis/webaudio/AudioParam\">\n   *  Web Audio Param</a>.\n   *\n   *  @method  triggerAttack\n   *  @param  {Object} unit p5.sound Object or Web Audio Param\n   *  @param  {Number} secondsFromNow time from now (in seconds)\n   *  @example\n   *  <div><code>\n   *  \n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *  \n   *  var attackTime = 0.001\n   *  var decayTime = 0.3;\n   *  var susPercent = 0.4;\n   *  var releaseTime = 0.5;\n   *  \n   *  var env, triOsc;\n   *  \n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *    background(200);\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *  \n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *  \n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *  \n   *    cnv.mousePressed(envAttack);\n   *  }\n   *  \n   *  function envAttack(){\n   *    console.log('trigger attack');\n   *    env.triggerAttack();\n   *  \n   *    background(0,255,0);\n   *    text('attack!', width/2, height/2);\n   *  }\n   *  \n   *  function mouseReleased() {\n   *    env.triggerRelease();\n   *  \n   *    background(200);\n   *    text('click to play', width/2, height/2);\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.triggerAttack = function (unit, secondsFromNow) {\n    var now = p5sound.audiocontext.currentTime;\n    var tFromNow = secondsFromNow || 0;\n    var t = now + tFromNow;\n    this.lastAttack = t;\n    this.wasTriggered = true;\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n    // get and set value (with linear ramp) to anchor automation\n    var valToSet = this.control.getValueAtTime(t);\n    this.control.cancelScheduledValues(t);\n    // not sure if this is necessary\n    if (this.isExponential == true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(valToSet), t);\n    } else {\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n    // after each ramp completes, cancel scheduled values\n    // (so they can be overridden in case env has been re-triggered)\n    // then, set current value (with linearRamp to avoid click)\n    // then, schedule the next automation...\n    // attack\n    t += this.aTime;\n    if (this.isExponential == true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(this.aLevel), t);\n      valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n      this.control.cancelScheduledValues(t);\n      this.control.exponentialRampToValueAtTime(valToSet, t);\n    } else {\n      this.control.linearRampToValueAtTime(this.aLevel, t);\n      valToSet = this.control.getValueAtTime(t);\n      this.control.cancelScheduledValues(t);\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n    // decay to decay level (if using ADSR, then decay level == sustain level)\n    t += this.dTime;\n    if (this.isExponential == true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(this.dLevel), t);\n      valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n      this.control.cancelScheduledValues(t);\n      this.control.exponentialRampToValueAtTime(valToSet, t);\n    } else {\n      this.control.linearRampToValueAtTime(this.dLevel, t);\n      valToSet = this.control.getValueAtTime(t);\n      this.control.cancelScheduledValues(t);\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n  };\n  /**\n   *  Trigger the Release of the Envelope. This is similar to releasing\n   *  the key on a piano and letting the sound fade according to the\n   *  release level and release time.\n   *\n   *  @method  triggerRelease\n   *  @param  {Object} unit p5.sound Object or Web Audio Param\n   *  @param  {Number} secondsFromNow time to trigger the release\n   *  @example\n   *  <div><code>\n   *  \n   *  var attackLevel = 1.0;\n   *  var releaseLevel = 0;\n   *  \n   *  var attackTime = 0.001\n   *  var decayTime = 0.3;\n   *  var susPercent = 0.4;\n   *  var releaseTime = 0.5;\n   *  \n   *  var env, triOsc;\n   *  \n   *  function setup() {\n   *    var cnv = createCanvas(100, 100);\n   *    background(200);\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *  \n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *  \n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.start();\n   *    triOsc.freq(220);\n   *  \n   *    cnv.mousePressed(envAttack);\n   *  }\n   *  \n   *  function envAttack(){\n   *    console.log('trigger attack');\n   *    env.triggerAttack();\n   *  \n   *    background(0,255,0);\n   *    text('attack!', width/2, height/2);\n   *  }\n   *  \n   *  function mouseReleased() {\n   *    env.triggerRelease();\n   *  \n   *    background(200);\n   *    text('click to play', width/2, height/2);\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.triggerRelease = function (unit, secondsFromNow) {\n    // only trigger a release if an attack was triggered\n    if (!this.wasTriggered) {\n      // this currently causes a bit of trouble:\n      // if a later release has been scheduled (via the play function)\n      // a new earlier release won't interrupt it, because \n      // this.wasTriggered has already been set to false.\n      // If we want new earlier releases to override, then we need to \n      // keep track of the last release time, and if the new release time is \n      // earlier, then use it.\n      return;\n    }\n    var now = p5sound.audiocontext.currentTime;\n    var tFromNow = secondsFromNow || 0;\n    var t = now + tFromNow;\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n    // get and set value (with linear or exponential ramp) to anchor automation\n    var valToSet = this.control.getValueAtTime(t);\n    this.control.cancelScheduledValues(t);\n    // not sure if this is necessary\n    if (this.isExponential == true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(valToSet), t);\n    } else {\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n    // release\n    t += this.rTime;\n    if (this.isExponential == true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(this.rLevel), t);\n      valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n      this.control.cancelScheduledValues(t);\n      this.control.exponentialRampToValueAtTime(valToSet, t);\n    } else {\n      this.control.linearRampToValueAtTime(this.rLevel, t);\n      valToSet = this.control.getValueAtTime(t);\n      this.control.cancelScheduledValues(t);\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n    this.wasTriggered = false;\n  };\n  /**\n   *  Exponentially ramp to a value using the first two\n   *  values from <code><a href=\"#/p5.Env/setADSR\">setADSR(attackTime, decayTime)</a></code>\n   *  as <a href=\"https://en.wikipedia.org/wiki/RC_time_constant\" target=\"_blank\" rel=\"external\">\n   *  time constants</a> for simple exponential ramps.\n   *  If the value is higher than current value, it uses attackTime,\n   *  while a decrease uses decayTime.\n   *\n   *  @method  ramp\n   *  @param  {Object} unit           p5.sound Object or Web Audio Param\n   *  @param  {Number} secondsFromNow When to trigger the ramp\n   *  @param  {Number} v              Target value\n   *  @param  {Number} [v2]           Second target value (optional)\n   *  @example\n   *  <div><code>\n   *  var env, osc, amp, cnv;\n   *  \n   *  var attackTime = 0.001;\n   *  var decayTime = 0.2;\n   *  var attackLevel = 1;\n   *  var decayLevel = 0;\n   *  \n   *  function setup() {\n   *    cnv = createCanvas(100, 100);\n   *    fill(0,255,0);\n   *    noStroke();\n   *  \n   *    env = new p5.Env();\n   *    env.setADSR(attackTime, decayTime);\n   *  \n   *    osc = new p5.Oscillator();\n   *    osc.amp(env);\n   *    osc.start();\n   *  \n   *    amp = new p5.Amplitude();\n   *  \n   *    cnv.mousePressed(triggerRamp);\n   *  }\n   *  \n   *  function triggerRamp() {\n   *    env.ramp(osc, 0, attackLevel, decayLevel);\n   *  }\n   *  \n   *  function draw() {\n   *    background(20,20,20);\n   *    text('click me', 10, 20);\n   *    var h = map(amp.getLevel(), 0, 0.4, 0, height);;\n   *  \n   *    rect(0, height, width, -h);\n   *  }\n   *  </code></div>\n   */\n  p5.Env.prototype.ramp = function (unit, secondsFromNow, v1, v2) {\n    var now = p5sound.audiocontext.currentTime;\n    var tFromNow = secondsFromNow || 0;\n    var t = now + tFromNow;\n    var destination1 = this.checkExpInput(v1);\n    var destination2 = typeof v2 !== 'undefined' ? this.checkExpInput(v2) : undefined;\n    // connect env to unit if not already connected\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n    //get current value\n    var currentVal = this.checkExpInput(this.control.getValueAtTime(t));\n    this.control.cancelScheduledValues(t);\n    //if it's going up\n    if (destination1 > currentVal) {\n      this.control.setTargetAtTime(destination1, t, this._rampAttackTC);\n      t += this._rampAttackTime;\n    } else if (destination1 < currentVal) {\n      this.control.setTargetAtTime(destination1, t, this._rampDecayTC);\n      t += this._rampDecayTime;\n    }\n    // Now the second part of envelope begins\n    if (destination2 === undefined)\n      return;\n    //if it's going up\n    if (destination2 > destination1) {\n      this.control.setTargetAtTime(destination2, t, this._rampAttackTC);\n    } else if (destination2 < destination1) {\n      this.control.setTargetAtTime(destination2, t, this._rampDecayTC);\n    }\n  };\n  p5.Env.prototype.connect = function (unit) {\n    this.connection = unit;\n    // assume we're talking about output gain\n    // unless given a different audio param\n    if (unit instanceof p5.Oscillator || unit instanceof p5.SoundFile || unit instanceof p5.AudioIn || unit instanceof p5.Reverb || unit instanceof p5.Noise || unit instanceof p5.Filter || unit instanceof p5.Delay) {\n      unit = unit.output.gain;\n    }\n    if (unit instanceof AudioParam) {\n      //set the initial value\n      unit.setValueAtTime(0, p5sound.audiocontext.currentTime);\n    }\n    if (unit instanceof p5.Signal) {\n      unit.setValue(0);\n    }\n    this.output.connect(unit);\n  };\n  p5.Env.prototype.disconnect = function (unit) {\n    this.output.disconnect();\n  };\n  // Signal Math\n  /**\n   *  Add a value to the p5.Oscillator's output amplitude,\n   *  and return the oscillator. Calling this method\n   *  again will override the initial add() with new values.\n   *  \n   *  @method  add\n   *  @param {Number} number Constant number to add\n   *  @return {p5.Env} Envelope Returns this envelope\n   *                                     with scaled output\n   */\n  p5.Env.prototype.add = function (num) {\n    var add = new Add(num);\n    var thisChain = this.mathOps.length;\n    var nextChain = this.output;\n    return p5.prototype._mathChain(this, add, thisChain, nextChain, Add);\n  };\n  /**\n   *  Multiply the p5.Env's output amplitude\n   *  by a fixed value. Calling this method\n   *  again will override the initial mult() with new values.\n   *  \n   *  @method  mult\n   *  @param {Number} number Constant number to multiply\n   *  @return {p5.Env} Envelope Returns this envelope\n   *                                     with scaled output\n   */\n  p5.Env.prototype.mult = function (num) {\n    var mult = new Mult(num);\n    var thisChain = this.mathOps.length;\n    var nextChain = this.output;\n    return p5.prototype._mathChain(this, mult, thisChain, nextChain, Mult);\n  };\n  /**\n   *  Scale this envelope's amplitude values to a given\n   *  range, and return the envelope. Calling this method\n   *  again will override the initial scale() with new values.\n   *  \n   *  @method  scale\n   *  @param  {Number} inMin  input range minumum\n   *  @param  {Number} inMax  input range maximum\n   *  @param  {Number} outMin input range minumum\n   *  @param  {Number} outMax input range maximum\n   *  @return {p5.Env} Envelope Returns this envelope\n   *                                     with scaled output\n   */\n  p5.Env.prototype.scale = function (inMin, inMax, outMin, outMax) {\n    var scale = new Scale(inMin, inMax, outMin, outMax);\n    var thisChain = this.mathOps.length;\n    var nextChain = this.output;\n    return p5.prototype._mathChain(this, scale, thisChain, nextChain, Scale);\n  };\n  // get rid of the oscillator\n  p5.Env.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    var now = p5sound.audiocontext.currentTime;\n    this.disconnect();\n    try {\n      this.control.dispose();\n      this.control = null;\n    } catch (e) {\n    }\n    for (var i = 1; i < this.mathOps.length; i++) {\n      mathOps[i].dispose();\n    }\n  };\n}(master, Tone_signal_Add, Tone_signal_Multiply, Tone_signal_Scale, Tone_signal_TimelineSignal, Tone_core_Tone);\nvar pulse;\npulse = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   *  Creates a Pulse object, an oscillator that implements\n   *  Pulse Width Modulation.\n   *  The pulse is created with two oscillators.\n   *  Accepts a parameter for frequency, and to set the\n   *  width between the pulses. See <a href=\"\n   *  http://p5js.org/reference/#/p5.Oscillator\">\n   *  <code>p5.Oscillator</code> for a full list of methods.\n   *  \n   *  @class p5.Pulse\n   *  @constructor\n   *  @param {Number} [freq] Frequency in oscillations per second (Hz)\n   *  @param {Number} [w]    Width between the pulses (0 to 1.0,\n   *                         defaults to 0)\n   *  @example\n   *  <div><code>\n   *  var pulse;\n   *  function setup() {\n   *    background(0);\n   *    \n   *    // Create and start the pulse wave oscillator\n   *    pulse = new p5.Pulse();\n   *    pulse.amp(0.5);\n   *    pulse.freq(220);\n   *    pulse.start();\n   *  }\n   *\n   *  function draw() {\n   *    var w = map(mouseX, 0, width, 0, 1);\n   *    w = constrain(w, 0, 1);\n   *    pulse.width(w)\n   *  }\n   *  </code></div>\n   */\n  p5.Pulse = function (freq, w) {\n    p5.Oscillator.call(this, freq, 'sawtooth');\n    // width of PWM, should be betw 0 to 1.0\n    this.w = w || 0;\n    // create a second oscillator with inverse frequency\n    this.osc2 = new p5.SawOsc(freq);\n    // create a delay node\n    this.dNode = p5sound.audiocontext.createDelay();\n    // dc offset\n    this.dcOffset = createDCOffset();\n    this.dcGain = p5sound.audiocontext.createGain();\n    this.dcOffset.connect(this.dcGain);\n    this.dcGain.connect(this.output);\n    // set delay time based on PWM width\n    this.f = freq || 440;\n    var mW = this.w / this.oscillator.frequency.value;\n    this.dNode.delayTime.value = mW;\n    this.dcGain.gain.value = 1.7 * (0.5 - this.w);\n    // disconnect osc2 and connect it to delay, which is connected to output\n    this.osc2.disconnect();\n    this.osc2.panner.disconnect();\n    this.osc2.amp(-1);\n    // inverted amplitude\n    this.osc2.output.connect(this.dNode);\n    this.dNode.connect(this.output);\n    this.output.gain.value = 1;\n    this.output.connect(this.panner);\n  };\n  p5.Pulse.prototype = Object.create(p5.Oscillator.prototype);\n  /**\n   *  Set the width of a Pulse object (an oscillator that implements\n   *  Pulse Width Modulation).\n   *\n   *  @method  width\n   *  @param {Number} [width]    Width between the pulses (0 to 1.0,\n   *                         defaults to 0)\n   */\n  p5.Pulse.prototype.width = function (w) {\n    if (typeof w === 'number') {\n      if (w <= 1=\"\" &&=\"\" w=\"\">= 0) {\n        this.w = w;\n        // set delay time based on PWM width\n        // var mW = map(this.w, 0, 1.0, 0, 1/this.f);\n        var mW = this.w / this.oscillator.frequency.value;\n        this.dNode.delayTime.value = mW;\n      }\n      this.dcGain.gain.value = 1.7 * (0.5 - this.w);\n    } else {\n      w.connect(this.dNode.delayTime);\n      var sig = new p5.SignalAdd(-0.5);\n      sig.setInput(w);\n      sig = sig.mult(-1);\n      sig = sig.mult(1.7);\n      sig.connect(this.dcGain.gain);\n    }\n  };\n  p5.Pulse.prototype.start = function (f, time) {\n    var now = p5sound.audiocontext.currentTime;\n    var t = time || 0;\n    if (!this.started) {\n      var freq = f || this.f;\n      var type = this.oscillator.type;\n      this.oscillator = p5sound.audiocontext.createOscillator();\n      this.oscillator.frequency.setValueAtTime(freq, now);\n      this.oscillator.type = type;\n      this.oscillator.connect(this.output);\n      this.oscillator.start(t + now);\n      // set up osc2\n      this.osc2.oscillator = p5sound.audiocontext.createOscillator();\n      this.osc2.oscillator.frequency.setValueAtTime(freq, t + now);\n      this.osc2.oscillator.type = type;\n      this.osc2.oscillator.connect(this.osc2.output);\n      this.osc2.start(t + now);\n      this.freqNode = [\n        this.oscillator.frequency,\n        this.osc2.oscillator.frequency\n      ];\n      // start dcOffset, too\n      this.dcOffset = createDCOffset();\n      this.dcOffset.connect(this.dcGain);\n      this.dcOffset.start(t + now);\n      // if LFO connections depend on these oscillators\n      if (this.mods !== undefined && this.mods.frequency !== undefined) {\n        this.mods.frequency.connect(this.freqNode[0]);\n        this.mods.frequency.connect(this.freqNode[1]);\n      }\n      this.started = true;\n      this.osc2.started = true;\n    }\n  };\n  p5.Pulse.prototype.stop = function (time) {\n    if (this.started) {\n      var t = time || 0;\n      var now = p5sound.audiocontext.currentTime;\n      this.oscillator.stop(t + now);\n      this.osc2.oscillator.stop(t + now);\n      this.dcOffset.stop(t + now);\n      this.started = false;\n      this.osc2.started = false;\n    }\n  };\n  p5.Pulse.prototype.freq = function (val, rampTime, tFromNow) {\n    if (typeof val === 'number') {\n      this.f = val;\n      var now = p5sound.audiocontext.currentTime;\n      var rampTime = rampTime || 0;\n      var tFromNow = tFromNow || 0;\n      var currentFreq = this.oscillator.frequency.value;\n      this.oscillator.frequency.cancelScheduledValues(now);\n      this.oscillator.frequency.setValueAtTime(currentFreq, now + tFromNow);\n      this.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n      this.osc2.oscillator.frequency.cancelScheduledValues(now);\n      this.osc2.oscillator.frequency.setValueAtTime(currentFreq, now + tFromNow);\n      this.osc2.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n      if (this.freqMod) {\n        this.freqMod.output.disconnect();\n        this.freqMod = null;\n      }\n    } else if (val.output) {\n      val.output.disconnect();\n      val.output.connect(this.oscillator.frequency);\n      val.output.connect(this.osc2.oscillator.frequency);\n      this.freqMod = val;\n    }\n  };\n  // inspiration: http://webaudiodemos.appspot.com/oscilloscope/\n  function createDCOffset() {\n    var ac = p5sound.audiocontext;\n    var buffer = ac.createBuffer(1, 2048, ac.sampleRate);\n    var data = buffer.getChannelData(0);\n    for (var i = 0; i < 2048; i++)\n      data[i] = 1;\n    var bufferSource = ac.createBufferSource();\n    bufferSource.buffer = buffer;\n    bufferSource.loop = true;\n    return bufferSource;\n  }\n}(master, oscillator);\nvar noise;\nnoise = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   *  Noise is a type of oscillator that generates a buffer with random values.\n   *\n   *  @class p5.Noise\n   *  @constructor\n   *  @param {String} type Type of noise can be 'white' (default),\n   *                       'brown' or 'pink'.\n   *  @return {Object}    Noise Object\n   */\n  p5.Noise = function (type) {\n    p5.Oscillator.call(this);\n    delete this.f;\n    delete this.freq;\n    delete this.oscillator;\n    this.buffer = _whiteNoise;\n  };\n  p5.Noise.prototype = Object.create(p5.Oscillator.prototype);\n  // generate noise buffers\n  var _whiteNoise = function () {\n    var bufferSize = 2 * p5sound.audiocontext.sampleRate;\n    var whiteBuffer = p5sound.audiocontext.createBuffer(1, bufferSize, p5sound.audiocontext.sampleRate);\n    var noiseData = whiteBuffer.getChannelData(0);\n    for (var i = 0; i < bufferSize; i++) {\n      noiseData[i] = Math.random() * 2 - 1;\n    }\n    whiteBuffer.type = 'white';\n    return whiteBuffer;\n  }();\n  var _pinkNoise = function () {\n    var bufferSize = 2 * p5sound.audiocontext.sampleRate;\n    var pinkBuffer = p5sound.audiocontext.createBuffer(1, bufferSize, p5sound.audiocontext.sampleRate);\n    var noiseData = pinkBuffer.getChannelData(0);\n    var b0, b1, b2, b3, b4, b5, b6;\n    b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0;\n    for (var i = 0; i < bufferSize; i++) {\n      var white = Math.random() * 2 - 1;\n      b0 = 0.99886 * b0 + white * 0.0555179;\n      b1 = 0.99332 * b1 + white * 0.0750759;\n      b2 = 0.969 * b2 + white * 0.153852;\n      b3 = 0.8665 * b3 + white * 0.3104856;\n      b4 = 0.55 * b4 + white * 0.5329522;\n      b5 = -0.7616 * b5 - white * 0.016898;\n      noiseData[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;\n      noiseData[i] *= 0.11;\n      // (roughly) compensate for gain\n      b6 = white * 0.115926;\n    }\n    pinkBuffer.type = 'pink';\n    return pinkBuffer;\n  }();\n  var _brownNoise = function () {\n    var bufferSize = 2 * p5sound.audiocontext.sampleRate;\n    var brownBuffer = p5sound.audiocontext.createBuffer(1, bufferSize, p5sound.audiocontext.sampleRate);\n    var noiseData = brownBuffer.getChannelData(0);\n    var lastOut = 0;\n    for (var i = 0; i < bufferSize; i++) {\n      var white = Math.random() * 2 - 1;\n      noiseData[i] = (lastOut + 0.02 * white) / 1.02;\n      lastOut = noiseData[i];\n      noiseData[i] *= 3.5;\n    }\n    brownBuffer.type = 'brown';\n    return brownBuffer;\n  }();\n  /**\n   *  Set type of noise to 'white', 'pink' or 'brown'.\n   *  White is the default.\n   *\n   *  @method setType\n   *  @param {String} [type] 'white', 'pink' or 'brown'\n   */\n  p5.Noise.prototype.setType = function (type) {\n    switch (type) {\n    case 'white':\n      this.buffer = _whiteNoise;\n      break;\n    case 'pink':\n      this.buffer = _pinkNoise;\n      break;\n    case 'brown':\n      this.buffer = _brownNoise;\n      break;\n    default:\n      this.buffer = _whiteNoise;\n    }\n    if (this.started) {\n      var now = p5sound.audiocontext.currentTime;\n      this.stop(now);\n      this.start(now + 0.01);\n    }\n  };\n  p5.Noise.prototype.getType = function () {\n    return this.buffer.type;\n  };\n  /**\n   *  Start the noise\n   *\n   *  @method start\n   */\n  p5.Noise.prototype.start = function () {\n    if (this.started) {\n      this.stop();\n    }\n    this.noise = p5sound.audiocontext.createBufferSource();\n    this.noise.buffer = this.buffer;\n    this.noise.loop = true;\n    this.noise.connect(this.output);\n    var now = p5sound.audiocontext.currentTime;\n    this.noise.start(now);\n    this.started = true;\n  };\n  /**\n   *  Stop the noise.\n   *\n   *  @method  stop\n   */\n  p5.Noise.prototype.stop = function () {\n    var now = p5sound.audiocontext.currentTime;\n    if (this.noise) {\n      this.noise.stop(now);\n      this.started = false;\n    }\n  };\n  /**\n   *  Pan the noise.\n   *\n   *  @method  pan\n   *  @param  {Number} panning Number between -1 (left)\n   *                           and 1 (right)\n   *  @param  {Number} timeFromNow schedule this event to happen\n   *                                seconds from now\n   */\n  /**\n   *  Set the amplitude of the noise between 0 and 1.0. Or,\n   *  modulate amplitude with an audio signal such as an oscillator.\n   *  \n   *  @param  {Number|Object} volume amplitude between 0 and 1.0\n   *                                     or modulating signal/oscillator\n   *  @param {Number} [rampTime] create a fade that lasts rampTime \n   *  @param {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   */\n  /**\n   *  Send output to a p5.sound or web audio object\n   *  \n   *  @method  connect\n   *  @param  {Object} unit\n   */\n  /**\n   *  Disconnect all output.\n   *  \n   *  @method disconnect\n   */\n  p5.Noise.prototype.dispose = function () {\n    var now = p5sound.audiocontext.currentTime;\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    if (this.noise) {\n      this.noise.disconnect();\n      this.stop(now);\n    }\n    if (this.output) {\n      this.output.disconnect();\n    }\n    if (this.panner) {\n      this.panner.disconnect();\n    }\n    this.output = null;\n    this.panner = null;\n    this.buffer = null;\n    this.noise = null;\n  };\n}(master);\nvar audioin;\naudioin = function () {\n  'use strict';\n  var p5sound = master;\n  var CustomError = errorHandler;\n  /**\n   *  <p>Get audio from an input, i.e. your computer's microphone.</p>\n   *\n   *  <p>Turn the mic on/off with the start() and stop() methods. When the mic\n   *  is on, its volume can be measured with getLevel or by connecting an\n   *  FFT object.</p>\n   *  \n   *  <p>If you want to hear the AudioIn, use the .connect() method. \n   *  AudioIn does not connect to p5.sound output by default to prevent\n   *  feedback.</p> \n   *\n   *  <p><em>Note: This uses the <a href=\"http://caniuse.com/stream\" target=\"_blank\" rel=\"external\">getUserMedia/\n   *  Stream</a> API, which is not supported by certain browsers.</em></p>\n   *\n   *  @class p5.AudioIn\n   *  @constructor\n   *  @return {Object} AudioIn\n   *  @example\n   *  <div><code>\n   *  var mic;\n   *  function setup(){\n   *    mic = new p5.AudioIn()\n   *    mic.start();\n   *  }\n   *  function draw(){\n   *    background(0);\n   *    micLevel = mic.getLevel();\n   *    ellipse(width/2, constrain(height-micLevel*height*5, 0, height), 10, 10);\n   *  }\n   *  </code></div>\n   */\n  p5.AudioIn = function () {\n    // set up audio input\n    this.input = p5sound.audiocontext.createGain();\n    this.output = p5sound.audiocontext.createGain();\n    this.stream = null;\n    this.mediaStream = null;\n    this.currentSource = 0;\n    /**\n     *  Client must allow browser to access their microphone / audioin source.\n     *  Default: false. Will become true when the client enables acces.\n     *\n     *  @property {Boolean} enabled\n     */\n    this.enabled = false;\n    // create an amplitude, connect to it by default but not to master out\n    this.amplitude = new p5.Amplitude();\n    this.output.connect(this.amplitude.input);\n    // Some browsers let developer determine their input sources\n    if (typeof window.MediaStreamTrack === 'undefined') {\n      window.alert('This browser does not support MediaStreamTrack');\n    } else if (typeof window.MediaStreamTrack.getSources === 'function') {\n      // Chrome supports getSources to list inputs. Dev picks default\n      window.MediaStreamTrack.getSources(this._gotSources);\n    } else {\n    }\n    // add to soundArray so we can dispose on close\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Start processing audio input. This enables the use of other\n   *  AudioIn methods like getLevel(). Note that by default, AudioIn\n   *  is not connected to p5.sound's output. So you won't hear\n   *  anything unless you use the connect() method.<br>\n   *\n   *  @method start\n   *  @param {Function} successCallback Name of a function to call on\n   *                                    success.\n   *  @param {Function} errorCallback Name of a function to call if\n   *                                    there was an error. For example,\n   *                                    some browsers do not support\n   *                                    getUserMedia.\n   */\n  p5.AudioIn.prototype.start = function (successCallback, errorCallback) {\n    var self = this;\n    // if _gotSources() i.e. developers determine which source to use\n    if (p5sound.inputSources[self.currentSource]) {\n      // set the audio source\n      var audioSource = p5sound.inputSources[self.currentSource].id;\n      var constraints = { audio: { optional: [{ sourceId: audioSource }] } };\n      window.navigator.getUserMedia(constraints, this._onStream = function (stream) {\n        self.stream = stream;\n        self.enabled = true;\n        // Wrap a MediaStreamSourceNode around the live input\n        self.mediaStream = p5sound.audiocontext.createMediaStreamSource(stream);\n        self.mediaStream.connect(self.output);\n        if (successCallback)\n          successCallback();\n        // only send to the Amplitude reader, so we can see it but not hear it.\n        self.amplitude.setInput(self.output);\n      }, this._onStreamError = function (e) {\n        if (errorCallback)\n          errorCallback(e);\n        else\n          console.error(e);\n      });\n    } else {\n      // if Firefox where users select their source via browser\n      // if (typeof MediaStreamTrack.getSources === 'undefined') {\n      // Only get the audio stream.\n      window.navigator.getUserMedia({ 'audio': true }, this._onStream = function (stream) {\n        self.stream = stream;\n        self.enabled = true;\n        // Wrap a MediaStreamSourceNode around the live input\n        self.mediaStream = p5sound.audiocontext.createMediaStreamSource(stream);\n        self.mediaStream.connect(self.output);\n        // only send to the Amplitude reader, so we can see it but not hear it.\n        self.amplitude.setInput(self.output);\n        if (successCallback)\n          successCallback();\n      }, this._onStreamError = function (e) {\n        if (errorCallback)\n          errorCallback(e);\n        else\n          console.error(e);\n      });\n    }\n  };\n  /**\n   *  Turn the AudioIn off. If the AudioIn is stopped, it cannot getLevel().<br>\n   *\n   *  @method stop\n   */\n  p5.AudioIn.prototype.stop = function () {\n    if (this.stream) {\n      this.stream.stop();\n    }\n  };\n  /**\n   *  Connect to an audio unit. If no parameter is provided, will\n   *  connect to the master output (i.e. your speakers).<br>\n   *  \n   *  @method  connect\n   *  @param  {Object} [unit] An object that accepts audio input,\n   *                          such as an FFT\n   */\n  p5.AudioIn.prototype.connect = function (unit) {\n    if (unit) {\n      if (unit.hasOwnProperty('input')) {\n        this.output.connect(unit.input);\n      } else if (unit.hasOwnProperty('analyser')) {\n        this.output.connect(unit.analyser);\n      } else {\n        this.output.connect(unit);\n      }\n    } else {\n      this.output.connect(p5sound.input);\n    }\n  };\n  /**\n   *  Disconnect the AudioIn from all audio units. For example, if\n   *  connect() had been called, disconnect() will stop sending \n   *  signal to your speakers.<br>\n   *\n   *  @method  disconnect\n   */\n  p5.AudioIn.prototype.disconnect = function (unit) {\n    this.output.disconnect(unit);\n    // stay connected to amplitude even if not outputting to p5\n    this.output.connect(this.amplitude.input);\n  };\n  /**\n   *  Read the Amplitude (volume level) of an AudioIn. The AudioIn\n   *  class contains its own instance of the Amplitude class to help\n   *  make it easy to get a microphone's volume level. Accepts an\n   *  optional smoothing value (0.0 < 1.0). <em>NOTE: AudioIn must\n   *  .start() before using .getLevel().</em><br>\n   *  \n   *  @method  getLevel\n   *  @param  {Number} [smoothing] Smoothing is 0.0 by default.\n   *                               Smooths values based on previous values.\n   *  @return {Number}           Volume level (between 0.0 and 1.0)\n   */\n  p5.AudioIn.prototype.getLevel = function (smoothing) {\n    if (smoothing) {\n      this.amplitude.smoothing = smoothing;\n    }\n    return this.amplitude.getLevel();\n  };\n  /**\n   *  Add input sources to the list of available sources.\n   *  \n   *  @private\n   */\n  p5.AudioIn.prototype._gotSources = function (sourceInfos) {\n    for (var i = 0; i < sourceInfos.length; i++) {\n      var sourceInfo = sourceInfos[i];\n      if (sourceInfo.kind === 'audio') {\n        // add the inputs to inputSources\n        //p5sound.inputSources.push(sourceInfo);\n        return sourceInfo;\n      }\n    }\n  };\n  /**\n   *  Set amplitude (volume) of a mic input between 0 and 1.0. <br>\n   *\n   *  @method  amp\n   *  @param  {Number} vol between 0 and 1.0\n   *  @param {Number} [time] ramp time (optional)\n   */\n  p5.AudioIn.prototype.amp = function (vol, t) {\n    if (t) {\n      var rampTime = t || 0;\n      var currentVol = this.output.gain.value;\n      this.output.gain.cancelScheduledValues(p5sound.audiocontext.currentTime);\n      this.output.gain.setValueAtTime(currentVol, p5sound.audiocontext.currentTime);\n      this.output.gain.linearRampToValueAtTime(vol, rampTime + p5sound.audiocontext.currentTime);\n    } else {\n      this.output.gain.cancelScheduledValues(p5sound.audiocontext.currentTime);\n      this.output.gain.setValueAtTime(vol, p5sound.audiocontext.currentTime);\n    }\n  };\n  p5.AudioIn.prototype.listSources = function () {\n    console.log('listSources is deprecated - please use AudioIn.getSources');\n    console.log('input sources: ');\n    if (p5sound.inputSources.length > 0) {\n      return p5sound.inputSources;\n    } else {\n      return 'This browser does not support MediaStreamTrack.getSources()';\n    }\n  };\n  /**\n   * Chrome only. Returns a list of available input sources \n   * and allows the user to set the media source. Firefox allows \n   * the user to choose from input sources in the permissions dialogue\n   * instead of enumerating available sources and selecting one.\n   * Note: in order to have descriptive media names your page must be \n   * served over a secure (HTTPS) connection and the page should \n   * request user media before enumerating devices. Otherwise device \n   * ID will be a long device ID number and does not specify device \n   * type. For example see \n   * https://simpl.info/getusermedia/sources/index.html vs.\n   * http://simpl.info/getusermedia/sources/index.html\n   *\n   * @method  getSources\n   * @param  {Function} callback a callback to handle the sources \n   *                               when they have been enumerated\n   * @example\n   *  <div><code>\n   *  var audiograb;\n   *      \n   *  function setup(){\n   *    //new audioIn\n   *    audioGrab = new p5.AudioIn();\n   *    \n   *    audioGrab.getSources(function(sourceList) {\n   *      //print out the array of available sources\n   *      console.log(sourceList);\n   *      //set the source to the first item in the inputSources array\n   *      audioGrab.setSource(0);\n   *    });\n   *  }\n   *  </code></div>\n   */\n  p5.AudioIn.prototype.getSources = function (callback) {\n    if (typeof window.MediaStreamTrack.getSources === 'function') {\n      window.MediaStreamTrack.getSources(function (data) {\n        for (var i = 0, max = data.length; i < max; i++) {\n          var sourceInfo = data[i];\n          if (sourceInfo.kind === 'audio') {\n            // add the inputs to inputSources\n            p5sound.inputSources.push(sourceInfo);\n          }\n        }\n        callback(p5sound.inputSources);\n      });\n    } else {\n      console.log('This browser does not support MediaStreamTrack.getSources()');\n    }\n  };\n  /**\n   *  Set the input source. Accepts a number representing a\n   *  position in the array returned by listSources().\n   *  This is only available in browsers that support \n   *  MediaStreamTrack.getSources(). Instead, some browsers\n   *  give users the option to set their own media source.<br>\n   *  \n   *  @method setSource\n   *  @param {number} num position of input source in the array\n   */\n  p5.AudioIn.prototype.setSource = function (num) {\n    // TO DO - set input by string or # (array position)\n    var self = this;\n    if (p5sound.inputSources.length > 0 && num < p5sound.inputSources.length) {\n      // set the current source\n      self.currentSource = num;\n      console.log('set source to ' + p5sound.inputSources[self.currentSource].id);\n    } else {\n      console.log('unable to set input source');\n    }\n  };\n  // private method\n  p5.AudioIn.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.stop();\n    if (this.output) {\n      this.output.disconnect();\n    }\n    if (this.amplitude) {\n      this.amplitude.disconnect();\n    }\n    this.amplitude = null;\n    this.output = null;\n  };\n}(master, errorHandler);\nvar filter;\nfilter = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   *  A p5.Filter uses a Web Audio Biquad Filter to filter\n   *  the frequency response of an input source. Inheriting\n   *  classes include:<br>\n   *  * <code>p5.LowPass</code> - allows frequencies below\n   *  the cutoff frequency to pass through, and attenuates\n   *  frequencies above the cutoff.<br>\n   *  * <code>p5.HighPass</code> - the opposite of a lowpass\n   *  filter. <br>\n   *  * <code>p5.BandPass</code> -  allows a range of\n   *  frequencies to pass through and attenuates the frequencies\n   *  below and above this frequency range.<br>\n   *\n   *  The <code>.res()</code> method controls either width of the\n   *  bandpass, or resonance of the low/highpass cutoff frequency.\n   *\n   *  @class p5.Filter\n   *  @constructor\n   *  @param {[String]} type 'lowpass' (default), 'highpass', 'bandpass'\n   *  @return {Object} p5.Filter\n   *  @example\n   *  <div><code>\n   *  var fft, noise, filter;\n   *\n   *  function setup() {\n   *    fill(255, 40, 255);\n   *\n   *    filter = new p5.BandPass();\n   *\n   *    noise = new p5.Noise();\n   *    // disconnect unfiltered noise,\n   *    // and connect to filter\n   *    noise.disconnect();\n   *    noise.connect(filter);\n   *    noise.start();\n   *\n   *    fft = new p5.FFT();\n   *  }\n   *\n   *  function draw() {\n   *    background(30);\n   *\n   *    // set the BandPass frequency based on mouseX\n   *    var freq = map(mouseX, 0, width, 20, 10000);\n   *    filter.freq(freq);\n   *    // give the filter a narrow band (lower res = wider bandpass)\n   *    filter.res(50);\n   *\n   *    // draw filtered spectrum\n   *    var spectrum = fft.analyze();\n   *    noStroke();\n   *    for (var i = 0; i < spectrum.length; i++) {\n   *      var x = map(i, 0, spectrum.length, 0, width);\n   *      var h = -height + map(spectrum[i], 0, 255, height, 0);\n   *      rect(x, height, width/spectrum.length, h);\n   *    }\n   *    \n   *    isMouseOverCanvas();\n   *  }\n   *\n   *  function isMouseOverCanvas() {\n   *    var mX = mouseX, mY = mouseY;\n   *    if (mX > 0 && mX < width && mY < height && mY > 0) {\n   *      noise.amp(0.5, 0.2);\n   *    } else {\n   *      noise.amp(0, 0.2);\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.Filter = function (type) {\n    this.ac = p5sound.audiocontext;\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain();\n    /**\n     *  The p5.Filter is built with a\n     *  <a href=\"http://www.w3.org/TR/webaudio/#BiquadFilterNode\" target=\"_blank\" rel=\"external\">\n     *  Web Audio BiquadFilter Node</a>.\n     *  \n     *  @property biquadFilter\n     *  @type {Object}  Web Audio Delay Node\n     */\n    this.biquad = this.ac.createBiquadFilter();\n    this.input.connect(this.biquad);\n    this.biquad.connect(this.output);\n    this.connect();\n    if (type) {\n      this.setType(type);\n    }\n    // add to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Filter an audio signal according to a set\n   *  of filter parameters.\n   *  \n   *  @method  process\n   *  @param  {Object} Signal  An object that outputs audio\n   *  @param {[Number]} freq Frequency in Hz, from 10 to 22050\n   *  @param {[Number]} res Resonance/Width of the filter frequency\n   *                        from 0.001 to 1000\n   */\n  p5.Filter.prototype.process = function (src, freq, res) {\n    src.connect(this.input);\n    this.set(freq, res);\n  };\n  /**\n   *  Set the frequency and the resonance of the filter.\n   *\n   *  @method  set\n   *  @param {Number} freq Frequency in Hz, from 10 to 22050\n   *  @param {Number} res  Resonance (Q) from 0.001 to 1000\n   *  @param {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   */\n  p5.Filter.prototype.set = function (freq, res, time) {\n    if (freq) {\n      this.freq(freq, time);\n    }\n    if (res) {\n      this.res(res, time);\n    }\n  };\n  /**\n   *  Set the filter frequency, in Hz, from 10 to 22050 (the range of\n   *  human hearing, although in reality most people hear in a narrower\n   *  range).\n   *\n   *  @method  freq\n   *  @param  {Number} freq Filter Frequency\n   *  @param {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   *  @return {Number} value  Returns the current frequency value\n   */\n  p5.Filter.prototype.freq = function (freq, time) {\n    var self = this;\n    var t = time || 0;\n    if (freq <= 0=\"\" 1000=\"\" 0)=\"\" {=\"\" freq=\"1;\" }=\"\" if=\"\" (typeof=\"\" 'number')=\"\" self.biquad.frequency.value=\"freq;\" self.biquad.frequency.cancelscheduledvalues(this.ac.currenttime=\"\" +=\"\" 0.01=\"\" t);=\"\" self.biquad.frequency.exponentialramptovalueattime(freq,=\"\" this.ac.currenttime=\"\" 0.02=\"\" else=\"\" (freq)=\"\" freq.connect(this.biquad.frequency);=\"\" return=\"\" self.biquad.frequency.value;=\"\" };=\"\" **=\"\" *=\"\" controls either=\"\" width=\"\" of=\"\" a=\"\" bandpass=\"\" frequency,=\"\" or=\"\" the=\"\" resonance=\"\" low=\"\" highpass=\"\" cutoff=\"\" frequency.=\"\" @method=\"\" res=\"\" @param=\"\" {number}=\"\" filter=\"\" from=\"\" 0.001=\"\" to=\"\" [timefromnow]=\"\" schedule=\"\" this=\"\" event=\"\" happen=\"\" seconds=\"\" now=\"\" @return=\"\" value=\"\" returns=\"\" current=\"\" p5.filter.prototype.res=\"function\" (res,=\"\" time)=\"\" var=\"\" self=\"this;\" t=\"time\" ||=\"\" 0;=\"\" self.biquad.q.value=\"res;\" self.biquad.q.cancelscheduledvalues(self.ac.currenttime=\"\" self.biquad.q.linearramptovalueattime(res,=\"\" self.ac.currenttime=\"\" (res)=\"\" freq.connect(this.biquad.q);=\"\" self.biquad.q.value;=\"\" set=\"\" type=\"\" p5.filter.=\"\" possible=\"\" types=\"\" include:=\"\" \"lowpass\"=\"\" (default),=\"\" \"highpass\",=\"\" \"bandpass\",=\"\" \"lowshelf\",=\"\" \"highshelf\",=\"\" \"peaking\",=\"\" \"notch\",=\"\" \"allpass\".=\"\" settype=\"\" {string}=\"\" p5.filter.prototype.settype=\"function\" (t)=\"\" this.biquad.type=\"t;\" output=\"\" level=\"\" filter.=\"\" amp=\"\" volume=\"\" amplitude=\"\" between=\"\" and=\"\" 1.0=\"\" [ramptime]=\"\" create=\"\" fade=\"\" that=\"\" lasts=\"\" ramptime=\"\" p5.filter.prototype.amp=\"function\" (vol,=\"\" ramptime,=\"\" tfromnow)=\"\" tfromnow=\"tFromNow\" currentvol=\"this.output.gain.value;\" this.output.gain.cancelscheduledvalues(now);=\"\" this.output.gain.linearramptovalueattime(currentvol,=\"\" 0.001);=\"\" this.output.gain.linearramptovalueattime(vol,=\"\" send=\"\" p5.sound=\"\" web=\"\" audio=\"\" object=\"\" connect=\"\" {object}=\"\" unit=\"\" p5.filter.prototype.connect=\"function\" (unit)=\"\" u=\"unit\" p5.soundout.input;=\"\" this.output.connect(u);=\"\" disconnect=\"\" all=\"\" output.=\"\" p5.filter.prototype.disconnect=\"function\" ()=\"\" this.output.disconnect();=\"\" p5.filter.prototype.dispose=\"function\" remove=\"\" reference=\"\" soundarray=\"\" index=\"p5sound.soundArray.indexOf(this);\" p5sound.soundarray.splice(index,=\"\" 1);=\"\" this.input.disconnect();=\"\" this.input=\"undefined;\" this.output=\"undefined;\" this.biquad.disconnect();=\"\" this.biquad=\"undefined;\" constructor:=\"\" <code=\"\">new p5.LowPass() Filter.\n   *  This is the same as creating a p5.Filter and then calling\n   *  its method <code>setType('lowpass')</code>.\n   *  See p5.Filter for methods.\n   *  \n   *  @method p5.LowPass\n   */\n  p5.LowPass = function () {\n    p5.Filter.call(this, 'lowpass');\n  };\n  p5.LowPass.prototype = Object.create(p5.Filter.prototype);\n  /**\n   *  Constructor: <code>new p5.HighPass()</code> Filter.\n   *  This is the same as creating a p5.Filter and then calling\n   *  its method <code>setType('highpass')</code>.\n   *  See p5.Filter for methods.\n   *  \n   *  @method p5.HighPass\n   */\n  p5.HighPass = function () {\n    p5.Filter.call(this, 'highpass');\n  };\n  p5.HighPass.prototype = Object.create(p5.Filter.prototype);\n  /**\n   *  Constructor: <code>new p5.BandPass()</code> Filter.\n   *  This is the same as creating a p5.Filter and then calling\n   *  its method <code>setType('bandpass')</code>.\n   *  See p5.Filter for methods. \n   *  \n   *  @method p5.BandPass\n   */\n  p5.BandPass = function () {\n    p5.Filter.call(this, 'bandpass');\n  };\n  p5.BandPass.prototype = Object.create(p5.Filter.prototype);\n}(master);\nvar delay;\ndelay = function () {\n  'use strict';\n  var p5sound = master;\n  var Filter = filter;\n  /**\n   *  Delay is an echo effect. It processes an existing sound source,\n   *  and outputs a delayed version of that sound. The p5.Delay can\n   *  produce different effects depending on the delayTime, feedback,\n   *  filter, and type. In the example below, a feedback of 0.5 will\n   *  produce a looping delay that decreases in volume by\n   *  50% each repeat. A filter will cut out the high frequencies so\n   *  that the delay does not sound as piercing as the original source.\n   *  \n   *  @class p5.Delay\n   *  @constructor\n   *  @return {Object} Returns a p5.Delay object\n   *  @example\n   *  <div><code>\n   *  var noise, env, delay;\n   *  \n   *  function setup() {\n   *    background(0);\n   *    noStroke();\n   *    fill(255);\n   *    textAlign(CENTER);\n   *    text('click to play', width/2, height/2);\n   *    \n   *    noise = new p5.Noise('brown');\n   *    noise.amp(0);\n   *    noise.start();\n   *    \n   *    delay = new p5.Delay();\n   *\n   *    // delay.process() accepts 4 parameters:\n   *    // source, delayTime, feedback, filter frequency\n   *    // play with these numbers!!\n   *    delay.process(noise, .12, .7, 2300);\n   *    \n   *    // play the noise with an envelope,\n   *    // a series of fades ( time / value pairs )\n   *    env = new p5.Env(.01, 0.2, .2, .1);\n   *  }\n   *\n   *  // mouseClick triggers envelope\n   *  function mouseClicked() {\n   *    // is mouse over canvas?\n   *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n   *      env.play(noise);\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.Delay = function () {\n    this.ac = p5sound.audiocontext;\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain();\n    this._split = this.ac.createChannelSplitter(2);\n    this._merge = this.ac.createChannelMerger(2);\n    this._leftGain = this.ac.createGain();\n    this._rightGain = this.ac.createGain();\n    /**\n     *  The p5.Delay is built with two\n     *  <a href=\"http://www.w3.org/TR/webaudio/#DelayNode\" target=\"_blank\" rel=\"external\">\n     *  Web Audio Delay Nodes</a>, one for each stereo channel.\n     *  \n     *  @property leftDelay\n     *  @type {Object}  Web Audio Delay Node\n     */\n    this.leftDelay = this.ac.createDelay();\n    /**\n     *  The p5.Delay is built with two\n     *  <a href=\"http://www.w3.org/TR/webaudio/#DelayNode\" target=\"_blank\" rel=\"external\">\n     *  Web Audio Delay Nodes</a>, one for each stereo channel.\n     *  \n     *  @property rightDelay\n     *  @type {Object}  Web Audio Delay Node\n     */\n    this.rightDelay = this.ac.createDelay();\n    this._leftFilter = new p5.Filter();\n    this._rightFilter = new p5.Filter();\n    this._leftFilter.disconnect();\n    this._rightFilter.disconnect();\n    this._leftFilter.biquad.frequency.setValueAtTime(1200, this.ac.currentTime);\n    this._rightFilter.biquad.frequency.setValueAtTime(1200, this.ac.currentTime);\n    this._leftFilter.biquad.Q.setValueAtTime(0.3, this.ac.currentTime);\n    this._rightFilter.biquad.Q.setValueAtTime(0.3, this.ac.currentTime);\n    // graph routing\n    this.input.connect(this._split);\n    this.leftDelay.connect(this._leftGain);\n    this.rightDelay.connect(this._rightGain);\n    this._leftGain.connect(this._leftFilter.input);\n    this._rightGain.connect(this._rightFilter.input);\n    this._merge.connect(this.output);\n    this.output.connect(p5.soundOut.input);\n    this._leftFilter.biquad.gain.setValueAtTime(1, this.ac.currentTime);\n    this._rightFilter.biquad.gain.setValueAtTime(1, this.ac.currentTime);\n    // default routing\n    this.setType(0);\n    this._maxDelay = this.leftDelay.delayTime.maxValue;\n    // add this p5.SoundFile to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Add delay to an audio signal according to a set\n   *  of delay parameters.\n   *  \n   *  @method  process\n   *  @param  {Object} Signal  An object that outputs audio\n   *  @param  {Number} [delayTime] Time (in seconds) of the delay/echo.\n   *                               Some browsers limit delayTime to\n   *                               1 second.\n   *  @param  {Number} [feedback]  sends the delay back through itself\n   *                               in a loop that decreases in volume\n   *                               each time.\n   *  @param  {Number} [lowPass]   Cutoff frequency. Only frequencies\n   *                               below the lowPass will be part of the\n   *                               delay.\n   */\n  p5.Delay.prototype.process = function (src, _delayTime, _feedback, _filter) {\n    var feedback = _feedback || 0;\n    var delayTime = _delayTime || 0;\n    if (feedback >= 1) {\n      throw new Error('Feedback value will force a positive feedback loop.');\n    }\n    if (delayTime >= this._maxDelay) {\n      throw new Error('Delay Time exceeds maximum delay time of ' + this._maxDelay + ' second.');\n    }\n    src.connect(this.input);\n    this.leftDelay.delayTime.setValueAtTime(delayTime, this.ac.currentTime);\n    this.rightDelay.delayTime.setValueAtTime(delayTime, this.ac.currentTime);\n    this._leftGain.gain.setValueAtTime(feedback, this.ac.currentTime);\n    this._rightGain.gain.setValueAtTime(feedback, this.ac.currentTime);\n    if (_filter) {\n      this._leftFilter.freq(_filter);\n      this._rightFilter.freq(_filter);\n    }\n  };\n  /**\n   *  Set the delay (echo) time, in seconds. Usually this value will be\n   *  a floating point number between 0.0 and 1.0.\n   *\n   *  @method  delayTime\n   *  @param {Number} delayTime Time (in seconds) of the delay\n   */\n  p5.Delay.prototype.delayTime = function (t) {\n    // if t is an audio node...\n    if (typeof t !== 'number') {\n      t.connect(this.leftDelay.delayTime);\n      t.connect(this.rightDelay.delayTime);\n    } else {\n      this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime);\n      this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime);\n      this.leftDelay.delayTime.linearRampToValueAtTime(t, this.ac.currentTime);\n      this.rightDelay.delayTime.linearRampToValueAtTime(t, this.ac.currentTime);\n    }\n  };\n  /**\n   *  Feedback occurs when Delay sends its signal back through its input\n   *  in a loop. The feedback amount determines how much signal to send each\n   *  time through the loop. A feedback greater than 1.0 is not desirable because\n   *  it will increase the overall output each time through the loop,\n   *  creating an infinite feedback loop.\n   *  \n   *  @method  feedback\n   *  @param {Number|Object} feedback 0.0 to 1.0, or an object such as an\n   *                                  Oscillator that can be used to\n   *                                  modulate this param\n   */\n  p5.Delay.prototype.feedback = function (f) {\n    // if f is an audio node...\n    if (typeof f !== 'number') {\n      f.connect(this._leftGain.gain);\n      f.connect(this._rightGain.gain);\n    } else if (f >= 1) {\n      throw new Error('Feedback value will force a positive feedback loop.');\n    } else {\n      this._leftGain.gain.exponentialRampToValueAtTime(f, this.ac.currentTime);\n      this._rightGain.gain.exponentialRampToValueAtTime(f, this.ac.currentTime);\n    }\n  };\n  /**\n   *  Set a lowpass filter frequency for the delay. A lowpass filter\n   *  will cut off any frequencies higher than the filter frequency.\n   *   \n   *  @method  filter\n   *  @param {Number|Object} cutoffFreq  A lowpass filter will cut off any \n   *                              frequencies higher than the filter frequency.\n   *  @param {Number|Object} res  Resonance of the filter frequency\n   *                              cutoff, or an object (i.e. a p5.Oscillator)\n   *                              that can be used to modulate this parameter.\n   *                              High numbers (i.e. 15) will produce a resonance,\n   *                              low numbers (i.e. .2) will produce a slope.\n   */\n  p5.Delay.prototype.filter = function (freq, q) {\n    this._leftFilter.set(freq, q);\n    this._rightFilter.set(freq, q);\n  };\n  /**\n   *  Choose a preset type of delay. 'pingPong' bounces the signal\n   *  from the left to the right channel to produce a stereo effect.\n   *  Any other parameter will revert to the default delay setting.\n   *  \n   *  @method  setType\n   *  @param {String|Number} type 'pingPong' (1) or 'default' (0)\n   */\n  p5.Delay.prototype.setType = function (t) {\n    if (t === 1) {\n      t = 'pingPong';\n    }\n    this._split.disconnect();\n    this._leftFilter.disconnect();\n    this._rightFilter.disconnect();\n    this._split.connect(this.leftDelay, 0);\n    this._split.connect(this.rightDelay, 1);\n    switch (t) {\n    case 'pingPong':\n      this._rightFilter.setType(this._leftFilter.biquad.type);\n      this._leftFilter.output.connect(this._merge, 0, 0);\n      this._rightFilter.output.connect(this._merge, 0, 1);\n      this._leftFilter.output.connect(this.rightDelay);\n      this._rightFilter.output.connect(this.leftDelay);\n      break;\n    default:\n      this._leftFilter.output.connect(this._merge, 0, 0);\n      this._leftFilter.output.connect(this._merge, 0, 1);\n      this._leftFilter.output.connect(this.leftDelay);\n      this._leftFilter.output.connect(this.rightDelay);\n    }\n  };\n  /**\n   *  Set the output level of the delay effect.\n   *  \n   *  @method  amp\n   *  @param  {Number} volume amplitude between 0 and 1.0\n   *  @param {Number} [rampTime] create a fade that lasts rampTime \n   *  @param {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   */\n  p5.Delay.prototype.amp = function (vol, rampTime, tFromNow) {\n    var rampTime = rampTime || 0;\n    var tFromNow = tFromNow || 0;\n    var now = p5sound.audiocontext.currentTime;\n    var currentVol = this.output.gain.value;\n    this.output.gain.cancelScheduledValues(now);\n    this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow + 0.001);\n    this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime + 0.001);\n  };\n  /**\n   *  Send output to a p5.sound or web audio object\n   *  \n   *  @method  connect\n   *  @param  {Object} unit\n   */\n  p5.Delay.prototype.connect = function (unit) {\n    var u = unit || p5.soundOut.input;\n    this.output.connect(u);\n  };\n  /**\n   *  Disconnect all output.\n   *  \n   *  @method disconnect\n   */\n  p5.Delay.prototype.disconnect = function () {\n    this.output.disconnect();\n  };\n  p5.Delay.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.input.disconnect();\n    this.output.disconnect();\n    this._split.disconnect();\n    this._leftFilter.disconnect();\n    this._rightFilter.disconnect();\n    this._merge.disconnect();\n    this._leftGain.disconnect();\n    this._rightGain.disconnect();\n    this.leftDelay.disconnect();\n    this.rightDelay.disconnect();\n    this.input = undefined;\n    this.output = undefined;\n    this._split = undefined;\n    this._leftFilter = undefined;\n    this._rightFilter = undefined;\n    this._merge = undefined;\n    this._leftGain = undefined;\n    this._rightGain = undefined;\n    this.leftDelay = undefined;\n    this.rightDelay = undefined;\n  };\n}(master, filter);\nvar reverb;\nreverb = function () {\n  'use strict';\n  var p5sound = master;\n  var CustomError = errorHandler;\n  /**\n   *  Reverb adds depth to a sound through a large number of decaying\n   *  echoes. It creates the perception that sound is occurring in a\n   *  physical space. The p5.Reverb has paramters for Time (how long does the\n   *  reverb last) and decayRate (how much the sound decays with each echo)\n   *  that can be set with the .set() or .process() methods. The p5.Convolver\n   *  extends p5.Reverb allowing you to recreate the sound of actual physical\n   *  spaces through convolution.\n   *  \n   *  @class p5.Reverb\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *  var soundFile, reverb;\n   *  function preload() {\n   *    soundFile = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    reverb = new p5.Reverb();\n   *    soundFile.disconnect(); // so we'll only hear reverb...\n   *\n   *    // connect soundFile to reverb, process w/\n   *    // 3 second reverbTime, decayRate of 2%\n   *    reverb.process(soundFile, 3, 2);\n   *    soundFile.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Reverb = function () {\n    this.ac = p5sound.audiocontext;\n    this.convolverNode = this.ac.createConvolver();\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain();\n    // otherwise, Safari distorts\n    this.input.gain.value = 0.5;\n    this.input.connect(this.convolverNode);\n    this.convolverNode.connect(this.output);\n    // default params\n    this._seconds = 3;\n    this._decay = 2;\n    this._reverse = false;\n    this._buildImpulse();\n    this.connect();\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Connect a source to the reverb, and assign reverb parameters.\n   *  \n   *  @method  process\n   *  @param  {Object} src     p5.sound / Web Audio object with a sound\n   *                           output.\n   *  @param  {Number} [seconds] Duration of the reverb, in seconds.\n   *                           Min: 0, Max: 10. Defaults to 3.\n   *  @param  {Number} [decayRate] Percentage of decay with each echo.\n   *                            Min: 0, Max: 100. Defaults to 2.\n   *  @param  {Boolean} [reverse] Play the reverb backwards or forwards.\n   */\n  p5.Reverb.prototype.process = function (src, seconds, decayRate, reverse) {\n    src.connect(this.input);\n    var rebuild = false;\n    if (seconds) {\n      this._seconds = seconds;\n      rebuild = true;\n    }\n    if (decayRate) {\n      this._decay = decayRate;\n    }\n    if (reverse) {\n      this._reverse = reverse;\n    }\n    if (rebuild) {\n      this._buildImpulse();\n    }\n  };\n  /**\n   *  Set the reverb settings. Similar to .process(), but without\n   *  assigning a new input.\n   *  \n   *  @method  set\n   *  @param  {Number} [seconds] Duration of the reverb, in seconds.\n   *                           Min: 0, Max: 10. Defaults to 3.\n   *  @param  {Number} [decayRate] Percentage of decay with each echo.\n   *                            Min: 0, Max: 100. Defaults to 2.\n   *  @param  {Boolean} [reverse] Play the reverb backwards or forwards.\n   */\n  p5.Reverb.prototype.set = function (seconds, decayRate, reverse) {\n    var rebuild = false;\n    if (seconds) {\n      this._seconds = seconds;\n      rebuild = true;\n    }\n    if (decayRate) {\n      this._decay = decayRate;\n    }\n    if (reverse) {\n      this._reverse = reverse;\n    }\n    if (rebuild) {\n      this._buildImpulse();\n    }\n  };\n  /**\n   *  Set the output level of the delay effect.\n   *  \n   *  @method  amp\n   *  @param  {Number} volume amplitude between 0 and 1.0\n   *  @param  {Number} [rampTime] create a fade that lasts rampTime \n   *  @param  {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   */\n  p5.Reverb.prototype.amp = function (vol, rampTime, tFromNow) {\n    var rampTime = rampTime || 0;\n    var tFromNow = tFromNow || 0;\n    var now = p5sound.audiocontext.currentTime;\n    var currentVol = this.output.gain.value;\n    this.output.gain.cancelScheduledValues(now);\n    this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow + 0.001);\n    this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime + 0.001);\n  };\n  /**\n   *  Send output to a p5.sound or web audio object\n   *  \n   *  @method  connect\n   *  @param  {Object} unit\n   */\n  p5.Reverb.prototype.connect = function (unit) {\n    var u = unit || p5.soundOut.input;\n    this.output.connect(u.input ? u.input : u);\n  };\n  /**\n   *  Disconnect all output.\n   *  \n   *  @method disconnect\n   */\n  p5.Reverb.prototype.disconnect = function () {\n    this.output.disconnect();\n  };\n  /**\n   *  Inspired by Simple Reverb by Jordan Santell\n   *  https://github.com/web-audio-components/simple-reverb/blob/master/index.js\n   * \n   *  Utility function for building an impulse response\n   *  based on the module parameters.\n   *\n   *  @private\n   */\n  p5.Reverb.prototype._buildImpulse = function () {\n    var rate = this.ac.sampleRate;\n    var length = rate * this._seconds;\n    var decay = this._decay;\n    var impulse = this.ac.createBuffer(2, length, rate);\n    var impulseL = impulse.getChannelData(0);\n    var impulseR = impulse.getChannelData(1);\n    var n, i;\n    for (i = 0; i < length; i++) {\n      n = this.reverse ? length - i : i;\n      impulseL[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);\n      impulseR[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);\n    }\n    this.convolverNode.buffer = impulse;\n  };\n  p5.Reverb.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    if (this.convolverNode) {\n      this.convolverNode.buffer = null;\n      this.convolverNode = null;\n    }\n    if (typeof this.output !== 'undefined') {\n      this.output.disconnect();\n      this.output = null;\n    }\n    if (typeof this.panner !== 'undefined') {\n      this.panner.disconnect();\n      this.panner = null;\n    }\n  };\n  // =======================================================================\n  //                          *** p5.Convolver ***\n  // =======================================================================\n  /**\n   *  <p>p5.Convolver extends p5.Reverb. It can emulate the sound of real\n   *  physical spaces through a process called <a href=\"\n   *  https://en.wikipedia.org/wiki/Convolution_reverb#Real_space_simulation\">\n   *  convolution</a>.</p>\n   *  \n   *  <p>Convolution multiplies any audio input by an \"impulse response\"\n   *  to simulate the dispersion of sound over time. The impulse response is\n   *  generated from an audio file that you provide. One way to\n   *  generate an impulse response is to pop a balloon in a reverberant space\n   *  and record the echo. Convolution can also be used to experiment with\n   *  sound.</p>\n   *\n   *  <p>Use the method <code>createConvolution(path)</code> to instantiate a\n   *  p5.Convolver with a path to your impulse response audio file.</p>\n   *  \n   *  @class p5.Convolver\n   *  @constructor\n   *  @param  {String}   path     path to a sound file\n   *  @param  {Function} [callback] function to call when loading succeeds\n   *  @param  {Function} [errorCallback] function to call if loading fails.\n   *                                     This function will receive an error or\n   *                                     XMLHttpRequest object with information\n   *                                     about what went wrong.\n   *  @example\n   *  <div><code>\n   *  var cVerb, sound;\n   *  function preload() {\n   *    // We have both MP3 and OGG versions of all sound assets\n   *    soundFormats('ogg', 'mp3');\n   *    \n   *    // Try replacing 'bx-spring' with other soundfiles like\n   *    // 'concrete-tunnel' 'small-plate' 'drum' 'beatbox'\n   *    cVerb = createConvolver('assets/bx-spring.mp3');\n   *\n   *    // Try replacing 'Damscray_DancingTiger' with\n   *    // 'beat', 'doorbell', lucky_dragons_-_power_melody'\n   *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *  \n   *  function setup() {\n   *    // disconnect from master output...\n   *    sound.disconnect();\n   *    \n   *    // ...and process with cVerb\n   *    // so that we only hear the convolution\n   *    cVerb.process(sound);\n   *    \n   *    sound.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Convolver = function (path, callback, errorCallback) {\n    this.ac = p5sound.audiocontext;\n    /**\n     *  Internally, the p5.Convolver uses the a\n     *  <a href=\"http://www.w3.org/TR/webaudio/#ConvolverNode\" target=\"_blank\" rel=\"external\">\n     *  Web Audio Convolver Node</a>.\n     *  \n     *  @property convolverNode\n     *  @type {Object}  Web Audio Convolver Node\n     */\n    this.convolverNode = this.ac.createConvolver();\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain();\n    // otherwise, Safari distorts\n    this.input.gain.value = 0.5;\n    this.input.connect(this.convolverNode);\n    this.convolverNode.connect(this.output);\n    if (path) {\n      this.impulses = [];\n      this._loadBuffer(path, callback, errorCallback);\n    } else {\n      // parameters\n      this._seconds = 3;\n      this._decay = 2;\n      this._reverse = false;\n      this._buildImpulse();\n    }\n    this.connect();\n    p5sound.soundArray.push(this);\n  };\n  p5.Convolver.prototype = Object.create(p5.Reverb.prototype);\n  p5.prototype.registerPreloadMethod('createConvolver', p5.prototype);\n  /**\n   *  Create a p5.Convolver. Accepts a path to a soundfile \n   *  that will be used to generate an impulse response.\n   *\n   *  @method  createConvolver\n   *  @param  {String}   path     path to a sound file\n   *  @param  {Function} [callback] function to call if loading is successful.\n   *                                The object will be passed in as the argument\n   *                                to the callback function.\n   *  @param  {Function} [errorCallback] function to call if loading is not successful.\n   *                                A custom error will be passed in as the argument\n   *                                to the callback function.\n   *  @return {p5.Convolver}\n   *  @example\n   *  <div><code>\n   *  var cVerb, sound;\n   *  function preload() {\n   *    // We have both MP3 and OGG versions of all sound assets\n   *    soundFormats('ogg', 'mp3');\n   *    \n   *    // Try replacing 'bx-spring' with other soundfiles like\n   *    // 'concrete-tunnel' 'small-plate' 'drum' 'beatbox'\n   *    cVerb = createConvolver('assets/bx-spring.mp3');\n   *\n   *    // Try replacing 'Damscray_DancingTiger' with\n   *    // 'beat', 'doorbell', lucky_dragons_-_power_melody'\n   *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *  \n   *  function setup() {\n   *    // disconnect from master output...\n   *    sound.disconnect();\n   *    \n   *    // ...and process with cVerb\n   *    // so that we only hear the convolution\n   *    cVerb.process(sound);\n   *    \n   *    sound.play();\n   *  }\n   *  </code></div>\n   */\n  p5.prototype.createConvolver = function (path, callback, errorCallback) {\n    // if loading locally without a server\n    if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n      alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n    }\n    var cReverb = new p5.Convolver(path, callback, errorCallback);\n    cReverb.impulses = [];\n    return cReverb;\n  };\n  /**\n   *  Private method to load a buffer as an Impulse Response,\n   *  assign it to the convolverNode, and add to the Array of .impulses.\n   *  \n   *  @param   {String}   path\n   *  @param   {Function} callback\n   *  @param   {Function} errorCallback\n   *  @private\n   */\n  p5.Convolver.prototype._loadBuffer = function (path, callback, errorCallback) {\n    var path = p5.prototype._checkFileFormats(path);\n    var self = this;\n    var errorTrace = new Error().stack;\n    var ac = p5.prototype.getAudioContext();\n    var request = new XMLHttpRequest();\n    request.open('GET', path, true);\n    request.responseType = 'arraybuffer';\n    request.onload = function () {\n      if (request.status == 200) {\n        // on success loading file:\n        ac.decodeAudioData(request.response, function (buff) {\n          var buffer = {};\n          var chunks = path.split('/');\n          buffer.name = chunks[chunks.length - 1];\n          buffer.audioBuffer = buff;\n          self.impulses.push(buffer);\n          self.convolverNode.buffer = buffer.audioBuffer;\n          if (callback) {\n            callback(buffer);\n          }\n        }, // error decoding buffer. \"e\" is undefined in Chrome 11/22/2015\n        function (e) {\n          var err = new CustomError('decodeAudioData', errorTrace, self.url);\n          var msg = 'AudioContext error at decodeAudioData for ' + self.url;\n          if (errorCallback) {\n            err.msg = msg;\n            errorCallback(err);\n          } else {\n            console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n          }\n        });\n      } else {\n        var err = new CustomError('loadConvolver', errorTrace, self.url);\n        var msg = 'Unable to load ' + self.url + '. The request status was: ' + request.status + ' (' + request.statusText + ')';\n        if (errorCallback) {\n          err.message = msg;\n          errorCallback(err);\n        } else {\n          console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n        }\n      }\n    };\n    // if there is another error, aside from 404...\n    request.onerror = function (e) {\n      var err = new CustomError('loadConvolver', errorTrace, self.url);\n      var msg = 'There was no response from the server at ' + self.url + '. Check the url and internet connectivity.';\n      if (errorCallback) {\n        err.message = msg;\n        errorCallback(err);\n      } else {\n        console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n      }\n    };\n    request.send();\n  };\n  p5.Convolver.prototype.set = null;\n  /**\n   *  Connect a source to the reverb, and assign reverb parameters.\n   *  \n   *  @method  process\n   *  @param  {Object} src     p5.sound / Web Audio object with a sound\n   *                           output.\n   *  @example\n   *  <div><code>\n   *  var cVerb, sound;\n   *  function preload() {\n   *    soundFormats('ogg', 'mp3');\n   *    \n   *    cVerb = createConvolver('assets/concrete-tunnel.mp3');\n   *\n   *    sound = loadSound('assets/beat.mp3');\n   *  }\n   *  \n   *  function setup() {\n   *    // disconnect from master output...\n   *    sound.disconnect();\n   *    \n   *    // ...and process with (i.e. connect to) cVerb\n   *    // so that we only hear the convolution\n   *    cVerb.process(sound);\n   *    \n   *    sound.play();\n   *  }\n   *  </code></div>\n   */\n  p5.Convolver.prototype.process = function (src) {\n    src.connect(this.input);\n  };\n  /**\n   *  If you load multiple impulse files using the .addImpulse method,\n   *  they will be stored as Objects in this Array. Toggle between them\n   *  with the <code>toggleImpulse(id)</code> method.\n   *  \n   *  @property impulses\n   *  @type {Array} Array of Web Audio Buffers\n   */\n  p5.Convolver.prototype.impulses = [];\n  /**\n   *  Load and assign a new Impulse Response to the p5.Convolver.\n   *  The impulse is added to the <code>.impulses</code> array. Previous\n   *  impulses can be accessed with the <code>.toggleImpulse(id)</code>\n   *  method.\n   *  \n   *  @method  addImpulse\n   *  @param  {String}   path     path to a sound file\n   *  @param  {Function} callback function (optional)\n   *  @param  {Function} errorCallback function (optional)\n   */\n  p5.Convolver.prototype.addImpulse = function (path, callback, errorCallback) {\n    // if loading locally without a server\n    if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n      alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n    }\n    this._loadBuffer(path, callback, errorCallback);\n  };\n  /**\n   *  Similar to .addImpulse, except that the <code>.impulses</code>\n   *  Array is reset to save memory. A new <code>.impulses</code>\n   *  array is created with this impulse as the only item. \n   *\n   *  @method  resetImpulse\n   *  @param  {String}   path     path to a sound file\n   *  @param  {Function} callback function (optional)\n   *  @param  {Function} errorCallback function (optional)\n   */\n  p5.Convolver.prototype.resetImpulse = function (path, callback, errorCallback) {\n    // if loading locally without a server\n    if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n      alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n    }\n    this.impulses = [];\n    this._loadBuffer(path, callback, errorCallback);\n  };\n  /**\n   *  If you have used <code>.addImpulse()</code> to add multiple impulses\n   *  to a p5.Convolver, then you can use this method to toggle between\n   *  the items in the <code>.impulses</code> Array. Accepts a parameter\n   *  to identify which impulse you wish to use, identified either by its\n   *  original filename (String) or by its position in the <code>.impulses\n   *  </code> Array (Number).<br>\n   *  You can access the objects in the .impulses Array directly. Each\n   *  Object has two attributes: an <code>.audioBuffer</code> (type:\n   *  Web Audio <a href=\"\n   *  http://webaudio.github.io/web-audio-api/#the-audiobuffer-interface\">\n   *  AudioBuffer)</a> and a <code>.name</code>, a String that corresponds\n   *  with the original filename. \n   *  \n   *  @method toggleImpulse\n   *  @param {String|Number} id Identify the impulse by its original filename\n   *                            (String), or by its position in the\n   *                            <code>.impulses</code> Array (Number).\n   */\n  p5.Convolver.prototype.toggleImpulse = function (id) {\n    if (typeof id === 'number' && id < this.impulses.length) {\n      this.convolverNode.buffer = this.impulses[id].audioBuffer;\n    }\n    if (typeof id === 'string') {\n      for (var i = 0; i < this.impulses.length; i++) {\n        if (this.impulses[i].name === id) {\n          this.convolverNode.buffer = this.impulses[i].audioBuffer;\n          break;\n        }\n      }\n    }\n  };\n  p5.Convolver.prototype.dispose = function () {\n    // remove all the Impulse Response buffers\n    for (var i in this.impulses) {\n      this.impulses[i] = null;\n    }\n    this.convolverNode.disconnect();\n    this.concolverNode = null;\n    if (typeof this.output !== 'undefined') {\n      this.output.disconnect();\n      this.output = null;\n    }\n    if (typeof this.panner !== 'undefined') {\n      this.panner.disconnect();\n      this.panner = null;\n    }\n  };\n}(master, errorHandler, sndcore);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_TimelineState;\nTone_core_TimelineState = function (Tone) {\n  'use strict';\n  Tone.TimelineState = function (initial) {\n    Tone.Timeline.call(this);\n    this._initial = initial;\n  };\n  Tone.extend(Tone.TimelineState, Tone.Timeline);\n  Tone.TimelineState.prototype.getStateAtTime = function (time) {\n    var event = this.getEvent(time);\n    if (event !== null) {\n      return event.state;\n    } else {\n      return this._initial;\n    }\n  };\n  Tone.TimelineState.prototype.setStateAtTime = function (state, time) {\n    this.addEvent({\n      'state': state,\n      'time': this.toSeconds(time)\n    });\n  };\n  return Tone.TimelineState;\n}(Tone_core_Tone, Tone_core_Timeline);\n/** Tone.js module by Yotam Mann, MIT License 2016  http://opensource.org/licenses/MIT **/\nvar Tone_core_Clock;\nTone_core_Clock = function (Tone) {\n  'use strict';\n  Tone.Clock = function () {\n    var options = this.optionsObject(arguments, [\n      'callback',\n      'frequency'\n    ], Tone.Clock.defaults);\n    this.callback = options.callback;\n    this._lookAhead = 'auto';\n    this._computedLookAhead = 1 / 60;\n    this._threshold = 0.5;\n    this._nextTick = -1;\n    this._lastUpdate = 0;\n    this._loopID = -1;\n    this.frequency = new Tone.TimelineSignal(options.frequency, Tone.Type.Frequency);\n    this.ticks = 0;\n    this._state = new Tone.TimelineState(Tone.State.Stopped);\n    this._boundLoop = this._loop.bind(this);\n    this._readOnly('frequency');\n    this._loop();\n  };\n  Tone.extend(Tone.Clock);\n  Tone.Clock.defaults = {\n    'callback': Tone.noOp,\n    'frequency': 1,\n    'lookAhead': 'auto'\n  };\n  Object.defineProperty(Tone.Clock.prototype, 'state', {\n    get: function () {\n      return this._state.getStateAtTime(this.now());\n    }\n  });\n  Object.defineProperty(Tone.Clock.prototype, 'lookAhead', {\n    get: function () {\n      return this._lookAhead;\n    },\n    set: function (val) {\n      if (val === 'auto') {\n        this._lookAhead = 'auto';\n      } else {\n        this._lookAhead = this.toSeconds(val);\n      }\n    }\n  });\n  Tone.Clock.prototype.start = function (time, offset) {\n    time = this.toSeconds(time);\n    if (this._state.getStateAtTime(time) !== Tone.State.Started) {\n      this._state.addEvent({\n        'state': Tone.State.Started,\n        'time': time,\n        'offset': offset\n      });\n    }\n    return this;\n  };\n  Tone.Clock.prototype.stop = function (time) {\n    time = this.toSeconds(time);\n    if (this._state.getStateAtTime(time) !== Tone.State.Stopped) {\n      this._state.setStateAtTime(Tone.State.Stopped, time);\n    }\n    return this;\n  };\n  Tone.Clock.prototype.pause = function (time) {\n    time = this.toSeconds(time);\n    if (this._state.getStateAtTime(time) === Tone.State.Started) {\n      this._state.setStateAtTime(Tone.State.Paused, time);\n    }\n    return this;\n  };\n  Tone.Clock.prototype._loop = function (time) {\n    this._loopID = requestAnimationFrame(this._boundLoop);\n    if (this._lookAhead === 'auto') {\n      if (!this.isUndef(time)) {\n        var diff = (time - this._lastUpdate) / 1000;\n        this._lastUpdate = time;\n        if (diff < this._threshold) {\n          this._computedLookAhead = (9 * this._computedLookAhead + diff) / 10;\n        }\n      }\n    } else {\n      this._computedLookAhead = this._lookAhead;\n    }\n    var now = this.now();\n    var lookAhead = this._computedLookAhead * 2;\n    var event = this._state.getEvent(now + lookAhead);\n    var state = Tone.State.Stopped;\n    if (event) {\n      state = event.state;\n      if (this._nextTick === -1 && state === Tone.State.Started) {\n        this._nextTick = event.time;\n        if (!this.isUndef(event.offset)) {\n          this.ticks = event.offset;\n        }\n      }\n    }\n    if (state === Tone.State.Started) {\n      while (now + lookAhead > this._nextTick) {\n        if (now > this._nextTick + this._threshold) {\n          this._nextTick = now;\n        }\n        var tickTime = this._nextTick;\n        this._nextTick += 1 / this.frequency.getValueAtTime(this._nextTick);\n        this.callback(tickTime);\n        this.ticks++;\n      }\n    } else if (state === Tone.State.Stopped) {\n      this._nextTick = -1;\n      this.ticks = 0;\n    }\n  };\n  Tone.Clock.prototype.getStateAtTime = function (time) {\n    return this._state.getStateAtTime(time);\n  };\n  Tone.Clock.prototype.dispose = function () {\n    cancelAnimationFrame(this._loopID);\n    Tone.TimelineState.prototype.dispose.call(this);\n    this._writable('frequency');\n    this.frequency.dispose();\n    this.frequency = null;\n    this._boundLoop = Tone.noOp;\n    this._nextTick = Infinity;\n    this.callback = null;\n    this._state.dispose();\n    this._state = null;\n  };\n  return Tone.Clock;\n}(Tone_core_Tone, Tone_signal_TimelineSignal);\nvar metro;\nmetro = function () {\n  'use strict';\n  var p5sound = master;\n  // requires the Tone.js library's Clock (MIT license, Yotam Mann)\n  // https://github.com/TONEnoTONE/Tone.js/\n  var Clock = Tone_core_Clock;\n  var ac = p5sound.audiocontext;\n  // var upTick = false;\n  p5.Metro = function () {\n    this.clock = new Clock({ 'callback': this.ontick.bind(this) });\n    this.syncedParts = [];\n    this.bpm = 120;\n    // gets overridden by p5.Part\n    this._init();\n    this.tickCallback = function () {\n    };\n  };\n  var prevTick = 0;\n  var tatumTime = 0;\n  p5.Metro.prototype.ontick = function (tickTime) {\n    var elapsedTime = tickTime - prevTick;\n    var secondsFromNow = tickTime - p5sound.audiocontext.currentTime;\n    if (elapsedTime - tatumTime <= 0=\"\" -0.02)=\"\" {=\"\" return;=\"\" }=\"\" else=\"\" prevtick=\"tickTime;\" for=\"\" all=\"\" of=\"\" the=\"\" active=\"\" things=\"\" on=\"\" metro:=\"\" (var=\"\" i=\"\" in=\"\" this.syncedparts)=\"\" var=\"\" thispart=\"this.syncedParts[i];\" thispart.incrementstep(secondsfromnow);=\"\" each=\"\" synced=\"\" source=\"\" keeps=\"\" track=\"\" its=\"\" own=\"\" beat=\"\" number=\"\" j=\"\" thispart.phrases)=\"\" thisphrase=\"thisPart.phrases[j];\" phrasearray=\"thisPhrase.sequence;\" bnum=\"this.metroTicks\" %=\"\" phrasearray.length;=\"\" if=\"\" (phrasearray[bnum]=\"\" !=\"=\" &&=\"\" (this.metroticks=\"\" <=\"\" phrasearray.length=\"\" ||=\"\" !thisphrase.looping))=\"\" thisphrase.callback(secondsfromnow,=\"\" phrasearray[bnum]);=\"\" this.metroticks=\"\" +=\"1;\" this.tickcallback(secondsfromnow);=\"\" };=\"\" p5.metro.prototype.setbpm=\"function\" (bpm,=\"\" ramptime)=\"\" beattime=\"60\" (bpm=\"\" *=\"\" this.tatums);=\"\" now=\"p5sound.audiocontext.currentTime;\" tatumtime=\"beatTime;\" ramptime=\"rampTime\" 0;=\"\" this.clock.frequency.setvalueattime(this.clock.frequency.value,=\"\" now);=\"\" this.clock.frequency.linearramptovalueattime(bpm,=\"\" ramptime);=\"\" this.bpm=\"bpm;\" p5.metro.prototype.getbpm=\"function\" (tempo)=\"\" return=\"\" this.clock.getrate()=\"\" this.tatums=\"\" 60;=\"\" p5.metro.prototype._init=\"function\" ()=\"\" clear=\"\" existing=\"\" parts,=\"\" add=\"\" only=\"\" this=\"\" one=\"\" p5.metro.prototype.resetsync=\"function\" (part)=\"\" this.syncedparts=\"[part];\" push=\"\" a=\"\" new=\"\" part=\"\" to=\"\" array=\"\" p5.metro.prototype.pushsync=\"function\" this.syncedparts.push(part);=\"\" p5.metro.prototype.start=\"function\" (timefromnow)=\"\" t=\"timeFromNow\" this.clock.start(now=\"\" t);=\"\" this.setbpm(this.bpm);=\"\" p5.metro.prototype.stop=\"function\" (this.clock._oscillator)=\"\" this.clock.stop(now=\"\" p5.metro.prototype.beatlength=\"function\" (tatums)=\"\" tatums=\"\" 4;=\"\" }(master,=\"\" tone_core_clock);=\"\" looper;=\"\" looper=\"function\" 'use=\"\" strict';=\"\" p5sound=\"master;\" bpm=\"120;\" **=\"\" set=\"\" global=\"\" tempo,=\"\" beats=\"\" per=\"\" minute,=\"\" p5.parts.=\"\" method=\"\" will=\"\" impact=\"\" @param=\"\" {number}=\"\" minute=\"\" seconds=\"\" from=\"\" p5.prototype.setbpm=\"function\" p5sound.parts)=\"\" p5sound.parts[i].setbpm(bpm,=\"\" <p=\"\">A phrase is a pattern of musical events over time, i.e.\n   *  a series of notes and rests.<p></p>\n   *  \n   *  <p>Phrases must be added to a p5.Part for playback, and\n   *  each part can play multiple phrases at the same time.\n   *  For example, one Phrase might be a kick drum, another\n   *  could be a snare, and another could be the bassline.</p>\n   *  \n   *  <p>The first parameter is a name so that the phrase can be\n   *  modified or deleted later. The callback is a a function that\n   *  this phrase will call at every stepfor example it might be\n   *  called <code>playNote(value){}</code>. The array determines\n   *  which value is passed into the callback at each step of the\n   *  phrase. It can be numbers, an object with multiple numbers,\n   *  or a zero (0) indicates a rest so the callback won't be called).</p>\n   * \n   *  @class p5.Phrase\n   *  @constructor\n   *  @param {String}   name     Name so that you can access the Phrase.\n   *  @param {Function} callback The name of a function that this phrase\n   *                             will call. Typically it will play a sound,\n   *                             and accept two parameters: a time at which\n   *                             to play the sound (in seconds from now),\n   *                             and a value from the sequence array. The\n   *                             time should be passed into the play() or\n   *                             start() method to ensure precision.\n   *  @param {Array}   sequence    Array of values to pass into the callback\n   *                            at each step of the phrase.\n   *  @example\n   *  <div><code>\n   *  var mySound, myPhrase, myPart;\n   *  var pattern = [1,0,0,2,0,2,0,0];\n   *  var msg = 'click to play';\n   *  \n   *  function preload() {\n   *    mySound = loadSound('assets/beatbox.mp3');\n   *  }\n   *  \n   *  function setup() {\n   *    noStroke();\n   *    fill(255);\n   *    textAlign(CENTER);\n   *    masterVolume(0.1);\n   *    \n   *    myPhrase = new p5.Phrase('bbox', makeSound, pattern);\n   *    myPart = new p5.Part();\n   *    myPart.addPhrase(myPhrase);\n   *    myPart.setBPM(60);\n   *  }\n   *\n   *  function draw() {\n   *    background(0);\n   *    text(msg, width/2, height/2);\n   *  }\n   *\n   *  function makeSound(time, playbackRate) {\n   *    mySound.rate(playbackRate);\n   *    mySound.play(time);\n   *  }\n   *  \n   *  function mouseClicked() {\n   *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n   *      myPart.start();\n   *      msg = 'playing pattern';\n   *    }\n   *  }\n   *\n   *  </code></div>\n   */\n  p5.Phrase = function (name, callback, sequence) {\n    this.phraseStep = 0;\n    this.name = name;\n    this.callback = callback;\n    /**\n     * Array of values to pass into the callback\n     * at each step of the phrase. Depending on the callback\n     * function's requirements, these values may be numbers,\n     * strings, or an object with multiple parameters.\n     * Zero (0) indicates a rest.\n     * \n     * @property sequence\n     * @type {Array}\n     */\n    this.sequence = sequence;\n  };\n  /**\n   *  <p>A p5.Part plays back one or more p5.Phrases. Instantiate a part\n   *  with steps and tatums. By default, each step represents 1/16th note.</p>\n   *\n   *  <p>See p5.Phrase for more about musical timing.</p>\n   *  \n   *  @class p5.Part\n   *  @constructor\n   *  @param {Number} [steps]   Steps in the part\n   *  @param {Number} [tatums] Divisions of a beat (default is 1/16, a quarter note)\n   *  @example\n   *  <div><code>\n   *  var box, drum, myPart;\n   *  var boxPat = [1,0,0,2,0,2,0,0];\n   *  var drumPat = [0,1,1,0,2,0,1,0];\n   *  var msg = 'click to play';\n   *  \n   *  function preload() {\n   *    box = loadSound('assets/beatbox.mp3');\n   *    drum = loadSound('assets/drum.mp3');\n   *  }\n   *  \n   *  function setup() {\n   *    noStroke();\n   *    fill(255);\n   *    textAlign(CENTER);\n   *    masterVolume(0.1);\n   *\n   *    var boxPhrase = new p5.Phrase('box', playBox, boxPat);\n   *    var drumPhrase = new p5.Phrase('drum', playDrum, drumPat);\n   *    myPart = new p5.Part();\n   *    myPart.addPhrase(boxPhrase);\n   *    myPart.addPhrase(drumPhrase);\n   *    myPart.setBPM(60);\n   *    masterVolume(0.1);\n   *  }\n   *\n   *  function draw() {\n   *    background(0);\n   *    text(msg, width/2, height/2);\n   *  }\n   *\n   *  function playBox(time, playbackRate) {\n   *    box.rate(playbackRate);\n   *    box.play(time);\n   *  }\n   *  \n   *  function playDrum(time, playbackRate) {\n   *    drum.rate(playbackRate);\n   *    drum.play(time);\n   *  }\n   *  \n   *  function mouseClicked() {\n   *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n   *      myPart.start();\n   *      msg = 'playing part';\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.Part = function (steps, bLength) {\n    this.length = steps || 0;\n    // how many beats\n    this.partStep = 0;\n    this.phrases = [];\n    this.looping = false;\n    this.isPlaying = false;\n    // what does this looper do when it gets to the last step?\n    this.onended = function () {\n      this.stop();\n    };\n    this.tatums = bLength || 0.0625;\n    // defaults to quarter note\n    this.metro = new p5.Metro();\n    this.metro._init();\n    this.metro.beatLength(this.tatums);\n    this.metro.setBPM(bpm);\n    p5sound.parts.push(this);\n    this.callback = function () {\n    };\n  };\n  /**\n   *  Set the tempo of this part, in Beats Per Minute. \n   *  \n   *  @method  setBPM\n   *  @param {Number} BPM      Beats Per Minute\n   *  @param {Number} [rampTime] Seconds from now\n   */\n  p5.Part.prototype.setBPM = function (tempo, rampTime) {\n    this.metro.setBPM(tempo, rampTime);\n  };\n  /**\n   *  Returns the Beats Per Minute of this currently part.\n   *  \n   *  @method getBPM\n   *  @return {Number} \n   */\n  p5.Part.prototype.getBPM = function () {\n    return this.metro.getBPM();\n  };\n  /**\n   *  Start playback of this part. It will play\n   *  through all of its phrases at a speed\n   *  determined by setBPM.\n   *  \n   *  @method  start\n   *  @param  {Number} [time] seconds from now\n   */\n  p5.Part.prototype.start = function (time) {\n    if (!this.isPlaying) {\n      this.isPlaying = true;\n      this.metro.resetSync(this);\n      var t = time || 0;\n      this.metro.start(t);\n    }\n  };\n  /**\n   *  Loop playback of this part. It will begin\n   *  looping through all of its phrases at a speed\n   *  determined by setBPM.\n   *  \n   *  @method  loop\n   *  @param  {Number} [time] seconds from now\n   */\n  p5.Part.prototype.loop = function (time) {\n    this.looping = true;\n    // rest onended function\n    this.onended = function () {\n      this.partStep = 0;\n    };\n    var t = time || 0;\n    this.start(t);\n  };\n  /**\n   *  Tell the part to stop looping.\n   *\n   *  @method  noLoop\n   */\n  p5.Part.prototype.noLoop = function () {\n    this.looping = false;\n    // rest onended function\n    this.onended = function () {\n      this.stop();\n    };\n  };\n  /**\n   *  Stop the part and cue it to step 0.\n   *  \n   *  @method  stop\n   *  @param  {Number} [time] seconds from now\n   */\n  p5.Part.prototype.stop = function (time) {\n    this.partStep = 0;\n    this.pause(time);\n  };\n  /**\n   *  Pause the part. Playback will resume\n   *  from the current step.\n   *  \n   *  @method  pause\n   *  @param  {Number} time seconds from now\n   */\n  p5.Part.prototype.pause = function (time) {\n    this.isPlaying = false;\n    var t = time || 0;\n    this.metro.stop(t);\n  };\n  /**\n   *  Add a p5.Phrase to this Part.\n   *\n   *  @method  addPhrase\n   *  @param {p5.Phrase}   phrase   reference to a p5.Phrase\n   */\n  p5.Part.prototype.addPhrase = function (name, callback, array) {\n    var p;\n    if (arguments.length === 3) {\n      p = new p5.Phrase(name, callback, array);\n    } else if (arguments[0] instanceof p5.Phrase) {\n      p = arguments[0];\n    } else {\n      throw 'invalid input. addPhrase accepts name, callback, array or a p5.Phrase';\n    }\n    this.phrases.push(p);\n    // reset the length if phrase is longer than part's existing length\n    if (p.sequence.length > this.length) {\n      this.length = p.sequence.length;\n    }\n  };\n  /**\n   *  Remove a phrase from this part, based on the name it was\n   *  given when it was created.\n   *  \n   *  @method  removePhrase\n   *  @param  {String} phraseName\n   */\n  p5.Part.prototype.removePhrase = function (name) {\n    for (var i in this.phrases) {\n      if (this.phrases[i].name === name) {\n        this.phrases.split(i, 1);\n      }\n    }\n  };\n  /**\n   *  Get a phrase from this part, based on the name it was\n   *  given when it was created. Now you can modify its array.\n   *  \n   *  @method  getPhrase\n   *  @param  {String} phraseName\n   */\n  p5.Part.prototype.getPhrase = function (name) {\n    for (var i in this.phrases) {\n      if (this.phrases[i].name === name) {\n        return this.phrases[i];\n      }\n    }\n  };\n  /**\n   *  Get a phrase from this part, based on the name it was\n   *  given when it was created. Now you can modify its array.\n   *  \n   *  @method  replaceSequence\n   *  @param  {String} phraseName\n   *  @param  {Array} sequence  Array of values to pass into the callback\n   *                            at each step of the phrase.\n   */\n  p5.Part.prototype.replaceSequence = function (name, array) {\n    for (var i in this.phrases) {\n      if (this.phrases[i].name === name) {\n        this.phrases[i].sequence = array;\n      }\n    }\n  };\n  p5.Part.prototype.incrementStep = function (time) {\n    if (this.partStep < this.length - 1) {\n      this.callback(time);\n      this.partStep += 1;\n    } else {\n      if (this.looping) {\n        this.callback(time);\n      }\n      this.onended();\n      this.partStep = 0;\n    }\n  };\n  /**\n   *  Fire a callback function at every step.\n   *\n   *  @method onStep\n   *  @param  {Function} callback The name of the callback\n   *                              you want to fire\n   *                              on every beat/tatum.\n   */\n  p5.Part.prototype.onStep = function (callback) {\n    this.callback = callback;\n  };\n  // ===============\n  // p5.Score\n  // ===============\n  /**\n   *  A Score consists of a series of Parts. The parts will\n   *  be played back in order. For example, you could have an\n   *  A part, a B part, and a C part, and play them back in this order\n   *  <code>new p5.Score(a, a, b, a, c)</code>\n   *\n   *  @class p5.Score\n   *  @constructor\n   *  @param {p5.Part} part(s) One or multiple parts, to be played in sequence.\n   *  @return {p5.Score}\n   */\n  p5.Score = function () {\n    // for all of the arguments\n    this.parts = [];\n    this.currentPart = 0;\n    var thisScore = this;\n    for (var i in arguments) {\n      this.parts[i] = arguments[i];\n      this.parts[i].nextPart = this.parts[i + 1];\n      this.parts[i].onended = function () {\n        thisScore.resetPart(i);\n        playNextPart(thisScore);\n      };\n    }\n    this.looping = false;\n  };\n  p5.Score.prototype.onended = function () {\n    if (this.looping) {\n      // this.resetParts();\n      this.parts[0].start();\n    } else {\n      this.parts[this.parts.length - 1].onended = function () {\n        this.stop();\n        this.resetParts();\n      };\n    }\n    this.currentPart = 0;\n  };\n  /**\n   *  Start playback of the score.\n   *  \n   *  @method  start\n   */\n  p5.Score.prototype.start = function () {\n    this.parts[this.currentPart].start();\n    this.scoreStep = 0;\n  };\n  /**\n   *  Stop playback of the score.\n   *  \n   *  @method  stop\n   */\n  p5.Score.prototype.stop = function () {\n    this.parts[this.currentPart].stop();\n    this.currentPart = 0;\n    this.scoreStep = 0;\n  };\n  /**\n   *  Pause playback of the score.\n   *  \n   *  @method  pause\n   */\n  p5.Score.prototype.pause = function () {\n    this.parts[this.currentPart].stop();\n  };\n  /**\n   *  Loop playback of the score.\n   *  \n   *  @method  loop\n   */\n  p5.Score.prototype.loop = function () {\n    this.looping = true;\n    this.start();\n  };\n  /**\n   *  Stop looping playback of the score. If it\n   *  is currently playing, this will go into effect\n   *  after the current round of playback completes.\n   *  \n   *  @method  noLoop\n   */\n  p5.Score.prototype.noLoop = function () {\n    this.looping = false;\n  };\n  p5.Score.prototype.resetParts = function () {\n    for (var i in this.parts) {\n      this.resetPart(i);\n    }\n  };\n  p5.Score.prototype.resetPart = function (i) {\n    this.parts[i].stop();\n    this.parts[i].partStep = 0;\n    for (var p in this.parts[i].phrases) {\n      this.parts[i].phrases[p].phraseStep = 0;\n    }\n  };\n  /**\n   *  Set the tempo for all parts in the score\n   *  \n   *  @param {Number} BPM      Beats Per Minute\n   *  @param {Number} rampTime Seconds from now\n   */\n  p5.Score.prototype.setBPM = function (bpm, rampTime) {\n    for (var i in this.parts) {\n      this.parts[i].setBPM(bpm, rampTime);\n    }\n  };\n  function playNextPart(aScore) {\n    aScore.currentPart++;\n    if (aScore.currentPart >= aScore.parts.length) {\n      aScore.scoreStep = 0;\n      aScore.onended();\n    } else {\n      aScore.scoreStep = 0;\n      aScore.parts[aScore.currentPart - 1].stop();\n      aScore.parts[aScore.currentPart].start();\n    }\n  }\n}(master);\nvar soundRecorder;\nsoundRecorder = function () {\n  'use strict';\n  var p5sound = master;\n  var ac = p5sound.audiocontext;\n  /**\n   *  <p>Record sounds for playback and/or to save as a .wav file.\n   *  The p5.SoundRecorder records all sound output from your sketch,\n   *  or can be assigned a specific source with setInput().</p>\n   *  <p>The record() method accepts a p5.SoundFile as a parameter.\n   *  When playback is stopped (either after the given amount of time,\n   *  or with the stop() method), the p5.SoundRecorder will send its\n   *  recording to that p5.SoundFile for playback.</p>\n   *  \n   *  @class p5.SoundRecorder\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *  var mic, recorder, soundFile;\n   *  var state = 0;\n   *  \n   *  function setup() {\n   *    background(200);\n   *    // create an audio in\n   *    mic = new p5.AudioIn();\n   *    \n   *    // prompts user to enable their browser mic\n   *    mic.start();\n   *    \n   *    // create a sound recorder\n   *    recorder = new p5.SoundRecorder();\n   *    \n   *    // connect the mic to the recorder\n   *    recorder.setInput(mic);\n   *    \n   *    // this sound file will be used to\n   *    // playback & save the recording\n   *    soundFile = new p5.SoundFile();\n   *\n   *    text('keyPress to record', 20, 20);\n   *  }\n   *\n   *  function keyPressed() {\n   *    // make sure user enabled the mic\n   *    if (state === 0 && mic.enabled) {\n   *    \n   *      // record to our p5.SoundFile\n   *      recorder.record(soundFile);\n   *      \n   *      background(255,0,0);\n   *      text('Recording!', 20, 20);\n   *      state++;\n   *    }\n   *    else if (state === 1) {\n   *      background(0,255,0);\n   *\n   *      // stop recorder and\n   *      // send result to soundFile\n   *      recorder.stop(); \n   *      \n   *      text('Stopped', 20, 20);\n   *      state++;\n   *    }\n   *    \n   *    else if (state === 2) {\n   *      soundFile.play(); // play the result!\n   *      save(soundFile, 'mySound.wav');\n   *      state++;\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.SoundRecorder = function () {\n    this.input = ac.createGain();\n    this.output = ac.createGain();\n    this.recording = false;\n    this.bufferSize = 1024;\n    this._channels = 2;\n    // stereo (default)\n    this._clear();\n    // initialize variables\n    this._jsNode = ac.createScriptProcessor(this.bufferSize, this._channels, 2);\n    this._jsNode.onaudioprocess = this._audioprocess.bind(this);\n    /** \n     *  callback invoked when the recording is over\n     *  @private\n     *  @type {function(Float32Array)}\n     */\n    this._callback = function () {\n    };\n    // connections\n    this._jsNode.connect(p5.soundOut._silentNode);\n    this.setInput();\n    // add this p5.SoundFile to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Connect a specific device to the p5.SoundRecorder.\n   *  If no parameter is given, p5.SoundRecorer will record\n   *  all audible p5.sound from your sketch.\n   *  \n   *  @method  setInput\n   *  @param {Object} [unit] p5.sound object or a web audio unit\n   *                         that outputs sound\n   */\n  p5.SoundRecorder.prototype.setInput = function (unit) {\n    this.input.disconnect();\n    this.input = null;\n    this.input = ac.createGain();\n    this.input.connect(this._jsNode);\n    this.input.connect(this.output);\n    if (unit) {\n      unit.connect(this.input);\n    } else {\n      p5.soundOut.output.connect(this.input);\n    }\n  };\n  /**\n   *  Start recording. To access the recording, provide\n   *  a p5.SoundFile as the first parameter. The p5.SoundRecorder\n   *  will send its recording to that p5.SoundFile for playback once\n   *  recording is complete. Optional parameters include duration\n   *  (in seconds) of the recording, and a callback function that\n   *  will be called once the complete recording has been\n   *  transfered to the p5.SoundFile.\n   *  \n   *  @method  record\n   *  @param  {p5.SoundFile}   soundFile    p5.SoundFile\n   *  @param  {Number}   [duration] Time (in seconds)\n   *  @param  {Function} [callback] The name of a function that will be\n   *                                called once the recording completes\n   */\n  p5.SoundRecorder.prototype.record = function (sFile, duration, callback) {\n    this.recording = true;\n    if (duration) {\n      this.sampleLimit = Math.round(duration * ac.sampleRate);\n    }\n    if (sFile && callback) {\n      this._callback = function () {\n        this.buffer = this._getBuffer();\n        sFile.setBuffer(this.buffer);\n        callback();\n      };\n    } else if (sFile) {\n      this._callback = function () {\n        this.buffer = this._getBuffer();\n        sFile.setBuffer(this.buffer);\n      };\n    }\n  };\n  /**\n   *  Stop the recording. Once the recording is stopped,\n   *  the results will be sent to the p5.SoundFile that\n   *  was given on .record(), and if a callback function\n   *  was provided on record, that function will be called.\n   *  \n   *  @method  stop\n   */\n  p5.SoundRecorder.prototype.stop = function () {\n    this.recording = false;\n    this._callback();\n    this._clear();\n  };\n  p5.SoundRecorder.prototype._clear = function () {\n    this._leftBuffers = [];\n    this._rightBuffers = [];\n    this.recordedSamples = 0;\n    this.sampleLimit = null;\n  };\n  /**\n   *  internal method called on audio process\n   *  \n   *  @private\n   *  @param   {AudioProcessorEvent} event \n   */\n  p5.SoundRecorder.prototype._audioprocess = function (event) {\n    if (this.recording === false) {\n      return;\n    } else if (this.recording === true) {\n      // if we are past the duration, then stop... else:\n      if (this.sampleLimit && this.recordedSamples >= this.sampleLimit) {\n        this.stop();\n      } else {\n        // get channel data\n        var left = event.inputBuffer.getChannelData(0);\n        var right = event.inputBuffer.getChannelData(1);\n        // clone the samples\n        this._leftBuffers.push(new Float32Array(left));\n        this._rightBuffers.push(new Float32Array(right));\n        this.recordedSamples += this.bufferSize;\n      }\n    }\n  };\n  p5.SoundRecorder.prototype._getBuffer = function () {\n    var buffers = [];\n    buffers.push(this._mergeBuffers(this._leftBuffers));\n    buffers.push(this._mergeBuffers(this._rightBuffers));\n    return buffers;\n  };\n  p5.SoundRecorder.prototype._mergeBuffers = function (channelBuffer) {\n    var result = new Float32Array(this.recordedSamples);\n    var offset = 0;\n    var lng = channelBuffer.length;\n    for (var i = 0; i < lng; i++) {\n      var buffer = channelBuffer[i];\n      result.set(buffer, offset);\n      offset += buffer.length;\n    }\n    return result;\n  };\n  p5.SoundRecorder.prototype.dispose = function () {\n    this._clear();\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this._callback = function () {\n    };\n    if (this.input) {\n      this.input.disconnect();\n    }\n    this.input = null;\n    this._jsNode = null;\n  };\n  /**\n   *  Save a p5.SoundFile as a .wav audio file.\n   *  \n   *  @method saveSound\n   *  @param  {p5.SoundFile} soundFile p5.SoundFile that you wish to save\n   *  @param  {String} name      name of the resulting .wav file.\n   */\n  p5.prototype.saveSound = function (soundFile, name) {\n    var leftChannel = soundFile.buffer.getChannelData(0);\n    var rightChannel = soundFile.buffer.getChannelData(1);\n    var interleaved = interleave(leftChannel, rightChannel);\n    // create the buffer and view to create the .WAV file\n    var buffer = new ArrayBuffer(44 + interleaved.length * 2);\n    var view = new DataView(buffer);\n    // write the WAV container,\n    // check spec at: https://ccrma.stanford.edu/courses/422/projects/WaveFormat/\n    // RIFF chunk descriptor\n    writeUTFBytes(view, 0, 'RIFF');\n    view.setUint32(4, 44 + interleaved.length * 2, true);\n    writeUTFBytes(view, 8, 'WAVE');\n    // FMT sub-chunk\n    writeUTFBytes(view, 12, 'fmt ');\n    view.setUint32(16, 16, true);\n    view.setUint16(20, 1, true);\n    // stereo (2 channels)\n    view.setUint16(22, 2, true);\n    view.setUint32(24, 44100, true);\n    view.setUint32(28, 44100 * 4, true);\n    view.setUint16(32, 4, true);\n    view.setUint16(34, 16, true);\n    // data sub-chunk\n    writeUTFBytes(view, 36, 'data');\n    view.setUint32(40, interleaved.length * 2, true);\n    // write the PCM samples\n    var lng = interleaved.length;\n    var index = 44;\n    var volume = 1;\n    for (var i = 0; i < lng; i++) {\n      view.setInt16(index, interleaved[i] * (32767 * volume), true);\n      index += 2;\n    }\n    p5.prototype.writeFile([view], name, 'wav');\n  };\n  // helper methods to save waves\n  function interleave(leftChannel, rightChannel) {\n    var length = leftChannel.length + rightChannel.length;\n    var result = new Float32Array(length);\n    var inputIndex = 0;\n    for (var index = 0; index < length;) {\n      result[index++] = leftChannel[inputIndex];\n      result[index++] = rightChannel[inputIndex];\n      inputIndex++;\n    }\n    return result;\n  }\n  function writeUTFBytes(view, offset, string) {\n    var lng = string.length;\n    for (var i = 0; i < lng; i++) {\n      view.setUint8(offset + i, string.charCodeAt(i));\n    }\n  }\n}(sndcore, master);\nvar peakdetect;\npeakdetect = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n   *  <p>PeakDetect works in conjunction with p5.FFT to\n   *  look for onsets in some or all of the frequency spectrum.\n   *  </p>\n   *  <p>\n   *  To use p5.PeakDetect, call <code>update</code> in the draw loop\n   *  and pass in a p5.FFT object.\n   *  </p>\n   *  <p>\n   *  You can listen for a specific part of the frequency spectrum by\n   *  setting the range between <code>freq1</code> and <code>freq2</code>.\n   *  </p>\n   *\n   *  <p><code>threshold</code> is the threshold for detecting a peak,\n   *  scaled between 0 and 1. It is logarithmic, so 0.1 is half as loud\n   *  as 1.0.</p>\n   *\n   *  <p>\n   *  The update method is meant to be run in the draw loop, and\n   *  <b>frames</b> determines how many loops must pass before\n   *  another peak can be detected.\n   *  For example, if the frameRate() = 60, you could detect the beat of a\n   *  120 beat-per-minute song with this equation:\n   *  <code> framesPerPeak = 60 / (estimatedBPM / 60 );</code>\n   *  </p>\n   *\n   *  <p>\n   *  Based on example contribtued by @b2renger, and a simple beat detection\n   *  explanation by <a *=\"\" href=\"http://www.airtightinteractive.com/2013/10/making-audio-reactive-visuals/\" target=\"_blank\">Felix Turner</a>.\n   *  </p>\n   *  \n   *  @class  p5.PeakDetect\n   *  @constructor\n   *  @param {Number} [freq1]     lowFrequency - defaults to 20Hz\n   *  @param {Number} [freq2]     highFrequency - defaults to 20000 Hz\n   *  @param {Number} [threshold] Threshold for detecting a beat between 0 and 1\n   *                            scaled logarithmically where 0.1 is 1/2 the loudness\n   *                            of 1.0. Defaults to 0.35.\n   *  @param {Number} [framesPerPeak]     Defaults to 20.\n   *  @example\n   *  <div><code>\n   *  \n   *  var cnv, soundFile, fft, peakDetect;\n   *  var ellipseWidth = 10;\n   *\n   *  function setup() {\n   *    background(0);\n   *    noStroke();\n   *    fill(255);\n   *    textAlign(CENTER);\n   *\n   *    soundFile = loadSound('assets/beat.mp3');\n   *\n   *    // p5.PeakDetect requires a p5.FFT\n   *    fft = new p5.FFT();\n   *    peakDetect = new p5.PeakDetect();\n   *\n   *  }\n   *\n   *  function draw() {\n   *    background(0);\n   *    text('click to play/pause', width/2, height/2);\n   *\n   *    // peakDetect accepts an fft post-analysis\n   *    fft.analyze();\n   *    peakDetect.update(fft);\n   *\n   *    if ( peakDetect.isDetected ) {\n   *      ellipseWidth = 50;\n   *    } else {\n   *      ellipseWidth *= 0.95;\n   *    }\n   *\n   *    ellipse(width/2, height/2, ellipseWidth, ellipseWidth);\n   *  }\n   *\n   *  // toggle play/stop when canvas is clicked\n   *  function mouseClicked() {\n   *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n   *      if (soundFile.isPlaying() ) {\n   *        soundFile.stop();\n   *      } else {\n   *        soundFile.play();\n   *      }\n   *    }\n   *  }\n   *  </code></div>\n   */\n  p5.PeakDetect = function (freq1, freq2, threshold, _framesPerPeak) {\n    var framesPerPeak;\n    // framesPerPeak determines how often to look for a beat.\n    // If a beat is provided, try to look for a beat based on bpm\n    this.framesPerPeak = _framesPerPeak || 20;\n    this.framesSinceLastPeak = 0;\n    this.decayRate = 0.95;\n    this.threshold = threshold || 0.35;\n    this.cutoff = 0;\n    // how much to increase the cutoff \n    // TO DO: document this / figure out how to make it accessible\n    this.cutoffMult = 1.5;\n    this.energy = 0;\n    this.penergy = 0;\n    // TO DO: document this property / figure out how to make it accessible\n    this.currentValue = 0;\n    /**\n     *  isDetected is set to true when a peak is detected.\n     *  \n     *  @attribute isDetected\n     *  @type {Boolean}\n     *  @default  false\n     */\n    this.isDetected = false;\n    this.f1 = freq1 || 40;\n    this.f2 = freq2 || 20000;\n    // function to call when a peak is detected\n    this._onPeak = function () {\n    };\n  };\n  /**\n   *  The update method is run in the draw loop.\n   *\n   *  Accepts an FFT object. You must call .analyze()\n   *  on the FFT object prior to updating the peakDetect\n   *  because it relies on a completed FFT analysis.\n   *\n   *  @method  update\n   *  @param  {p5.FFT} fftObject A p5.FFT object\n   */\n  p5.PeakDetect.prototype.update = function (fftObject) {\n    var nrg = this.energy = fftObject.getEnergy(this.f1, this.f2) / 255;\n    if (nrg > this.cutoff && nrg > this.threshold && nrg - this.penergy > 0) {\n      // trigger callback\n      this._onPeak();\n      this.isDetected = true;\n      // debounce\n      this.cutoff = nrg * this.cutoffMult;\n      this.framesSinceLastPeak = 0;\n    } else {\n      this.isDetected = false;\n      if (this.framesSinceLastPeak <= this.framesperpeak)=\"\" {=\"\" this.framessincelastpeak++;=\"\" }=\"\" else=\"\" this.cutoff=\"\" *=\"this.decayRate;\" this.threshold);=\"\" this.currentvalue=\"nrg;\" this.penergy=\"nrg;\" };=\"\" **=\"\" onpeak=\"\" accepts=\"\" two=\"\" arguments:=\"\" a=\"\" function=\"\" to=\"\" call=\"\" when=\"\" peak=\"\" is=\"\" detected.=\"\" the=\"\" value=\"\" of=\"\" peak,=\"\" between=\"\" 0.0=\"\" and=\"\" 1.0,=\"\" passed=\"\" callback.=\"\" @method=\"\" @param=\"\" {function}=\"\" callback=\"\" name=\"\" that=\"\" will=\"\" be=\"\" called=\"\" {object}=\"\" [val]=\"\" optional=\"\" pass=\"\" into=\"\" @example=\"\" <div=\"\"><code>\n   *  var cnv, soundFile, fft, peakDetect;\n   *  var ellipseWidth = 0;\n   *  \n   *  function setup() {\n   *    cnv = createCanvas(100,100);\n   *    textAlign(CENTER);\n   *  \n   *    soundFile = loadSound('assets/beat.mp3');\n   *    fft = new p5.FFT();\n   *    peakDetect = new p5.PeakDetect();\n   *  \n   *    setupSound();\n   *  \n   *    // when a beat is detected, call triggerBeat()\n   *    peakDetect.onPeak(triggerBeat);\n   *  }\n   *  \n   *  function draw() {\n   *    background(0);\n   *    fill(255);\n   *    text('click to play', width/2, height/2);\n   *  \n   *    fft.analyze();\n   *    peakDetect.update(fft);\n   *  \n   *    ellipseWidth *= 0.95;\n   *    ellipse(width/2, height/2, ellipseWidth, ellipseWidth);\n   *  }\n   *  \n   *  // this function is called by peakDetect.onPeak\n   *  function triggerBeat() {\n   *    ellipseWidth = 50;\n   *  }\n   *  \n   *  // mouseclick starts/stops sound\n   *  function setupSound() {\n   *    cnv.mouseClicked( function() {\n   *      if (soundFile.isPlaying() ) {\n   *        soundFile.stop();\n   *      } else {\n   *        soundFile.play();\n   *      }\n   *    });\n   *  }\n   *  </code>\n   */\n  p5.PeakDetect.prototype.onPeak = function (callback, val) {\n    var self = this;\n    self._onPeak = function () {\n      callback(self.energy, val);\n    };\n  };\n}(master);\nvar gain;\ngain = function () {\n  'use strict';\n  var p5sound = master;\n  /**\n  *  A gain node is usefull to set the relative volume of sound.\n  *  It's typically used to build mixers.   \n  *\n  *  @class p5.Gain\n  *  @constructor\n  *  @example\n  *  <div><code>\n  *\n  * // load two soundfile and crossfade beetween them\n  * var sound1,sound2;\n  * var gain1, gain2, gain3;\n  * \n  * function preload(){\n  *   soundFormats('ogg', 'mp3');\n  *   sound1 = loadSound('../_files/Damscray_-_Dancing_Tiger_01');\n  *   sound2 = loadSound('../_files/beat.mp3');\n  * }\n  *\n  * function setup() {\n  *   createCanvas(400,200);\n  *\n  *   // create a 'master' gain to which we will connect both soundfiles\n  *   gain3 = new p5.Gain();\n  *   gain3.connect();\n  *\n  *   // setup first sound for playing\n  *   sound1.rate(1);\n  *   sound1.loop();\n  *   sound1.disconnect(); // diconnect from p5 output\n  *\n  *   gain1 = new p5.Gain(); // setup a gain node\n  *   gain1.setInput(sound1); // connect the first sound to its input\n  *   gain1.connect(gain3); // connect its output to the 'master'\n  *\n  *   sound2.rate(1);\n  *   sound2.disconnect();\n  *   sound2.loop();\n  *\n  *   gain2 = new p5.Gain();\n  *   gain2.setInput(sound2);\n  *   gain2.connect(gain3);\n  *\n  * }\n  *\n  * function draw(){\n  *   background(180);\n  *  \n  *   // calculate the horizontal distance beetween the mouse and the right of the screen\n  *   var d = dist(mouseX,0,width,0);\n  *\n  *   // map the horizontal position of the mouse to values useable for volume control of sound1\n  *   var vol1 = map(mouseX,0,width,0,1); \n  *   var vol2 = 1-vol1; // when sound1 is loud, sound2 is quiet and vice versa\n  *\n  *   gain1.amp(vol1,0.5,0);\n  *   gain2.amp(vol2,0.5,0);\n  *\n  *   // map the vertical position of the mouse to values useable for 'master volume control'\n  *   var vol3 = map(mouseY,0,height,0,1); \n  *   gain3.amp(vol3,0.5,0);\n  * }\n  *</code></div>\n  *\n  */\n  p5.Gain = function () {\n    this.ac = p5sound.audiocontext;\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain();\n    // otherwise, Safari distorts\n    this.input.gain.value = 0.5;\n    this.input.connect(this.output);\n    // add  to the soundArray\n    p5sound.soundArray.push(this);\n  };\n  /**\n   *  Connect a source to the gain node.\n   *  \n   *  @method  setInput\n   *  @param  {Object} src     p5.sound / Web Audio object with a sound\n   *                           output.\n   */\n  p5.Gain.prototype.setInput = function (src) {\n    src.connect(this.input);\n  };\n  /**\n   *  Send output to a p5.sound or web audio object\n   *  \n   *  @method  connect\n   *  @param  {Object} unit\n   */\n  p5.Gain.prototype.connect = function (unit) {\n    var u = unit || p5.soundOut.input;\n    this.output.connect(u.input ? u.input : u);\n  };\n  /**\n   *  Disconnect all output.\n   *  \n   *  @method disconnect\n   */\n  p5.Gain.prototype.disconnect = function () {\n    this.output.disconnect();\n  };\n  /**\n   *  Set the output level of the gain node.\n   *  \n   *  @method  amp\n   *  @param  {Number} volume amplitude between 0 and 1.0\n   *  @param  {Number} [rampTime] create a fade that lasts rampTime \n   *  @param  {Number} [timeFromNow] schedule this event to happen\n   *                                seconds from now\n   */\n  p5.Gain.prototype.amp = function (vol, rampTime, tFromNow) {\n    var rampTime = rampTime || 0;\n    var tFromNow = tFromNow || 0;\n    var now = p5sound.audiocontext.currentTime;\n    var currentVol = this.output.gain.value;\n    this.output.gain.cancelScheduledValues(now);\n    this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n    this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n  };\n  p5.Gain.prototype.dispose = function () {\n    // remove reference from soundArray\n    var index = p5sound.soundArray.indexOf(this);\n    p5sound.soundArray.splice(index, 1);\n    this.output.disconnect();\n    this.input.disconnect();\n    this.output = undefined;\n    this.input = undefined;\n  };\n}(master, sndcore);\nvar src_app;\nsrc_app = function () {\n  'use strict';\n  var p5SOUND = sndcore;\n  return p5SOUND;\n}(sndcore, master, helpers, errorHandler, panner, soundfile, amplitude, fft, signal, oscillator, env, pulse, noise, audioin, filter, delay, reverb, metro, looper, soundRecorder, peakdetect, gain);\n}));</=></=></=></=></a></=></=></=></=></=></=></=></=></-->","date":"2016-02-11T06:07:31.000Z","updated":"2016-02-11T06:07:31.000Z","path":"libraries/p5.sound.js","layout":"false","title":"","comments":1,"_id":"cikt700v4000aafgnknm9ck4n"},{"_content":"/*! p5.js v0.4.22 February 04, 2016 */ !function(a){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=a();else if(\"function\"==typeof define&&define.amd)define([],a);else{var b;b=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,b.p5=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i=\"function\"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error(\"Cannot find module '\"+g+\"'\");throw j.code=\"MODULE_NOT_FOUND\",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f=\"function\"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){},{}],2:[function(a,b,c){\"use strict\";c.argument=function(a,b){if(!a)throw new Error(b)},c.assert=c.argument},{}],3:[function(a,b,c){\"use strict\";function d(a,b,c,d,e){a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke()}c.line=d},{}],4:[function(a,b,c){\"use strict\";function d(a){this.font=a}function e(a){this.cmap=a}function f(a,b){this.encoding=a,this.charset=b}function g(a){var b;switch(a.version){case 1:this.names=c.standardNames.slice();break;case 2:for(this.names=new Array(a.numberOfGlyphs),b=0;b<a.numberOfGlyphs;b++)a.glyphNameIndex[b]<c.standardNames.length?this.names[b]=c.standardNames[a.glyphNameIndex[b]]:this.names[b]=a.names[a.glyphNameIndex[b]-c.standardNames.length];break;case 2.5:for(this.names=new Array(a.numberOfGlyphs),b=0;b<a.numberOfGlyphs;b++)this.names[b]=c.standardNames[b+a.glyphNameIndex[b]];break;case 3:this.names=[]}}function h(a){for(var b,c=a.tables.cmap.glyphIndexMap,d=Object.keys(c),e=0;e<d.length;e+=1){var f=d[e],g=c[f];b=a.glyphs.get(g),b.addUnicode(parseInt(f))}for(e=0;e<a.glyphs.length;e+=1)b=a.glyphs.get(e),a.cffEncoding?b.name=a.cffEncoding.charset[e]:b.name=a.glyphNames.glyphIndexToName(e)}var i=[\".notdef\",\"space\",\"exclam\",\"quotedbl\",\"numbersign\",\"dollar\",\"percent\",\"ampersand\",\"quoteright\",\"parenleft\",\"parenright\",\"asterisk\",\"plus\",\"comma\",\"hyphen\",\"period\",\"slash\",\"zero\",\"one\",\"two\",\"three\",\"four\",\"five\",\"six\",\"seven\",\"eight\",\"nine\",\"colon\",\"semicolon\",\"less\",\"equal\",\"greater\",\"question\",\"at\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\",\"bracketleft\",\"backslash\",\"bracketright\",\"asciicircum\",\"underscore\",\"quoteleft\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\",\"braceleft\",\"bar\",\"braceright\",\"asciitilde\",\"exclamdown\",\"cent\",\"sterling\",\"fraction\",\"yen\",\"florin\",\"section\",\"currency\",\"quotesingle\",\"quotedblleft\",\"guillemotleft\",\"guilsinglleft\",\"guilsinglright\",\"fi\",\"fl\",\"endash\",\"dagger\",\"daggerdbl\",\"periodcentered\",\"paragraph\",\"bullet\",\"quotesinglbase\",\"quotedblbase\",\"quotedblright\",\"guillemotright\",\"ellipsis\",\"perthousand\",\"questiondown\",\"grave\",\"acute\",\"circumflex\",\"tilde\",\"macron\",\"breve\",\"dotaccent\",\"dieresis\",\"ring\",\"cedilla\",\"hungarumlaut\",\"ogonek\",\"caron\",\"emdash\",\"AE\",\"ordfeminine\",\"Lslash\",\"Oslash\",\"OE\",\"ordmasculine\",\"ae\",\"dotlessi\",\"lslash\",\"oslash\",\"oe\",\"germandbls\",\"onesuperior\",\"logicalnot\",\"mu\",\"trademark\",\"Eth\",\"onehalf\",\"plusminus\",\"Thorn\",\"onequarter\",\"divide\",\"brokenbar\",\"degree\",\"thorn\",\"threequarters\",\"twosuperior\",\"registered\",\"minus\",\"eth\",\"multiply\",\"threesuperior\",\"copyright\",\"Aacute\",\"Acircumflex\",\"Adieresis\",\"Agrave\",\"Aring\",\"Atilde\",\"Ccedilla\",\"Eacute\",\"Ecircumflex\",\"Edieresis\",\"Egrave\",\"Iacute\",\"Icircumflex\",\"Idieresis\",\"Igrave\",\"Ntilde\",\"Oacute\",\"Ocircumflex\",\"Odieresis\",\"Ograve\",\"Otilde\",\"Scaron\",\"Uacute\",\"Ucircumflex\",\"Udieresis\",\"Ugrave\",\"Yacute\",\"Ydieresis\",\"Zcaron\",\"aacute\",\"acircumflex\",\"adieresis\",\"agrave\",\"aring\",\"atilde\",\"ccedilla\",\"eacute\",\"ecircumflex\",\"edieresis\",\"egrave\",\"iacute\",\"icircumflex\",\"idieresis\",\"igrave\",\"ntilde\",\"oacute\",\"ocircumflex\",\"odieresis\",\"ograve\",\"otilde\",\"scaron\",\"uacute\",\"ucircumflex\",\"udieresis\",\"ugrave\",\"yacute\",\"ydieresis\",\"zcaron\",\"exclamsmall\",\"Hungarumlautsmall\",\"dollaroldstyle\",\"dollarsuperior\",\"ampersandsmall\",\"Acutesmall\",\"parenleftsuperior\",\"parenrightsuperior\",\"266 ff\",\"onedotenleader\",\"zerooldstyle\",\"oneoldstyle\",\"twooldstyle\",\"threeoldstyle\",\"fouroldstyle\",\"fiveoldstyle\",\"sixoldstyle\",\"sevenoldstyle\",\"eightoldstyle\",\"nineoldstyle\",\"commasuperior\",\"threequartersemdash\",\"periodsuperior\",\"questionsmall\",\"asuperior\",\"bsuperior\",\"centsuperior\",\"dsuperior\",\"esuperior\",\"isuperior\",\"lsuperior\",\"msuperior\",\"nsuperior\",\"osuperior\",\"rsuperior\",\"ssuperior\",\"tsuperior\",\"ff\",\"ffi\",\"ffl\",\"parenleftinferior\",\"parenrightinferior\",\"Circumflexsmall\",\"hyphensuperior\",\"Gravesmall\",\"Asmall\",\"Bsmall\",\"Csmall\",\"Dsmall\",\"Esmall\",\"Fsmall\",\"Gsmall\",\"Hsmall\",\"Ismall\",\"Jsmall\",\"Ksmall\",\"Lsmall\",\"Msmall\",\"Nsmall\",\"Osmall\",\"Psmall\",\"Qsmall\",\"Rsmall\",\"Ssmall\",\"Tsmall\",\"Usmall\",\"Vsmall\",\"Wsmall\",\"Xsmall\",\"Ysmall\",\"Zsmall\",\"colonmonetary\",\"onefitted\",\"rupiah\",\"Tildesmall\",\"exclamdownsmall\",\"centoldstyle\",\"Lslashsmall\",\"Scaronsmall\",\"Zcaronsmall\",\"Dieresissmall\",\"Brevesmall\",\"Caronsmall\",\"Dotaccentsmall\",\"Macronsmall\",\"figuredash\",\"hypheninferior\",\"Ogoneksmall\",\"Ringsmall\",\"Cedillasmall\",\"questiondownsmall\",\"oneeighth\",\"threeeighths\",\"fiveeighths\",\"seveneighths\",\"onethird\",\"twothirds\",\"zerosuperior\",\"foursuperior\",\"fivesuperior\",\"sixsuperior\",\"sevensuperior\",\"eightsuperior\",\"ninesuperior\",\"zeroinferior\",\"oneinferior\",\"twoinferior\",\"threeinferior\",\"fourinferior\",\"fiveinferior\",\"sixinferior\",\"seveninferior\",\"eightinferior\",\"nineinferior\",\"centinferior\",\"dollarinferior\",\"periodinferior\",\"commainferior\",\"Agravesmall\",\"Aacutesmall\",\"Acircumflexsmall\",\"Atildesmall\",\"Adieresissmall\",\"Aringsmall\",\"AEsmall\",\"Ccedillasmall\",\"Egravesmall\",\"Eacutesmall\",\"Ecircumflexsmall\",\"Edieresissmall\",\"Igravesmall\",\"Iacutesmall\",\"Icircumflexsmall\",\"Idieresissmall\",\"Ethsmall\",\"Ntildesmall\",\"Ogravesmall\",\"Oacutesmall\",\"Ocircumflexsmall\",\"Otildesmall\",\"Odieresissmall\",\"OEsmall\",\"Oslashsmall\",\"Ugravesmall\",\"Uacutesmall\",\"Ucircumflexsmall\",\"Udieresissmall\",\"Yacutesmall\",\"Thornsmall\",\"Ydieresissmall\",\"001.000\",\"001.001\",\"001.002\",\"001.003\",\"Black\",\"Bold\",\"Book\",\"Light\",\"Medium\",\"Regular\",\"Roman\",\"Semibold\"],j=[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"space\",\"exclam\",\"quotedbl\",\"numbersign\",\"dollar\",\"percent\",\"ampersand\",\"quoteright\",\"parenleft\",\"parenright\",\"asterisk\",\"plus\",\"comma\",\"hyphen\",\"period\",\"slash\",\"zero\",\"one\",\"two\",\"three\",\"four\",\"five\",\"six\",\"seven\",\"eight\",\"nine\",\"colon\",\"semicolon\",\"less\",\"equal\",\"greater\",\"question\",\"at\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\",\"bracketleft\",\"backslash\",\"bracketright\",\"asciicircum\",\"underscore\",\"quoteleft\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\",\"braceleft\",\"bar\",\"braceright\",\"asciitilde\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"exclamdown\",\"cent\",\"sterling\",\"fraction\",\"yen\",\"florin\",\"section\",\"currency\",\"quotesingle\",\"quotedblleft\",\"guillemotleft\",\"guilsinglleft\",\"guilsinglright\",\"fi\",\"fl\",\"\",\"endash\",\"dagger\",\"daggerdbl\",\"periodcentered\",\"\",\"paragraph\",\"bullet\",\"quotesinglbase\",\"quotedblbase\",\"quotedblright\",\"guillemotright\",\"ellipsis\",\"perthousand\",\"\",\"questiondown\",\"\",\"grave\",\"acute\",\"circumflex\",\"tilde\",\"macron\",\"breve\",\"dotaccent\",\"dieresis\",\"\",\"ring\",\"cedilla\",\"\",\"hungarumlaut\",\"ogonek\",\"caron\",\"emdash\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"AE\",\"\",\"ordfeminine\",\"\",\"\",\"\",\"\",\"Lslash\",\"Oslash\",\"OE\",\"ordmasculine\",\"\",\"\",\"\",\"\",\"\",\"ae\",\"\",\"\",\"\",\"dotlessi\",\"\",\"\",\"lslash\",\"oslash\",\"oe\",\"germandbls\"],k=[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"space\",\"exclamsmall\",\"Hungarumlautsmall\",\"\",\"dollaroldstyle\",\"dollarsuperior\",\"ampersandsmall\",\"Acutesmall\",\"parenleftsuperior\",\"parenrightsuperior\",\"twodotenleader\",\"onedotenleader\",\"comma\",\"hyphen\",\"period\",\"fraction\",\"zerooldstyle\",\"oneoldstyle\",\"twooldstyle\",\"threeoldstyle\",\"fouroldstyle\",\"fiveoldstyle\",\"sixoldstyle\",\"sevenoldstyle\",\"eightoldstyle\",\"nineoldstyle\",\"colon\",\"semicolon\",\"commasuperior\",\"threequartersemdash\",\"periodsuperior\",\"questionsmall\",\"\",\"asuperior\",\"bsuperior\",\"centsuperior\",\"dsuperior\",\"esuperior\",\"\",\"\",\"isuperior\",\"\",\"\",\"lsuperior\",\"msuperior\",\"nsuperior\",\"osuperior\",\"\",\"\",\"rsuperior\",\"ssuperior\",\"tsuperior\",\"\",\"ff\",\"fi\",\"fl\",\"ffi\",\"ffl\",\"parenleftinferior\",\"\",\"parenrightinferior\",\"Circumflexsmall\",\"hyphensuperior\",\"Gravesmall\",\"Asmall\",\"Bsmall\",\"Csmall\",\"Dsmall\",\"Esmall\",\"Fsmall\",\"Gsmall\",\"Hsmall\",\"Ismall\",\"Jsmall\",\"Ksmall\",\"Lsmall\",\"Msmall\",\"Nsmall\",\"Osmall\",\"Psmall\",\"Qsmall\",\"Rsmall\",\"Ssmall\",\"Tsmall\",\"Usmall\",\"Vsmall\",\"Wsmall\",\"Xsmall\",\"Ysmall\",\"Zsmall\",\"colonmonetary\",\"onefitted\",\"rupiah\",\"Tildesmall\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"exclamdownsmall\",\"centoldstyle\",\"Lslashsmall\",\"\",\"\",\"Scaronsmall\",\"Zcaronsmall\",\"Dieresissmall\",\"Brevesmall\",\"Caronsmall\",\"\",\"Dotaccentsmall\",\"\",\"\",\"Macronsmall\",\"\",\"\",\"figuredash\",\"hypheninferior\",\"\",\"\",\"Ogoneksmall\",\"Ringsmall\",\"Cedillasmall\",\"\",\"\",\"\",\"onequarter\",\"onehalf\",\"threequarters\",\"questiondownsmall\",\"oneeighth\",\"threeeighths\",\"fiveeighths\",\"seveneighths\",\"onethird\",\"twothirds\",\"\",\"\",\"zerosuperior\",\"onesuperior\",\"twosuperior\",\"threesuperior\",\"foursuperior\",\"fivesuperior\",\"sixsuperior\",\"sevensuperior\",\"eightsuperior\",\"ninesuperior\",\"zeroinferior\",\"oneinferior\",\"twoinferior\",\"threeinferior\",\"fourinferior\",\"fiveinferior\",\"sixinferior\",\"seveninferior\",\"eightinferior\",\"nineinferior\",\"centinferior\",\"dollarinferior\",\"periodinferior\",\"commainferior\",\"Agravesmall\",\"Aacutesmall\",\"Acircumflexsmall\",\"Atildesmall\",\"Adieresissmall\",\"Aringsmall\",\"AEsmall\",\"Ccedillasmall\",\"Egravesmall\",\"Eacutesmall\",\"Ecircumflexsmall\",\"Edieresissmall\",\"Igravesmall\",\"Iacutesmall\",\"Icircumflexsmall\",\"Idieresissmall\",\"Ethsmall\",\"Ntildesmall\",\"Ogravesmall\",\"Oacutesmall\",\"Ocircumflexsmall\",\"Otildesmall\",\"Odieresissmall\",\"OEsmall\",\"Oslashsmall\",\"Ugravesmall\",\"Uacutesmall\",\"Ucircumflexsmall\",\"Udieresissmall\",\"Yacutesmall\",\"Thornsmall\",\"Ydieresissmall\"],l=[\".notdef\",\".null\",\"nonmarkingreturn\",\"space\",\"exclam\",\"quotedbl\",\"numbersign\",\"dollar\",\"percent\",\"ampersand\",\"quotesingle\",\"parenleft\",\"parenright\",\"asterisk\",\"plus\",\"comma\",\"hyphen\",\"period\",\"slash\",\"zero\",\"one\",\"two\",\"three\",\"four\",\"five\",\"six\",\"seven\",\"eight\",\"nine\",\"colon\",\"semicolon\",\"less\",\"equal\",\"greater\",\"question\",\"at\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\",\"bracketleft\",\"backslash\",\"bracketright\",\"asciicircum\",\"underscore\",\"grave\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\",\"braceleft\",\"bar\",\"braceright\",\"asciitilde\",\"Adieresis\",\"Aring\",\"Ccedilla\",\"Eacute\",\"Ntilde\",\"Odieresis\",\"Udieresis\",\"aacute\",\"agrave\",\"acircumflex\",\"adieresis\",\"atilde\",\"aring\",\"ccedilla\",\"eacute\",\"egrave\",\"ecircumflex\",\"edieresis\",\"iacute\",\"igrave\",\"icircumflex\",\"idieresis\",\"ntilde\",\"oacute\",\"ograve\",\"ocircumflex\",\"odieresis\",\"otilde\",\"uacute\",\"ugrave\",\"ucircumflex\",\"udieresis\",\"dagger\",\"degree\",\"cent\",\"sterling\",\"section\",\"bullet\",\"paragraph\",\"germandbls\",\"registered\",\"copyright\",\"trademark\",\"acute\",\"dieresis\",\"notequal\",\"AE\",\"Oslash\",\"infinity\",\"plusminus\",\"lessequal\",\"greaterequal\",\"yen\",\"mu\",\"partialdiff\",\"summation\",\"product\",\"pi\",\"integral\",\"ordfeminine\",\"ordmasculine\",\"Omega\",\"ae\",\"oslash\",\"questiondown\",\"exclamdown\",\"logicalnot\",\"radical\",\"florin\",\"approxequal\",\"Delta\",\"guillemotleft\",\"guillemotright\",\"ellipsis\",\"nonbreakingspace\",\"Agrave\",\"Atilde\",\"Otilde\",\"OE\",\"oe\",\"endash\",\"emdash\",\"quotedblleft\",\"quotedblright\",\"quoteleft\",\"quoteright\",\"divide\",\"lozenge\",\"ydieresis\",\"Ydieresis\",\"fraction\",\"currency\",\"guilsinglleft\",\"guilsinglright\",\"fi\",\"fl\",\"daggerdbl\",\"periodcentered\",\"quotesinglbase\",\"quotedblbase\",\"perthousand\",\"Acircumflex\",\"Ecircumflex\",\"Aacute\",\"Edieresis\",\"Egrave\",\"Iacute\",\"Icircumflex\",\"Idieresis\",\"Igrave\",\"Oacute\",\"Ocircumflex\",\"apple\",\"Ograve\",\"Uacute\",\"Ucircumflex\",\"Ugrave\",\"dotlessi\",\"circumflex\",\"tilde\",\"macron\",\"breve\",\"dotaccent\",\"ring\",\"cedilla\",\"hungarumlaut\",\"ogonek\",\"caron\",\"Lslash\",\"lslash\",\"Scaron\",\"scaron\",\"Zcaron\",\"zcaron\",\"brokenbar\",\"Eth\",\"eth\",\"Yacute\",\"yacute\",\"Thorn\",\"thorn\",\"minus\",\"multiply\",\"onesuperior\",\"twosuperior\",\"threesuperior\",\"onehalf\",\"onequarter\",\"threequarters\",\"franc\",\"Gbreve\",\"gbreve\",\"Idotaccent\",\"Scedilla\",\"scedilla\",\"Cacute\",\"cacute\",\"Ccaron\",\"ccaron\",\"dcroat\"];d.prototype.charToGlyphIndex=function(a){var b=a.charCodeAt(0),c=this.font.glyphs;if(!c)return null;for(var d=0;d<c.length;d+=1)for(var e=c.get(d),f=0;f<e.unicodes.length;f+=1)if(e.unicodes[f]===b)return d},e.prototype.charToGlyphIndex=function(a){return this.cmap.glyphIndexMap[a.charCodeAt(0)]||0},f.prototype.charToGlyphIndex=function(a){var b=a.charCodeAt(0),c=this.encoding[b];return this.charset.indexOf(c)},g.prototype.nameToGlyphIndex=function(a){return this.names.indexOf(a)},g.prototype.glyphIndexToName=function(a){return this.names[a]},c.cffStandardStrings=i,c.cffStandardEncoding=j,c.cffExpertEncoding=k,c.standardNames=l,c.DefaultEncoding=d,c.CmapEncoding=e,c.CffEncoding=f,c.GlyphNames=g,c.addGlyphNames=h},{}],5:[function(a,b,c){\"use strict\";function d(a){a=a||{},this.names={fontFamily:{en:a.familyName||\" \"},fontSubfamily:{en:a.styleName||\" \"},designer:{en:a.designer||\" \"},designerURL:{en:a.designerURL||\" \"},manufacturer:{en:a.manufacturer||\" \"},manufacturerURL:{en:a.manufacturerURL||\" \"},license:{en:a.license||\" \"},licenseURL:{en:a.licenseURL||\" \"},version:{en:a.version||\"Version 0.1\"},description:{en:a.description||\" \"},copyright:{en:a.copyright||\" \"},trademark:{en:a.trademark||\" \"}},this.unitsPerEm=a.unitsPerEm||1e3,this.ascender=a.ascender,this.descender=a.descender,this.supported=!0,this.glyphs=new h.GlyphSet(this,a.glyphs||[]),this.encoding=new g.DefaultEncoding(this),this.tables={}}var e=a(\"./path\"),f=a(\"./tables/sfnt\"),g=a(\"./encoding\"),h=a(\"./glyphset\");d.prototype.hasChar=function(a){return null!==this.encoding.charToGlyphIndex(a)},d.prototype.charToGlyphIndex=function(a){return this.encoding.charToGlyphIndex(a)},d.prototype.charToGlyph=function(a){var b=this.charToGlyphIndex(a),c=this.glyphs.get(b);return c||(c=this.glyphs.get(0)),c},d.prototype.stringToGlyphs=function(a){for(var b=[],c=0;c<a.length;c+=1){var d=a[c];b.push(this.charToGlyph(d))}return b},d.prototype.nameToGlyphIndex=function(a){return this.glyphNames.nameToGlyphIndex(a)},d.prototype.nameToGlyph=function(a){var b=this.nametoGlyphIndex(a),c=this.glyphs.get(b);return c||(c=this.glyphs.get(0)),c},d.prototype.glyphIndexToName=function(a){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(a):\"\"},d.prototype.getKerningValue=function(a,b){a=a.index||a,b=b.index||b;var c=this.getGposKerningValue;return c?c(a,b):this.kerningPairs[a+\",\"+b]||0},d.prototype.forEachGlyph=function(a,b,c,d,e,f){b=void 0!==b?b:0,c=void 0!==c?c:0,d=void 0!==d?d:72,e=e||{};for(var g=void 0===e.kerning?!0:e.kerning,h=1/this.unitsPerEm*d,i=this.stringToGlyphs(a),j=0;j<i.length;j+=1){var k=i[j];if(f(k,b,c,d,e),k.advanceWidth&&(b+=k.advanceWidth*h),g&&j<i.length-1){var l=this.getKerningValue(k,i[j+1]);b+=l*h}}},d.prototype.getPath=function(a,b,c,d,f){var g=new e.Path;return this.forEachGlyph(a,b,c,d,f,function(a,b,c,d){var e=a.getPath(b,c,d);g.extend(e)}),g},d.prototype.draw=function(a,b,c,d,e,f){this.getPath(b,c,d,e,f).draw(a)},d.prototype.drawPoints=function(a,b,c,d,e,f){this.forEachGlyph(b,c,d,e,f,function(b,c,d,e){b.drawPoints(a,c,d,e)})},d.prototype.drawMetrics=function(a,b,c,d,e,f){this.forEachGlyph(b,c,d,e,f,function(b,c,d,e){b.drawMetrics(a,c,d,e)})},d.prototype.getEnglishName=function(a){var b=this.names[a];return b?b.en:void 0},d.prototype.validate=function(){function a(a,b){a||c.push(b)}function b(b){var c=d.getEnglishName(b);a(c&&c.trim().length>0,\"No English \"+b+\" specified.\")}var c=[],d=this;b(\"fontFamily\"),b(\"weightName\"),b(\"manufacturer\"),b(\"copyright\"),b(\"version\"),a(this.unitsPerEm>0,\"No unitsPerEm specified.\")},d.prototype.toTables=function(){return f.fontToTable(this)},d.prototype.toBuffer=function(){for(var a=this.toTables(),b=a.encode(),c=new ArrayBuffer(b.length),d=new Uint8Array(c),e=0;e<b.length;e++)d[e]=b[e];return c},d.prototype.download=function(){var a=this.getEnglishName(\"fontFamily\"),b=this.getEnglishName(\"fontSubfamily\"),c=a.replace(/\\s/g,\"\")+\"-\"+b+\".otf\",d=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,d.byteLength,function(a){a.root.getFile(c,{create:!0},function(a){a.createWriter(function(b){var c=new DataView(d),e=new Blob([c],{type:\"font/opentype\"});b.write(e),b.addEventListener(\"writeend\",function(){location.href=a.toURL()},!1)})})},function(a){throw a})},c.Font=d},{\"./encoding\":4,\"./glyphset\":7,\"./path\":10,\"./tables/sfnt\":27}],6:[function(a,b,c){\"use strict\";function d(a,b){var c=b||{commands:[]};return{configurable:!0,get:function(){return\"function\"==typeof c&&(c=c()),c},set:function(a){c=a}}}function e(a){this.bindConstructorValues(a)}var f=a(\"./check\"),g=a(\"./draw\"),h=a(\"./path\");e.prototype.bindConstructorValues=function(a){this.index=a.index||0,this.name=a.name||null,this.unicode=a.unicode||void 0,this.unicodes=a.unicodes||void 0!==a.unicode?[a.unicode]:[],a.xMin&&(this.xMin=a.xMin),a.yMin&&(this.yMin=a.yMin),a.xMax&&(this.xMax=a.xMax),a.yMax&&(this.yMax=a.yMax),a.advanceWidth&&(this.advanceWidth=a.advanceWidth),Object.defineProperty(this,\"path\",d(this,a.path))},e.prototype.addUnicode=function(a){0===this.unicodes.length&&(this.unicode=a),this.unicodes.push(a)},e.prototype.getPath=function(a,b,c){a=void 0!==a?a:0,b=void 0!==b?b:0,c=void 0!==c?c:72;for(var d=1/this.path.unitsPerEm*c,e=new h.Path,f=this.path.commands,g=0;g<f.length;g+=1){var i=f[g];\"M\"===i.type?e.moveTo(a+i.x*d,b+-i.y*d):\"L\"===i.type?e.lineTo(a+i.x*d,b+-i.y*d):\"Q\"===i.type?e.quadraticCurveTo(a+i.x1*d,b+-i.y1*d,a+i.x*d,b+-i.y*d):\"C\"===i.type?e.curveTo(a+i.x1*d,b+-i.y1*d,a+i.x2*d,b+-i.y2*d,a+i.x*d,b+-i.y*d):\"Z\"===i.type&&e.closePath()}return e},e.prototype.getContours=function(){if(void 0===this.points)return[];for(var a=[],b=[],c=0;c<this.points.length;c+=1){var d=this.points[c];b.push(d),d.lastPointOfContour&&(a.push(b),b=[])}return f.argument(0===b.length,\"There are still points left in the current contour.\"),a},e.prototype.getMetrics=function(){for(var a=this.path.commands,b=[],c=[],d=0;d<a.length;d+=1){var e=a[d];\"Z\"!==e.type&&(b.push(e.x),c.push(e.y)),(\"Q\"===e.type||\"C\"===e.type)&&(b.push(e.x1),c.push(e.y1)),\"C\"===e.type&&(b.push(e.x2),c.push(e.y2))}var f={xMin:Math.min.apply(null,b),yMin:Math.min.apply(null,c),xMax:Math.max.apply(null,b),yMax:Math.max.apply(null,c),leftSideBearing:0};return f.rightSideBearing=this.advanceWidth-f.leftSideBearing-(f.xMax-f.xMin),f},e.prototype.draw=function(a,b,c,d){this.getPath(b,c,d).draw(a)},e.prototype.drawPoints=function(a,b,c,d){function e(b,c,d,e){var f=2*Math.PI;a.beginPath();for(var g=0;g<b.length;g+=1)a.moveTo(c+b[g].x*e,d+b[g].y*e),a.arc(c+b[g].x*e,d+b[g].y*e,2,0,f,!1);a.closePath(),a.fill()}b=void 0!==b?b:0,c=void 0!==c?c:0,d=void 0!==d?d:24;for(var f=1/this.path.unitsPerEm*d,g=[],h=[],i=this.path,j=0;j<i.commands.length;j+=1){var k=i.commands[j];void 0!==k.x&&g.push({x:k.x,y:-k.y}),void 0!==k.x1&&h.push({x:k.x1,y:-k.y1}),void 0!==k.x2&&h.push({x:k.x2,y:-k.y2})}a.fillStyle=\"blue\",e(g,b,c,f),a.fillStyle=\"red\",e(h,b,c,f)},e.prototype.drawMetrics=function(a,b,c,d){var e;b=void 0!==b?b:0,c=void 0!==c?c:0,d=void 0!==d?d:24,e=1/this.path.unitsPerEm*d,a.lineWidth=1,a.strokeStyle=\"black\",g.line(a,b,-1e4,b,1e4),g.line(a,-1e4,c,1e4,c);var f=this.xMin||0,h=this.yMin||0,i=this.xMax||0,j=this.yMax||0,k=this.advanceWidth||0;a.strokeStyle=\"blue\",g.line(a,b+f*e,-1e4,b+f*e,1e4),g.line(a,b+i*e,-1e4,b+i*e,1e4),g.line(a,-1e4,c+-h*e,1e4,c+-h*e),g.line(a,-1e4,c+-j*e,1e4,c+-j*e),a.strokeStyle=\"green\",g.line(a,b+k*e,-1e4,b+k*e,1e4)},c.Glyph=e},{\"./check\":2,\"./draw\":3,\"./path\":10}],7:[function(a,b,c){\"use strict\";function d(a,b){if(this.font=a,this.glyphs={},Array.isArray(b))for(var c=0;c<b.length;c++)this.glyphs[c]=b[c];this.length=b&&b.length||0}function e(a,b){return new h.Glyph({index:b,font:a})}function f(a,b,c,d,e,f){return function(){var g=new h.Glyph({index:b,font:a});return g.path=function(){c(g,d,e);var b=f(a.glyphs,g);return b.unitsPerEm=a.unitsPerEm,b},g}}function g(a,b,c,d){return function(){var e=new h.Glyph({index:b,font:a});return e.path=function(){var b=c(a,e,d);return b.unitsPerEm=a.unitsPerEm,b},e}}var h=a(\"./glyph\");d.prototype.get=function(a){return\"function\"==typeof this.glyphs[a]&&(this.glyphs[a]=this.glyphs[a]()),this.glyphs[a]},d.prototype.push=function(a,b){this.glyphs[a]=b,this.length++},c.GlyphSet=d,c.glyphLoader=e,c.ttfGlyphLoader=f,c.cffGlyphLoader=g},{\"./glyph\":6}],8:[function(a,b,c){\"use strict\";function d(a){for(var b=new ArrayBuffer(a.length),c=new Uint8Array(b),d=0;d<a.length;d+=1)c[d]=a[d];return b}function e(b,c){var e=a(\"fs\");e.readFile(b,function(a,b){return a?c(a.message):void c(null,d(b))})}function f(a,b){var c=new XMLHttpRequest;c.open(\"get\",a,!0),c.responseType=\"arraybuffer\",c.onload=function(){return 200!==c.status?b(\"Font could not be loaded: \"+c.statusText):b(null,c.response)},c.send()}function g(a){var b,c,d,e,f,g,h,i,l,n,D=new k.Font,E=new DataView(a,0),F=m.getFixed(E,0);if(1===F)D.outlinesFormat=\"truetype\";else{if(F=m.getTag(E,0),\"OTTO\"!==F)throw new Error(\"Unsupported OpenType version \"+F);D.outlinesFormat=\"cff\"}for(var G=m.getUShort(E,4),H=12,I=0;G>I;I+=1){var J=m.getTag(E,H),K=m.getULong(E,H+8);switch(J){case\"cmap\":D.tables.cmap=o.parse(E,K),D.encoding=new j.CmapEncoding(D.tables.cmap);break;case\"fvar\":e=K;break;case\"head\":D.tables.head=t.parse(E,K),D.unitsPerEm=D.tables.head.unitsPerEm,b=D.tables.head.indexToLocFormat;break;case\"hhea\":D.tables.hhea=u.parse(E,K),D.ascender=D.tables.hhea.ascender,D.descender=D.tables.hhea.descender,D.numberOfHMetrics=D.tables.hhea.numberOfHMetrics;break;case\"hmtx\":h=K;break;case\"ltag\":c=x.parse(E,K);break;case\"maxp\":D.tables.maxp=z.parse(E,K),D.numGlyphs=D.tables.maxp.numGlyphs;break;case\"name\":n=K;break;case\"OS/2\":D.tables.os2=B.parse(E,K);break;case\"post\":D.tables.post=C.parse(E,K),D.glyphNames=new j.GlyphNames(D.tables.post);break;case\"glyf\":f=K;break;case\"loca\":l=K;break;case\"CFF \":d=K;break;case\"kern\":i=K;break;case\"GPOS\":g=K}H+=16}if(D.tables.name=A.parse(E,n,c),D.names=D.tables.name,f&&l){var L=0===b,M=y.parse(E,l,D.numGlyphs,L);D.glyphs=r.parse(E,f,M,D),v.parse(E,h,D.numberOfHMetrics,D.numGlyphs,D.glyphs),j.addGlyphNames(D)}else{if(!d)throw new Error(\"Font doesn't contain TrueType or CFF outlines.\");p.parse(E,d,D),j.addGlyphNames(D)}return i?D.kerningPairs=w.parse(E,i):D.kerningPairs={},g&&s.parse(E,g,D),e&&(D.tables.fvar=q.parse(E,e,D.names)),D}function h(a,b){var c=\"undefined\"==typeof window,d=c?e:f;d(a,function(a,c){if(a)return b(a);var d=g(c);return b(null,d)})}function i(b){var c=a(\"fs\"),e=c.readFileSync(b);return g(d(e))}var j=a(\"./encoding\"),k=a(\"./font\"),l=a(\"./glyph\"),m=a(\"./parse\"),n=a(\"./path\"),o=a(\"./tables/cmap\"),p=a(\"./tables/cff\"),q=a(\"./tables/fvar\"),r=a(\"./tables/glyf\"),s=a(\"./tables/gpos\"),t=a(\"./tables/head\"),u=a(\"./tables/hhea\"),v=a(\"./tables/hmtx\"),w=a(\"./tables/kern\"),x=a(\"./tables/ltag\"),y=a(\"./tables/loca\"),z=a(\"./tables/maxp\"),A=a(\"./tables/name\"),B=a(\"./tables/os2\"),C=a(\"./tables/post\");c._parse=m,c.Font=k.Font,c.Glyph=l.Glyph,c.Path=n.Path,c.parse=g,c.load=h,c.loadSync=i},{\"./encoding\":4,\"./font\":5,\"./glyph\":6,\"./parse\":9,\"./path\":10,\"./tables/cff\":12,\"./tables/cmap\":13,\"./tables/fvar\":14,\"./tables/glyf\":15,\"./tables/gpos\":16,\"./tables/head\":17,\"./tables/hhea\":18,\"./tables/hmtx\":19,\"./tables/kern\":20,\"./tables/loca\":21,\"./tables/ltag\":22,\"./tables/maxp\":23,\"./tables/name\":24,\"./tables/os2\":25,\"./tables/post\":26,fs:1}],9:[function(a,b,c){\"use strict\";function d(a,b){this.data=a,this.offset=b,this.relativeOffset=0}c.getByte=function(a,b){return a.getUint8(b)},c.getCard8=c.getByte,c.getUShort=function(a,b){return a.getUint16(b,!1)},c.getCard16=c.getUShort,c.getShort=function(a,b){return a.getInt16(b,!1)},c.getULong=function(a,b){return a.getUint32(b,!1)},c.getFixed=function(a,b){var c=a.getInt16(b,!1),d=a.getUint16(b+2,!1);return c+d/65535},c.getTag=function(a,b){for(var c=\"\",d=b;b+4>d;d+=1)c+=String.fromCharCode(a.getInt8(d));return c},c.getOffset=function(a,b,c){for(var d=0,e=0;c>e;e+=1)d<<=8,d+=a.getUint8(b+e);return d},c.getBytes=function(a,b,c){for(var d=[],e=b;c>e;e+=1)d.push(a.getUint8(e));return d},c.bytesToString=function(a){for(var b=\"\",c=0;c<a.length;c+=1)b+=String.fromCharCode(a[c]);return b};var e={\"byte\":1,uShort:2,\"short\":2,uLong:4,fixed:4,longDateTime:8,tag:4};d.prototype.parseByte=function(){var a=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a},d.prototype.parseChar=function(){var a=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a},d.prototype.parseCard8=d.prototype.parseByte,d.prototype.parseUShort=function(){var a=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a},d.prototype.parseCard16=d.prototype.parseUShort,d.prototype.parseSID=d.prototype.parseUShort,d.prototype.parseOffset16=d.prototype.parseUShort,d.prototype.parseShort=function(){var a=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a},d.prototype.parseF2Dot14=function(){var a=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,a},d.prototype.parseULong=function(){var a=c.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a},d.prototype.parseFixed=function(){var a=c.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a},d.prototype.parseOffset16List=d.prototype.parseUShortList=function(a){for(var b=new Array(a),d=this.data,e=this.offset+this.relativeOffset,f=0;a>f;f++)b[f]=c.getUShort(d,e),e+=2;return this.relativeOffset+=2*a,b},d.prototype.parseString=function(a){var b=this.data,c=this.offset+this.relativeOffset,d=\"\";this.relativeOffset+=a;for(var e=0;a>e;e++)d+=String.fromCharCode(b.getUint8(c+e));return d},d.prototype.parseTag=function(){return this.parseString(4)},d.prototype.parseLongDateTime=function(){var a=c.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,a},d.prototype.parseFixed=function(){var a=c.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a/65536},d.prototype.parseVersion=function(){var a=c.getUShort(this.data,this.offset+this.relativeOffset),b=c.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,a+b/4096/10},d.prototype.skip=function(a,b){void 0===b&&(b=1),this.relativeOffset+=e[a]*b},c.Parser=d},{}],10:[function(a,b,c){\"use strict\";function d(){this.commands=[],this.fill=\"black\",this.stroke=null,this.strokeWidth=1}d.prototype.moveTo=function(a,b){this.commands.push({type:\"M\",x:a,y:b})},d.prototype.lineTo=function(a,b){this.commands.push({type:\"L\",x:a,y:b})},d.prototype.curveTo=d.prototype.bezierCurveTo=function(a,b,c,d,e,f){this.commands.push({type:\"C\",x1:a,y1:b,x2:c,y2:d,x:e,y:f})},d.prototype.quadTo=d.prototype.quadraticCurveTo=function(a,b,c,d){this.commands.push({type:\"Q\",x1:a,y1:b,x:c,y:d})},d.prototype.close=d.prototype.closePath=function(){this.commands.push({type:\"Z\"})},d.prototype.extend=function(a){a.commands&&(a=a.commands),Array.prototype.push.apply(this.commands,a)},d.prototype.draw=function(a){a.beginPath();for(var b=0;b<this.commands.length;b+=1){var c=this.commands[b];\"M\"===c.type?a.moveTo(c.x,c.y):\"L\"===c.type?a.lineTo(c.x,c.y):\"C\"===c.type?a.bezierCurveTo(c.x1,c.y1,c.x2,c.y2,c.x,c.y):\"Q\"===c.type?a.quadraticCurveTo(c.x1,c.y1,c.x,c.y):\"Z\"===c.type&&a.closePath()}this.fill&&(a.fillStyle=this.fill,a.fill()),this.stroke&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeWidth,a.stroke())},d.prototype.toPathData=function(a){function b(b){return Math.round(b)===b?\"\"+Math.round(b):b.toFixed(a)}function c(){for(var a=\"\",c=0;c<arguments.length;c+=1){var d=arguments[c];d>=0&&c>0&&(a+=\" \"),a+=b(d)}return a}a=void 0!==a?a:2;for(var d=\"\",e=0;e<this.commands.length;e+=1){var f=this.commands[e];\"M\"===f.type?d+=\"M\"+c(f.x,f.y):\"L\"===f.type?d+=\"L\"+c(f.x,f.y):\"C\"===f.type?d+=\"C\"+c(f.x1,f.y1,f.x2,f.y2,f.x,f.y):\"Q\"===f.type?d+=\"Q\"+c(f.x1,f.y1,f.x,f.y):\"Z\"===f.type&&(d+=\"Z\")}return d},d.prototype.toSVG=function(a){var b='<path d=\"';return b+=this.toPathData(a),b+='\"',this.fill&\"black\"!==this.fill&&(b+=null===this.fill?' fill=\"none\"':' fill=\"'+this.fill+'\"'),this.stroke&&(b+=' stroke=\"'+this.stroke+'\" stroke-width=\"'+this.strokeWidth+'\"'),b+=\"/>\"},c.Path=d},{}],11:[function(a,b,c){\"use strict\";function d(a,b,c){var d;for(d=0;d<b.length;d+=1){var e=b[d];this[e.name]=e.value}if(this.tableName=a,this.fields=b,c){var f=Object.keys(c);for(d=0;d<f.length;d+=1){var g=f[d],h=c[g];void 0!==this[g]&&(this[g]=h)}}}var e=a(\"./check\"),f=a(\"./types\").encode,g=a(\"./types\").sizeOf;d.prototype.sizeOf=function(){for(var a=0,b=0;b<this.fields.length;b+=1){var c=this.fields[b],d=this[c.name];if(void 0===d&&(d=c.value),\"function\"==typeof d.sizeOf)a+=d.sizeOf();else{var f=g[c.type];e.assert(\"function\"==typeof f,\"Could not find sizeOf function for field\"+c.name),a+=f(d)}}return a},d.prototype.encode=function(){return f.TABLE(this)},c.Table=d},{\"./check\":2,\"./types\":28}],12:[function(a,b,c){\"use strict\";function d(a,b){if(a===b)return!0;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c+=1)if(!d(a[c],b[c]))return!1;return!0}return!1}function e(a,b,c){var d,e,f,g=[],h=[],i=J.getCard16(a,b);if(0!==i){var j=J.getByte(a,b+2);e=b+(i+1)*j+2;var k=b+3;for(d=0;i+1>d;d+=1)g.push(J.getOffset(a,k,j)),k+=j;f=e+g[i]}else f=b+2;for(d=0;d<g.length-1;d+=1){var l=J.getBytes(a,e+g[d],e+g[d+1]);c&&(l=c(l)),h.push(l)}return{objects:h,startOffset:b,endOffset:f}}function f(a){for(var b=\"\",c=15,d=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\".\",\"E\",\"E-\",null,\"-\"];;){var e=a.parseByte(),f=e>>4,g=15&e;if(f===c)break;if(b+=d[f],g===c)break;b+=d[g]}return parseFloat(b)}function g(a,b){var c,d,e,g;if(28===b)return c=a.parseByte(),d=a.parseByte(),c<<8|d;if(29===b)return c=a.parseByte(),d=a.parseByte(),e=a.parseByte(),g=a.parseByte(),c<<24|d<<16|e<<8|g;if(30===b)return f(a);if(b>=32&&246>=b)return b-139;if(b>=247&&250>=b)return c=a.parseByte(),256*(b-247)+c+108;if(b>=251&&254>=b)return c=a.parseByte(),256*-(b-251)-c-108;throw new Error(\"Invalid b0 \"+b)}function h(a){for(var b={},c=0;c<a.length;c+=1){var d,e=a[c][0],f=a[c][1];if(d=1===f.length?f[0]:f,b.hasOwnProperty(e))throw new Error(\"Object \"+b+\" already has key \"+e);b[e]=d}return b}function i(a,b,c){b=void 0!==b?b:0;var d=new J.Parser(a,b),e=[],f=[];for(c=void 0!==c?c:a.length;d.relativeOffset<c;){var i=d.parseByte();21>=i?(12===i&&(i=1200+d.parseByte()),e.push([i,f]),f=[]):f.push(g(d,i))}return h(e)}function j(a,b){return b=390>=b?H.cffStandardStrings[b]:a[b-391]}function k(a,b,c){for(var d={},e=0;e<b.length;e+=1){var f=b[e],g=a[f.op];void 0===g&&(g=void 0!==f.value?f.value:null),\"SID\"===f.type&&(g=j(c,g)),d[f.name]=g}return d}function l(a,b){var c={};return c.formatMajor=J.getCard8(a,b),c.formatMinor=J.getCard8(a,b+1),c.size=J.getCard8(a,b+2),c.offsetSize=J.getCard8(a,b+3),c.startOffset=b,c.endOffset=b+4,c}function m(a,b){var c=i(a,0,a.byteLength);return k(c,M,b)}function n(a,b,c,d){var e=i(a,b,c);return k(e,N,d)}function o(a,b,c,d){var e,f,g,h=new J.Parser(a,b);c-=1;var i=[\".notdef\"],k=h.parseCard8();if(0===k)for(e=0;c>e;e+=1)f=h.parseSID(),i.push(j(d,f));else if(1===k)for(;i.length<=c;)for(f=h.parseSID(),g=h.parseCard8(),e=0;g>=e;e+=1)i.push(j(d,f)),f+=1;else{if(2!==k)throw new Error(\"Unknown charset format \"+k);for(;i.length<=c;)for(f=h.parseSID(),g=h.parseCard16(),e=0;g>=e;e+=1)i.push(j(d,f)),f+=1}return i}function p(a,b,c){var d,e,f={},g=new J.Parser(a,b),h=g.parseCard8();if(0===h){var i=g.parseCard8();for(d=0;i>d;d+=1)e=g.parseCard8(),\nf[e]=d}else{if(1!==h)throw new Error(\"Unknown encoding format \"+h);var j=g.parseCard8();for(e=1,d=0;j>d;d+=1)for(var k=g.parseCard8(),l=g.parseCard8(),m=k;k+l>=m;m+=1)f[m]=e,e+=1}return new H.CffEncoding(f,c)}function q(a,b,c){function d(a,b){p&&k.closePath(),k.moveTo(a,b),p=!0}function e(){var b;b=l.length%2!==0,b&&!n&&(o=l.shift()+a.nominalWidthX),m+=l.length>>1,l.length=0,n=!0}function f(c){for(var s,t,u,v,w,x,y,z,A,B,C,D,E=0;E<c.length;){var F=c[E];switch(E+=1,F){case 1:e();break;case 3:e();break;case 4:l.length>1&&!n&&(o=l.shift()+a.nominalWidthX,n=!0),r+=l.pop(),d(q,r);break;case 5:for(;l.length>0;)q+=l.shift(),r+=l.shift(),k.lineTo(q,r);break;case 6:for(;l.length>0&&(q+=l.shift(),k.lineTo(q,r),0!==l.length);)r+=l.shift(),k.lineTo(q,r);break;case 7:for(;l.length>0&&(r+=l.shift(),k.lineTo(q,r),0!==l.length);)q+=l.shift(),k.lineTo(q,r);break;case 8:for(;l.length>0;)g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j+l.shift(),k.curveTo(g,h,i,j,q,r);break;case 10:w=l.pop()+a.subrsBias,x=a.subrs[w],x&&f(x);break;case 11:return;case 12:switch(F=c[E],E+=1,F){case 35:g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),y=i+l.shift(),z=j+l.shift(),A=y+l.shift(),B=z+l.shift(),C=A+l.shift(),D=B+l.shift(),q=C+l.shift(),r=D+l.shift(),l.shift(),k.curveTo(g,h,i,j,y,z),k.curveTo(A,B,C,D,q,r);break;case 34:g=q+l.shift(),h=r,i=g+l.shift(),j=h+l.shift(),y=i+l.shift(),z=j,A=y+l.shift(),B=j,C=A+l.shift(),D=r,q=C+l.shift(),k.curveTo(g,h,i,j,y,z),k.curveTo(A,B,C,D,q,r);break;case 36:g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),y=i+l.shift(),z=j,A=y+l.shift(),B=j,C=A+l.shift(),D=B+l.shift(),q=C+l.shift(),k.curveTo(g,h,i,j,y,z),k.curveTo(A,B,C,D,q,r);break;case 37:g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),y=i+l.shift(),z=j+l.shift(),A=y+l.shift(),B=z+l.shift(),C=A+l.shift(),D=B+l.shift(),Math.abs(C-q)>Math.abs(D-r)?q=C+l.shift():r=D+l.shift(),k.curveTo(g,h,i,j,y,z),k.curveTo(A,B,C,D,q,r);break;default:console.log(\"Glyph \"+b.index+\": unknown operator 1200\"+F),l.length=0}break;case 14:l.length>0&&!n&&(o=l.shift()+a.nominalWidthX,n=!0),p&&(k.closePath(),p=!1);break;case 18:e();break;case 19:case 20:e(),E+=m+7>>3;break;case 21:l.length>2&&!n&&(o=l.shift()+a.nominalWidthX,n=!0),r+=l.pop(),q+=l.pop(),d(q,r);break;case 22:l.length>1&&!n&&(o=l.shift()+a.nominalWidthX,n=!0),q+=l.pop(),d(q,r);break;case 23:e();break;case 24:for(;l.length>2;)g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j+l.shift(),k.curveTo(g,h,i,j,q,r);q+=l.shift(),r+=l.shift(),k.lineTo(q,r);break;case 25:for(;l.length>6;)q+=l.shift(),r+=l.shift(),k.lineTo(q,r);g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j+l.shift(),k.curveTo(g,h,i,j,q,r);break;case 26:for(l.length%2&&(q+=l.shift());l.length>0;)g=q,h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i,r=j+l.shift(),k.curveTo(g,h,i,j,q,r);break;case 27:for(l.length%2&&(r+=l.shift());l.length>0;)g=q+l.shift(),h=r,i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j,k.curveTo(g,h,i,j,q,r);break;case 28:s=c[E],t=c[E+1],l.push((s<<24|t<<16)>>16),E+=2;break;case 29:w=l.pop()+a.gsubrsBias,x=a.gsubrs[w],x&&f(x);break;case 30:for(;l.length>0&&(g=q,h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j+(1===l.length?l.shift():0),k.curveTo(g,h,i,j,q,r),0!==l.length);)g=q+l.shift(),h=r,i=g+l.shift(),j=h+l.shift(),r=j+l.shift(),q=i+(1===l.length?l.shift():0),k.curveTo(g,h,i,j,q,r);break;case 31:for(;l.length>0&&(g=q+l.shift(),h=r,i=g+l.shift(),j=h+l.shift(),r=j+l.shift(),q=i+(1===l.length?l.shift():0),k.curveTo(g,h,i,j,q,r),0!==l.length);)g=q,h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j+(1===l.length?l.shift():0),k.curveTo(g,h,i,j,q,r);break;default:32>F?console.log(\"Glyph \"+b.index+\": unknown operator \"+F):247>F?l.push(F-139):251>F?(s=c[E],E+=1,l.push(256*(F-247)+s+108)):255>F?(s=c[E],E+=1,l.push(256*-(F-251)-s-108)):(s=c[E],t=c[E+1],u=c[E+2],v=c[E+3],E+=4,l.push((s<<24|t<<16|u<<8|v)/65536))}}}var g,h,i,j,k=new K.Path,l=[],m=0,n=!1,o=a.defaultWidthX,p=!1,q=0,r=0;return f(c),b.advanceWidth=o,k}function r(a){var b;return b=a.length<1240?107:a.length<33900?1131:32768}function s(a,b,c){c.tables.cff={};var d=l(a,b),f=e(a,d.endOffset,J.bytesToString),g=e(a,f.endOffset),h=e(a,g.endOffset,J.bytesToString),i=e(a,h.endOffset);c.gsubrs=i.objects,c.gsubrsBias=r(c.gsubrs);var j=new DataView(new Uint8Array(g.objects[0]).buffer),k=m(j,h.objects);c.tables.cff.topDict=k;var s=b+k[\"private\"][1],t=n(a,s,k[\"private\"][0],h.objects);if(c.defaultWidthX=t.defaultWidthX,c.nominalWidthX=t.nominalWidthX,0!==t.subrs){var u=s+t.subrs,v=e(a,u);c.subrs=v.objects,c.subrsBias=r(c.subrs)}else c.subrs=[],c.subrsBias=0;var w=e(a,b+k.charStrings);c.nGlyphs=w.objects.length;var x=o(a,b+k.charset,c.nGlyphs,h.objects);0===k.encoding?c.cffEncoding=new H.CffEncoding(H.cffStandardEncoding,x):1===k.encoding?c.cffEncoding=new H.CffEncoding(H.cffExpertEncoding,x):c.cffEncoding=p(a,b+k.encoding,x),c.encoding=c.encoding||c.cffEncoding,c.glyphs=new I.GlyphSet(c);for(var y=0;y<c.nGlyphs;y+=1){var z=w.objects[y];c.glyphs.push(y,I.cffGlyphLoader(c,y,q,z))}}function t(a,b){var c,d=H.cffStandardStrings.indexOf(a);return d>=0&&(c=d),d=b.indexOf(a),d>=0?c=d+H.cffStandardStrings.length:(c=H.cffStandardStrings.length+b.length,b.push(a)),c}function u(){return new L.Table(\"Header\",[{name:\"major\",type:\"Card8\",value:1},{name:\"minor\",type:\"Card8\",value:0},{name:\"hdrSize\",type:\"Card8\",value:4},{name:\"major\",type:\"Card8\",value:1}])}function v(a){var b=new L.Table(\"Name INDEX\",[{name:\"names\",type:\"INDEX\",value:[]}]);b.names=[];for(var c=0;c<a.length;c+=1)b.names.push({name:\"name_\"+c,type:\"NAME\",value:a[c]});return b}function w(a,b,c){for(var e={},f=0;f<a.length;f+=1){var g=a[f],h=b[g.name];void 0===h||d(h,g.value)||(\"SID\"===g.type&&(h=t(h,c)),e[g.op]={name:g.name,type:g.type,value:h})}return e}function x(a,b){var c=new L.Table(\"Top DICT\",[{name:\"dict\",type:\"DICT\",value:{}}]);return c.dict=w(M,a,b),c}function y(a){var b=new L.Table(\"Top DICT INDEX\",[{name:\"topDicts\",type:\"INDEX\",value:[]}]);return b.topDicts=[{name:\"topDict_0\",type:\"TABLE\",value:a}],b}function z(a){var b=new L.Table(\"String INDEX\",[{name:\"strings\",type:\"INDEX\",value:[]}]);b.strings=[];for(var c=0;c<a.length;c+=1)b.strings.push({name:\"string_\"+c,type:\"STRING\",value:a[c]});return b}function A(){return new L.Table(\"Global Subr INDEX\",[{name:\"subrs\",type:\"INDEX\",value:[]}])}function B(a,b){for(var c=new L.Table(\"Charsets\",[{name:\"format\",type:\"Card8\",value:0}]),d=0;d<a.length;d+=1){var e=a[d],f=t(e,b);c.fields.push({name:\"glyph_\"+d,type:\"SID\",value:f})}return c}function C(a){var b=[],c=a.path;b.push({name:\"width\",type:\"NUMBER\",value:a.advanceWidth});for(var d=0,e=0,f=0;f<c.commands.length;f+=1){var g,h,i=c.commands[f];if(\"Q\"===i.type){var j=1/3,k=2/3;i={type:\"C\",x:i.x,y:i.y,x1:j*d+k*i.x1,y1:j*e+k*i.y1,x2:j*i.x+k*i.x1,y2:j*i.y+k*i.y1}}if(\"M\"===i.type)g=Math.round(i.x-d),h=Math.round(i.y-e),b.push({name:\"dx\",type:\"NUMBER\",value:g}),b.push({name:\"dy\",type:\"NUMBER\",value:h}),b.push({name:\"rmoveto\",type:\"OP\",value:21}),d=Math.round(i.x),e=Math.round(i.y);else if(\"L\"===i.type)g=Math.round(i.x-d),h=Math.round(i.y-e),b.push({name:\"dx\",type:\"NUMBER\",value:g}),b.push({name:\"dy\",type:\"NUMBER\",value:h}),b.push({name:\"rlineto\",type:\"OP\",value:5}),d=Math.round(i.x),e=Math.round(i.y);else if(\"C\"===i.type){var l=Math.round(i.x1-d),m=Math.round(i.y1-e),n=Math.round(i.x2-i.x1),o=Math.round(i.y2-i.y1);g=Math.round(i.x-i.x2),h=Math.round(i.y-i.y2),b.push({name:\"dx1\",type:\"NUMBER\",value:l}),b.push({name:\"dy1\",type:\"NUMBER\",value:m}),b.push({name:\"dx2\",type:\"NUMBER\",value:n}),b.push({name:\"dy2\",type:\"NUMBER\",value:o}),b.push({name:\"dx\",type:\"NUMBER\",value:g}),b.push({name:\"dy\",type:\"NUMBER\",value:h}),b.push({name:\"rrcurveto\",type:\"OP\",value:8}),d=Math.round(i.x),e=Math.round(i.y)}}return b.push({name:\"endchar\",type:\"OP\",value:14}),b}function D(a){for(var b=new L.Table(\"CharStrings INDEX\",[{name:\"charStrings\",type:\"INDEX\",value:[]}]),c=0;c<a.length;c+=1){var d=a.get(c),e=C(d);b.charStrings.push({name:d.name,type:\"CHARSTRING\",value:e})}return b}function E(a,b){var c=new L.Table(\"Private DICT\",[{name:\"dict\",type:\"DICT\",value:{}}]);return c.dict=w(N,a,b),c}function F(a){var b=new L.Table(\"Private DICT INDEX\",[{name:\"privateDicts\",type:\"INDEX\",value:[]}]);return b.privateDicts=[{name:\"privateDict_0\",type:\"TABLE\",value:a}],b}function G(a,b){for(var c,d=new L.Table(\"CFF \",[{name:\"header\",type:\"TABLE\"},{name:\"nameIndex\",type:\"TABLE\"},{name:\"topDictIndex\",type:\"TABLE\"},{name:\"stringIndex\",type:\"TABLE\"},{name:\"globalSubrIndex\",type:\"TABLE\"},{name:\"charsets\",type:\"TABLE\"},{name:\"charStringsIndex\",type:\"TABLE\"},{name:\"privateDictIndex\",type:\"TABLE\"}]),e=1/b.unitsPerEm,f={version:b.version,fullName:b.fullName,familyName:b.familyName,weight:b.weightName,fontMatrix:[e,0,0,e,0,0],charset:999,encoding:0,charStrings:999,\"private\":[0,999]},g={},h=[],i=1;i<a.length;i+=1)c=a.get(i),h.push(c.name);var j=[];d.header=u(),d.nameIndex=v([b.postScriptName]);var k=x(f,j);d.topDictIndex=y(k),d.globalSubrIndex=A(),d.charsets=B(h,j),d.charStringsIndex=D(a);var l=E(g,j);d.privateDictIndex=F(l),d.stringIndex=z(j);var m=d.header.sizeOf()+d.nameIndex.sizeOf()+d.topDictIndex.sizeOf()+d.stringIndex.sizeOf()+d.globalSubrIndex.sizeOf();return f.charset=m,f.encoding=0,f.charStrings=f.charset+d.charsets.sizeOf(),f[\"private\"][1]=f.charStrings+d.charStringsIndex.sizeOf(),k=x(f,j),d.topDictIndex=y(k),d}var H=a(\"../encoding\"),I=a(\"../glyphset\"),J=a(\"../parse\"),K=a(\"../path\"),L=a(\"../table\"),M=[{name:\"version\",op:0,type:\"SID\"},{name:\"notice\",op:1,type:\"SID\"},{name:\"copyright\",op:1200,type:\"SID\"},{name:\"fullName\",op:2,type:\"SID\"},{name:\"familyName\",op:3,type:\"SID\"},{name:\"weight\",op:4,type:\"SID\"},{name:\"isFixedPitch\",op:1201,type:\"number\",value:0},{name:\"italicAngle\",op:1202,type:\"number\",value:0},{name:\"underlinePosition\",op:1203,type:\"number\",value:-100},{name:\"underlineThickness\",op:1204,type:\"number\",value:50},{name:\"paintType\",op:1205,type:\"number\",value:0},{name:\"charstringType\",op:1206,type:\"number\",value:2},{name:\"fontMatrix\",op:1207,type:[\"real\",\"real\",\"real\",\"real\",\"real\",\"real\"],value:[.001,0,0,.001,0,0]},{name:\"uniqueId\",op:13,type:\"number\"},{name:\"fontBBox\",op:5,type:[\"number\",\"number\",\"number\",\"number\"],value:[0,0,0,0]},{name:\"strokeWidth\",op:1208,type:\"number\",value:0},{name:\"xuid\",op:14,type:[],value:null},{name:\"charset\",op:15,type:\"offset\",value:0},{name:\"encoding\",op:16,type:\"offset\",value:0},{name:\"charStrings\",op:17,type:\"offset\",value:0},{name:\"private\",op:18,type:[\"number\",\"offset\"],value:[0,0]}],N=[{name:\"subrs\",op:19,type:\"offset\",value:0},{name:\"defaultWidthX\",op:20,type:\"number\",value:0},{name:\"nominalWidthX\",op:21,type:\"number\",value:0}];c.parse=s,c.make=G},{\"../encoding\":4,\"../glyphset\":7,\"../parse\":9,\"../path\":10,\"../table\":11}],13:[function(a,b,c){\"use strict\";function d(a,b){var c,d={};d.version=i.getUShort(a,b),h.argument(0===d.version,\"cmap table version should be 0.\"),d.numTables=i.getUShort(a,b+2);var e=-1;for(c=0;c<d.numTables;c+=1){var f=i.getUShort(a,b+4+8*c),g=i.getUShort(a,b+4+8*c+2);if(3===f&&(1===g||0===g)){e=i.getULong(a,b+4+8*c+4);break}}if(-1===e)return null;var j=new i.Parser(a,b+e);d.format=j.parseUShort(),h.argument(4===d.format,\"Only format 4 cmap tables are supported.\"),d.length=j.parseUShort(),d.language=j.parseUShort();var k;d.segCount=k=j.parseUShort()>>1,j.skip(\"uShort\",3),d.glyphIndexMap={};var l=new i.Parser(a,b+e+14),m=new i.Parser(a,b+e+16+2*k),n=new i.Parser(a,b+e+16+4*k),o=new i.Parser(a,b+e+16+6*k),p=b+e+16+8*k;for(c=0;k-1>c;c+=1)for(var q,r=l.parseUShort(),s=m.parseUShort(),t=n.parseShort(),u=o.parseUShort(),v=s;r>=v;v+=1)0!==u?(p=o.offset+o.relativeOffset-2,p+=u,p+=2*(v-s),q=i.getUShort(a,p),0!==q&&(q=q+t&65535)):q=v+t&65535,d.glyphIndexMap[v]=q;return d}function e(a,b,c){a.segments.push({end:b,start:b,delta:-(b-c),offset:0})}function f(a){a.segments.push({end:65535,start:65535,delta:1,offset:0})}function g(a){var b,c=new j.Table(\"cmap\",[{name:\"version\",type:\"USHORT\",value:0},{name:\"numTables\",type:\"USHORT\",value:1},{name:\"platformID\",type:\"USHORT\",value:3},{name:\"encodingID\",type:\"USHORT\",value:1},{name:\"offset\",type:\"ULONG\",value:12},{name:\"format\",type:\"USHORT\",value:4},{name:\"length\",type:\"USHORT\",value:0},{name:\"language\",type:\"USHORT\",value:0},{name:\"segCountX2\",type:\"USHORT\",value:0},{name:\"searchRange\",type:\"USHORT\",value:0},{name:\"entrySelector\",type:\"USHORT\",value:0},{name:\"rangeShift\",type:\"USHORT\",value:0}]);for(c.segments=[],b=0;b<a.length;b+=1){for(var d=a.get(b),g=0;g<d.unicodes.length;g+=1)e(c,d.unicodes[g],b);c.segments=c.segments.sort(function(a,b){return a.start-b.start})}f(c);var h;h=c.segments.length,c.segCountX2=2*h,c.searchRange=2*Math.pow(2,Math.floor(Math.log(h)/Math.log(2))),c.entrySelector=Math.log(c.searchRange/2)/Math.log(2),c.rangeShift=c.segCountX2-c.searchRange;var i=[],k=[],l=[],m=[],n=[];for(b=0;h>b;b+=1){var o=c.segments[b];i=i.concat({name:\"end_\"+b,type:\"USHORT\",value:o.end}),k=k.concat({name:\"start_\"+b,type:\"USHORT\",value:o.start}),l=l.concat({name:\"idDelta_\"+b,type:\"SHORT\",value:o.delta}),m=m.concat({name:\"idRangeOffset_\"+b,type:\"USHORT\",value:o.offset}),void 0!==o.glyphId&&(n=n.concat({name:\"glyph_\"+b,type:\"USHORT\",value:o.glyphId}))}return c.fields=c.fields.concat(i),c.fields.push({name:\"reservedPad\",type:\"USHORT\",value:0}),c.fields=c.fields.concat(k),c.fields=c.fields.concat(l),c.fields=c.fields.concat(m),c.fields=c.fields.concat(n),c.length=14+2*i.length+2+2*k.length+2*l.length+2*m.length+2*n.length,c}var h=a(\"../check\"),i=a(\"../parse\"),j=a(\"../table\");c.parse=d,c.make=g},{\"../check\":2,\"../parse\":9,\"../table\":11}],14:[function(a,b,c){\"use strict\";function d(a,b){var c=JSON.stringify(a),d=256;for(var e in b){var f=parseInt(e);if(f&&!(256>f)){if(JSON.stringify(b[e])===c)return f;f>=d&&(d=f+1)}}return b[d]=a,d}function e(a,b){var c=d(a.name,b);return new m.Table(\"fvarAxis\",[{name:\"tag\",type:\"TAG\",value:a.tag},{name:\"minValue\",type:\"FIXED\",value:a.minValue<<16},{name:\"defaultValue\",type:\"FIXED\",value:a.defaultValue<<16},{name:\"maxValue\",type:\"FIXED\",value:a.maxValue<<16},{name:\"flags\",type:\"USHORT\",value:0},{name:\"nameID\",type:\"USHORT\",value:c}])}function f(a,b,c){var d={},e=new l.Parser(a,b);return d.tag=e.parseTag(),d.minValue=e.parseFixed(),d.defaultValue=e.parseFixed(),d.maxValue=e.parseFixed(),e.skip(\"uShort\",1),d.name=c[e.parseUShort()]||{},d}function g(a,b,c){for(var e=d(a.name,c),f=[{name:\"nameID\",type:\"USHORT\",value:e},{name:\"flags\",type:\"USHORT\",value:0}],g=0;g<b.length;++g){var h=b[g].tag;f.push({name:\"axis \"+h,type:\"FIXED\",value:a.coordinates[h]<<16})}return new m.Table(\"fvarInstance\",f)}function h(a,b,c,d){var e={},f=new l.Parser(a,b);e.name=d[f.parseUShort()]||{},f.skip(\"uShort\",1),e.coordinates={};for(var g=0;g<c.length;++g)e.coordinates[c[g].tag]=f.parseFixed();return e}function i(a,b){var c=new m.Table(\"fvar\",[{name:\"version\",type:\"ULONG\",value:65536},{name:\"offsetToData\",type:\"USHORT\",value:0},{name:\"countSizePairs\",type:\"USHORT\",value:2},{name:\"axisCount\",type:\"USHORT\",value:a.axes.length},{name:\"axisSize\",type:\"USHORT\",value:20},{name:\"instanceCount\",type:\"USHORT\",value:a.instances.length},{name:\"instanceSize\",type:\"USHORT\",value:4+4*a.axes.length}]);c.offsetToData=c.sizeOf();for(var d=0;d<a.axes.length;d++)c.fields.push({name:\"axis \"+d,type:\"TABLE\",value:e(a.axes[d],b)});for(var f=0;f<a.instances.length;f++)c.fields.push({name:\"instance \"+f,type:\"TABLE\",value:g(a.instances[f],a.axes,b)});return c}function j(a,b,c){var d=new l.Parser(a,b),e=d.parseULong();k.argument(65536===e,\"Unsupported fvar table version.\");var g=d.parseOffset16();d.skip(\"uShort\",1);for(var i=d.parseUShort(),j=d.parseUShort(),m=d.parseUShort(),n=d.parseUShort(),o=[],p=0;i>p;p++)o.push(f(a,b+g+p*j,c));for(var q=[],r=b+g+i*j,s=0;m>s;s++)q.push(h(a,r+s*n,o,c));return{axes:o,instances:q}}var k=a(\"../check\"),l=a(\"../parse\"),m=a(\"../table\");c.make=i,c.parse=j},{\"../check\":2,\"../parse\":9,\"../table\":11}],15:[function(a,b,c){\"use strict\";function d(a,b,c,d,e){var f;return(b&d)>0?(f=a.parseByte(),0===(b&e)&&(f=-f),f=c+f):f=(b&e)>0?c:c+a.parseShort(),f}function e(a,b,c){var e=new m.Parser(b,c);a.numberOfContours=e.parseShort(),a.xMin=e.parseShort(),a.yMin=e.parseShort(),a.xMax=e.parseShort(),a.yMax=e.parseShort();var f,g;if(a.numberOfContours>0){var h,i=a.endPointIndices=[];for(h=0;h<a.numberOfContours;h+=1)i.push(e.parseUShort());for(a.instructionLength=e.parseUShort(),a.instructions=[],h=0;h<a.instructionLength;h+=1)a.instructions.push(e.parseByte());var j=i[i.length-1]+1;for(f=[],h=0;j>h;h+=1)if(g=e.parseByte(),f.push(g),(8&g)>0)for(var l=e.parseByte(),n=0;l>n;n+=1)f.push(g),h+=1;if(k.argument(f.length===j,\"Bad flags.\"),i.length>0){var o,p=[];if(j>0){for(h=0;j>h;h+=1)g=f[h],o={},o.onCurve=!!(1&g),o.lastPointOfContour=i.indexOf(h)>=0,p.push(o);var q=0;for(h=0;j>h;h+=1)g=f[h],o=p[h],o.x=d(e,g,q,2,16),q=o.x;var r=0;for(h=0;j>h;h+=1)g=f[h],o=p[h],o.y=d(e,g,r,4,32),r=o.y}a.points=p}else a.points=[]}else if(0===a.numberOfContours)a.points=[];else{a.isComposite=!0,a.points=[],a.components=[];for(var s=!0;s;){f=e.parseUShort();var t={glyphIndex:e.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&f)>0?(t.dx=e.parseShort(),t.dy=e.parseShort()):(t.dx=e.parseChar(),t.dy=e.parseChar()),(8&f)>0?t.xScale=t.yScale=e.parseF2Dot14():(64&f)>0?(t.xScale=e.parseF2Dot14(),t.yScale=e.parseF2Dot14()):(128&f)>0&&(t.xScale=e.parseF2Dot14(),t.scale01=e.parseF2Dot14(),t.scale10=e.parseF2Dot14(),t.yScale=e.parseF2Dot14()),a.components.push(t),s=!!(32&f)}}}function f(a,b){for(var c=[],d=0;d<a.length;d+=1){var e=a[d],f={x:b.xScale*e.x+b.scale01*e.y+b.dx,y:b.scale10*e.x+b.yScale*e.y+b.dy,onCurve:e.onCurve,lastPointOfContour:e.lastPointOfContour};c.push(f)}return c}function g(a){for(var b=[],c=[],d=0;d<a.length;d+=1){var e=a[d];c.push(e),e.lastPointOfContour&&(b.push(c),c=[])}return k.argument(0===c.length,\"There are still points left in the current contour.\"),b}function h(a){var b=new n.Path;if(!a)return b;for(var c=g(a),d=0;d<c.length;d+=1){var e,f,h=c[d],i=h[0],j=h[h.length-1];i.onCurve?(e=null,f=!0):(i=j.onCurve?j:{x:(i.x+j.x)/2,y:(i.y+j.y)/2},e=i,f=!1),b.moveTo(i.x,i.y);for(var k=f?1:0;k<h.length;k+=1){var l=h[k],m=0===k?i:h[k-1];if(m.onCurve&&l.onCurve)b.lineTo(l.x,l.y);else if(m.onCurve&&!l.onCurve)e=l;else if(m.onCurve||l.onCurve){if(m.onCurve||!l.onCurve)throw new Error(\"Invalid state.\");b.quadraticCurveTo(e.x,e.y,l.x,l.y),e=null}else{var o={x:(m.x+l.x)/2,y:(m.y+l.y)/2};b.quadraticCurveTo(m.x,m.y,o.x,o.y),e=l}}i!==j&&(e?b.quadraticCurveTo(e.x,e.y,i.x,i.y):b.lineTo(i.x,i.y))}return b.closePath(),b}function i(a,b){if(b.isComposite)for(var c=0;c<b.components.length;c+=1){var d=b.components[c],e=a.get(d.glyphIndex);if(e.points){var g=f(e.points,d);b.points=b.points.concat(g)}}return h(b.points)}function j(a,b,c,d){var f,g=new l.GlyphSet(d);for(f=0;f<c.length-1;f+=1){var h=c[f],j=c[f+1];h!==j?g.push(f,l.ttfGlyphLoader(d,f,e,a,b+h,i)):g.push(f,l.glyphLoader(d,f))}return g}var k=a(\"../check\"),l=a(\"../glyphset\"),m=a(\"../parse\"),n=a(\"../path\");c.parse=j},{\"../check\":2,\"../glyphset\":7,\"../parse\":9,\"../path\":10}],16:[function(a,b,c){\"use strict\";function d(a,b){for(var c=new k.Parser(a,b),d=c.parseUShort(),e=[],f=0;d>f;f++)e[c.parseTag()]={offset:c.parseUShort()};return e}function e(a,b){var c=new k.Parser(a,b),d=c.parseUShort(),e=c.parseUShort();if(1===d)return c.parseUShortList(e);if(2===d){for(var f=[];e--;)for(var g=c.parseUShort(),h=c.parseUShort(),i=c.parseUShort(),j=g;h>=j;j++)f[i++]=j;return f}}function f(a,b){var c=new k.Parser(a,b),d=c.parseUShort();if(1===d){var e=c.parseUShort(),f=c.parseUShort(),g=c.parseUShortList(f);return function(a){return g[a-e]||0}}if(2===d){for(var h=c.parseUShort(),i=[],j=[],l=[],m=0;h>m;m++)i[m]=c.parseUShort(),j[m]=c.parseUShort(),l[m]=c.parseUShort();return function(a){for(var b=0,c=i.length-1;c>b;){var d=b+c+1>>1;a<i[d]?c=d-1:b=d}return i[b]<=a&&a<=j[b]?l[b]||0:0}}}function g(a,b){var c,d,g=new k.Parser(a,b),h=g.parseUShort(),i=g.parseUShort(),j=e(a,b+i),l=g.parseUShort(),m=g.parseUShort();if(4===l&&0===m){var n={};if(1===h){for(var o=g.parseUShort(),p=[],q=g.parseOffset16List(o),r=0;o>r;r++){var s=q[r],t=n[s];if(!t){t={},g.relativeOffset=s;for(var u=g.parseUShort();u--;){var v=g.parseUShort();l&&(c=g.parseShort()),m&&(d=g.parseShort()),t[v]=c}}p[j[r]]=t}return function(a,b){var c=p[a];return c?c[b]:void 0}}if(2===h){for(var w=g.parseUShort(),x=g.parseUShort(),y=g.parseUShort(),z=g.parseUShort(),A=f(a,b+w),B=f(a,b+x),C=[],D=0;y>D;D++)for(var E=C[D]=[],F=0;z>F;F++)l&&(c=g.parseShort()),m&&(d=g.parseShort()),E[F]=c;var G={};for(D=0;D<j.length;D++)G[j[D]]=1;return function(a,b){if(G[a]){var c=A(a),d=B(b),e=C[c];return e?e[d]:void 0}}}}}function h(a,b){var c=new k.Parser(a,b),d=c.parseUShort(),e=c.parseUShort(),f=16&e,h=c.parseUShort(),i=c.parseOffset16List(h),j={lookupType:d,lookupFlag:e,markFilteringSet:f?c.parseUShort():-1};if(2===d){for(var l=[],m=0;h>m;m++)l.push(g(a,b+i[m]));j.getKerningValue=function(a,b){for(var c=l.length;c--;){var d=l[c](a,b);if(void 0!==d)return d}return 0}}return j}function i(a,b,c){var e=new k.Parser(a,b),f=e.parseFixed();j.argument(1===f,\"Unsupported GPOS table version.\"),d(a,b+e.parseUShort()),d(a,b+e.parseUShort());var g=e.parseUShort();e.relativeOffset=g;for(var i=e.parseUShort(),l=e.parseOffset16List(i),m=b+g,n=0;i>n;n++){var o=h(a,m+l[n]);2!==o.lookupType||c.getGposKerningValue||(c.getGposKerningValue=o.getKerningValue)}}var j=a(\"../check\"),k=a(\"../parse\");c.parse=i},{\"../check\":2,\"../parse\":9}],17:[function(a,b,c){\"use strict\";function d(a,b){var c={},d=new g.Parser(a,b);return c.version=d.parseVersion(),c.fontRevision=Math.round(1e3*d.parseFixed())/1e3,c.checkSumAdjustment=d.parseULong(),c.magicNumber=d.parseULong(),f.argument(1594834165===c.magicNumber,\"Font header has wrong magic number.\"),c.flags=d.parseUShort(),c.unitsPerEm=d.parseUShort(),c.created=d.parseLongDateTime(),c.modified=d.parseLongDateTime(),c.xMin=d.parseShort(),c.yMin=d.parseShort(),c.xMax=d.parseShort(),c.yMax=d.parseShort(),c.macStyle=d.parseUShort(),c.lowestRecPPEM=d.parseUShort(),c.fontDirectionHint=d.parseShort(),c.indexToLocFormat=d.parseShort(),c.glyphDataFormat=d.parseShort(),c}function e(a){return new h.Table(\"head\",[{name:\"version\",type:\"FIXED\",value:65536},{name:\"fontRevision\",type:\"FIXED\",value:65536},{name:\"checkSumAdjustment\",type:\"ULONG\",value:0},{name:\"magicNumber\",type:\"ULONG\",value:1594834165},{name:\"flags\",type:\"USHORT\",value:0},{name:\"unitsPerEm\",type:\"USHORT\",value:1e3},{name:\"created\",type:\"LONGDATETIME\",value:0},{name:\"modified\",type:\"LONGDATETIME\",value:0},{name:\"xMin\",type:\"SHORT\",value:0},{name:\"yMin\",type:\"SHORT\",value:0},{name:\"xMax\",type:\"SHORT\",value:0},{name:\"yMax\",type:\"SHORT\",value:0},{name:\"macStyle\",type:\"USHORT\",value:0},{name:\"lowestRecPPEM\",type:\"USHORT\",value:0},{name:\"fontDirectionHint\",type:\"SHORT\",value:2},{name:\"indexToLocFormat\",type:\"SHORT\",value:0},{name:\"glyphDataFormat\",type:\"SHORT\",value:0}],a)}var f=a(\"../check\"),g=a(\"../parse\"),h=a(\"../table\");c.parse=d,c.make=e},{\"../check\":2,\"../parse\":9,\"../table\":11}],18:[function(a,b,c){\"use strict\";function d(a,b){var c={},d=new f.Parser(a,b);return c.version=d.parseVersion(),c.ascender=d.parseShort(),c.descender=d.parseShort(),c.lineGap=d.parseShort(),c.advanceWidthMax=d.parseUShort(),c.minLeftSideBearing=d.parseShort(),c.minRightSideBearing=d.parseShort(),c.xMaxExtent=d.parseShort(),c.caretSlopeRise=d.parseShort(),c.caretSlopeRun=d.parseShort(),c.caretOffset=d.parseShort(),d.relativeOffset+=8,c.metricDataFormat=d.parseShort(),c.numberOfHMetrics=d.parseUShort(),c}function e(a){return new g.Table(\"hhea\",[{name:\"version\",type:\"FIXED\",value:65536},{name:\"ascender\",type:\"FWORD\",value:0},{name:\"descender\",type:\"FWORD\",value:0},{name:\"lineGap\",type:\"FWORD\",value:0},{name:\"advanceWidthMax\",type:\"UFWORD\",value:0},{name:\"minLeftSideBearing\",type:\"FWORD\",value:0},{name:\"minRightSideBearing\",type:\"FWORD\",value:0},{name:\"xMaxExtent\",type:\"FWORD\",value:0},{name:\"caretSlopeRise\",type:\"SHORT\",value:1},{name:\"caretSlopeRun\",type:\"SHORT\",value:0},{name:\"caretOffset\",type:\"SHORT\",value:0},{name:\"reserved1\",type:\"SHORT\",value:0},{name:\"reserved2\",type:\"SHORT\",value:0},{name:\"reserved3\",type:\"SHORT\",value:0},{name:\"reserved4\",type:\"SHORT\",value:0},{name:\"metricDataFormat\",type:\"SHORT\",value:0},{name:\"numberOfHMetrics\",type:\"USHORT\",value:0}],a)}var f=a(\"../parse\"),g=a(\"../table\");c.parse=d,c.make=e},{\"../parse\":9,\"../table\":11}],19:[function(a,b,c){\"use strict\";function d(a,b,c,d,e){for(var g,h,i=new f.Parser(a,b),j=0;d>j;j+=1){c>j&&(g=i.parseUShort(),h=i.parseShort());var k=e.get(j);k.advanceWidth=g,k.leftSideBearing=h}}function e(a){for(var b=new g.Table(\"hmtx\",[]),c=0;c<a.length;c+=1){var d=a.get(c),e=d.advanceWidth||0,f=d.leftSideBearing||0;b.fields.push({name:\"advanceWidth_\"+c,type:\"USHORT\",value:e}),b.fields.push({name:\"leftSideBearing_\"+c,type:\"SHORT\",value:f})}return b}var f=a(\"../parse\"),g=a(\"../table\");c.parse=d,c.make=e},{\"../parse\":9,\"../table\":11}],20:[function(a,b,c){\"use strict\";function d(a,b){var c={},d=new f.Parser(a,b),g=d.parseUShort();e.argument(0===g,\"Unsupported kern table version.\"),d.skip(\"uShort\",1);var h=d.parseUShort();e.argument(0===h,\"Unsupported kern sub-table version.\"),d.skip(\"uShort\",2);var i=d.parseUShort();d.skip(\"uShort\",3);for(var j=0;i>j;j+=1){var k=d.parseUShort(),l=d.parseUShort(),m=d.parseShort();c[k+\",\"+l]=m}return c}var e=a(\"../check\"),f=a(\"../parse\");c.parse=d},{\"../check\":2,\"../parse\":9}],21:[function(a,b,c){\"use strict\";function d(a,b,c,d){for(var f=new e.Parser(a,b),g=d?f.parseUShort:f.parseULong,h=[],i=0;c+1>i;i+=1){var j=g.call(f);d&&(j*=2),h.push(j)}return h}var e=a(\"../parse\");c.parse=d},{\"../parse\":9}],22:[function(a,b,c){\"use strict\";function d(a){for(var b=new h.Table(\"ltag\",[{name:\"version\",type:\"ULONG\",value:1},{name:\"flags\",type:\"ULONG\",value:0},{name:\"numTags\",type:\"ULONG\",value:a.length}]),c=\"\",d=12+4*a.length,e=0;e<a.length;++e){var f=c.indexOf(a[e]);0>f&&(f=c.length,c+=a[e]),b.fields.push({name:\"offset \"+e,type:\"USHORT\",value:d+f}),b.fields.push({name:\"length \"+e,type:\"USHORT\",value:a[e].length})}return b.fields.push({name:\"stringPool\",type:\"CHARARRAY\",value:c}),b}function e(a,b){var c=new g.Parser(a,b),d=c.parseULong();f.argument(1===d,\"Unsupported ltag table version.\"),c.skip(\"uLong\",1);for(var e=c.parseULong(),h=[],i=0;e>i;i++){for(var j=\"\",k=b+c.parseUShort(),l=c.parseUShort(),m=k;k+l>m;++m)j+=String.fromCharCode(a.getInt8(m));h.push(j)}return h}var f=a(\"../check\"),g=a(\"../parse\"),h=a(\"../table\");c.make=d,c.parse=e},{\"../check\":2,\"../parse\":9,\"../table\":11}],23:[function(a,b,c){\"use strict\";function d(a,b){var c={},d=new f.Parser(a,b);return c.version=d.parseVersion(),c.numGlyphs=d.parseUShort(),1===c.version&&(c.maxPoints=d.parseUShort(),c.maxContours=d.parseUShort(),c.maxCompositePoints=d.parseUShort(),c.maxCompositeContours=d.parseUShort(),c.maxZones=d.parseUShort(),c.maxTwilightPoints=d.parseUShort(),c.maxStorage=d.parseUShort(),c.maxFunctionDefs=d.parseUShort(),c.maxInstructionDefs=d.parseUShort(),c.maxStackElements=d.parseUShort(),c.maxSizeOfInstructions=d.parseUShort(),c.maxComponentElements=d.parseUShort(),c.maxComponentDepth=d.parseUShort()),c}function e(a){return new g.Table(\"maxp\",[{name:\"version\",type:\"FIXED\",value:20480},{name:\"numGlyphs\",type:\"USHORT\",value:a}])}var f=a(\"../parse\"),g=a(\"../table\");c.parse=d,c.make=e},{\"../parse\":9,\"../table\":11}],24:[function(a,b,c){\"use strict\";function d(a,b,c){switch(a){case 0:if(65535===b)return\"und\";if(c)return c[b];break;case 1:return r[b];case 3:return t[b]}return void 0}function e(a,b,c){switch(a){case 0:return u;case 1:return w[c]||v[b];case 3:if(1===b||10===b)return u}return void 0}function f(a,b,c){for(var f={},g=new o.Parser(a,b),h=g.parseUShort(),i=g.parseUShort(),j=g.offset+g.parseUShort(),k=0;i>k;k++){var l=g.parseUShort(),n=g.parseUShort(),p=g.parseUShort(),r=g.parseUShort(),s=q[r]||r,t=g.parseUShort(),v=g.parseUShort(),w=d(l,p,c),x=e(l,n,p);if(void 0!==x&&void 0!==w){var y;if(y=x===u?m.UTF16(a,j+v,t):m.MACSTRING(a,j+v,t,x)){var z=f[s];void 0===z&&(z=f[s]={}),z[w]=y}}}var A=0;return 1===h&&(A=g.parseUShort()),f}function g(a){var b={};for(var c in a)b[a[c]]=parseInt(c);return b}function h(a,b,c,d,e,f){return new p.Table(\"NameRecord\",[{name:\"platformID\",type:\"USHORT\",value:a},{name:\"encodingID\",type:\"USHORT\",value:b},{name:\"languageID\",type:\"USHORT\",value:c},{name:\"nameID\",type:\"USHORT\",value:d},{name:\"length\",type:\"USHORT\",value:e},{name:\"offset\",type:\"USHORT\",value:f}])}function i(a,b){var c=a.length,d=b.length-c+1;a:for(var e=0;d>e;e++)for(;d>e;e++){for(var f=0;c>f;f++)if(b[e+f]!==a[f])continue a;return e}return-1}function j(a,b){var c=i(a,b);if(0>c){c=b.length;for(var d=0,e=a.length;e>d;++d)b.push(a[d])}return c}function k(a,b){var c,d=[],f={},i=g(q);for(var k in a){var l=i[k];void 0===l&&(l=k),c=parseInt(l),f[c]=a[k],d.push(c)}for(var m=g(r),o=g(t),u=[],v=[],w=0;w<d.length;w++){c=d[w];var x=f[c];for(var y in x){var z=x[y],A=1,B=m[y],C=s[B],D=e(A,C,B),E=n.MACSTRING(z,D);void 0===E&&(A=0,B=b.indexOf(y),0>B&&(B=b.length,b.push(y)),C=4,E=n.UTF16(z));var F=j(E,v);u.push(h(A,C,B,c,E.length,F));var G=o[y];if(void 0!==G){var H=n.UTF16(z),I=j(H,v);u.push(h(3,1,G,c,H.length,I))}}}u.sort(function(a,b){return a.platformID-b.platformID||a.encodingID-b.encodingID||a.languageID-b.languageID||a.nameID-b.nameID});for(var J=new p.Table(\"name\",[{name:\"format\",type:\"USHORT\",value:0},{name:\"count\",type:\"USHORT\",value:u.length},{name:\"stringOffset\",type:\"USHORT\",value:6+12*u.length}]),K=0;K<u.length;K++)J.fields.push({name:\"record_\"+K,type:\"TABLE\",value:u[K]});return J.fields.push({name:\"strings\",type:\"LITERAL\",value:v}),J}var l=a(\"../types\"),m=l.decode,n=l.encode,o=a(\"../parse\"),p=a(\"../table\"),q=[\"copyright\",\"fontFamily\",\"fontSubfamily\",\"uniqueID\",\"fullName\",\"version\",\"postScriptName\",\"trademark\",\"manufacturer\",\"designer\",\"description\",\"manufacturerURL\",\"designerURL\",\"licence\",\"licenceURL\",\"reserved\",\"preferredFamily\",\"preferredSubfamily\",\"compatibleFullName\",\"sampleText\",\"postScriptFindFontName\",\"wwsFamily\",\"wwsSubfamily\"],r={0:\"en\",1:\"fr\",2:\"de\",3:\"it\",4:\"nl\",5:\"sv\",6:\"es\",7:\"da\",8:\"pt\",9:\"no\",10:\"he\",11:\"ja\",12:\"ar\",13:\"fi\",14:\"el\",15:\"is\",16:\"mt\",17:\"tr\",18:\"hr\",19:\"zh-Hant\",20:\"ur\",21:\"hi\",22:\"th\",23:\"ko\",24:\"lt\",25:\"pl\",26:\"hu\",27:\"es\",28:\"lv\",29:\"se\",30:\"fo\",31:\"fa\",32:\"ru\",33:\"zh\",34:\"nl-BE\",35:\"ga\",36:\"sq\",37:\"ro\",38:\"cz\",39:\"sk\",40:\"si\",41:\"yi\",42:\"sr\",43:\"mk\",44:\"bg\",45:\"uk\",46:\"be\",47:\"uz\",48:\"kk\",49:\"az-Cyrl\",50:\"az-Arab\",51:\"hy\",52:\"ka\",53:\"mo\",54:\"ky\",55:\"tg\",56:\"tk\",57:\"mn-CN\",58:\"mn\",59:\"ps\",60:\"ks\",61:\"ku\",62:\"sd\",63:\"bo\",64:\"ne\",65:\"sa\",66:\"mr\",67:\"bn\",68:\"as\",69:\"gu\",70:\"pa\",71:\"or\",72:\"ml\",73:\"kn\",74:\"ta\",75:\"te\",76:\"si\",77:\"my\",78:\"km\",79:\"lo\",80:\"vi\",81:\"id\",82:\"tl\",83:\"ms\",84:\"ms-Arab\",85:\"am\",86:\"ti\",87:\"om\",88:\"so\",89:\"sw\",90:\"rw\",91:\"rn\",92:\"ny\",93:\"mg\",94:\"eo\",128:\"cy\",129:\"eu\",130:\"ca\",131:\"la\",132:\"qu\",133:\"gn\",134:\"ay\",135:\"tt\",136:\"ug\",137:\"dz\",138:\"jv\",139:\"su\",140:\"gl\",141:\"af\",142:\"br\",143:\"iu\",144:\"gd\",145:\"gv\",146:\"ga\",147:\"to\",148:\"el-polyton\",149:\"kl\",150:\"az\",151:\"nn\"},s={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},t={1078:\"af\",1052:\"sq\",1156:\"gsw\",1118:\"am\",5121:\"ar-DZ\",15361:\"ar-BH\",3073:\"ar\",2049:\"ar-IQ\",11265:\"ar-JO\",13313:\"ar-KW\",12289:\"ar-LB\",4097:\"ar-LY\",6145:\"ary\",8193:\"ar-OM\",16385:\"ar-QA\",1025:\"ar-SA\",10241:\"ar-SY\",7169:\"aeb\",14337:\"ar-AE\",9217:\"ar-YE\",1067:\"hy\",1101:\"as\",2092:\"az-Cyrl\",1068:\"az\",1133:\"ba\",1069:\"eu\",1059:\"be\",2117:\"bn\",1093:\"bn-IN\",\n8218:\"bs-Cyrl\",5146:\"bs\",1150:\"br\",1026:\"bg\",1027:\"ca\",3076:\"zh-HK\",5124:\"zh-MO\",2052:\"zh\",4100:\"zh-SG\",1028:\"zh-TW\",1155:\"co\",1050:\"hr\",4122:\"hr-BA\",1029:\"cs\",1030:\"da\",1164:\"prs\",1125:\"dv\",2067:\"nl-BE\",1043:\"nl\",3081:\"en-AU\",10249:\"en-BZ\",4105:\"en-CA\",9225:\"en-029\",16393:\"en-IN\",6153:\"en-IE\",8201:\"en-JM\",17417:\"en-MY\",5129:\"en-NZ\",13321:\"en-PH\",18441:\"en-SG\",7177:\"en-ZA\",11273:\"en-TT\",2057:\"en-GB\",1033:\"en\",12297:\"en-ZW\",1061:\"et\",1080:\"fo\",1124:\"fil\",1035:\"fi\",2060:\"fr-BE\",3084:\"fr-CA\",1036:\"fr\",5132:\"fr-LU\",6156:\"fr-MC\",4108:\"fr-CH\",1122:\"fy\",1110:\"gl\",1079:\"ka\",3079:\"de-AT\",1031:\"de\",5127:\"de-LI\",4103:\"de-LU\",2055:\"de-CH\",1032:\"el\",1135:\"kl\",1095:\"gu\",1128:\"ha\",1037:\"he\",1081:\"hi\",1038:\"hu\",1039:\"is\",1136:\"ig\",1057:\"id\",1117:\"iu\",2141:\"iu-Latn\",2108:\"ga\",1076:\"xh\",1077:\"zu\",1040:\"it\",2064:\"it-CH\",1041:\"ja\",1099:\"kn\",1087:\"kk\",1107:\"km\",1158:\"quc\",1159:\"rw\",1089:\"sw\",1111:\"kok\",1042:\"ko\",1088:\"ky\",1108:\"lo\",1062:\"lv\",1063:\"lt\",2094:\"dsb\",1134:\"lb\",1071:\"mk\",2110:\"ms-BN\",1086:\"ms\",1100:\"ml\",1082:\"mt\",1153:\"mi\",1146:\"arn\",1102:\"mr\",1148:\"moh\",1104:\"mn\",2128:\"mn-CN\",1121:\"ne\",1044:\"nb\",2068:\"nn\",1154:\"oc\",1096:\"or\",1123:\"ps\",1045:\"pl\",1046:\"pt\",2070:\"pt-PT\",1094:\"pa\",1131:\"qu-BO\",2155:\"qu-EC\",3179:\"qu\",1048:\"ro\",1047:\"rm\",1049:\"ru\",9275:\"smn\",4155:\"smj-NO\",5179:\"smj\",3131:\"se-FI\",1083:\"se\",2107:\"se-SE\",8251:\"sms\",6203:\"sma-NO\",7227:\"sms\",1103:\"sa\",7194:\"sr-Cyrl-BA\",3098:\"sr\",6170:\"sr-Latn-BA\",2074:\"sr-Latn\",1132:\"nso\",1074:\"tn\",1115:\"si\",1051:\"sk\",1060:\"sl\",11274:\"es-AR\",16394:\"es-BO\",13322:\"es-CL\",9226:\"es-CO\",5130:\"es-CR\",7178:\"es-DO\",12298:\"es-EC\",17418:\"es-SV\",4106:\"es-GT\",18442:\"es-HN\",2058:\"es-MX\",19466:\"es-NI\",6154:\"es-PA\",15370:\"es-PY\",10250:\"es-PE\",20490:\"es-PR\",3082:\"es\",1034:\"es\",21514:\"es-US\",14346:\"es-UY\",8202:\"es-VE\",2077:\"sv-FI\",1053:\"sv\",1114:\"syr\",1064:\"tg\",2143:\"tzm\",1097:\"ta\",1092:\"tt\",1098:\"te\",1054:\"th\",1105:\"bo\",1055:\"tr\",1090:\"tk\",1152:\"ug\",1058:\"uk\",1070:\"hsb\",1056:\"ur\",2115:\"uz-Cyrl\",1091:\"uz\",1066:\"vi\",1106:\"cy\",1160:\"wo\",1157:\"sah\",1144:\"ii\",1130:\"yo\"},u=\"utf-16\",v={0:\"macintosh\",1:\"x-mac-japanese\",2:\"x-mac-chinesetrad\",3:\"x-mac-korean\",6:\"x-mac-greek\",7:\"x-mac-cyrillic\",9:\"x-mac-devanagai\",10:\"x-mac-gurmukhi\",11:\"x-mac-gujarati\",12:\"x-mac-oriya\",13:\"x-mac-bengali\",14:\"x-mac-tamil\",15:\"x-mac-telugu\",16:\"x-mac-kannada\",17:\"x-mac-malayalam\",18:\"x-mac-sinhalese\",19:\"x-mac-burmese\",20:\"x-mac-khmer\",21:\"x-mac-thai\",22:\"x-mac-lao\",23:\"x-mac-georgian\",24:\"x-mac-armenian\",25:\"x-mac-chinesesimp\",26:\"x-mac-tibetan\",27:\"x-mac-mongolian\",28:\"x-mac-ethiopic\",29:\"x-mac-ce\",30:\"x-mac-vietnamese\",31:\"x-mac-extarabic\"},w={15:\"x-mac-icelandic\",17:\"x-mac-turkish\",18:\"x-mac-croatian\",24:\"x-mac-ce\",25:\"x-mac-ce\",26:\"x-mac-ce\",27:\"x-mac-ce\",28:\"x-mac-ce\",30:\"x-mac-icelandic\",37:\"x-mac-romanian\",38:\"x-mac-ce\",39:\"x-mac-ce\",40:\"x-mac-ce\",143:\"x-mac-inuit\",146:\"x-mac-gaelic\"};c.parse=f,c.make=k},{\"../parse\":9,\"../table\":11,\"../types\":28}],25:[function(a,b,c){\"use strict\";function d(a){for(var b=0;b<i.length;b+=1){var c=i[b];if(a>=c.begin&&a<c.end)return b}return-1}function e(a,b){var c={},d=new g.Parser(a,b);c.version=d.parseUShort(),c.xAvgCharWidth=d.parseShort(),c.usWeightClass=d.parseUShort(),c.usWidthClass=d.parseUShort(),c.fsType=d.parseUShort(),c.ySubscriptXSize=d.parseShort(),c.ySubscriptYSize=d.parseShort(),c.ySubscriptXOffset=d.parseShort(),c.ySubscriptYOffset=d.parseShort(),c.ySuperscriptXSize=d.parseShort(),c.ySuperscriptYSize=d.parseShort(),c.ySuperscriptXOffset=d.parseShort(),c.ySuperscriptYOffset=d.parseShort(),c.yStrikeoutSize=d.parseShort(),c.yStrikeoutPosition=d.parseShort(),c.sFamilyClass=d.parseShort(),c.panose=[];for(var e=0;10>e;e++)c.panose[e]=d.parseByte();return c.ulUnicodeRange1=d.parseULong(),c.ulUnicodeRange2=d.parseULong(),c.ulUnicodeRange3=d.parseULong(),c.ulUnicodeRange4=d.parseULong(),c.achVendID=String.fromCharCode(d.parseByte(),d.parseByte(),d.parseByte(),d.parseByte()),c.fsSelection=d.parseUShort(),c.usFirstCharIndex=d.parseUShort(),c.usLastCharIndex=d.parseUShort(),c.sTypoAscender=d.parseShort(),c.sTypoDescender=d.parseShort(),c.sTypoLineGap=d.parseShort(),c.usWinAscent=d.parseUShort(),c.usWinDescent=d.parseUShort(),c.version>=1&&(c.ulCodePageRange1=d.parseULong(),c.ulCodePageRange2=d.parseULong()),c.version>=2&&(c.sxHeight=d.parseShort(),c.sCapHeight=d.parseShort(),c.usDefaultChar=d.parseUShort(),c.usBreakChar=d.parseUShort(),c.usMaxContent=d.parseUShort()),c}function f(a){return new h.Table(\"OS/2\",[{name:\"version\",type:\"USHORT\",value:3},{name:\"xAvgCharWidth\",type:\"SHORT\",value:0},{name:\"usWeightClass\",type:\"USHORT\",value:0},{name:\"usWidthClass\",type:\"USHORT\",value:0},{name:\"fsType\",type:\"USHORT\",value:0},{name:\"ySubscriptXSize\",type:\"SHORT\",value:650},{name:\"ySubscriptYSize\",type:\"SHORT\",value:699},{name:\"ySubscriptXOffset\",type:\"SHORT\",value:0},{name:\"ySubscriptYOffset\",type:\"SHORT\",value:140},{name:\"ySuperscriptXSize\",type:\"SHORT\",value:650},{name:\"ySuperscriptYSize\",type:\"SHORT\",value:699},{name:\"ySuperscriptXOffset\",type:\"SHORT\",value:0},{name:\"ySuperscriptYOffset\",type:\"SHORT\",value:479},{name:\"yStrikeoutSize\",type:\"SHORT\",value:49},{name:\"yStrikeoutPosition\",type:\"SHORT\",value:258},{name:\"sFamilyClass\",type:\"SHORT\",value:0},{name:\"bFamilyType\",type:\"BYTE\",value:0},{name:\"bSerifStyle\",type:\"BYTE\",value:0},{name:\"bWeight\",type:\"BYTE\",value:0},{name:\"bProportion\",type:\"BYTE\",value:0},{name:\"bContrast\",type:\"BYTE\",value:0},{name:\"bStrokeVariation\",type:\"BYTE\",value:0},{name:\"bArmStyle\",type:\"BYTE\",value:0},{name:\"bLetterform\",type:\"BYTE\",value:0},{name:\"bMidline\",type:\"BYTE\",value:0},{name:\"bXHeight\",type:\"BYTE\",value:0},{name:\"ulUnicodeRange1\",type:\"ULONG\",value:0},{name:\"ulUnicodeRange2\",type:\"ULONG\",value:0},{name:\"ulUnicodeRange3\",type:\"ULONG\",value:0},{name:\"ulUnicodeRange4\",type:\"ULONG\",value:0},{name:\"achVendID\",type:\"CHARARRAY\",value:\"XXXX\"},{name:\"fsSelection\",type:\"USHORT\",value:0},{name:\"usFirstCharIndex\",type:\"USHORT\",value:0},{name:\"usLastCharIndex\",type:\"USHORT\",value:0},{name:\"sTypoAscender\",type:\"SHORT\",value:0},{name:\"sTypoDescender\",type:\"SHORT\",value:0},{name:\"sTypoLineGap\",type:\"SHORT\",value:0},{name:\"usWinAscent\",type:\"USHORT\",value:0},{name:\"usWinDescent\",type:\"USHORT\",value:0},{name:\"ulCodePageRange1\",type:\"ULONG\",value:0},{name:\"ulCodePageRange2\",type:\"ULONG\",value:0},{name:\"sxHeight\",type:\"SHORT\",value:0},{name:\"sCapHeight\",type:\"SHORT\",value:0},{name:\"usDefaultChar\",type:\"USHORT\",value:0},{name:\"usBreakChar\",type:\"USHORT\",value:0},{name:\"usMaxContext\",type:\"USHORT\",value:0}],a)}var g=a(\"../parse\"),h=a(\"../table\"),i=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];c.unicodeRanges=i,c.getUnicodeRange=d,c.parse=e,c.make=f},{\"../parse\":9,\"../table\":11}],26:[function(a,b,c){\"use strict\";function d(a,b){var c,d={},e=new g.Parser(a,b);switch(d.version=e.parseVersion(),d.italicAngle=e.parseFixed(),d.underlinePosition=e.parseShort(),d.underlineThickness=e.parseShort(),d.isFixedPitch=e.parseULong(),d.minMemType42=e.parseULong(),d.maxMemType42=e.parseULong(),d.minMemType1=e.parseULong(),d.maxMemType1=e.parseULong(),d.version){case 1:d.names=f.standardNames.slice();break;case 2:for(d.numberOfGlyphs=e.parseUShort(),d.glyphNameIndex=new Array(d.numberOfGlyphs),c=0;c<d.numberOfGlyphs;c++)d.glyphNameIndex[c]=e.parseUShort();for(d.names=[],c=0;c<d.numberOfGlyphs;c++)if(d.glyphNameIndex[c]>=f.standardNames.length){var h=e.parseChar();d.names.push(e.parseString(h))}break;case 2.5:for(d.numberOfGlyphs=e.parseUShort(),d.offset=new Array(d.numberOfGlyphs),c=0;c<d.numberOfGlyphs;c++)d.offset[c]=e.parseChar()}return d}function e(){return new h.Table(\"post\",[{name:\"version\",type:\"FIXED\",value:196608},{name:\"italicAngle\",type:\"FIXED\",value:0},{name:\"underlinePosition\",type:\"FWORD\",value:0},{name:\"underlineThickness\",type:\"FWORD\",value:0},{name:\"isFixedPitch\",type:\"ULONG\",value:0},{name:\"minMemType42\",type:\"ULONG\",value:0},{name:\"maxMemType42\",type:\"ULONG\",value:0},{name:\"minMemType1\",type:\"ULONG\",value:0},{name:\"maxMemType1\",type:\"ULONG\",value:0}])}var f=a(\"../encoding\"),g=a(\"../parse\"),h=a(\"../table\");c.parse=d,c.make=e},{\"../encoding\":4,\"../parse\":9,\"../table\":11}],27:[function(a,b,c){\"use strict\";function d(a){return Math.log(a)/Math.log(2)|0}function e(a){for(;a.length%4!==0;)a.push(0);for(var b=0,c=0;c<a.length;c+=4)b+=(a[c]<<24)+(a[c+1]<<16)+(a[c+2]<<8)+a[c+3];return b%=Math.pow(2,32)}function f(a,b,c,d){return new l.Table(\"Table Record\",[{name:\"tag\",type:\"TAG\",value:void 0!==a?a:\"\"},{name:\"checkSum\",type:\"ULONG\",value:void 0!==b?b:0},{name:\"offset\",type:\"ULONG\",value:void 0!==c?c:0},{name:\"length\",type:\"ULONG\",value:void 0!==d?d:0}])}function g(a){var b=new l.Table(\"sfnt\",[{name:\"version\",type:\"TAG\",value:\"OTTO\"},{name:\"numTables\",type:\"USHORT\",value:0},{name:\"searchRange\",type:\"USHORT\",value:0},{name:\"entrySelector\",type:\"USHORT\",value:0},{name:\"rangeShift\",type:\"USHORT\",value:0}]);b.tables=a,b.numTables=a.length;var c=Math.pow(2,d(b.numTables));b.searchRange=16*c,b.entrySelector=d(c),b.rangeShift=16*b.numTables-b.searchRange;for(var g=[],h=[],i=b.sizeOf()+f().sizeOf()*b.numTables;i%4!==0;)i+=1,h.push({name:\"padding\",type:\"BYTE\",value:0});for(var j=0;j<a.length;j+=1){var m=a[j];k.argument(4===m.tableName.length,\"Table name\"+m.tableName+\" is invalid.\");var n=m.sizeOf(),o=f(m.tableName,e(m.encode()),i,n);for(g.push({name:o.tag+\" Table Record\",type:\"TABLE\",value:o}),h.push({name:m.tableName+\" table\",type:\"TABLE\",value:m}),i+=n,k.argument(!isNaN(i),\"Something went wrong calculating the offset.\");i%4!==0;)i+=1,h.push({name:\"padding\",type:\"BYTE\",value:0})}return g.sort(function(a,b){return a.value.tag>b.value.tag?1:-1}),b.fields=b.fields.concat(g),b.fields=b.fields.concat(h),b}function h(a,b,c){for(var d=0;d<b.length;d+=1){var e=a.charToGlyphIndex(b[d]);if(e>0){var f=a.glyphs.get(e);return f.getMetrics()}}return c}function i(a){for(var b=0,c=0;c<a.length;c+=1)b+=a[c];return b/a.length}function j(a){for(var b,c=[],d=[],f=[],j=[],k=[],l=[],w=[],x=0,y=0,z=0,A=0,B=0,C=0;C<a.glyphs.length;C+=1){var D=a.glyphs.get(C),E=0|D.unicode;(b>E||null===b)&&(b=E),E>x&&(x=E);var F=u.getUnicodeRange(E);if(32>F)y|=1<<F;else if(64>F)z|=1<<F-32;else if(96>F)A|=1<<F-64;else{if(!(123>F))throw new Error(\"Unicode ranges bits > 123 are reserved for internal usage\");B|=1<<F-96}if(\".notdef\"!==D.name){var G=D.getMetrics();c.push(G.xMin),d.push(G.yMin),f.push(G.xMax),j.push(G.yMax),l.push(G.leftSideBearing),w.push(G.rightSideBearing),k.push(D.advanceWidth)}}var H={xMin:Math.min.apply(null,c),yMin:Math.min.apply(null,d),xMax:Math.max.apply(null,f),yMax:Math.max.apply(null,j),advanceWidthMax:Math.max.apply(null,k),advanceWidthAvg:i(k),minLeftSideBearing:Math.min.apply(null,l),maxLeftSideBearing:Math.max.apply(null,l),minRightSideBearing:Math.min.apply(null,w)};H.ascender=void 0!==a.ascender?a.ascender:H.yMax,H.descender=void 0!==a.descender?a.descender:H.yMin;var I=o.make({unitsPerEm:a.unitsPerEm,xMin:H.xMin,yMin:H.yMin,xMax:H.xMax,yMax:H.yMax}),J=p.make({ascender:H.ascender,descender:H.descender,advanceWidthMax:H.advanceWidthMax,minLeftSideBearing:H.minLeftSideBearing,minRightSideBearing:H.minRightSideBearing,xMaxExtent:H.maxLeftSideBearing+(H.xMax-H.xMin),numberOfHMetrics:a.glyphs.length}),K=s.make(a.glyphs.length),L=u.make({xAvgCharWidth:Math.round(H.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:b,usLastCharIndex:x,ulUnicodeRange1:y,ulUnicodeRange2:z,ulUnicodeRange3:A,ulUnicodeRange4:B,sTypoAscender:H.ascender,sTypoDescender:H.descender,sTypoLineGap:0,usWinAscent:H.ascender,usWinDescent:-H.descender,sxHeight:h(a,\"xyvw\",{yMax:0}).yMax,sCapHeight:h(a,\"HIKLEFJMNTZBDPRAGOQSUVWXY\",H).yMax,usBreakChar:a.hasChar(\" \")?32:0}),M=q.make(a.glyphs),N=m.make(a.glyphs),O=a.getEnglishName(\"fontFamily\"),P=a.getEnglishName(\"fontSubfamily\"),Q=O+\" \"+P,R=a.getEnglishName(\"postScriptName\");R||(R=O.replace(/\\s/g,\"\")+\"-\"+P);var S={};for(var T in a.names)S[T]=a.names[T];S.uniqueID||(S.uniqueID={en:a.getEnglishName(\"manufacturer\")+\":\"+Q}),S.postScriptName||(S.postScriptName={en:R}),S.preferredFamily||(S.preferredFamily=a.names.fontFamily),S.preferredSubfamily||(S.preferredSubfamily=a.names.fontSubfamily);var U=[],V=t.make(S,U),W=U.length>0?r.make(U):void 0,X=v.make(),Y=n.make(a.glyphs,{version:a.getEnglishName(\"version\"),fullName:Q,familyName:O,weightName:P,postScriptName:R,unitsPerEm:a.unitsPerEm}),Z=[I,J,K,L,V,N,X,Y,M];W&&Z.push(W);var $=g(Z),_=$.encode(),aa=e(_),ba=$.fields,ca=!1;for(C=0;C<ba.length;C+=1)if(\"head table\"===ba[C].name){ba[C].value.checkSumAdjustment=2981146554-aa,ca=!0;break}if(!ca)throw new Error(\"Could not find head table with checkSum to adjust.\");return $}var k=a(\"../check\"),l=a(\"../table\"),m=a(\"./cmap\"),n=a(\"./cff\"),o=a(\"./head\"),p=a(\"./hhea\"),q=a(\"./hmtx\"),r=a(\"./ltag\"),s=a(\"./maxp\"),t=a(\"./name\"),u=a(\"./os2\"),v=a(\"./post\");c.computeCheckSum=e,c.make=g,c.fontToTable=j},{\"../check\":2,\"../table\":11,\"./cff\":12,\"./cmap\":13,\"./head\":17,\"./hhea\":18,\"./hmtx\":19,\"./ltag\":22,\"./maxp\":23,\"./name\":24,\"./os2\":25,\"./post\":26}],28:[function(a,b,c){\"use strict\";function d(a){return function(){return a}}var e=a(\"./check\"),f=32768,g=2147483648,h={},i={},j={};i.BYTE=function(a){return e.argument(a>=0&&255>=a,\"Byte value should be between 0 and 255.\"),[a]},j.BYTE=d(1),i.CHAR=function(a){return[a.charCodeAt(0)]},j.CHAR=d(1),i.CHARARRAY=function(a){for(var b=[],c=0;c<a.length;c+=1)b.push(a.charCodeAt(c));return b},j.CHARARRAY=function(a){return a.length},i.USHORT=function(a){return[a>>8&255,255&a]},j.USHORT=d(2),i.SHORT=function(a){return a>=f&&(a=-(2*f-a)),[a>>8&255,255&a]},j.SHORT=d(2),i.UINT24=function(a){return[a>>16&255,a>>8&255,255&a]},j.UINT24=d(3),i.ULONG=function(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]},j.ULONG=d(4),i.LONG=function(a){return a>=g&&(a=-(2*g-a)),[a>>24&255,a>>16&255,a>>8&255,255&a]},j.LONG=d(4),i.FIXED=i.ULONG,j.FIXED=j.ULONG,i.FWORD=i.SHORT,j.FWORD=j.SHORT,i.UFWORD=i.USHORT,j.UFWORD=j.USHORT,i.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},j.LONGDATETIME=d(8),i.TAG=function(a){return e.argument(4===a.length,\"Tag should be exactly 4 ASCII characters.\"),[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]},j.TAG=d(4),i.Card8=i.BYTE,j.Card8=j.BYTE,i.Card16=i.USHORT,j.Card16=j.USHORT,i.OffSize=i.BYTE,j.OffSize=j.BYTE,i.SID=i.USHORT,j.SID=j.USHORT,i.NUMBER=function(a){return a>=-107&&107>=a?[a+139]:a>=108&&1131>=a?(a-=108,[(a>>8)+247,255&a]):a>=-1131&&-108>=a?(a=-a-108,[(a>>8)+251,255&a]):a>=-32768&&32767>=a?i.NUMBER16(a):i.NUMBER32(a)},j.NUMBER=function(a){return i.NUMBER(a).length},i.NUMBER16=function(a){return[28,a>>8&255,255&a]},j.NUMBER16=d(3),i.NUMBER32=function(a){return[29,a>>24&255,a>>16&255,a>>8&255,255&a]},j.NUMBER32=d(5),i.REAL=function(a){var b=a.toString(),c=/\\.(\\d*?)(?:9{5,20}|0{5,20})\\d{0,2}(?:e(.+)|$)/.exec(b);if(c){var d=parseFloat(\"1e\"+((c[2]?+c[2]:0)+c[1].length));b=(Math.round(a*d)/d).toString()}var e,f,g=\"\";for(e=0,f=b.length;f>e;e+=1){var h=b[e];g+=\"e\"===h?\"-\"===b[++e]?\"c\":\"b\":\".\"===h?\"a\":\"-\"===h?\"e\":h}g+=1&g.length?\"f\":\"ff\";var i=[30];for(e=0,f=g.length;f>e;e+=2)i.push(parseInt(g.substr(e,2),16));return i},j.REAL=function(a){return i.REAL(a).length},i.NAME=i.CHARARRAY,j.NAME=j.CHARARRAY,i.STRING=i.CHARARRAY,j.STRING=j.CHARARRAY,h.UTF16=function(a,b,c){for(var d=[],e=c/2,f=0;e>f;f++,b+=2)d[f]=a.getUint16(b);return String.fromCharCode.apply(null,d)},i.UTF16=function(a){for(var b=[],c=0;c<a.length;c+=1){var d=a.charCodeAt(c);b.push(d>>8&255),b.push(255&d)}return b},j.UTF16=function(a){return 2*a.length};var k={\"x-mac-croatian\":\"\",\"x-mac-cyrillic\":\"\",\"x-mac-gaelic\":\"\",\"x-mac-greek\":\"\",\"x-mac-icelandic\":\"\",\"x-mac-inuit\":\"\",\"x-mac-ce\":\"\",macintosh:\"\",\"x-mac-romanian\":\"\",\"x-mac-turkish\":\"\"};h.MACSTRING=function(a,b,c,d){var e=k[d];if(void 0===e)return void 0;for(var f=\"\",g=0;c>g;g++){var h=a.getUint8(b+g);f+=127>=h?String.fromCharCode(h):e[127&h]}return f};var l,m=\"function\"==typeof WeakMap&&new WeakMap,n=function(a){if(!l){l={};for(var b in k)l[b]=new String(b)}var c=l[a];if(void 0===c)return void 0;if(m){var d=m.get(c);if(void 0!==d)return d}var e=k[a];if(void 0===e)return void 0;for(var f={},g=0;g<e.length;g++)f[e.charCodeAt(g)]=g+128;return m&&m.set(c,f),f};i.MACSTRING=function(a,b){var c=n(b);if(void 0===c)return void 0;for(var d=[],e=0;e<a.length;e++){var f=a.charCodeAt(e);if(f>=128&&(f=c[f],void 0===f))return void 0;d.push(f)}return d},j.MACSTRING=function(a,b){var c=i.MACSTRING(a,b);return void 0!==c?c.length:0},i.INDEX=function(a){var b,c=1,d=[c],e=[],f=0;for(b=0;b<a.length;b+=1){var g=i.OBJECT(a[b]);Array.prototype.push.apply(e,g),f+=g.length,c+=g.length,d.push(c)}if(0===e.length)return[0,0];var h=[],j=1+Math.floor(Math.log(f)/Math.log(2))/8|0,k=[void 0,i.BYTE,i.USHORT,i.UINT24,i.ULONG][j];for(b=0;b<d.length;b+=1){var l=k(d[b]);Array.prototype.push.apply(h,l)}return Array.prototype.concat(i.Card16(a.length),i.OffSize(j),h,e)},j.INDEX=function(a){return i.INDEX(a).length},i.DICT=function(a){for(var b=[],c=Object.keys(a),d=c.length,e=0;d>e;e+=1){var f=parseInt(c[e],0),g=a[f];b=b.concat(i.OPERAND(g.value,g.type)),b=b.concat(i.OPERATOR(f))}return b},j.DICT=function(a){return i.DICT(a).length},i.OPERATOR=function(a){return 1200>a?[a]:[12,a-1200]},i.OPERAND=function(a,b){var c=[];if(Array.isArray(b))for(var d=0;d<b.length;d+=1)e.argument(a.length===b.length,\"Not enough arguments given for type\"+b),c=c.concat(i.OPERAND(a[d],b[d]));else if(\"SID\"===b)c=c.concat(i.NUMBER(a));else if(\"offset\"===b)c=c.concat(i.NUMBER32(a));else if(\"number\"===b)c=c.concat(i.NUMBER(a));else{if(\"real\"!==b)throw new Error(\"Unknown operand type \"+b);c=c.concat(i.REAL(a))}return c},i.OP=i.BYTE,j.OP=j.BYTE;var o=\"function\"==typeof WeakMap&&new WeakMap;i.CHARSTRING=function(a){if(o){var b=o.get(a);if(void 0!==b)return b}for(var c=[],d=a.length,e=0;d>e;e+=1){var f=a[e];c=c.concat(i[f.type](f.value))}return o&&o.set(a,c),c},j.CHARSTRING=function(a){return i.CHARSTRING(a).length},i.OBJECT=function(a){var b=i[a.type];return e.argument(void 0!==b,\"No encoding function for type \"+a.type),b(a.value)},j.OBJECT=function(a){var b=j[a.type];return e.argument(void 0!==b,\"No sizeOf function for type \"+a.type),b(a.value)},i.TABLE=function(a){for(var b=[],c=a.fields.length,d=0;c>d;d+=1){var f=a.fields[d],g=i[f.type];e.argument(void 0!==g,\"No encoding function for field type \"+f.type);var h=a[f.name];void 0===h&&(h=f.value);var j=g(h);b=b.concat(j)}return b},j.TABLE=function(a){for(var b=0,c=a.fields.length,d=0;c>d;d+=1){var f=a.fields[d],g=j[f.type];e.argument(void 0!==g,\"No sizeOf function for field type \"+f.type);var h=a[f.name];void 0===h&&(h=f.value),b+=g(h)}return b},i.LITERAL=function(a){return a},j.LITERAL=function(a){return a.length},c.decode=h,c.encode=i,c.sizeOf=j},{\"./check\":2}],29:[function(_dereq_,module,exports){!function(a,b,c){\"undefined\"!=typeof module&&module.exports?module.exports=c():\"function\"==typeof define&&define.amd?define(c):b[a]=c()}(\"reqwest\",this,function(){function succeed(a){var b=protocolRe.exec(a.url);return b=b&&b[1]||window.location.protocol,httpsRe.test(b)?twoHundo.test(a.request.status):!!a.request.response}function handleReadyState(a,b,c){return function(){return a._aborted?c(a.request):a._timedOut?c(a.request,\"Request is aborted: timeout\"):void(a.request&&4==a.request[readyState]&&(a.request.onreadystatechange=noop,succeed(a)?b(a.request):c(a.request)))}}function setHeaders(a,b){var c,d=b.headers||{};d.Accept=d.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept[\"*\"];var e=\"function\"==typeof FormData&&b.data instanceof FormData;b.crossOrigin||d[requestedWith]||(d[requestedWith]=defaultHeaders.requestedWith),d[contentType]||e||(d[contentType]=b.contentType||defaultHeaders.contentType);for(c in d)d.hasOwnProperty(c)&&\"setRequestHeader\"in a&&a.setRequestHeader(c,d[c])}function setCredentials(a,b){\"undefined\"!=typeof b.withCredentials&&\"undefined\"!=typeof a.withCredentials&&(a.withCredentials=!!b.withCredentials)}function generalCallback(a){lastValue=a}function urlappend(a,b){return a+(/\\?/.test(a)?\"&\":\"?\")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||\"callback\",g=a.jsonpCallbackName||reqwest.getcallbackPrefix(e),h=new RegExp(\"((^|\\\\?|&)\"+f+\")=([^&]+)\"),i=d.match(h),j=doc.createElement(\"script\"),k=0,l=-1!==navigator.userAgent.indexOf(\"MSIE 10.0\");return i?\"?\"===i[3]?d=d.replace(h,\"$1=\"+g):g=i[3]:d=urlappend(d,f+\"=\"+g),win[g]=generalCallback,j.type=\"text/javascript\",j.src=d,j.async=!0,\"undefined\"==typeof j.onreadystatechange||l||(j.htmlFor=j.id=\"_reqwest_\"+e),j.onload=j.onreadystatechange=function(){return j[readyState]&&\"complete\"!==j[readyState]&&\"loaded\"!==j[readyState]||k?!1:(j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),b(lastValue),lastValue=void 0,head.removeChild(j),void(k=1))},head.appendChild(j),{abort:function(){j.onload=j.onreadystatechange=null,c({},\"Request is aborted: timeout\",{}),lastValue=void 0,head.removeChild(j),k=1}}}function getRequest(a,b){var c,d=this.o,e=(d.method||\"GET\").toUpperCase(),f=\"string\"==typeof d?d:d.url,g=d.processData!==!1&&d.data&&\"string\"!=typeof d.data?reqwest.toQueryString(d.data):d.data||null,h=!1;return\"jsonp\"!=d.type&&\"GET\"!=e||!g||(f=urlappend(f,g),g=null),\"jsonp\"==d.type?handleJsonp(d,a,b,f):(c=d.xhr&&d.xhr(d)||xhr(d),c.open(e,f,d.async===!1?!1:!0),setHeaders(c,d),setCredentials(c,d),win[xDomainRequest]&&c instanceof win[xDomainRequest]?(c.onload=a,c.onerror=b,c.onprogress=function(){},h=!0):c.onreadystatechange=handleReadyState(this,a,b),d.before&&d.before(c),h?setTimeout(function(){c.send(g)},200):c.send(g),c)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){return a.match(\"json\")?\"json\":a.match(\"javascript\")?\"js\":a.match(\"text\")?\"html\":a.match(\"xml\")?\"xml\":void 0}function init(o,fn){function complete(a){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(a)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader(\"Content-Type\"));resp=\"jsonp\"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case\"json\":try{resp=win.JSON?win.JSON.parse(r):eval(\"(\"+r+\")\")}catch(err){return error(resp,\"Could not parse JSON in response\",err)}break;case\"js\":resp=eval(r);break;case\"html\":resp=r;break;case\"xml\":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(a,b,c){for(a=self.request,self._responseArgs.resp=a,self._responseArgs.msg=b,self._responseArgs.t=c,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(a,b,c);complete(a)}this.url=\"string\"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\\r?\\n/g,\"\\r\\n\"):\"\"}function serial(a,b){var c,d,e,f,g=a.name,h=a.tagName.toLowerCase(),i=function(a){a&&!a.disabled&&b(g,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(!a.disabled&&g)switch(h){case\"input\":/reset|button|image|file/i.test(a.type)||(c=/checkbox/i.test(a.type),d=/radio/i.test(a.type),e=a.value,(!(c||d)||a.checked)&&b(g,normalize(c&&\"\"===e?\"on\":e)));break;case\"textarea\":b(g,normalize(a.value));break;case\"select\":if(\"select-one\"===a.type.toLowerCase())i(a.selectedIndex>=0?a.options[a.selectedIndex]:null);else for(f=0;a.length&&f<a.length;f++)a.options[f].selected&&i(a.options[f])}}function eachFormElement(){var a,b,c=this,d=function(a,b){var d,e,f;for(d=0;d<b.length;d++)for(f=a[byTag](b[d]),e=0;e<f.length;e++)serial(f[e],c)};for(b=0;b<arguments.length;b++)a=arguments[b],/input|select|textarea/i.test(a.tagName)&&serial(a,c),d(a,[\"input\",\"select\",\"textarea\"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}function buildParams(a,b,c,d){var e,f,g,h=/\\[\\]$/;if(isArray(b))for(f=0;b&&f<b.length;f++)g=b[f],c||h.test(a)?d(a,g):buildParams(a+\"[\"+(\"object\"==typeof g?f:\"\")+\"]\",g,c,d);else if(b&&\"[object Object]\"===b.toString())for(e in b)buildParams(a+\"[\"+e+\"]\",b[e],c,d);else d(a,b)}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\\w+):\\/\\//,twoHundo=/^(20\\d|1223)$/,byTag=\"getElementsByTagName\",readyState=\"readyState\",contentType=\"Content-Type\",requestedWith=\"X-Requested-With\",head=doc[byTag](\"head\")[0],uniqid=0,callbackPrefix=\"reqwest_\"+ +new Date,lastValue,xmlHttpRequest=\"XMLHttpRequest\",xDomainRequest=\"XDomainRequest\",noop=function(){},isArray=\"function\"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:\"application/x-www-form-urlencoded\",requestedWith:xmlHttpRequest,accept:{\"*\":\"text/javascript, text/html, application/xml, text/xml, */*\",xml:\"application/xml, text/xml\",html:\"text/html\",text:\"text/plain\",json:\"application/json, text/javascript\",js:\"application/javascript, text/javascript\"}},xhr=function(a){if(a.crossOrigin===!0){var b=win[xmlHttpRequest]?new XMLHttpRequest:null;if(b&&\"withCredentials\"in b)return b;if(win[xDomainRequest])return new XDomainRequest;throw new Error(\"Browser does not support cross-origin requests\")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject(\"Microsoft.XMLHTTP\")},globalSetupOptions={dataFilter:function(a){return a}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this},\"catch\":function(a){return this.fail(a)}},reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(0===arguments.length)return\"\";var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),b=\"map\"==a?serializeHash:\"array\"==a?reqwest.serializeArray:serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a,b){var c,d,e=b||!1,f=[],g=encodeURIComponent,h=function(a,b){b=\"function\"==typeof b?b():null==b?\"\":b,f[f.length]=g(a)+\"=\"+g(b)};if(isArray(a))for(d=0;a&&d<a.length;d++)h(a[d].name,a[d].value);else for(c in a)a.hasOwnProperty(c)&&buildParams(c,a[c],e,h);return f.join(\"&\").replace(/%20/g,\"+\")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest.ajaxSetup=function(a){a=a||{};for(var b in a)globalSetupOptions[b]=a[b];\n},reqwest})},{}],30:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");a(\"./p5.Geometry3D\"),d.prototype.plane=function(a,b){a=a||50,b=b||50;var c=typeof arguments[2]===Number?arguments[2]:1,e=typeof arguments[3]===Number?arguments[3]:1,f=\"plane|\"+a+\"|\"+b+\"|\"+c+\"|\"+e;if(!this._renderer.geometryInHash(f)){var g=new d.Geometry3D,h=function(c,e){var f=2*a*c-a,g=2*b*e-b,h=0;return new d.Vector(f,g,h)};g.parametricGeometry(h,c,e);var i=g.generateObj();this._renderer.initBuffer(f,[i])}this._renderer.drawBuffer(f)},d.prototype.sphere=function(a,b){a=a||50;var c=b||24,e=b||16,f=\"sphere|\"+a+\"|\"+c+\"|\"+e;if(!this._renderer.geometryInHash(f)){var g=new d.Geometry3D,h=function(b,c){var e=2*Math.PI*b,f=Math.PI*c-Math.PI/2,g=a*Math.cos(f)*Math.sin(e),h=a*Math.sin(f),i=a*Math.cos(f)*Math.cos(e);return new d.Vector(g,h,i)};g.parametricGeometry(h,c,e);var i=g.generateObj(!0,!0);this._renderer.initBuffer(f,[i])}return this._renderer.drawBuffer(f),this},d.prototype.ellipsoid=function(a,b,c,e){a=a||50,b=b||50,c=c||50;var f=e||24,g=e||24,h=\"ellipsoid|\"+a+\"|\"+b+\"|\"+c+\"|\"+f+\"|\"+g;if(!this._renderer.geometryInHash(h)){var i=new d.Geometry3D,j=function(e,f){var g=2*Math.PI*e,h=Math.PI*f-Math.PI/2,i=a*Math.cos(h)*Math.sin(g),j=b*Math.sin(h),k=c*Math.cos(h)*Math.cos(g);return new d.Vector(i,j,k)};i.parametricGeometry(j,f,g);var k=i.generateObj(!0,!0);this._renderer.initBuffer(h,[k])}return this._renderer.drawBuffer(h),this},d.prototype.cylinder=function(a,b,c){a=a||50,b=b||50;var e=c||24,f=c||16,g=\"cylinder|\"+a+\"|\"+b+\"|\"+e+\"|\"+f;if(!this._renderer.geometryInHash(g)){var h=new d.Geometry3D,i=function(c,e){var f=2*Math.PI*c,g=a*Math.sin(f),h=2*b*e-b,i=a*Math.cos(f);return new d.Vector(g,h,i)};h.parametricGeometry(i,e,f);var j=h.generateObj(!0),k=function(c,e){var f=2*Math.PI*c,g=a*Math.sin(-f),h=b,i=a*Math.cos(f);return 0===e?new d.Vector(0,b,0):new d.Vector(g,h,i)},l=new d.Geometry3D;l.parametricGeometry(k,e,1);var m=l.generateObj(),n=function(c,e){var f=2*Math.PI*c,g=a*Math.sin(f),h=-b,i=a*Math.cos(f);return 0===e?new d.Vector(0,-b,0):new d.Vector(g,h,i)},o=new d.Geometry3D;o.parametricGeometry(n,e,1);var p=o.generateObj();this._renderer.initBuffer(g,[j,m,p])}return this._renderer.drawBuffer(g),this},d.prototype.cone=function(a,b,c){a=a||50,b=b||50;var e=c||24,f=c||16,g=\"cone|\"+a+\"|\"+b+\"|\"+e+\"|\"+f;if(!this._renderer.geometryInHash(g)){var h=new d.Geometry3D,i=function(c,e){var f=2*Math.PI*c,g=a*(1-e)*Math.sin(f),h=2*b*e-b,i=a*(1-e)*Math.cos(f);return new d.Vector(g,h,i)};h.parametricGeometry(i,e,f);var j=h.generateObj(!0),k=new d.Geometry3D,l=function(c,e){var f=2*Math.PI*c,g=a*(1-e)*Math.sin(-f),h=-b,i=a*(1-e)*Math.cos(f);return new d.Vector(g,h,i)};k.parametricGeometry(l,e,1);var m=k.generateObj();this._renderer.initBuffer(g,[j,m])}return this._renderer.drawBuffer(g),this},d.prototype.torus=function(a,b,c){a=a||50,b=b||10;var e=c||24,f=c||16,g=\"torus|\"+a+\"|\"+b+\"|\"+e+\"|\"+f;if(!this._renderer.geometryInHash(g)){var h=new d.Geometry3D,i=function(c,e){var f=2*Math.PI*c,g=2*Math.PI*e,h=(a+b*Math.cos(g))*Math.cos(f),i=(a+b*Math.cos(g))*Math.sin(f),j=b*Math.sin(g);return new d.Vector(h,i,j)};h.parametricGeometry(i,e,f);var j=h.generateObj(!0);this._renderer.initBuffer(g,[j])}return this._renderer.drawBuffer(g),this},d.prototype.box=function(a,b,c){a=a||50,b=b||a,c=c||a;var e=typeof arguments[3]===Number?arguments[3]:1,f=typeof arguments[4]===Number?arguments[4]:1,g=\"cube|\"+a+\"|\"+b+\"|\"+c+\"|\"+e+\"|\"+f;if(!this._renderer.geometryInHash(g)){var h=new d.Geometry3D,i=function(e,f){var g=2*a*e-a,h=2*b*f-b,i=c;return new d.Vector(g,h,i)},j=function(e,f){var g=2*a*(1-e)-a,h=2*b*f-b,i=-c;return new d.Vector(g,h,i)},k=function(e,f){var g=2*a*(1-e)-a,h=b,i=2*c*f-c;return new d.Vector(g,h,i)},l=function(e,f){var g=2*a*e-a,h=-b,i=2*c*f-c;return new d.Vector(g,h,i)},m=function(e,f){var g=a,h=2*b*e-b,i=2*c*f-c;return new d.Vector(g,h,i)},n=function(e,f){var g=-a,h=2*b*(1-e)-b,i=2*c*f-c;return new d.Vector(g,h,i)};h.parametricGeometry(i,e,f,h.vertices.length),h.parametricGeometry(j,e,f,h.vertices.length),h.parametricGeometry(k,e,f,h.vertices.length),h.parametricGeometry(l,e,f,h.vertices.length),h.parametricGeometry(m,e,f,h.vertices.length),h.parametricGeometry(n,e,f,h.vertices.length);var o=h.generateObj();this._renderer.initBuffer(g,[o])}return this._renderer.drawBuffer(g),this},b.exports=d},{\"../core/core\":50,\"./p5.Geometry3D\":36}],31:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.camera=function(a,b,c){for(var d=new Array(arguments.length),e=0;e<d.length;++e)d[e]=arguments[e];this._validateParameters(\"camera\",d,[\"Number\",\"Number\",\"Number\"]),this._renderer.translate(-a,-b,-c)},d.prototype.perspective=function(a,b,c,e){for(var f=new Array(arguments.length),g=0;g<f.length;++g)f[g]=arguments[g];this._validateParameters(\"perspective\",f,[\"Number\",\"Number\",\"Number\",\"Number\"]),this._renderer.uPMatrix=d.Matrix.identity(),this._renderer.uPMatrix.perspective(a,b,c,e),this._renderer._setCamera=!0},d.prototype.ortho=function(a,b,c,e,f,g){for(var h=new Array(arguments.length),i=0;i<h.length;++i)h[i]=arguments[i];this._validateParameters(\"ortho\",h,[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]),a/=this.width,b/=this.width,e/=this.height,c/=this.height,this._renderer.uPMatrix=d.Matrix.identity(),this._renderer.uPMatrix.ortho(a,b,c,e,f,g),this._renderer._setCamera=!0},b.exports=d},{\"../core/core\":50}],32:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.Renderer3D.prototype._primitives2D=function(a){this._setDefaultCamera();var b=this.GL,c=this._getColorVertexShader(),d=this.verticeBuffer;b.bindBuffer(b.ARRAY_BUFFER,d),b.bufferData(b.ARRAY_BUFFER,new Float32Array(a),b.STATIC_DRAW),b.vertexAttribPointer(c.vertexPositionAttribute,3,b.FLOAT,!1,0,0);var e=this.colorBuffer;b.bindBuffer(b.ARRAY_BUFFER,e);for(var f=this._getCurColor(),g=[],h=0;h<a.length/3;h++)g=g.concat(f);b.bufferData(b.ARRAY_BUFFER,new Float32Array(g),b.STATIC_DRAW),b.vertexAttribPointer(c.vertexColorAttribute,4,b.FLOAT,!1,0,0);var i=\"vertexColorVert|vertexColorFrag\";this.setMatrixUniforms(i)},d.Renderer3D.prototype.point=function(a,b,c){var d=this.GL;return this._primitives2D([a,b,c]),d.drawArrays(d.POINTS,0,1),this},d.Renderer3D.prototype.line=function(a,b,c,d,e,f){var g=this.GL;return this._primitives2D([a,b,c,d,e,f]),g.drawArrays(g.LINES,0,2),this},d.Renderer3D.prototype.triangle=function(a,b,c,d,e,f,g,h,i){var j=this.GL;return this._primitives2D([a,b,c,d,e,f,g,h,i]),this._strokeCheck(),j.drawArrays(j.TRIANGLES,0,3),this},d.Renderer3D.prototype.quad=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=this.GL;return this._primitives2D([a,b,c,d,e,f,g,h,i,j,k,l]),this._strokeCheck(),m.drawArrays(m.TRIANGLE_STRIP,0,4),this},d.Renderer3D.prototype.beginShape=function(a){return this.shapeMode=a,this.verticeStack=[],this},d.Renderer3D.prototype.vertex=function(a,b,c){return this.verticeStack.push(a,b,c),this},d.Renderer3D.prototype.endShape=function(){var a=this.GL;switch(this._primitives2D(this.verticeStack),this.verticeStack=[],this.shapeMode){case\"POINTS\":a.drawArrays(a.POINTS,0,1);break;case\"LINES\":a.drawArrays(a.LINES,0,2);break;case\"TRIANGLES\":this._strokeCheck(),a.drawArrays(a.TRIANGLES,0,3);break;case\"TRIANGLE_STRIP\":this._strokeCheck(),a.drawArrays(a.TRIANGLE_STRIP,0,4);break;default:this._strokeCheck(),a.drawArrays(a.TRIANGLES,0,3)}return this},d.Renderer3D.prototype._strokeCheck=function(){if(\"stroke\"===this.drawMode)throw new Error(\"stroke for shapes in 3D not yet implemented, use fill for now :(\")},d.Renderer3D.prototype.strokeWeight=function(){throw new Error(\"strokeWeight for 3d not yet implemented\")},d.Renderer3D.prototype.fill=function(a,b,c,d){var e=this._pInst.color.apply(this._pInst,arguments),f=e._array;return this.curColor=f,this.drawMode=\"fill\",this},d.Renderer3D.prototype.stroke=function(a,b,c,d){var e=this._pInst.color.apply(this._pInst,arguments),f=e._array;return this.curColor=f,this.drawMode=\"stroke\",this},d.Renderer3D.prototype._getColorVertexShader=function(){var a,b=this.GL,c=\"vertexColorVert|vertexColorFrag\";return this.materialInHash(c)?a=this.mHash[c]:(a=this.initShaders(\"vertexColorVert\",\"vertexColorFrag\",!0),this.mHash[c]=a,a.vertexColorAttribute=b.getAttribLocation(a,\"aVertexColor\"),b.enableVertexAttribArray(a.vertexColorAttribute)),a},b.exports=d.Renderer3D},{\"../core/core\":50}],33:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.orbitControl=function(){return this.mouseIsPressed&&(this.rotateY((this.mouseX-this.width/2)/(this.width/2)),this.rotateX((this.mouseY-this.height/2)/(this.width/2))),this},b.exports=d},{\"../core/core\":50}],34:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.ambientLight=function(a,b,c,d){var e=this._renderer.GL,f=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");e.useProgram(f),f.uAmbientColor=e.getUniformLocation(f,\"uAmbientColor[\"+this._renderer.ambientLightCount+\"]\");var g=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),h=g._array;return e.uniform3f(f.uAmbientColor,h[0],h[1],h[2]),f.uMaterialColor=e.getUniformLocation(f,\"uMaterialColor\"),e.uniform4f(f.uMaterialColor,1,1,1,1),this._renderer.ambientLightCount++,f.uAmbientLightCount=e.getUniformLocation(f,\"uAmbientLightCount\"),e.uniform1i(f.uAmbientLightCount,this._renderer.ambientLightCount),this},d.prototype.directionalLight=function(a,b,c,d,e,f,g){var h=this._renderer.GL,i=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");h.useProgram(i),i.uDirectionalColor=h.getUniformLocation(i,\"uDirectionalColor[\"+this._renderer.directionalLightCount+\"]\");var j=this._renderer._pInst.color.apply(this._renderer._pInst,[a,b,c]),k=j._array;h.uniform3f(i.uDirectionalColor,k[0],k[1],k[2]);var l,m,n;if(\"number\"==typeof arguments[arguments.length-1])l=arguments[arguments.length-3],m=arguments[arguments.length-2],n=arguments[arguments.length-1];else try{l=arguments[arguments.length-1].x,m=arguments[arguments.length-1].y,n=arguments[arguments.length-1].z}catch(o){throw o}return i.uLightingDirection=h.getUniformLocation(i,\"uLightingDirection[\"+this._renderer.directionalLightCount+\"]\"),h.uniform3f(i.uLightingDirection,l,m,n),i.uMaterialColor=h.getUniformLocation(i,\"uMaterialColor\"),h.uniform4f(i.uMaterialColor,1,1,1,1),this._renderer.directionalLightCount++,i.uDirectionalLightCount=h.getUniformLocation(i,\"uDirectionalLightCount\"),h.uniform1i(i.uDirectionalLightCount,this._renderer.directionalLightCount),this},d.prototype.pointLight=function(a,b,c,d,e,f,g){var h=this._renderer.GL,i=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");h.useProgram(i),i.uPointLightColor=h.getUniformLocation(i,\"uPointLightColor[\"+this._renderer.pointLightCount+\"]\");var j=this._renderer._pInst.color.apply(this._renderer._pInst,[a,b,c]),k=j._array;h.uniform3f(i.uPointLightColor,k[0],k[1],k[2]);var l,m,n;if(\"number\"==typeof arguments[arguments.length-1])l=arguments[arguments.length-3],m=arguments[arguments.length-2],n=arguments[arguments.length-1];else try{l=arguments[arguments.length-1].x,m=arguments[arguments.length-1].y,n=arguments[arguments.length-1].z}catch(o){throw o}return i.uPointLightLocation=h.getUniformLocation(i,\"uPointLightLocation[\"+this._renderer.pointLightCount+\"]\"),h.uniform3f(i.uPointLightLocation,l,m,n),i.uMaterialColor=h.getUniformLocation(i,\"uMaterialColor\"),h.uniform4f(i.uMaterialColor,1,1,1,1),this._renderer.pointLightCount++,i.uPointLightCount=h.getUniformLocation(i,\"uPointLightCount\"),h.uniform1i(i.uPointLightCount,this._renderer.pointLightCount),this},b.exports=d},{\"../core/core\":50}],35:[function(a,b,c){\"use strict\";function d(a){return 0===(a&a-1)}var e=a(\"../core/core\");e.prototype.normalMaterial=function(){return this._renderer._getShader(\"normalVert\",\"normalFrag\"),this},e.prototype.texture=function(a){var b=this._renderer.GL,c=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");if(b.useProgram(c),a instanceof e.Image){if(!a.isTexture){var f=b.createTexture();a.createTexture(f),b.bindTexture(b.TEXTURE_2D,f),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1),a._setProperty(\"isTexture\",!0)}a.loadPixels();var g=new Uint8Array(a.pixels);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,a.width,a.height,0,b.RGBA,b.UNSIGNED_BYTE,g)}else if(a instanceof e.MediaElement){if(!a.loadedmetadata)return;b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a.elt)}return d(a.width)&&d(a.height)?b.generateMipmap(b.TEXTURE_2D):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE)),b.uniform1i(b.getUniformLocation(c,\"uSampler\"),0),b.uniform1i(b.getUniformLocation(c,\"isTexture\"),!0),this},e.prototype.basicMaterial=function(a,b,c,d){var e=this._renderer.GL,f=this._renderer._getShader(\"normalVert\",\"basicFrag\");e.useProgram(f),f.uMaterialColor=e.getUniformLocation(f,\"uMaterialColor\");var g=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),h=g._array;return e.uniform4f(f.uMaterialColor,h[0],h[1],h[2],h[3]),this},e.prototype.ambientMaterial=function(a,b,c,d){var e=this._renderer.GL,f=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");e.useProgram(f),f.uMaterialColor=e.getUniformLocation(f,\"uMaterialColor\");var g=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),h=g._array;return e.uniform4f(f.uMaterialColor,h[0],h[1],h[2],h[3]),f.uSpecular=e.getUniformLocation(f,\"uSpecular\"),e.uniform1i(f.uSpecular,!1),e.uniform1i(e.getUniformLocation(f,\"isTexture\"),!1),this},e.prototype.specularMaterial=function(a,b,c,d){var e=this._renderer.GL,f=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");e.uniform1i(e.getUniformLocation(f,\"isTexture\"),!1),e.useProgram(f),f.uMaterialColor=e.getUniformLocation(f,\"uMaterialColor\");var g=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),h=g._array;return e.uniform4f(f.uMaterialColor,h[0],h[1],h[2],h[3]),f.uSpecular=e.getUniformLocation(f,\"uSpecular\"),e.uniform1i(f.uSpecular,!0),this},b.exports=e},{\"../core/core\":50}],36:[function(a,b,c){\"use strict\";function d(a){return a.reduce(function(a,b){return a.concat(b)})}function e(a){return d(a.map(function(a){return[a.x,a.y,a.z]}))}var f=a(\"../core/core\");f.Geometry3D=function(){this.vertices=[],this.vertexNormals=[],this.faces=[],this.faceNormals=[],this.uvs=[]},f.Geometry3D.prototype.parametricGeometry=function(a,b,c,d){var e,f,g,h,i;d=d||0,this.detailX=b,this.detailY=c;var j=b+1;for(e=0;c>=e;e++)for(i=e/c,f=0;b>=f;f++)h=f/b,g=a(h,i),this.vertices.push(g);var k,l,m,n,o,p,q,r;for(e=0;c>e;e++)for(f=0;b>f;f++)k=e*j+f+d,l=e*j+f+1+d,m=(e+1)*j+f+1+d,n=(e+1)*j+f+d,o=[f/b,e/c],p=[(f+1)/b,e/c],q=[(f+1)/b,(e+1)/c],r=[f/b,(e+1)/c],this.faces.push([k,l,n]),this.uvs.push([o,p,r]),this.faces.push([l,m,n]),this.uvs.push([p,q,r])},f.Geometry3D.prototype.computeFaceNormals=function(){for(var a=new f.Vector,b=new f.Vector,c=0;c<this.faces.length;c++){var d=this.faces[c],e=this.vertices[d[0]],g=this.vertices[d[1]],h=this.vertices[d[2]];f.Vector.sub(h,g,a),f.Vector.sub(e,g,b);var i=f.Vector.cross(b,a);i.normalize(),i.mult(-1),this.faceNormals[c]=i}},f.Geometry3D.prototype.computeVertexNormals=function(){var a,b,c,d,e,g=[];for(e=new Array(this.vertices.length),a=0;a<this.vertices.length;a++)e[a]=new f.Vector;for(b=0;b<this.faces.length;b++)c=this.faces[b],d=this.faceNormals[b],e[c[0]].add(d),e[c[1]].add(d),e[c[2]].add(d);for(a=0;a<this.vertices.length;a++)e[a].normalize();for(b=0;b<this.faces.length;b++)c=this.faces[b],g[b]=[],g[b][0]=e[c[0]].copy(),g[b][1]=e[c[1]].copy(),g[b][2]=e[c[2]].copy();for(b=0;b<this.faces.length;b++)c=this.faces[b],d=this.faceNormals[b],this.vertexNormals[c[0]]=g[b][0],this.vertexNormals[c[1]]=g[b][1],this.vertexNormals[c[2]]=g[b][2]},f.Geometry3D.prototype.averageNormals=function(){for(var a=0;a<=this.detailY;a++){var b=this.detailX+1,c=f.Vector.add(this.vertexNormals[a*b],this.vertexNormals[a*b+this.detailX]);c=f.Vector.div(c,2),this.vertexNormals[a*b]=c,this.vertexNormals[a*b+this.detailX]=c}},f.Geometry3D.prototype.averagePoleNormals=function(){for(var a=new f.Vector(0,0,0),b=0;b<this.detailX;b++)a.add(this.vertexNormals[b]);for(a=f.Vector.div(a,this.detailX),b=0;b<this.detailX;b++)this.vertexNormals[b]=a;for(a=new f.Vector(0,0,0),b=this.vertices.length-1;b>this.vertices.length-1-this.detailX;b--)a.add(this.vertexNormals[b]);for(a=f.Vector.div(a,this.detailX),b=this.vertices.length-1;b>this.vertices.length-1-this.detailX;b--)this.vertexNormals[b]=a},f.Geometry3D.prototype.generateUV=function(a,b){a=d(a),b=d(b);var c=[];return a.forEach(function(a,d){c[a]=b[d]}),d(c)},f.Geometry3D.prototype.generateObj=function(a,b){this.computeFaceNormals(),this.computeVertexNormals(),a&&this.averageNormals(),b&&this.averagePoleNormals();var c={vertices:e(this.vertices),vertexNormals:e(this.vertexNormals),uvs:this.generateUV(this.faces,this.uvs),faces:d(this.faces),len:3*this.faces.length};return c},b.exports=f.Geometry3D},{\"../core/core\":50}],37:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"../math/polargeometry\"),f=a(\"../core/constants\"),g=\"undefined\"!=typeof Float32Array?Float32Array:Array;d.Matrix=function(){return arguments[0]instanceof d?(this.p5=arguments[0],this.mat4=arguments[1]||new g([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])):this.mat4=arguments[0]||new g([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},d.Matrix.prototype.set=function(a){return a instanceof d.Matrix?(this.mat4=a.mat4,this):a instanceof g?(this.mat4=a,this):this},d.Matrix.prototype.get=function(){return new d.Matrix(this.mat4)},d.Matrix.prototype.copy=function(){var a=new d.Matrix;return a.mat4[0]=this.mat4[0],a.mat4[1]=this.mat4[1],a.mat4[2]=this.mat4[2],a.mat4[3]=this.mat4[3],a.mat4[4]=this.mat4[4],a.mat4[5]=this.mat4[5],a.mat4[6]=this.mat4[6],a.mat4[7]=this.mat4[7],a.mat4[8]=this.mat4[8],a.mat4[9]=this.mat4[9],a.mat4[10]=this.mat4[10],a.mat4[11]=this.mat4[11],a.mat4[12]=this.mat4[12],a.mat4[13]=this.mat4[13],a.mat4[14]=this.mat4[14],a.mat4[15]=this.mat4[15],a},d.Matrix.identity=function(){return new d.Matrix},d.Matrix.prototype.transpose=function(a){var b,c,e,f,h,i;return a instanceof d.Matrix?(b=a.mat4[1],c=a.mat4[2],e=a.mat4[3],f=a.mat4[6],h=a.mat4[7],i=a.mat4[11],this.mat4[0]=a.mat4[0],this.mat4[1]=a.mat4[4],this.mat4[2]=a.mat4[8],this.mat4[3]=a.mat4[12],this.mat4[4]=b,this.mat4[5]=a.mat4[5],this.mat4[6]=a.mat4[9],this.mat4[7]=a.mat4[13],this.mat4[8]=c,this.mat4[9]=f,this.mat4[10]=a.mat4[10],this.mat4[11]=a.mat4[14],this.mat4[12]=e,this.mat4[13]=h,this.mat4[14]=i,this.mat4[15]=a.mat4[15]):a instanceof g&&(b=a[1],c=a[2],e=a[3],f=a[6],h=a[7],i=a[11],this.mat4[0]=a[0],this.mat4[1]=a[4],this.mat4[2]=a[8],this.mat4[3]=a[12],this.mat4[4]=b,this.mat4[5]=a[5],this.mat4[6]=a[9],this.mat4[7]=a[13],this.mat4[8]=c,this.mat4[9]=f,this.mat4[10]=a[10],this.mat4[11]=a[14],this.mat4[12]=e,this.mat4[13]=h,this.mat4[14]=i,this.mat4[15]=a[15]),this},d.Matrix.prototype.invert=function(a){var b,c,e,f,h,i,j,k,l,m,n,o,p,q,r,s;a instanceof d.Matrix?(b=a.mat4[0],c=a.mat4[1],e=a.mat4[2],f=a.mat4[3],h=a.mat4[4],i=a.mat4[5],j=a.mat4[6],k=a.mat4[7],l=a.mat4[8],m=a.mat4[9],n=a.mat4[10],o=a.mat4[11],p=a.mat4[12],q=a.mat4[13],r=a.mat4[14],s=a.mat4[15]):a instanceof g&&(b=a[0],c=a[1],e=a[2],f=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],s=a[15]);var t=b*i-c*h,u=b*j-e*h,v=b*k-f*h,w=c*j-e*i,x=c*k-f*i,y=e*k-f*j,z=l*q-m*p,A=l*r-n*p,B=l*s-o*p,C=m*r-n*q,D=m*s-o*q,E=n*s-o*r,F=t*E-u*D+v*C+w*B-x*A+y*z;return F?(F=1/F,this.mat4[0]=(i*E-j*D+k*C)*F,this.mat4[1]=(e*D-c*E-f*C)*F,this.mat4[2]=(q*y-r*x+s*w)*F,this.mat4[3]=(n*x-m*y-o*w)*F,this.mat4[4]=(j*B-h*E-k*A)*F,this.mat4[5]=(b*E-e*B+f*A)*F,this.mat4[6]=(r*v-p*y-s*u)*F,this.mat4[7]=(l*y-n*v+o*u)*F,this.mat4[8]=(h*D-i*B+k*z)*F,this.mat4[9]=(c*B-b*D-f*z)*F,this.mat4[10]=(p*x-q*v+s*t)*F,this.mat4[11]=(m*v-l*x-o*t)*F,this.mat4[12]=(i*A-h*C-j*z)*F,this.mat4[13]=(b*C-c*A+e*z)*F,this.mat4[14]=(q*u-p*w-r*t)*F,this.mat4[15]=(l*w-m*u+n*t)*F,this):null},d.Matrix.prototype.determinant=function(){var a=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],b=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],c=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],d=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],e=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],f=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],g=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],h=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],i=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],j=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],k=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13],l=this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14];return a*l-b*k+c*j+d*i-e*h+f*g},d.Matrix.prototype.mult=function(a){var b=new g(16),c=new g(16);a instanceof d.Matrix?c=a.mat4:a instanceof g&&(c=a);var e=this.mat4[0],f=this.mat4[1],h=this.mat4[2],i=this.mat4[3];return b[0]=e*c[0]+f*c[4]+h*c[8]+i*c[12],b[1]=e*c[1]+f*c[5]+h*c[9]+i*c[13],b[2]=e*c[2]+f*c[6]+h*c[10]+i*c[14],b[3]=e*c[3]+f*c[7]+h*c[11]+i*c[15],e=this.mat4[4],f=this.mat4[5],h=this.mat4[6],i=this.mat4[7],b[4]=e*c[0]+f*c[4]+h*c[8]+i*c[12],b[5]=e*c[1]+f*c[5]+h*c[9]+i*c[13],b[6]=e*c[2]+f*c[6]+h*c[10]+i*c[14],b[7]=e*c[3]+f*c[7]+h*c[11]+i*c[15],e=this.mat4[8],f=this.mat4[9],h=this.mat4[10],i=this.mat4[11],b[8]=e*c[0]+f*c[4]+h*c[8]+i*c[12],b[9]=e*c[1]+f*c[5]+h*c[9]+i*c[13],b[10]=e*c[2]+f*c[6]+h*c[10]+i*c[14],b[11]=e*c[3]+f*c[7]+h*c[11]+i*c[15],e=this.mat4[12],f=this.mat4[13],h=this.mat4[14],i=this.mat4[15],b[12]=e*c[0]+f*c[4]+h*c[8]+i*c[12],b[13]=e*c[1]+f*c[5]+h*c[9]+i*c[13],b[14]=e*c[2]+f*c[6]+h*c[10]+i*c[14],b[15]=e*c[3]+f*c[7]+h*c[11]+i*c[15],this.mat4=b,this},d.Matrix.prototype.scale=function(){for(var a,b,c,e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];e[0]instanceof d.Vector?(a=e[0].x,b=e[0].y,c=e[0].z):e[0]instanceof Array&&(a=e[0][0],b=e[0][1],c=e[0][2]);var h=new g(16);return h[0]=this.mat4[0]*a,h[1]=this.mat4[1]*a,h[2]=this.mat4[2]*a,h[3]=this.mat4[3]*a,h[4]=this.mat4[4]*b,h[5]=this.mat4[5]*b,h[6]=this.mat4[6]*b,h[7]=this.mat4[7]*b,h[8]=this.mat4[8]*c,h[9]=this.mat4[9]*c,h[10]=this.mat4[10]*c,h[11]=this.mat4[11]*c,h[12]=this.mat4[12],h[13]=this.mat4[13],h[14]=this.mat4[14],h[15]=this.mat4[15],this.mat4=h,this},d.Matrix.prototype.rotate=function(a,b){var c,g,h,i,j;this.p5?this.p5._angleMode===f.DEGREES&&(i=e.degreesToRadians(a)):i=a,b instanceof d.Vector?(c=b.x,g=b.y,h=b.z):b instanceof Array&&(c=b[0],g=b[1],h=b[2]),j=Math.sqrt(c*c+g*g+h*h),c*=1/j,g*=1/j,h*=1/j;var k=this.mat4[0],l=this.mat4[1],m=this.mat4[2],n=this.mat4[3],o=this.mat4[4],p=this.mat4[5],q=this.mat4[6],r=this.mat4[7],s=this.mat4[8],t=this.mat4[9],u=this.mat4[10],v=this.mat4[11],w=Math.sin(i),x=Math.cos(i),y=1-x,z=c*c*y+x,A=g*c*y+h*w,B=h*c*y-g*w,C=c*g*y-h*w,D=g*g*y+x,E=h*g*y+c*w,F=c*h*y+g*w,G=g*h*y-c*w,H=h*h*y+x;return this.mat4[0]=k*z+o*A+s*B,this.mat4[1]=l*z+p*A+t*B,this.mat4[2]=m*z+q*A+u*B,this.mat4[3]=n*z+r*A+v*B,this.mat4[4]=k*C+o*D+s*E,this.mat4[5]=l*C+p*D+t*E,this.mat4[6]=m*C+q*D+u*E,this.mat4[7]=n*C+r*D+v*E,this.mat4[8]=k*F+o*G+s*H,this.mat4[9]=l*F+p*G+t*H,this.mat4[10]=m*F+q*G+u*H,this.mat4[11]=n*F+r*G+v*H,this},d.Matrix.prototype.translate=function(a){var b=a[0],c=a[1],d=a[2]||0;this.mat4[12]=this.mat4[0]*b+this.mat4[4]*c+this.mat4[8]*d+this.mat4[12],this.mat4[13]=this.mat4[1]*b+this.mat4[5]*c+this.mat4[9]*d+this.mat4[13],this.mat4[14]=this.mat4[2]*b+this.mat4[6]*c+this.mat4[10]*d+this.mat4[14],this.mat4[15]=this.mat4[3]*b+this.mat4[7]*c+this.mat4[11]*d+this.mat4[15]},d.Matrix.prototype.rotateX=function(a){this.rotate(a,[1,0,0])},d.Matrix.prototype.rotateY=function(a){this.rotate(a,[0,1,0])},d.Matrix.prototype.rotateZ=function(a){this.rotate(a,[0,0,1])},d.Matrix.prototype.perspective=function(a,b,c,d){var e=1/Math.tan(a/2),f=1/(c-d);return this.mat4[0]=e/b,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=e,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(d+c)*f,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*d*c*f,this.mat4[15]=0,this},d.Matrix.prototype.ortho=function(a,b,c,d,e,f){var g=1/(a-b),h=1/(c-d),i=1/(e-f);return this.mat4[0]=-2*g,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*h,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*i,this.mat4[11]=0,this.mat4[12]=(a+b)*g,this.mat4[13]=(d+c)*h,this.mat4[14]=(f+e)*i,this.mat4[15]=1,this},b.exports=d.Matrix},{\"../core/constants\":49,\"../core/core\":50,\"../math/polargeometry\":79}],38:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"./shader\");a(\"../core/p5.Renderer\"),a(\"./p5.Matrix\");var f=[],g=1e3,h={alpha:!0,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};d.Renderer3D=function(a,b,c){d.Renderer.call(this,a,b,c);try{if(this.drawingContext=this.canvas.getContext(\"webgl\",h)||this.canvas.getContext(\"experimental-webgl\",h),null===this.drawingContext)throw new Error(\"Error creating webgl context\");console.log(\"p5.Renderer3D: enabled webgl context\")}catch(e){throw new Error(e)}this.isP3D=!0,this.GL=this.drawingContext;var f=this.GL;return f.clearColor(1,1,1,1),f.clearDepth(1),f.enable(f.DEPTH_TEST),f.depthFunc(f.LEQUAL),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT),f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),this._init(),this},d.Renderer3D.prototype=Object.create(d.Renderer.prototype),d.Renderer3D.prototype._applyDefaults=function(){return this},d.Renderer3D.prototype._init=function(a){var b=this.GL;this.initMatrix(),this.initHash(),this.verticeStack=[],this.verticeBuffer=b.createBuffer(),this.colorBuffer=b.createBuffer(),this._setCamera=!1,this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0},d.Renderer3D.prototype._update=function(){this.resetMatrix(),this.translate(0,0,-800),this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0,this.verticeStack=[]},d.Renderer3D.prototype.resize=function(a,b){var c=this.GL;d.Renderer.prototype.resize.call(this,a,b),c.viewport(0,0,c.drawingBufferWidth,c.drawingBufferHeight)},d.Renderer3D.prototype.background=function(){var a=this.GL,b=this._pInst.color.apply(this._pInst,arguments),c=b.levels[0]/255,d=b.levels[1]/255,e=b.levels[2]/255,f=b.levels[3]/255;a.clearColor(c,d,e,f),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},d.Renderer3D.prototype.initShaders=function(a,b,c){var d=this.GL,f=d.createShader(d.VERTEX_SHADER);if(d.shaderSource(f,e[a]),d.compileShader(f),!d.getShaderParameter(f,d.COMPILE_STATUS))return alert(\"Yikes! An error occurred compiling the shaders:\"+d.getShaderInfoLog(f)),null;var g=d.createShader(d.FRAGMENT_SHADER);if(d.shaderSource(g,e[b]),d.compileShader(g),!d.getShaderParameter(g,d.COMPILE_STATUS))return alert(\"Darn! An error occurred compiling the shaders:\"+d.getShaderInfoLog(g)),null;var h=d.createProgram();return d.attachShader(h,f),d.attachShader(h,g),d.linkProgram(h),d.getProgramParameter(h,d.LINK_STATUS)||alert(\"Snap! Error linking shader program\"),this._getLocation(h,c),h},d.Renderer3D.prototype._getLocation=function(a,b){var c=this.GL;c.useProgram(a),a.uResolution=c.getUniformLocation(a,\"uResolution\"),c.uniform1f(a.uResolution,g),a.vertexPositionAttribute=c.getAttribLocation(a,\"aPosition\"),c.enableVertexAttribArray(a.vertexPositionAttribute),a.uPMatrixUniform=c.getUniformLocation(a,\"uProjectionMatrix\"),a.uMVMatrixUniform=c.getUniformLocation(a,\"uModelViewMatrix\"),void 0===b&&(a.vertexNormalAttribute=c.getAttribLocation(a,\"aNormal\"),c.enableVertexAttribArray(a.vertexNormalAttribute),a.uNMatrixUniform=c.getUniformLocation(a,\"uNormalMatrix\"),a.textureCoordAttribute=c.getAttribLocation(a,\"aTexCoord\"),c.enableVertexAttribArray(a.textureCoordAttribute),a.samplerUniform=c.getUniformLocation(a,\"uSampler\"))},d.Renderer3D.prototype.setMatrixUniforms=function(a){var b=this.GL,c=this.mHash[a];b.useProgram(c),b.uniformMatrix4fv(c.uPMatrixUniform,!1,this.uPMatrix.mat4),b.uniformMatrix4fv(c.uMVMatrixUniform,!1,this.uMVMatrix.mat4),this.uNMatrix=new d.Matrix,this.uNMatrix.invert(this.uMVMatrix),this.uNMatrix.transpose(this.uNMatrix),b.uniformMatrix4fv(c.uNMatrixUniform,!1,this.uNMatrix.mat4)},d.Renderer3D.prototype._getShader=function(a,b,c){var d=a+\"|\"+b;if(!this.materialInHash(d)){var e=this.initShaders(a,b,c);this.mHash[d]=e}return this.curShaderId=d,this.mHash[this.curShaderId]},d.Renderer3D.prototype._getCurShaderId=function(){if(void 0===this.curShaderId){var a=\"normalVert|normalFrag\",b=this.initShaders(\"normalVert\",\"normalFrag\");this.mHash[a]=b,this.curShaderId=a}return this.curShaderId},d.Renderer3D.prototype._getCurColor=function(){return void 0===this.curColor&&(this.curColor=[.5,.5,.5,1]),this.curColor},d.Renderer3D.prototype.initHash=function(){this.gHash={},this.mHash={}},d.Renderer3D.prototype.geometryInHash=function(a){return void 0!==this.gHash[a]},d.Renderer3D.prototype.materialInHash=function(a){return void 0!==this.mHash[a]},d.Renderer3D.prototype.initMatrix=function(){this.uMVMatrix=new d.Matrix,this.uPMatrix=new d.Matrix,this.uNMatrix=new d.Matrix},d.Renderer3D.prototype.resetMatrix=function(){this.uMVMatrix=d.Matrix.identity()},d.Renderer3D.prototype._setDefaultCamera=function(){if(!this._setCamera){var a=this.width,b=this.height;this.uPMatrix=d.Matrix.identity(),this.uPMatrix.perspective(60/180*Math.PI,a/b,.1,100),this._setCamera=!0}},d.Renderer3D.prototype.translate=function(a,b,c){return a/=g,b=-b/g,c/=g,this.uMVMatrix.translate([a,b,c]),this},d.Renderer3D.prototype.scale=function(a,b,c){return this.uMVMatrix.scale([a,b,c]),this},d.Renderer3D.prototype.rotate=function(a,b){return this.uMVMatrix.rotate(a,b),this},d.Renderer3D.prototype.rotateX=function(a){return this.uMVMatrix.rotateX(a),this},d.Renderer3D.prototype.rotateY=function(a){return this.uMVMatrix.rotateY(a),this},d.Renderer3D.prototype.rotateZ=function(a){return this.uMVMatrix.rotateZ(a),this},d.Renderer3D.prototype.push=function(){f.push(this.uMVMatrix.copy())},d.Renderer3D.prototype.pop=function(){if(0===f.length)throw new Error(\"Invalid popMatrix!\");this.uMVMatrix=f.pop()},b.exports=d.Renderer3D},{\"../core/core\":50,\"../core/p5.Renderer\":56,\"./p5.Matrix\":37,\"./shader\":40}],39:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=0;d.Renderer3D.prototype.createBuffer=function(a,b){if(e++,e>1e3){var c=Object.keys(this.gHash)[0];delete this.gHash[c],e--}var d=this.GL;this.gHash[a]={},this.gHash[a].len=[],this.gHash[a].vertexBuffer=[],this.gHash[a].normalBuffer=[],this.gHash[a].uvBuffer=[],this.gHash[a].indexBuffer=[],b.forEach(function(b){this.gHash[a].len.push(b.len),this.gHash[a].vertexBuffer.push(d.createBuffer()),this.gHash[a].normalBuffer.push(d.createBuffer()),this.gHash[a].uvBuffer.push(d.createBuffer()),this.gHash[a].indexBuffer.push(d.createBuffer())}.bind(this))},d.Renderer3D.prototype.initBuffer=function(a,b){this._setDefaultCamera();var c=this.GL;this.createBuffer(a,b);var d=this.mHash[this._getCurShaderId()];b.forEach(function(b,e){c.bindBuffer(c.ARRAY_BUFFER,this.gHash[a].vertexBuffer[e]),c.bufferData(c.ARRAY_BUFFER,new Float32Array(b.vertices),c.STATIC_DRAW),c.vertexAttribPointer(d.vertexPositionAttribute,3,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this.gHash[a].normalBuffer[e]),c.bufferData(c.ARRAY_BUFFER,new Float32Array(b.vertexNormals),c.STATIC_DRAW),c.vertexAttribPointer(d.vertexNormalAttribute,3,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this.gHash[a].uvBuffer[e]),c.bufferData(c.ARRAY_BUFFER,new Float32Array(b.uvs),c.STATIC_DRAW),c.vertexAttribPointer(d.textureCoordAttribute,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.gHash[a].indexBuffer[e]),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(b.faces),c.STATIC_DRAW)}.bind(this))},d.Renderer3D.prototype.drawBuffer=function(a){this._setDefaultCamera();var b=this.GL,c=this._getCurShaderId(),d=this.mHash[c];this.gHash[a].len.forEach(function(e,f){b.bindBuffer(b.ARRAY_BUFFER,this.gHash[a].vertexBuffer[f]),b.vertexAttribPointer(d.vertexPositionAttribute,3,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.gHash[a].normalBuffer[f]),b.vertexAttribPointer(d.vertexNormalAttribute,3,b.FLOAT,!1,0,0),\nb.bindBuffer(b.ARRAY_BUFFER,this.gHash[a].uvBuffer[f]),b.vertexAttribPointer(d.textureCoordAttribute,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.gHash[a].indexBuffer[f]),this.setMatrixUniforms(c),b.drawElements(b.TRIANGLES,this.gHash[a].len[f],b.UNSIGNED_SHORT,0)}.bind(this))},b.exports=d.Renderer3D},{\"../core/core\":50}],40:[function(a,b,c){b.exports={vertexColorVert:\"attribute vec3 aPosition;\\nattribute vec4 aVertexColor;\\n\\nuniform mat4 uModelViewMatrix;\\nuniform mat4 uProjectionMatrix;\\nuniform float uResolution;\\n\\nvarying vec4 vColor;\\n\\nvoid main(void) {\\n  vec4 positionVec4 = vec4(aPosition / uResolution * vec3(1.0, -1.0, 1.0), 1.0);\\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\\n  vColor = aVertexColor;\\n}\",vertexColorFrag:\"precision mediump float;\\nvarying vec4 vColor;\\nvoid main(void) {\\n  gl_FragColor = vColor;\\n}\",normalVert:\"attribute vec3 aPosition;\\nattribute vec3 aNormal;\\nattribute vec2 aTexCoord;\\n\\nuniform mat4 uModelViewMatrix;\\nuniform mat4 uProjectionMatrix;\\nuniform mat4 uNormalMatrix;\\nuniform float uResolution;\\n\\nvarying vec3 vVertexNormal;\\nvarying highp vec2 vVertTexCoord;\\n\\nvoid main(void) {\\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\\n  vVertexNormal = vec3( uNormalMatrix * vec4( aNormal, 1.0 ) );\\n  vVertTexCoord = aTexCoord;\\n}\",normalFrag:\"precision mediump float;\\nvarying vec3 vVertexNormal;\\nvoid main(void) {\\n  gl_FragColor = vec4(vVertexNormal, 1.0);\\n}\",basicFrag:\"precision mediump float;\\nvarying vec3 vVertexNormal;\\nuniform vec4 uMaterialColor;\\nvoid main(void) {\\n  gl_FragColor = uMaterialColor;\\n}\",lightVert:\"attribute vec3 aPosition;\\nattribute vec3 aNormal;\\nattribute vec2 aTexCoord;\\n\\nuniform mat4 uModelViewMatrix;\\nuniform mat4 uProjectionMatrix;\\nuniform mat4 uNormalMatrix;\\nuniform float uResolution;\\nuniform int uAmbientLightCount;\\nuniform int uDirectionalLightCount;\\nuniform int uPointLightCount;\\n\\nuniform vec3 uAmbientColor[8];\\nuniform vec3 uLightingDirection[8];\\nuniform vec3 uDirectionalColor[8];\\nuniform vec3 uPointLightLocation[8];\\nuniform vec3 uPointLightColor[8];\\nuniform bool uSpecular;\\n\\nvarying vec3 vVertexNormal;\\nvarying vec2 vVertTexCoord;\\nvarying vec3 vLightWeighting;\\n\\nvec3 ambientLightFactor = vec3(0.0, 0.0, 0.0);\\nvec3 directionalLightFactor = vec3(0.0, 0.0, 0.0);\\nvec3 pointLightFactor = vec3(0.0, 0.0, 0.0);\\nvec3 pointLightFactor2 = vec3(0.0, 0.0, 0.0);\\n\\nvoid main(void){\\n\\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\\n\\n  vec3 vertexNormal = vec3( uNormalMatrix * vec4( aNormal, 1.0 ) );\\n  vVertexNormal = vertexNormal;\\n  vVertTexCoord = aTexCoord;\\n\\n  vec4 mvPosition = uModelViewMatrix * vec4(aPosition / uResolution, 1.0);\\n  vec3 eyeDirection = normalize(-mvPosition.xyz);\\n\\n  float shininess = 32.0;\\n  float specularFactor = 2.0;\\n  float diffuseFactor = 0.3;\\n\\n  for(int i = 0; i < 8; i++){\\n    if(uAmbientLightCount == i) break;\\n    ambientLightFactor += uAmbientColor[i];\\n  }\\n\\n  for(int j = 0; j < 8; j++){\\n    if(uDirectionalLightCount == j) break;\\n    vec3 dir = uLightingDirection[j];\\n    float directionalLightWeighting = max(dot(vertexNormal, dir), 0.0);\\n    directionalLightFactor += uDirectionalColor[j] * directionalLightWeighting;\\n  }\\n\\n  for(int k = 0; k < 8; k++){\\n    if(uPointLightCount == k) break;\\n    vec3 loc = uPointLightLocation[k];\\n    //loc = loc / uResolution;\\n    vec3 lightDirection = normalize(loc - mvPosition.xyz);\\n\\n    float directionalLightWeighting = max(dot(vertexNormal, lightDirection), 0.0);\\n    pointLightFactor += uPointLightColor[k] * directionalLightWeighting;\\n\\n    //factor2 for specular\\n    vec3 reflectionDirection = reflect(-lightDirection, vertexNormal);\\n    float specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\\n\\n    pointLightFactor2 += uPointLightColor[k] * (specularFactor * specularLightWeighting\\n      +  directionalLightWeighting * diffuseFactor);\\n  }\\n  \\n  if(!uSpecular){\\n    vLightWeighting =  ambientLightFactor + directionalLightFactor + pointLightFactor;\\n  }else{\\n    vLightWeighting = ambientLightFactor + directionalLightFactor + pointLightFactor2;\\n  }\\n\\n}\",lightTextureFrag:\"precision mediump float;\\n\\nuniform vec4 uMaterialColor;\\nuniform sampler2D uSampler;\\nuniform bool isTexture;\\n\\nvarying vec3 vLightWeighting;\\nvarying highp vec2 vVertTexCoord;\\n\\nvoid main(void) {\\n  if(!isTexture){\\n    gl_FragColor = vec4(vec3(uMaterialColor.rgb * vLightWeighting), uMaterialColor.a);\\n  }else{\\n    vec4 textureColor = texture2D(uSampler, vVertTexCoord);\\n    if(vLightWeighting == vec3(0., 0., 0.)){\\n      gl_FragColor = textureColor;\\n    }else{\\n      gl_FragColor = vec4(vec3(textureColor.rgb * vLightWeighting), textureColor.a); \\n    }\\n  }\\n}\"}},{}],41:[function(a,b,c){\"use strict\";var d=a(\"./core/core\");a(\"./color/p5.Color\"),a(\"./core/p5.Element\"),a(\"./typography/p5.Font\"),a(\"./core/p5.Graphics\"),a(\"./core/p5.Renderer2D\"),a(\"./image/p5.Image\"),a(\"./math/p5.Vector\"),a(\"./io/p5.TableRow\"),a(\"./io/p5.Table\"),a(\"./color/creating_reading\"),a(\"./color/setting\"),a(\"./core/constants\"),a(\"./utilities/conversion\"),a(\"./utilities/array_functions\"),a(\"./utilities/string_functions\"),a(\"./core/environment\"),a(\"./image/image\"),a(\"./image/loading_displaying\"),a(\"./image/pixels\"),a(\"./io/files\"),a(\"./events/keyboard\"),a(\"./events/acceleration\"),a(\"./events/mouse\"),a(\"./utilities/time_date\"),a(\"./events/touch\"),a(\"./math/math\"),a(\"./math/calculation\"),a(\"./math/random\"),a(\"./math/noise\"),a(\"./math/trigonometry\"),a(\"./core/rendering\"),a(\"./core/2d_primitives\"),a(\"./core/attributes\"),a(\"./core/curves\"),a(\"./core/vertex\"),a(\"./core/structure\"),a(\"./core/transform\"),a(\"./typography/attributes\"),a(\"./typography/loading_displaying\"),a(\"./3d/p5.Renderer3D\"),a(\"./3d/p5.Geometry3D\"),a(\"./3d/retainedMode3D\"),a(\"./3d/immediateMode3D\"),a(\"./3d/3d_primitives\"),a(\"./3d/p5.Matrix\"),a(\"./3d/material\"),a(\"./3d/light\"),a(\"./3d/shader\"),a(\"./3d/camera\"),a(\"./3d/interaction\");var e=function(){window.PHANTOMJS||window.mocha||(window.setup&&\"function\"==typeof window.setup||window.draw&&\"function\"==typeof window.draw)&&new d};\"complete\"===document.readyState?e():window.addEventListener(\"load\",e,!1),b.exports=d},{\"./3d/3d_primitives\":30,\"./3d/camera\":31,\"./3d/immediateMode3D\":32,\"./3d/interaction\":33,\"./3d/light\":34,\"./3d/material\":35,\"./3d/p5.Geometry3D\":36,\"./3d/p5.Matrix\":37,\"./3d/p5.Renderer3D\":38,\"./3d/retainedMode3D\":39,\"./3d/shader\":40,\"./color/creating_reading\":43,\"./color/p5.Color\":44,\"./color/setting\":45,\"./core/2d_primitives\":46,\"./core/attributes\":47,\"./core/constants\":49,\"./core/core\":50,\"./core/curves\":51,\"./core/environment\":52,\"./core/p5.Element\":54,\"./core/p5.Graphics\":55,\"./core/p5.Renderer2D\":57,\"./core/rendering\":58,\"./core/structure\":60,\"./core/transform\":61,\"./core/vertex\":62,\"./events/acceleration\":63,\"./events/keyboard\":64,\"./events/mouse\":65,\"./events/touch\":66,\"./image/image\":68,\"./image/loading_displaying\":69,\"./image/p5.Image\":70,\"./image/pixels\":71,\"./io/files\":72,\"./io/p5.Table\":73,\"./io/p5.TableRow\":74,\"./math/calculation\":75,\"./math/math\":76,\"./math/noise\":77,\"./math/p5.Vector\":78,\"./math/random\":80,\"./math/trigonometry\":81,\"./typography/attributes\":82,\"./typography/loading_displaying\":83,\"./typography/p5.Font\":84,\"./utilities/array_functions\":85,\"./utilities/conversion\":86,\"./utilities/string_functions\":87,\"./utilities/time_date\":88}],42:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.ColorConversion={},d.ColorConversion._hsbaToHSLA=function(a){var b=a[0],c=a[1],d=a[2],e=(2-c)*d/2;return 0!==e&&(1===e?c=0:.5>e?c/=2-c:c=c*d/(2-2*e)),[b,c,e,a[3]]},d.ColorConversion._hsbaToRGBA=function(a){var b=6*a[0],c=a[1],d=a[2],e=[];if(0===c)e=[d,d,d,a[3]];else{var f,g,h,i=Math.floor(b),j=d*(1-c),k=d*(1-c*(b-i)),l=d*(1-c*(1+i-b));0===i?(f=d,g=l,h=j):1===i?(f=k,g=d,h=j):2===i?(f=j,g=d,h=l):3===i?(f=j,g=k,h=d):4===i?(f=l,g=j,h=d):(f=d,g=j,h=k),e=[f,g,h,a[3]]}return e},d.ColorConversion._hslaToHSBA=function(a){var b,c=a[0],d=a[1],e=a[2];return b=.5>e?(1+d)*e:e+d-e*d,d=2*(b-e)/b,[c,d,b,a[3]]},d.ColorConversion._hslaToRGBA=function(a){var b=6*a[0],c=a[1],d=a[2],e=[];if(0===c)e=[d,d,d,a[3]];else{var f;f=.5>d?(1+c)*d:d+c-d*c;var g=2*d-f,h=function(a,b,c){return 0>a?a+=6:a>=6&&(a-=6),1>a?b+(c-b)*a:3>a?c:4>a?b+(c-b)*(4-a):b};e=[h(b+2,g,f),h(b,g,f),h(b-2,g,f),a[3]]}return e},d.ColorConversion._rgbaToHSBA=function(a){var b,c,d=a[0],e=a[1],f=a[2],g=Math.max(d,e,f),h=g-Math.min(d,e,f);return 0===h?(b=0,c=0):(c=h/g,d===g?b=(e-f)/h:e===g?b=2+(f-d)/h:f===g&&(b=4+(d-e)/h),0>b?b+=6:b>=6&&(b-=6)),[b/6,c,g,a[3]]},d.ColorConversion._rgbaToHSLA=function(a){var b,c,d=a[0],e=a[1],f=a[2],g=Math.max(d,e,f),h=Math.min(d,e,f),i=g+h,j=g-h;return 0===j?(b=0,c=0):(c=1>i?j/i:j/(2-j),d===g?b=(e-f)/j:e===g?b=2+(f-d)/j:f===g&&(b=4+(d-e)/j),0>b?b+=6:b>=6&&(b-=6)),[b/6,c,i/2,a[3]]},b.exports=d.ColorConversion},{\"../core/core\":50}],43:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"../core/constants\");a(\"./p5.Color\"),d.prototype.alpha=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getAlpha();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.blue=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getBlue();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.brightness=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getBrightness();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.color=function(){return arguments[0]instanceof d.Color?arguments[0]:arguments[0]instanceof Array?new d.Color(this,arguments[0]):new d.Color(this,arguments)},d.prototype.green=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getGreen();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.hue=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getHue();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.lerpColor=function(a,b,c){var d,f,g,h,i,j,k=this._renderer._colorMode,l=this._renderer._colorMaxes;if(k===e.RGB)i=a.levels.map(function(a){return a/255}),j=b.levels.map(function(a){return a/255});else if(k===e.HSB)a._getBrightness(),b._getBrightness(),i=a.hsba,j=b.hsba;else{if(k!==e.HSL)throw new Error(k+\"cannot be used for interpolation.\");a._getLightness(),b._getLightness(),i=a.hsla,j=b.hsla}return c=Math.max(Math.min(c,1),0),d=this.lerp(i[0],j[0],c),f=this.lerp(i[1],j[1],c),g=this.lerp(i[2],j[2],c),h=this.lerp(i[3],j[3],c),d*=l[k][0],f*=l[k][1],g*=l[k][2],h*=l[k][3],this.color(d,f,g,h)},d.prototype.lightness=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getLightness();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.red=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getRed();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.saturation=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getSaturation();throw new Error(\"Needs p5.Color or pixel array as argument.\")},b.exports=d},{\"../core/constants\":49,\"../core/core\":50,\"./p5.Color\":44}],44:[function(a,b,c){var d=a(\"../core/core\"),e=a(\"../core/constants\"),f=a(\"./color_conversion\");d.Color=function(a,b){if(this.mode=a._renderer._colorMode,this.maxes=a._renderer._colorMaxes,this.mode!==e.RGB&&this.mode!==e.HSL&&this.mode!==e.HSB)throw new Error(this.mode+\" is an invalid colorMode.\");return this._array=d.Color._parseInputs.apply(a,b),this.levels=this._array.map(function(a){return Math.round(255*a)}),this},d.Color.prototype.toString=function(){var a=this.levels;return a[3]=this._array[3],\"rgba(\"+a[0]+\",\"+a[1]+\",\"+a[2]+\",\"+a[3]+\")\"},d.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},d.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[e.RGB][2]},d.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=f._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[e.HSB][2]},d.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[e.RGB][1]},d.Color.prototype._getHue=function(){return this.mode===e.HSB?(this.hsba||(this.hsba=f._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[e.HSB][0]):(this.hsla||(this.hsla=f._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[e.HSL][0])},d.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=f._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[e.HSL][2]},d.Color.prototype._getRed=function(){return this._array[0]*this.maxes[e.RGB][0]},d.Color.prototype._getSaturation=function(){return this.mode===e.HSB?(this.hsba||(this.hsba=f._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[e.HSB][1]):(this.hsla||(this.hsla=f._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[e.HSL][1])};var g={aliceblue:\"#f0f8ff\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",aquamarine:\"#7fffd4\",azure:\"#f0ffff\",beige:\"#f5f5dc\",bisque:\"#ffe4c4\",black:\"#000000\",blanchedalmond:\"#ffebcd\",blue:\"#0000ff\",blueviolet:\"#8a2be2\",brown:\"#a52a2a\",burlywood:\"#deb887\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",cornflowerblue:\"#6495ed\",cornsilk:\"#fff8dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",darkkhaki:\"#bdb76b\",darkmagenta:\"#8b008b\",darkolivegreen:\"#556b2f\",darkorange:\"#ff8c00\",darkorchid:\"#9932cc\",darkred:\"#8b0000\",darksalmon:\"#e9967a\",darkseagreen:\"#8fbc8f\",darkslateblue:\"#483d8b\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",darkturquoise:\"#00ced1\",darkviolet:\"#9400d3\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",dimgray:\"#696969\",dimgrey:\"#696969\",dodgerblue:\"#1e90ff\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",forestgreen:\"#228b22\",fuchsia:\"#ff00ff\",gainsboro:\"#dcdcdc\",ghostwhite:\"#f8f8ff\",gold:\"#ffd700\",goldenrod:\"#daa520\",gray:\"#808080\",green:\"#008000\",greenyellow:\"#adff2f\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",ivory:\"#fffff0\",khaki:\"#f0e68c\",lavender:\"#e6e6fa\",lavenderblush:\"#fff0f5\",lawngreen:\"#7cfc00\",lemonchiffon:\"#fffacd\",lightblue:\"#add8e6\",lightcoral:\"#f08080\",lightcyan:\"#e0ffff\",lightgoldenrodyellow:\"#fafad2\",lightgray:\"#d3d3d3\",lightgreen:\"#90ee90\",lightgrey:\"#d3d3d3\",lightpink:\"#ffb6c1\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",lightskyblue:\"#87cefa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",lightsteelblue:\"#b0c4de\",lightyellow:\"#ffffe0\",lime:\"#00ff00\",limegreen:\"#32cd32\",linen:\"#faf0e6\",magenta:\"#ff00ff\",maroon:\"#800000\",mediumaquamarine:\"#66cdaa\",mediumblue:\"#0000cd\",mediumorchid:\"#ba55d3\",mediumpurple:\"#9370db\",mediumseagreen:\"#3cb371\",mediumslateblue:\"#7b68ee\",mediumspringgreen:\"#00fa9a\",mediumturquoise:\"#48d1cc\",mediumvioletred:\"#c71585\",midnightblue:\"#191970\",mintcream:\"#f5fffa\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",navajowhite:\"#ffdead\",navy:\"#000080\",oldlace:\"#fdf5e6\",olive:\"#808000\",olivedrab:\"#6b8e23\",orange:\"#ffa500\",orangered:\"#ff4500\",orchid:\"#da70d6\",palegoldenrod:\"#eee8aa\",palegreen:\"#98fb98\",paleturquoise:\"#afeeee\",palevioletred:\"#db7093\",papayawhip:\"#ffefd5\",peachpuff:\"#ffdab9\",peru:\"#cd853f\",pink:\"#ffc0cb\",plum:\"#dda0dd\",powderblue:\"#b0e0e6\",purple:\"#800080\",red:\"#ff0000\",rosybrown:\"#bc8f8f\",royalblue:\"#4169e1\",saddlebrown:\"#8b4513\",salmon:\"#fa8072\",sandybrown:\"#f4a460\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",sienna:\"#a0522d\",silver:\"#c0c0c0\",skyblue:\"#87ceeb\",slateblue:\"#6a5acd\",slategray:\"#708090\",slategrey:\"#708090\",snow:\"#fffafa\",springgreen:\"#00ff7f\",steelblue:\"#4682b4\",tan:\"#d2b48c\",teal:\"#008080\",thistle:\"#d8bfd8\",tomato:\"#ff6347\",turquoise:\"#40e0d0\",violet:\"#ee82ee\",wheat:\"#f5deb3\",white:\"#ffffff\",whitesmoke:\"#f5f5f5\",yellow:\"#ffff00\",yellowgreen:\"#9acd32\"},h=/\\s*/,i=/(\\d{1,3})/,j=/((?:\\d+(?:\\.\\d+)?)|(?:\\.\\d+))/,k=new RegExp(j.source+\"%\"),l={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp([\"^rgb\\\\(\",i.source,\",\",i.source,\",\",i.source,\"\\\\)$\"].join(h.source),\"i\"),RGB_PERCENT:new RegExp([\"^rgb\\\\(\",k.source,\",\",k.source,\",\",k.source,\"\\\\)$\"].join(h.source),\"i\"),RGBA:new RegExp([\"^rgba\\\\(\",i.source,\",\",i.source,\",\",i.source,\",\",j.source,\"\\\\)$\"].join(h.source),\"i\"),RGBA_PERCENT:new RegExp([\"^rgba\\\\(\",k.source,\",\",k.source,\",\",k.source,\",\",j.source,\"\\\\)$\"].join(h.source),\"i\"),HSL:new RegExp([\"^hsl\\\\(\",i.source,\",\",k.source,\",\",k.source,\"\\\\)$\"].join(h.source),\"i\"),HSLA:new RegExp([\"^hsla\\\\(\",i.source,\",\",k.source,\",\",k.source,\",\",j.source,\"\\\\)$\"].join(h.source),\"i\"),HSB:new RegExp([\"^hsb\\\\(\",i.source,\",\",k.source,\",\",k.source,\"\\\\)$\"].join(h.source),\"i\"),HSBA:new RegExp([\"^hsba\\\\(\",i.source,\",\",k.source,\",\",k.source,\",\",j.source,\"\\\\)$\"].join(h.source),\"i\")};d.Color._parseInputs=function(){var a=arguments.length,b=this._renderer._colorMode,c=this._renderer._colorMaxes,h=[];if(a>=3)return h[0]=arguments[0]/c[b][0],h[1]=arguments[1]/c[b][1],h[2]=arguments[2]/c[b][2],\"number\"==typeof arguments[3]?h[3]=arguments[3]/c[b][3]:h[3]=1,h=h.map(function(a){return Math.max(Math.min(a,1),0)}),b===e.HSL?f._hslaToRGBA(h):b===e.HSB?f._hsbaToRGBA(h):h;if(1===a&&\"string\"==typeof arguments[0]){var i=arguments[0].trim().toLowerCase();if(g[i])return d.Color._parseInputs.apply(this,[g[i]]);if(l.HEX3.test(i))return h=l.HEX3.exec(i).slice(1).map(function(a){return parseInt(a+a,16)/255}),h[3]=1,h;if(l.HEX6.test(i))return h=l.HEX6.exec(i).slice(1).map(function(a){return parseInt(a,16)/255}),h[3]=1,h;if(l.RGB.test(i))return h=l.RGB.exec(i).slice(1).map(function(a){return a/255}),h[3]=1,h;if(l.RGB_PERCENT.test(i))return h=l.RGB_PERCENT.exec(i).slice(1).map(function(a){return parseFloat(a)/100}),h[3]=1,h;if(l.RGBA.test(i))return h=l.RGBA.exec(i).slice(1).map(function(a,b){return 3===b?parseFloat(a):a/255});if(l.RGBA_PERCENT.test(i))return h=l.RGBA_PERCENT.exec(i).slice(1).map(function(a,b){return 3===b?parseFloat(a):parseFloat(a)/100});if(l.HSL.test(i)?(h=l.HSL.exec(i).slice(1).map(function(a,b){return 0===b?parseInt(a,10)/360:parseInt(a,10)/100}),h[3]=1):l.HSLA.test(i)&&(h=l.HSLA.exec(i).slice(1).map(function(a,b){return 0===b?parseInt(a,10)/360:3===b?parseFloat(a):parseInt(a,10)/100})),h.length)return f._hslaToRGBA(h);if(l.HSB.test(i)?(h=l.HSB.exec(i).slice(1).map(function(a,b){return 0===b?parseInt(a,10)/360:parseInt(a,10)/100}),h[3]=1):l.HSBA.test(i)&&(h=l.HSBA.exec(i).slice(1).map(function(a,b){return 0===b?parseInt(a,10)/360:3===b?parseFloat(a):parseInt(a,10)/100})),h.length)return f._hsbaToRGBA(h);h=[1,1,1,1]}else{if(1!==a&&2!==a||\"number\"!=typeof arguments[0])throw new Error(arguments+\"is not a valid color representation.\");h[0]=arguments[0]/c[b][2],h[1]=arguments[0]/c[b][2],h[2]=arguments[0]/c[b][2],\"number\"==typeof arguments[1]?h[3]=arguments[1]/c[b][3]:h[3]=1,h=h.map(function(a){return Math.max(Math.min(a,1),0)})}return h},b.exports=d.Color},{\"../core/constants\":49,\"../core/core\":50,\"./color_conversion\":42}],45:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"../core/constants\");a(\"./p5.Color\"),d.prototype.background=function(){return arguments[0]instanceof d.Image?this.image(arguments[0],0,0,this.width,this.height):this._renderer.background.apply(this._renderer,arguments),this},d.prototype.clear=function(){return this._renderer.clear(),this},d.prototype.colorMode=function(){if(arguments[0]===e.RGB||arguments[0]===e.HSB||arguments[0]===e.HSL){this._renderer._colorMode=arguments[0];var a=this._renderer._colorMaxes[this._renderer._colorMode];2===arguments.length?(a[0]=arguments[1],a[1]=arguments[1],a[2]=arguments[1],a[3]=arguments[1]):4===arguments.length?(a[0]=arguments[1],a[1]=arguments[2],a[2]=arguments[3]):5===arguments.length&&(a[0]=arguments[1],a[1]=arguments[2],a[2]=arguments[3],a[3]=arguments[4])}return this},d.prototype.fill=function(){return this._renderer._setProperty(\"_fillSet\",!0),this._renderer._setProperty(\"_doFill\",!0),this._renderer.fill.apply(this._renderer,arguments),this},d.prototype.noFill=function(){return this._renderer._setProperty(\"_doFill\",!1),this},d.prototype.noStroke=function(){return this._renderer._setProperty(\"_doStroke\",!1),this},d.prototype.stroke=function(){return this._renderer._setProperty(\"_strokeSet\",!0),this._renderer._setProperty(\"_doStroke\",!0),this._renderer.stroke.apply(this._renderer,arguments),this},b.exports=d},{\"../core/constants\":49,\"../core/core\":50,\"./p5.Color\":44}],46:[function(a,b,c){\"use strict\";var d=a(\"./core\"),e=a(\"./constants\");a(\"./error_helpers\"),d.prototype.arc=function(a,b,c,d,f,g,h){for(var i=new Array(arguments.length),j=0;j<i.length;++j)i[j]=arguments[j];if(this._validateParameters(\"arc\",i,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"],[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"String\"]]),!this._renderer._doStroke&&!this._renderer._doFill)return this;for(this._angleMode===e.DEGREES&&(f=this.radians(f),g=this.radians(g));0>f;)f+=e.TWO_PI;for(;0>g;)g+=e.TWO_PI;return f%=e.TWO_PI,g%=e.TWO_PI,f=f<=e.HALF_PI?Math.atan(c/d*Math.tan(f)):f>e.HALF_PI&&f<=3*e.HALF_PI?Math.atan(c/d*Math.tan(f))+e.PI:Math.atan(c/d*Math.tan(f))+e.TWO_PI,g=g<=e.HALF_PI?Math.atan(c/d*Math.tan(g)):g>e.HALF_PI&&g<=3*e.HALF_PI?Math.atan(c/d*Math.tan(g))+e.PI:Math.atan(c/d*Math.tan(g))+e.TWO_PI,f>g&&(g+=e.TWO_PI),c=Math.abs(c),d=Math.abs(d),this._renderer.arc(a,b,c,d,f,g,h),this},d.prototype.ellipse=function(a,b,c,d){for(var e=new Array(arguments.length),f=0;f<e.length;++f)e[f]=arguments[f];return this._validateParameters(\"ellipse\",e,[\"Number\",\"Number\",\"Number\",\"Number\"]),this._renderer._doStroke||this._renderer._doFill?(c=Math.abs(c),d=Math.abs(d),this._renderer.ellipse(a,b,c,d),this):this},d.prototype.line=function(){if(!this._renderer._doStroke)return this;for(var a=new Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];return this._renderer.isP3D?(this._validateParameters(\"line\",a,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.line(a[0],a[1],a[2],a[3],a[4],a[5])):(this._validateParameters(\"line\",a,[[\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.line(a[0],a[1],a[2],a[3])),this},d.prototype.point=function(){if(!this._renderer._doStroke)return this;for(var a=new Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];return this._renderer.isP3D?(this._validateParameters(\"point\",a,[[\"Number\",\"Number\",\"Number\"]]),this._renderer.point(a[0],a[1],a[2])):(this._validateParameters(\"point\",a,[[\"Number\",\"Number\"]]),this._renderer.point(a[0],a[1])),this},d.prototype.quad=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var a=new Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];return this._renderer.isP3D?(this._validateParameters(\"quad\",a,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.quad(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11])):(this._validateParameters(\"quad\",a,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.quad(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7])),this},d.prototype.rect=function(a,b,c,d,e,f,g,h){for(var i=new Array(arguments.length),j=0;j<i.length;++j)i[j]=arguments[j];return this._validateParameters(\"rect\",i,[[\"Number\",\"Number\",\"Number\",\"Number\"],[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"],[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer._doStroke||this._renderer._doFill?(this._renderer.rect(a,b,c,d,e,f,g,h),this):void 0},d.prototype.triangle=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var a=new Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];return this._renderer.isP3D?(this._validateParameters(\"triangle\",a,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.triangle(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])):(this._validateParameters(\"triangle\",a,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.triangle(a[0],a[1],a[2],a[3],a[4],a[5])),this},b.exports=d},{\"./constants\":49,\"./core\":50,\"./error_helpers\":53}],47:[function(a,b,c){\"use strict\";var d=a(\"./core\"),e=a(\"./constants\");d.prototype.ellipseMode=function(a){return(a===e.CORNER||a===e.CORNERS||a===e.RADIUS||a===e.CENTER)&&(this._renderer._ellipseMode=a),this},d.prototype.noSmooth=function(){return this._renderer.noSmooth(),this},d.prototype.rectMode=function(a){return(a===e.CORNER||a===e.CORNERS||a===e.RADIUS||a===e.CENTER)&&(this._renderer._rectMode=a),this},d.prototype.smooth=function(){return this._renderer.smooth(),this},d.prototype.strokeCap=function(a){return(a===e.ROUND||a===e.SQUARE||a===e.PROJECT)&&this._renderer.strokeCap(a),this},d.prototype.strokeJoin=function(a){return(a===e.ROUND||a===e.BEVEL||a===e.MITER)&&this._renderer.strokeJoin(a),this},d.prototype.strokeWeight=function(a){return this._renderer.strokeWeight(a),this},b.exports=d},{\"./constants\":49,\"./core\":50}],48:[function(a,b,c){var d=a(\"./constants\");b.exports={modeAdjust:function(a,b,c,e,f){return f===d.CORNER?{x:a,y:b,w:c,h:e}:f===d.CORNERS?{x:a,y:b,w:c-a,h:e-b}:f===d.RADIUS?{x:a-c,y:b-e,w:2*c,h:2*e}:f===d.CENTER?{x:a-.5*c,y:b-.5*e,w:c,h:e}:void 0},arcModeAdjust:function(a,b,c,e,f){return f===d.CORNER?{x:a+.5*c,y:b+.5*e,w:c,h:e}:f===d.CORNERS?{x:a,y:b,w:c+a,h:e+b}:f===d.RADIUS?{x:a,y:b,w:2*c,h:2*e}:f===d.CENTER?{x:a,y:b,w:c,h:e}:void 0}}},{\"./constants\":49}],49:[function(a,b,c){var d=Math.PI;b.exports={P2D:\"p2d\",WEBGL:\"webgl\",ARROW:\"default\",CROSS:\"crosshair\",HAND:\"pointer\",MOVE:\"move\",TEXT:\"text\",WAIT:\"wait\",HALF_PI:d/2,PI:d,QUARTER_PI:d/4,TAU:2*d,TWO_PI:2*d,DEGREES:\"degrees\",RADIANS:\"radians\",CORNER:\"corner\",CORNERS:\"corners\",RADIUS:\"radius\",RIGHT:\"right\",LEFT:\"left\",CENTER:\"center\",TOP:\"top\",BOTTOM:\"bottom\",BASELINE:\"alphabetic\",POINTS:\"points\",LINES:\"lines\",TRIANGLES:\"triangles\",TRIANGLE_FAN:\"triangles_fan\",TRIANGLE_STRIP:\"triangles_strip\",QUADS:\"quads\",QUAD_STRIP:\"quad_strip\",CLOSE:\"close\",OPEN:\"open\",CHORD:\"chord\",PIE:\"pie\",PROJECT:\"square\",SQUARE:\"butt\",ROUND:\"round\",BEVEL:\"bevel\",MITER:\"miter\",RGB:\"rgb\",HSB:\"hsb\",HSL:\"hsl\",AUTO:\"auto\",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:\"normal\",ADD:\"lighter\",DARKEST:\"darken\",LIGHTEST:\"lighten\",DIFFERENCE:\"difference\",EXCLUSION:\"exclusion\",MULTIPLY:\"multiply\",SCREEN:\"screen\",REPLACE:\"source-over\",OVERLAY:\"overlay\",HARD_LIGHT:\"hard-light\",SOFT_LIGHT:\"soft-light\",DODGE:\"color-dodge\",BURN:\"color-burn\",THRESHOLD:\"threshold\",GRAY:\"gray\",OPAQUE:\"opaque\",INVERT:\"invert\",POSTERIZE:\"posterize\",DILATE:\"dilate\",ERODE:\"erode\",BLUR:\"blur\",NORMAL:\"normal\",ITALIC:\"italic\",BOLD:\"bold\",_DEFAULT_TEXT_FILL:\"#000000\",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:\"middle\",LINEAR:\"linear\",QUADRATIC:\"quadratic\",BEZIER:\"bezier\",CURVE:\"curve\",_DEFAULT_STROKE:\"#000000\",_DEFAULT_FILL:\"#FFFFFF\"}},{}],50:[function(a,b,c){\"use strict\";a(\"./shim\");var d=a(\"./constants\"),e=function(a,b,c){2===arguments.length&&\"boolean\"==typeof b&&(c=b,b=void 0),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=b,this._curElement=null,this._elements=[],this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._styles=[],this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._events.wheel=null,this._loadingScreenId=\"p5_loading\",this._start=function(){this._userNode&&\"string\"==typeof this._userNode&&(this._userNode=document.getElementById(this._userNode)),this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,\"p2d\",!0);var a=this.preload||window.preload;if(a){var b=document.getElementById(this._loadingScreenId);if(!b){b=document.createElement(\"div\"),b.innerHTML=\"Loading...\",b.style.position=\"absolute\",b.id=this._loadingScreenId;var c=this._userNode||document.body;c.appendChild(b)}for(var d in this._preloadMethods){this._preloadMethods[d]=this._preloadMethods[d]||e;var f=this._preloadMethods[d];(f===e.prototype||f===e)&&(f=this._isGlobal?window:this),this._registeredPreloadMethods[d]=f[d],f[d]=this._wrapPreload(f,d)}a(),this._runIfPreloadsAreDone()}else this._setup(),this._runFrames(),this._draw()}.bind(this),this._runIfPreloadsAreDone=function(){var a=this._isGlobal?window:this;if(0===a._preloadCount){var b=document.getElementById(a._loadingScreenId);b&&b.parentNode.removeChild(b),a._setup(),a._runFrames(),a._draw()}},this._decrementPreload=function(){var a=this._isGlobal?window:this;a._setProperty(\"_preloadCount\",a._preloadCount-1),a._runIfPreloadsAreDone()},this._wrapPreload=function(a,b){return function(){this._incrementPreload();var c=Array.prototype.slice.call(arguments);return c.push(this._decrementPreload.bind(this)),this._registeredPreloadMethods[b].apply(a,c)}.bind(this)},this._incrementPreload=function(){var a=this._isGlobal?window:this;a._setProperty(\"_preloadCount\",a._preloadCount+1)},this._setup=function(){var a=this._isGlobal?window:this;if(\"function\"==typeof a.preload)for(var b in this._preloadMethods)a[b]=this._preloadMethods[b][b],a[b]&&this&&(a[b]=a[b].bind(this));\"function\"==typeof a.setup&&a.setup();for(var c=new RegExp(/(^|\\s)p5_hidden(?!\\S)/g),d=document.getElementsByClassName(\"p5_hidden\"),e=0;e<d.length;e++){var f=d[e];f.style.visibility=\"\",f.className=f.className.replace(c,\"\")}this._setupDone=!0}.bind(this),this._draw=function(){var a=window.performance.now(),b=a-this._lastFrameTime,c=1e3/this._targetFrameRate,d=5;(!this._loop||b>=c-d)&&(this._renderer.isP3D&&this._renderer._update(),this._setProperty(\"frameCount\",this.frameCount+1),this._updateMouseCoords(),this._updateTouchCoords(),this.redraw(),this._frameRate=1e3/(a-this._lastFrameTime),this._lastFrameTime=a),this._loop&&(this._requestAnimId=window.requestAnimationFrame(this._draw))}.bind(this),this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this),this._setProperty=function(a,b){this[a]=b,this._isGlobal&&(window[a]=b)}.bind(this),this.remove=function(){if(this._curElement){this._loop=!1,this._requestAnimId&&window.cancelAnimationFrame(this._requestAnimId);for(var a in this._events)window.removeEventListener(a,this._events[a]);for(var b=0;b<this._elements.length;b++){var c=this._elements[b];c.elt.parentNode&&c.elt.parentNode.removeChild(c.elt);for(var d in c._events)c.elt.removeEventListener(d,c._events[d])}var f=this;if(this._registeredMethods.remove.forEach(function(a){\"undefined\"!=typeof a&&a.call(f)}),this._isGlobal){for(var g in e.prototype)try{delete window[g]}catch(h){window[g]=void 0}for(var i in this)if(this.hasOwnProperty(i))try{delete window[i]}catch(h){window[i]=void 0}}}}.bind(this);for(var f in d)e.prototype[f]=d[f];if(a)a(this);else{this._isGlobal=!0;for(var g in e.prototype)if(\"function\"==typeof e.prototype[g]){var h=g.substring(2);this._events.hasOwnProperty(h)||(window[g]=e.prototype[g].bind(this))}else window[g]=e.prototype[g];for(var i in this)this.hasOwnProperty(i)&&(window[i]=this[i])}for(var j in this._events){var k=this[\"_on\"+j];if(k){var l=k.bind(this);window.addEventListener(j,l),this._events[j]=l}}var m=function(){this._setProperty(\"focused\",!0)}.bind(this),n=function(){this._setProperty(\"focused\",!1)}.bind(this);window.addEventListener(\"focus\",m),window.addEventListener(\"blur\",n),this.registerMethod(\"remove\",function(){window.removeEventListener(\"focus\",m),window.removeEventListener(\"blur\",n)}),c?this._start():\"complete\"===document.readyState?this._start():window.addEventListener(\"load\",this._start.bind(this),!1);\n};e.prototype._preloadMethods={loadJSON:e.prototype,loadImage:e.prototype,loadStrings:e.prototype,loadXML:e.prototype,loadShape:e.prototype,loadTable:e.prototype,loadFont:e.prototype},e.prototype._registeredMethods={pre:[],post:[],remove:[]},e.prototype._registeredPreloadMethods={},e.prototype.registerPreloadMethod=function(a,b){e.prototype._preloadMethods.hasOwnProperty(a)||(e.prototype._preloadMethods[a]=b)},e.prototype.registerMethod=function(a,b){e.prototype._registeredMethods.hasOwnProperty(a)||(e.prototype._registeredMethods[a]=[]),e.prototype._registeredMethods[a].push(b)},b.exports=e},{\"./constants\":49,\"./shim\":59}],51:[function(a,b,c){\"use strict\";var d=a(\"./core\");a(\"./error_helpers\");var e=20,f=20;d.prototype.bezier=function(a,b,c,d,e,f,g,h){for(var i=new Array(arguments.length),j=0;j<i.length;++j)i[j]=arguments[j];return this._validateParameters(\"bezier\",i,[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]),this._renderer._doStroke?(this._renderer.bezier(a,b,c,d,e,f,g,h),this):this},d.prototype.bezierDetail=function(a){return e=a,this},d.prototype.bezierPoint=function(a,b,c,d,e){var f=1-e;return Math.pow(f,3)*a+3*Math.pow(f,2)*e*b+3*f*Math.pow(e,2)*c+Math.pow(e,3)*d},d.prototype.bezierTangent=function(a,b,c,d,e){var f=1-e;return 3*d*Math.pow(e,2)-3*c*Math.pow(e,2)+6*c*f*e-6*b*f*e+3*b*Math.pow(f,2)-3*a*Math.pow(f,2)},d.prototype.curve=function(a,b,c,d,e,f,g,h){for(var i=new Array(arguments.length),j=0;j<i.length;++j)i[j]=arguments[j];return this._validateParameters(\"curve\",i,[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]),this._renderer._doStroke?(this._renderer.curve(a,b,c,d,e,f,g,h),this):void 0},d.prototype.curveDetail=function(a){return f=a,this},d.prototype.curveTightness=function(a){this._renderer._curveTightness=a},d.prototype.curvePoint=function(a,b,c,d,e){var f=e*e*e,g=e*e,h=-.5*f+g-.5*e,i=1.5*f-2.5*g+1,j=-1.5*f+2*g+.5*e,k=.5*f-.5*g;return a*h+b*i+c*j+d*k},d.prototype.curveTangent=function(a,b,c,d,e){var f=e*e,g=-3*f/2+2*e-.5,h=9*f/2-5*e,i=-9*f/2+4*e+.5,j=3*f/2-e;return a*g+b*h+c*i+d*j},b.exports=d},{\"./core\":50,\"./error_helpers\":53}],52:[function(a,b,c){\"use strict\";function d(a){var b=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!b)throw new Error(\"Fullscreen not enabled in this browser.\");a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}function e(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}var f=a(\"./core\"),g=a(\"./constants\"),h=[g.ARROW,g.CROSS,g.HAND,g.MOVE,g.TEXT,g.WAIT];f.prototype._frameRate=0,f.prototype._lastFrameTime=window.performance.now(),f.prototype._targetFrameRate=60,window.console&&console.log?f.prototype.print=function(a){try{var b=JSON.parse(JSON.stringify(a));console.log(b)}catch(c){console.log(a)}}:f.prototype.print=function(){},f.prototype.println=f.prototype.print,f.prototype.frameCount=0,f.prototype.focused=document.hasFocus(),f.prototype.cursor=function(a,b,c){var d=\"auto\",e=this._curElement.elt;if(h.indexOf(a)>-1)d=a;else if(\"string\"==typeof a){var f=\"\";b&&c&&\"number\"==typeof b&&\"number\"==typeof c&&(f=b+\" \"+c),d=\"http://\"!==a.substring(0,6)?\"url(\"+a+\") \"+f+\", auto\":/\\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(a)?\"url(\"+a+\") \"+f+\", auto\":a}e.style.cursor=d},f.prototype.frameRate=function(a){return\"number\"!=typeof a||0>=a?this._frameRate:(this._setProperty(\"_targetFrameRate\",a),this._runFrames(),this)},f.prototype.getFrameRate=function(){return this.frameRate()},f.prototype.setFrameRate=function(a){return this.frameRate(a)},f.prototype.noCursor=function(){this._curElement.elt.style.cursor=\"none\"},f.prototype.displayWidth=screen.width,f.prototype.displayHeight=screen.height,f.prototype.windowWidth=window.innerWidth,f.prototype.windowHeight=window.innerHeight,f.prototype._onresize=function(a){this._setProperty(\"windowWidth\",window.innerWidth),this._setProperty(\"windowHeight\",window.innerHeight);var b,c=this._isGlobal?window:this;\"function\"==typeof c.windowResized&&(b=c.windowResized(a),void 0===b||b||a.preventDefault())},f.prototype.width=0,f.prototype.height=0,f.prototype.fullScreen=function(a){return\"undefined\"==typeof a?document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement:void(a?d(document.documentElement):e())},f.prototype.pixelDensity=function(a){return\"number\"!=typeof a?this._pixelDensity:(this._pixelDensity=a,void this.resizeCanvas(this.width,this.height,!0))},f.prototype.displayDensity=function(){return window.devicePixelRatio},f.prototype.getURL=function(){return location.href},f.prototype.getURLPath=function(){return location.pathname.split(\"/\").filter(function(a){return\"\"!==a})},f.prototype.getURLParams=function(){for(var a,b=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,c={};null!=(a=b.exec(location.search));)a.index===b.lastIndex&&b.lastIndex++,c[a[1]]=a[2];return c},b.exports=f},{\"./constants\":49,\"./core\":50}],53:[function(a,b,c){\"use strict\";function d(a,b,c){if(a.match(/^p5\\./)){var d=a.split(\".\");return c instanceof h[d[1]]}return\"Boolean\"===a||a.toLowerCase()===b||q.indexOf(a)>-1&&p(c)}function e(a,b,c){i&&(f(),i=!1),\"undefined\"===n(c)?c=\"#B40033\":\"number\"===n(c)&&(c=v[c])}function f(){var a=\"transparent\",b=\"#ED225D\",c=\"#ED225D\",d=\"white\";console.log(\"%c    _ \\n /\\\\| |/\\\\ \\n \\\\ ` ' /  \\n / , . \\\\  \\n \\\\/|_|\\\\/ \\n\\n%c> p5.js says: Welcome! This is your friendly debugger. To turn me off switch to using p5.min.js.\",\"background-color:\"+a+\";color:\"+b+\";\",\"background-color:\"+c+\";color:\"+d+\";\")}function g(a){x.forEach(function(b){a.message&&-1!==a.message.indexOf(b)&&console.log(\"%c Did you just try to use p5.js's '\"+b+\"' function or variable? If so, you may want to move it into your sketch's setup() function.\",\"color: #B40033\")})}for(var h=a(\"./core\"),i=!1,j={},k=j.toString,l=[\"Boolean\",\"Number\",\"String\",\"Function\",\"Array\",\"Date\",\"RegExp\",\"Object\",\"Error\"],m=0;m<l.length;m++)j[\"[object \"+l[m]+\"]\"]=l[m].toLowerCase();var n=function(a){return null==a?a+\"\":\"object\"==typeof a||\"function\"==typeof a?j[k.call(a)]||\"object\":typeof a},o=Array.isArray||function(a){return\"array\"===n(a)},p=function(a){return!o(a)&&a-parseFloat(a)+1>=0},q=[\"Number\",\"Integer\",\"Number/Constant\"],r=0,s=1,t=2,u=3,v=[\"#2D7BB6\",\"#EE9900\",\"#4DB200\",\"#C83C00\"];h.prototype._validateParameters=function(a,b,c){o(c[0])||(c=[c]);for(var f,g=Math.abs(b.length-c[0].length),h=0,i=1,j=c.length;j>i;i++){var k=Math.abs(b.length-c[i].length);g>=k&&(h=i,g=k)}var l=\"X\";g>0&&(f=\"You wrote \"+a+\"(\",b.length>0&&(f+=l+Array(b.length).join(\",\"+l)),f+=\"). \"+a+\" was expecting \"+c[h].length+\" parameters. Try \"+a+\"(\",c[h].length>0&&(f+=l+Array(c[h].length).join(\",\"+l)),f+=\").\",c.length>1&&(f+=\" \"+a+\" takes different numbers of parameters depending on what you want to do. Click this link to learn more: \"),e(f,a,r));for(var m=0;m<c.length;m++)for(var p=0;p<c[m].length&&p<b.length;p++){var q=c[m][p],u=n(b[p]);\"undefined\"===u||null===u?e(\"It looks like \"+a+\" received an empty variable in spot #\"+(p+1)+\". If not intentional, this is often a problem with scope: [link to scope].\",a,s):\"*\"===q||d(q,u,b[p])||(f=a+\" was expecting a \"+q.toLowerCase()+\" for parameter #\"+(p+1)+\", received \",f+=\"string\"===u?'\"'+b[p]+'\"':b[p],f+=\" instead.\",c.length>1&&(f+=\" \"+a+\" takes different numbers of parameters depending on what you want to do. Click this link to learn more:\"),e(f,a,t))}},h.prototype._validateParameters=function(){return!0};var w={0:{fileType:\"image\",method:\"loadImage\",message:\" hosting the image online,\"},1:{fileType:\"XML file\",method:\"loadXML\"},2:{fileType:\"table file\",method:\"loadTable\"},3:{fileType:\"text file\",method:\"loadStrings\"}};h._friendlyFileLoadError=function(a,b){var c=w[a],d=\"It looks like there was a problem loading your \"+c.fileType+\". Try checking if the file path%c [\"+b+\"] %cis correct,\"+(c.message||\"\")+\" or running a local server.\";e(d,c.method,u)};var x=[\"color\",\"random\"];\"complete\"!==document.readyState&&(window.addEventListener(\"error\",g,!1),window.addEventListener(\"load\",function(){window.removeEventListener(\"error\",g,!1)})),b.exports=h},{\"./core\":50}],54:[function(a,b,c){function d(a,b,c){var d=b.bind(c);c.elt.addEventListener(a,d,!1),c._events[a]=d}var e=a(\"./core\");e.Element=function(a,b){this.elt=a,this._pInst=b,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},e.Element.prototype.parent=function(a){return 0===arguments.length?this.elt.parentNode:(\"string\"==typeof a?(\"#\"===a[0]&&(a=a.substring(1)),a=document.getElementById(a)):a instanceof e.Element&&(a=a.elt),a.appendChild(this.elt),this)},e.Element.prototype.id=function(a){return 0===arguments.length?this.elt.id:(this.elt.id=a,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},e.Element.prototype[\"class\"]=function(a){return 0===arguments.length?this.elt.className:(this.elt.className=a,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},e.Element.prototype.mousePressed=function(a){return d(\"mousedown\",a,this),d(\"touchstart\",a,this),this},e.Element.prototype.mouseWheel=function(a){return d(\"wheel\",a,this),this},e.Element.prototype.mouseReleased=function(a){return d(\"mouseup\",a,this),d(\"touchend\",a,this),this},e.Element.prototype.mouseClicked=function(a){return d(\"click\",a,this),this},e.Element.prototype.mouseMoved=function(a){return d(\"mousemove\",a,this),d(\"touchmove\",a,this),this},e.Element.prototype.mouseOver=function(a){return d(\"mouseover\",a,this),this},e.Element.prototype.changed=function(a){return d(\"change\",a,this),this},e.Element.prototype.input=function(a){return d(\"input\",a,this),this},e.Element.prototype.mouseOut=function(a){return d(\"mouseout\",a,this),this},e.Element.prototype.touchStarted=function(a){return d(\"touchstart\",a,this),d(\"mousedown\",a,this),this},e.Element.prototype.touchMoved=function(a){return d(\"touchmove\",a,this),d(\"mousemove\",a,this),this},e.Element.prototype.touchEnded=function(a){return d(\"touchend\",a,this),d(\"mouseup\",a,this),this},e.Element.prototype.dragOver=function(a){return d(\"dragover\",a,this),this},e.Element.prototype.dragLeave=function(a){return d(\"dragleave\",a,this),this},e.Element.prototype.drop=function(a,b){function c(b){var c=new e.File(b);return function(b){c.data=b.target.result,a(c)}}return window.File&&window.FileReader&&window.FileList&&window.Blob?(d(\"dragover\",function(a){a.stopPropagation(),a.preventDefault()},this),d(\"dragleave\",function(a){a.stopPropagation(),a.preventDefault()},this),arguments.length>1&&d(\"drop\",b,this),d(\"drop\",function(a){a.stopPropagation(),a.preventDefault();for(var b=a.dataTransfer.files,d=0;d<b.length;d++){var e=b[d],f=new FileReader;f.onload=c(e),e.type.indexOf(\"text\")>-1?f.readAsText(e):f.readAsDataURL(e)}},this)):console.log(\"The File APIs are not fully supported in this browser.\"),this},e.Element.prototype._setProperty=function(a,b){this[a]=b},b.exports=e.Element},{\"./core\":50}],55:[function(a,b,c){var d=a(\"./core\"),e=a(\"./constants\");d.Graphics=function(a,b,c,f){var g=c||e.P2D,h=document.createElement(\"canvas\"),i=this._userNode||document.body;i.appendChild(h),d.Element.call(this,h,f,!1),this._styles=[],this.width=a,this.height=b,this._pixelDensity=f._pixelDensity,g===e.WEBGL?this._renderer=new d.Renderer3D(h,f,!1):this._renderer=new d.Renderer2D(h,f,!1),this._renderer.resize(a,b),this._renderer._applyDefaults(),f._elements.push(this);for(var j in d.prototype)this[j]||(\"function\"==typeof d.prototype[j]?this[j]=d.prototype[j].bind(this):this[j]=d.prototype[j]);return this},d.Graphics.prototype=Object.create(d.Element.prototype),b.exports=d.Graphics},{\"./constants\":49,\"./core\":50}],56:[function(a,b,c){function d(a){var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}else b+=a.offsetLeft,c+=a.offsetTop;return[b,c]}var e=a(\"./core\"),f=a(\"../core/constants\");e.Renderer=function(a,b,c){e.Element.call(this,a,b),this.canvas=a,this._pInst=b,c?(this._isMainCanvas=!0,this._pInst._setProperty(\"_curElement\",this),this._pInst._setProperty(\"canvas\",this.canvas),this._pInst._setProperty(\"width\",this.width),this._pInst._setProperty(\"height\",this.height)):(this.canvas.style.display=\"none\",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont=\"sans-serif\",this._textStyle=f.NORMAL,this._textAscent=null,this._textDescent=null,this._rectMode=f.CORNER,this._ellipseMode=f.CENTER,this._curveTightness=0,this._imageMode=f.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._colorMode=f.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]}},e.Renderer.prototype=Object.create(e.Element.prototype),e.Renderer.prototype.resize=function(a,b){this.width=a,this.height=b,this.elt.width=a*this._pInst._pixelDensity,this.elt.height=b*this._pInst._pixelDensity,this.elt.style.width=a+\"px\",this.elt.style.height=b+\"px\",this._isMainCanvas&&(this._pInst._setProperty(\"width\",this.width),this._pInst._setProperty(\"height\",this.height))},e.Renderer.prototype.textLeading=function(a){return arguments.length&&arguments[0]?(this._setProperty(\"_textLeading\",a),this):this._textLeading},e.Renderer.prototype.textSize=function(a){return arguments.length&&arguments[0]?(this._setProperty(\"_textSize\",a),this._setProperty(\"_textLeading\",a*f._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},e.Renderer.prototype.textStyle=function(a){return arguments.length&&arguments[0]?((a===f.NORMAL||a===f.ITALIC||a===f.BOLD)&&this._setProperty(\"_textStyle\",a),this._applyTextProperties()):this._textStyle},e.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},e.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},e.Renderer.prototype._isOpenType=function(a){return a=a||this._textFont,\"object\"==typeof a&&a.font&&a.font.supported},e.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty(\"_textAscent\",this._textFont._textAscent()),this._setProperty(\"_textDescent\",this._textFont._textDescent()),this;var a=document.createElement(\"span\");a.style.fontFamily=this._textFont,a.style.fontSize=this._textSize+\"px\",a.innerHTML=\"ABCjgq|\";var b=document.createElement(\"div\");b.style.display=\"inline-block\",b.style.width=\"1px\",b.style.height=\"0px\";var c=document.createElement(\"div\");c.appendChild(a),c.appendChild(b),c.style.height=\"0px\",c.style.overflow=\"hidden\",document.body.appendChild(c),b.style.verticalAlign=\"baseline\";var e=d(b),f=d(a),g=e[1]-f[1];b.style.verticalAlign=\"bottom\",e=d(b),f=d(a);var h=e[1]-f[1],i=h-g;return document.body.removeChild(c),this._setProperty(\"_textAscent\",g),this._setProperty(\"_textDescent\",i),this},b.exports=e.Renderer},{\"../core/constants\":49,\"./core\":50}],57:[function(a,b,c){var d=a(\"./core\"),e=a(\"./canvas\"),f=a(\"./constants\"),g=a(\"../image/filters\");a(\"./p5.Renderer\");var h=\"rgba(0,0,0,0)\";d.Renderer2D=function(a,b,c){return d.Renderer.call(this,a,b,c),this.drawingContext=this.canvas.getContext(\"2d\"),this._pInst._setProperty(\"drawingContext\",this.drawingContext),this},d.Renderer2D.prototype=Object.create(d.Renderer.prototype),d.Renderer2D.prototype._applyDefaults=function(){this.drawingContext.fillStyle=f._DEFAULT_FILL,this.drawingContext.strokeStyle=f._DEFAULT_STROKE,this.drawingContext.lineCap=f.ROUND,this.drawingContext.font=\"normal 12px sans-serif\"},d.Renderer2D.prototype.resize=function(a,b){d.Renderer.prototype.resize.call(this,a,b),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},d.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),arguments[0]instanceof d.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var a=this.drawingContext.fillStyle,b=this._pInst.color.apply(this._pInst,arguments),c=b.toString();this.drawingContext.fillStyle=c,this.drawingContext.fillRect(0,0,this.width,this.height),this.drawingContext.fillStyle=a}this.drawingContext.restore()},d.Renderer2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)},d.Renderer2D.prototype.fill=function(){var a=this.drawingContext,b=this._pInst.color.apply(this._pInst,arguments);a.fillStyle=b.toString()},d.Renderer2D.prototype.stroke=function(){var a=this.drawingContext,b=this._pInst.color.apply(this._pInst,arguments);a.strokeStyle=b.toString()},d.Renderer2D.prototype.image=function(a,b,c,e,f,g,h,i,j){var k;try{this._tint&&(d.MediaElement&&a instanceof d.MediaElement&&a.loadPixels(),a.canvas&&(k=this._getTintedImageCanvas(a))),k||(k=a.canvas||a.elt),this.drawingContext.drawImage(k,b,c,e,f,g,h,i,j)}catch(l){if(\"NS_ERROR_NOT_AVAILABLE\"!==l.name)throw l}},d.Renderer2D.prototype._getTintedImageCanvas=function(a){if(!a.canvas)return a;var b=g._toPixels(a.canvas),c=document.createElement(\"canvas\");c.width=a.canvas.width,c.height=a.canvas.height;for(var d=c.getContext(\"2d\"),e=d.createImageData(a.canvas.width,a.canvas.height),f=e.data,h=0;h<b.length;h+=4){var i=b[h],j=b[h+1],k=b[h+2],l=b[h+3];f[h]=i*this._tint[0]/255,f[h+1]=j*this._tint[1]/255,f[h+2]=k*this._tint[2]/255,f[h+3]=l*this._tint[3]/255}return d.putImageData(e,0,0),c},d.Renderer2D.prototype.blendMode=function(a){this.drawingContext.globalCompositeOperation=a},d.Renderer2D.prototype.blend=function(){var a=this.drawingContext.globalCompositeOperation,b=arguments[arguments.length-1],c=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=b,this._pInst.copy.apply(this._pInst,c),this.drawingContext.globalCompositeOperation=a},d.Renderer2D.prototype.copy=function(){var a,b,c,e,f,g,h,i,j;if(9===arguments.length)a=arguments[0],b=arguments[1],c=arguments[2],e=arguments[3],f=arguments[4],g=arguments[5],h=arguments[6],i=arguments[7],j=arguments[8];else{if(8!==arguments.length)throw new Error(\"Signature not supported\");a=this._pInst,b=arguments[0],c=arguments[1],e=arguments[2],f=arguments[3],g=arguments[4],h=arguments[5],i=arguments[6],j=arguments[7]}d.Renderer2D._copyHelper(a,b,c,e,f,g,h,i,j)},d.Renderer2D._copyHelper=function(a,b,c,d,e,f,g,h,i){var j=a.canvas.width/a.width;this.drawingContext.drawImage(a.canvas,j*b,j*c,j*d,j*e,f,g,h,i)},d.Renderer2D.prototype.get=function(a,b,c,e){if(void 0===a&&void 0===b&&void 0===c&&void 0===e?(a=0,b=0,c=this.width,e=this.height):void 0===c&&void 0===e&&(c=1,e=1),0>a+c||0>b+e||a>this.width||b>this.height)return[0,0,0,255];var f=this._pInst||this,g=f._pixelDensity;if(this.loadPixels.call(f),a=Math.floor(a),b=Math.floor(b),1===c&&1===e)return[f.pixels[4*g*(b*this.width+a)],f.pixels[g*(4*(b*this.width+a)+1)],f.pixels[g*(4*(b*this.width+a)+2)],f.pixels[g*(4*(b*this.width+a)+3)]];var h=a*g,i=b*g,j=Math.min(c,f.width),k=Math.min(e,f.height),l=j*g,m=k*g,n=new d.Image(j,k);return n.canvas.getContext(\"2d\").drawImage(this.canvas,h,i,l,m,0,0,j,k),n},d.Renderer2D.prototype.loadPixels=function(){var a=this._pixelDensity||this._pInst._pixelDensity,b=this.width*a,c=this.height*a,d=this.drawingContext.getImageData(0,0,b,c);this._pInst?(this._pInst._setProperty(\"imageData\",d),this._pInst._setProperty(\"pixels\",d.data)):(this._setProperty(\"imageData\",d),this._setProperty(\"pixels\",d.data))},d.Renderer2D.prototype.set=function(a,b,c){if(a=Math.floor(a),b=Math.floor(b),c instanceof d.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this.drawingContext.drawImage(c.canvas,a,b),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var e=this._pInst||this,f=0,g=0,h=0,i=0,j=4*(b*e._pixelDensity*this.width*e._pixelDensity+a*e._pixelDensity);if(e.imageData||e.loadPixels.call(e),\"number\"==typeof c)j<e.pixels.length&&(f=c,g=c,h=c,i=255);else if(c instanceof Array){if(c.length<4)throw new Error(\"pixel array must be of the form [R, G, B, A]\");j<e.pixels.length&&(f=c[0],g=c[1],h=c[2],i=c[3])}else c instanceof d.Color&&j<e.pixels.length&&(f=c.levels[0],g=c.levels[1],h=c.levels[2],i=c.levels[3]);for(var k=0;k<e._pixelDensity;k++)for(var l=0;l<e._pixelDensity;l++)j=4*((b*e._pixelDensity+l)*this.width*e._pixelDensity+(a*e._pixelDensity+k)),e.pixels[j]=f,e.pixels[j+1]=g,e.pixels[j+2]=h,e.pixels[j+3]=i}},d.Renderer2D.prototype.updatePixels=function(a,b,c,d){var e=this._pixelDensity||this._pInst._pixelDensity;void 0===a&&void 0===b&&void 0===c&&void 0===d&&(a=0,b=0,c=this.width,d=this.height),c*=e,d*=e,this._pInst?this.drawingContext.putImageData(this._pInst.imageData,a,b,0,0,c,d):this.drawingContext.putImageData(this.imageData,a,b,0,0,c,d)},d.Renderer2D.prototype._acuteArcToBezier=function(a,b){var c=b/2,d=Math.cos(c),e=Math.sin(c),f=1/Math.tan(c),g=a+c,h=Math.cos(g),i=Math.sin(g),j=(4-d)/3,k=e+(d-j)*f;return{ax:Math.cos(a),ay:Math.sin(a),bx:j*h+k*i,by:j*i-k*h,cx:j*h-k*i,cy:j*i+k*h,dx:Math.cos(a+b),dy:Math.sin(a+b)}},d.Renderer2D.prototype.arc=function(a,b,c,d,g,h,i){for(var j=this.drawingContext,k=e.arcModeAdjust(a,b,c,d,this._ellipseMode),l=k.w/2,m=k.h/2,n=1e-5,o=0,p=[];h-g>n;)o=Math.min(h-g,f.HALF_PI),p.push(this._acuteArcToBezier(g,o)),g+=o;return this._doFill&&(j.beginPath(),p.forEach(function(a,b){0===b&&j.moveTo(k.x+a.ax*l,k.y+a.ay*m),j.bezierCurveTo(k.x+a.bx*l,k.y+a.by*m,k.x+a.cx*l,k.y+a.cy*m,k.x+a.dx*l,k.y+a.dy*m)}),(i===f.PIE||null==i)&&j.lineTo(k.x,k.y),j.closePath(),j.fill()),this._doStroke&&(j.beginPath(),p.forEach(function(a,b){0===b&&j.moveTo(k.x+a.ax*l,k.y+a.ay*m),j.bezierCurveTo(k.x+a.bx*l,k.y+a.by*m,k.x+a.cx*l,k.y+a.cy*m,k.x+a.dx*l,k.y+a.dy*m)}),i===f.PIE?(j.lineTo(k.x,k.y),j.closePath()):i===f.CHORD&&j.closePath(),j.stroke()),this},d.Renderer2D.prototype.ellipse=function(a,b,c,d){var f=this.drawingContext,g=this._doFill,i=this._doStroke;if(g&&!i){if(f.fillStyle===h)return this}else if(!g&&i&&f.strokeStyle===h)return this;var j=e.modeAdjust(a,b,c,d,this._ellipseMode),k=.5522847498,l=j.w/2*k,m=j.h/2*k,n=j.x+j.w,o=j.y+j.h,p=j.x+j.w/2,q=j.y+j.h/2;f.beginPath(),f.moveTo(j.x,q),f.bezierCurveTo(j.x,q-m,p-l,j.y,p,j.y),f.bezierCurveTo(p+l,j.y,n,q-m,n,q),f.bezierCurveTo(n,q+m,p+l,o,p,o),f.bezierCurveTo(p-l,o,j.x,q+m,j.x,q),f.closePath(),g&&f.fill(),i&&f.stroke()},d.Renderer2D.prototype.line=function(a,b,c,d){var e=this.drawingContext;return this._doStroke?e.strokeStyle===h?this:(e.lineWidth%2===1&&e.translate(.5,.5),e.beginPath(),e.moveTo(a,b),e.lineTo(c,d),e.stroke(),e.lineWidth%2===1&&e.translate(-.5,-.5),this):this},d.Renderer2D.prototype.point=function(a,b){var c=this.drawingContext,d=c.strokeStyle,e=c.fillStyle;return this._doStroke?c.strokeStyle===h?this:(a=Math.round(a),b=Math.round(b),c.fillStyle=d,c.lineWidth>1?(c.beginPath(),c.arc(a,b,c.lineWidth/2,0,f.TWO_PI,!1),c.fill()):c.fillRect(a,b,1,1),void(c.fillStyle=e)):this},d.Renderer2D.prototype.quad=function(a,b,c,d,e,f,g,i){var j=this.drawingContext,k=this._doFill,l=this._doStroke;if(k&&!l){if(j.fillStyle===h)return this}else if(!k&&l&&j.strokeStyle===h)return this;return j.beginPath(),j.moveTo(a,b),j.lineTo(c,d),j.lineTo(e,f),j.lineTo(g,i),j.closePath(),k&&j.fill(),l&&j.stroke(),this},d.Renderer2D.prototype.rect=function(a,b,c,d,f,g,i,j){var k=this.drawingContext,l=this._doFill,m=this._doStroke;if(l&&!m){if(k.fillStyle===h)return this}else if(!l&&m&&k.strokeStyle===h)return this;var n=e.modeAdjust(a,b,c,d,this._rectMode);if(this._doStroke&&k.lineWidth%2===1&&k.translate(.5,.5),k.beginPath(),\"undefined\"==typeof f)k.rect(n.x,n.y,n.w,n.h);else{\"undefined\"==typeof g&&(g=f),\"undefined\"==typeof i&&(i=g),\"undefined\"==typeof j&&(j=i);var o=n.x,p=n.y,q=n.w,r=n.h,s=q/2,t=r/2;2*f>q&&(f=s),2*f>r&&(f=t),2*g>q&&(g=s),2*g>r&&(g=t),2*i>q&&(i=s),2*i>r&&(i=t),2*j>q&&(j=s),2*j>r&&(j=t),k.beginPath(),k.moveTo(o+f,p),k.arcTo(o+q,p,o+q,p+r,g),k.arcTo(o+q,p+r,o,p+r,i),k.arcTo(o,p+r,o,p,j),k.arcTo(o,p,o+q,p,f),k.closePath()}return this._doFill&&k.fill(),this._doStroke&&k.stroke(),this._doStroke&&k.lineWidth%2===1&&k.translate(-.5,-.5),this},d.Renderer2D.prototype.triangle=function(a,b,c,d,e,f){var g=this.drawingContext,i=this._doFill,j=this._doStroke;if(i&&!j){if(g.fillStyle===h)return this}else if(!i&&j&&g.strokeStyle===h)return this;g.beginPath(),g.moveTo(a,b),g.lineTo(c,d),g.lineTo(e,f),g.closePath(),i&&g.fill(),j&&g.stroke()},d.Renderer2D.prototype.endShape=function(a,b,c,d,e,g,h){if(0===b.length)return this;if(!this._doStroke&&!this._doFill)return this;var i,j=a===f.CLOSE;j&&!g&&b.push(b[0]);var k,l,m=b.length;if(!c||h!==f.POLYGON&&null!==h)if(!d||h!==f.POLYGON&&null!==h)if(!e||h!==f.POLYGON&&null!==h)if(h===f.POINTS)for(k=0;m>k;k++)i=b[k],this._doStroke&&this._pInst.stroke(i[6]),this._pInst.point(i[0],i[1]);else if(h===f.LINES)for(k=0;m>k+1;k+=2)i=b[k],this._doStroke&&this._pInst.stroke(b[k+1][6]),this._pInst.line(i[0],i[1],b[k+1][0],b[k+1][1]);else if(h===f.TRIANGLES)for(k=0;m>k+2;k+=3)i=b[k],this.drawingContext.beginPath(),this.drawingContext.moveTo(i[0],i[1]),this.drawingContext.lineTo(b[k+1][0],b[k+1][1]),this.drawingContext.lineTo(b[k+2][0],b[k+2][1]),this.drawingContext.lineTo(i[0],i[1]),this._doFill&&(this._pInst.fill(b[k+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(b[k+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(h===f.TRIANGLE_STRIP)for(k=0;m>k+1;k++)i=b[k],this.drawingContext.beginPath(),this.drawingContext.moveTo(b[k+1][0],b[k+1][1]),this.drawingContext.lineTo(i[0],i[1]),this._doStroke&&this._pInst.stroke(b[k+1][6]),this._doFill&&this._pInst.fill(b[k+1][5]),m>k+2&&(this.drawingContext.lineTo(b[k+2][0],b[k+2][1]),this._doStroke&&this._pInst.stroke(b[k+2][6]),this._doFill&&this._pInst.fill(b[k+2][5])),this._doFillStrokeClose();else if(h===f.TRIANGLE_FAN){if(m>2)for(this.drawingContext.beginPath(),this.drawingContext.moveTo(b[0][0],b[0][1]),this.drawingContext.lineTo(b[1][0],b[1][1]),this.drawingContext.lineTo(b[2][0],b[2][1]),this._doFill&&this._pInst.fill(b[2][5]),this._doStroke&&this._pInst.stroke(b[2][6]),this._doFillStrokeClose(),k=3;m>k;k++)i=b[k],this.drawingContext.beginPath(),this.drawingContext.moveTo(b[0][0],b[0][1]),this.drawingContext.lineTo(b[k-1][0],b[k-1][1]),this.drawingContext.lineTo(i[0],i[1]),this._doFill&&this._pInst.fill(i[5]),this._doStroke&&this._pInst.stroke(i[6]),this._doFillStrokeClose()}else if(h===f.QUADS)for(k=0;m>k+3;k+=4){for(i=b[k],this.drawingContext.beginPath(),this.drawingContext.moveTo(i[0],i[1]),l=1;4>l;l++)this.drawingContext.lineTo(b[k+l][0],b[k+l][1]);this.drawingContext.lineTo(i[0],i[1]),this._doFill&&this._pInst.fill(b[k+3][5]),this._doStroke&&this._pInst.stroke(b[k+3][6]),this._doFillStrokeClose()}else if(h===f.QUAD_STRIP){if(m>3)for(k=0;m>k+1;k+=2)i=b[k],this.drawingContext.beginPath(),m>k+3?(this.drawingContext.moveTo(b[k+2][0],b[k+2][1]),this.drawingContext.lineTo(i[0],i[1]),this.drawingContext.lineTo(b[k+1][0],b[k+1][1]),this.drawingContext.lineTo(b[k+3][0],b[k+3][1]),this._doFill&&this._pInst.fill(b[k+3][5]),this._doStroke&&this._pInst.stroke(b[k+3][6])):(this.drawingContext.moveTo(i[0],i[1]),this.drawingContext.lineTo(b[k+1][0],b[k+1][1])),this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(b[0][0],b[0][1]),k=1;m>k;k++)i=b[k],i.isVert&&(i.moveTo?this.drawingContext.moveTo(i[0],i[1]):this.drawingContext.lineTo(i[0],i[1]));this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),k=0;m>k;k++)b[k].isVert?b[k].moveTo?this.drawingContext.moveTo([0],b[k][1]):this.drawingContext.lineTo(b[k][0],b[k][1]):this.drawingContext.quadraticCurveTo(b[k][0],b[k][1],b[k][2],b[k][3]);this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),k=0;m>k;k++)b[k].isVert?b[k].moveTo?this.drawingContext.moveTo(b[k][0],b[k][1]):this.drawingContext.lineTo(b[k][0],b[k][1]):this.drawingContext.bezierCurveTo(b[k][0],b[k][1],b[k][2],b[k][3],b[k][4],b[k][5]);this._doFillStrokeClose()}else if(m>3){var n=[],o=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(b[1][0],b[1][1]),k=1;m>k+2;k++)i=b[k],n[0]=[i[0],i[1]],n[1]=[i[0]+(o*b[k+1][0]-o*b[k-1][0])/6,i[1]+(o*b[k+1][1]-o*b[k-1][1])/6],n[2]=[b[k+1][0]+(o*b[k][0]-o*b[k+2][0])/6,b[k+1][1]+(o*b[k][1]-o*b[k+2][1])/6],n[3]=[b[k+1][0],b[k+1][1]],this.drawingContext.bezierCurveTo(n[1][0],n[1][1],n[2][0],n[2][1],n[3][0],n[3][1]);j&&this.drawingContext.lineTo(b[k+1][0],b[k+1][1]),this._doFillStrokeClose()}return c=!1,d=!1,e=!1,g=!1,j&&b.pop(),this},d.Renderer2D.prototype.noSmooth=function(){return\"imageSmoothingEnabled\"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!1:\"mozImageSmoothingEnabled\"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!1:\"webkitImageSmoothingEnabled\"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!1:\"msImageSmoothingEnabled\"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!1),this},d.Renderer2D.prototype.smooth=function(){return\"imageSmoothingEnabled\"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!0:\"mozImageSmoothingEnabled\"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!0:\"webkitImageSmoothingEnabled\"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!0:\"msImageSmoothingEnabled\"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!0),this},d.Renderer2D.prototype.strokeCap=function(a){return(a===f.ROUND||a===f.SQUARE||a===f.PROJECT)&&(this.drawingContext.lineCap=a),this},d.Renderer2D.prototype.strokeJoin=function(a){return(a===f.ROUND||a===f.BEVEL||a===f.MITER)&&(this.drawingContext.lineJoin=a),this},d.Renderer2D.prototype.strokeWeight=function(a){return\"undefined\"==typeof a||0===a?this.drawingContext.lineWidth=1e-4:this.drawingContext.lineWidth=a,this},d.Renderer2D.prototype._getFill=function(){return this.drawingContext.fillStyle},d.Renderer2D.prototype._getStroke=function(){return this.drawingContext.strokeStyle},d.Renderer2D.prototype.bezier=function(a,b,c,d,e,f,g,h){return this._pInst.beginShape(),this._pInst.vertex(a,b),this._pInst.bezierVertex(c,d,e,f,g,h),this._pInst.endShape(),this},d.Renderer2D.prototype.curve=function(a,b,c,d,e,f,g,h){return this._pInst.beginShape(),this._pInst.curveVertex(a,b),this._pInst.curveVertex(c,d),this._pInst.curveVertex(e,f),this._pInst.curveVertex(g,h),this._pInst.endShape(),this},d.Renderer2D.prototype._doFillStrokeClose=function(){this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke(),this.drawingContext.closePath()},d.Renderer2D.prototype.applyMatrix=function(a,b,c,d,e,f){this.drawingContext.transform(a,b,c,d,e,f)},d.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},d.Renderer2D.prototype.rotate=function(a){this.drawingContext.rotate(a)},d.Renderer2D.prototype.scale=function(a,b){return this.drawingContext.scale(a,b),this},d.Renderer2D.prototype.shearX=function(a){return this._pInst._angleMode===f.DEGREES&&(a=this._pInst.radians(a)),this.drawingContext.transform(1,0,this._pInst.tan(a),1,0,0),this},d.Renderer2D.prototype.shearY=function(a){return this._pInst._angleMode===f.DEGREES&&(a=this._pInst.radians(a)),this.drawingContext.transform(1,this._pInst.tan(a),0,1,0,0),this},d.Renderer2D.prototype.translate=function(a,b){return this.drawingContext.translate(a,b),this},d.Renderer2D.prototype.text=function(a,b,c,d,e){var g,h,i,j,k,l,m,n,o,p,q=this._pInst,r=Number.MAX_VALUE;if(this._doFill||this._doStroke){if(\"string\"!=typeof a&&(a=a.toString()),a=a.replace(/(\\t)/g,\"  \"),g=a.split(\"\\n\"),\"undefined\"!=typeof d){for(o=0,i=0;i<g.length;i++)for(k=\"\",n=g[i].split(\" \"),h=0;h<n.length;h++)l=k+n[h]+\" \",\nm=this.textWidth(l),m>d?(k=n[h]+\" \",o+=q.textLeading()):k=l;switch(this._rectMode===f.CENTER&&(b-=d/2,c-=e/2),this.drawingContext.textAlign){case f.CENTER:b+=d/2;break;case f.RIGHT:b+=d}if(\"undefined\"!=typeof e){switch(this.drawingContext.textBaseline){case f.BOTTOM:c+=e-o;break;case f._CTX_MIDDLE:c+=(e-o)/2;break;case f.BASELINE:p=!0,this.drawingContext.textBaseline=f.TOP}r=c+e-q.textAscent()}for(i=0;i<g.length;i++){for(k=\"\",n=g[i].split(\" \"),h=0;h<n.length;h++)l=k+n[h]+\" \",m=this.textWidth(l),m>d&&k.length>0?(this._renderText(q,k,b,c,r),k=n[h]+\" \",c+=q.textLeading()):k=l;this._renderText(q,k,b,c,r),c+=q.textLeading()}}else for(j=0;j<g.length;j++)this._renderText(q,g[j],b,c,r),c+=q.textLeading();return p&&(this.drawingContext.textBaseline=f.BASELINE),q}},d.Renderer2D.prototype._renderText=function(a,b,c,d,e){return d>=e?void 0:(a.push(),this._isOpenType()?this._textFont._renderPath(b,c,d,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(b,c,d),this._doFill&&(this.drawingContext.fillStyle=this._fillSet?this.drawingContext.fillStyle:f._DEFAULT_TEXT_FILL,this.drawingContext.fillText(b,c,d))),a.pop(),a)},d.Renderer2D.prototype.textWidth=function(a){return this._isOpenType()?this._textFont._textWidth(a):this.drawingContext.measureText(a).width},d.Renderer2D.prototype.textAlign=function(a,b){if(arguments.length)return(a===f.LEFT||a===f.RIGHT||a===f.CENTER)&&(this.drawingContext.textAlign=a),(b===f.TOP||b===f.BOTTOM||b===f.CENTER||b===f.BASELINE)&&(b===f.CENTER?this.drawingContext.textBaseline=f._CTX_MIDDLE:this.drawingContext.textBaseline=b),this._pInst;var c=this.drawingContext.textBaseline;return c===f._CTX_MIDDLE&&(c=f.CENTER),{horizontal:this.drawingContext.textAlign,vertical:c}},d.Renderer2D.prototype._applyTextProperties=function(){var a,b=this._pInst;return this._setProperty(\"_textAscent\",null),this._setProperty(\"_textDescent\",null),a=this._textFont,this._isOpenType()&&(a=this._textFont.font.familyName,this._setProperty(\"_textStyle\",this._textFont.font.styleName)),this.drawingContext.font=this._textStyle+\" \"+this._textSize+\"px \"+a,b},d.Renderer2D.prototype.push=function(){this.drawingContext.save()},d.Renderer2D.prototype.pop=function(){this.drawingContext.restore()},b.exports=d.Renderer2D},{\"../image/filters\":67,\"./canvas\":48,\"./constants\":49,\"./core\":50,\"./p5.Renderer\":56}],58:[function(a,b,c){var d=a(\"./core\"),e=a(\"./constants\");a(\"./p5.Graphics\"),a(\"./p5.Renderer2D\"),a(\"../3d/p5.Renderer3D\");var f=\"defaultCanvas0\";d.prototype.createCanvas=function(a,b,c){var g,h,i=c||e.P2D;if(arguments[3]&&(g=\"boolean\"==typeof arguments[3]?arguments[3]:!1),i===e.WEBGL)h=document.getElementById(f),h&&h.parentNode.removeChild(h),h=document.createElement(\"canvas\"),h.id=f;else if(g){h=document.createElement(\"canvas\");for(var j=0;document.getElementById(\"defaultCanvas\"+j);)j++;f=\"defaultCanvas\"+j,h.id=f}else h=this.canvas;return this._setupDone||(h.className+=\" p5_hidden\",h.style.visibility=\"hidden\"),this._userNode?this._userNode.appendChild(h):document.body.appendChild(h),i===e.WEBGL?(this._setProperty(\"_renderer\",new d.Renderer3D(h,this,!0)),this._isdefaultGraphics=!0):this._isdefaultGraphics||(this._setProperty(\"_renderer\",new d.Renderer2D(h,this,!0)),this._isdefaultGraphics=!0),this._renderer.resize(a,b),this._renderer._applyDefaults(),g&&this._elements.push(this._renderer),this._renderer},d.prototype.resizeCanvas=function(a,b,c){if(this._renderer){var d={};for(var e in this.drawingContext){var f=this.drawingContext[e];\"object\"!=typeof f&&\"function\"!=typeof f&&(d[e]=f)}this._renderer.resize(a,b);for(var g in d)this.drawingContext[g]=d[g];c||this.redraw()}},d.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},d.prototype.createGraphics=function(a,b,c){return new d.Graphics(a,b,c,this)},d.prototype.blendMode=function(a){if(a!==e.BLEND&&a!==e.DARKEST&&a!==e.LIGHTEST&&a!==e.DIFFERENCE&&a!==e.MULTIPLY&&a!==e.EXCLUSION&&a!==e.SCREEN&&a!==e.REPLACE&&a!==e.OVERLAY&&a!==e.HARD_LIGHT&&a!==e.SOFT_LIGHT&&a!==e.DODGE&&a!==e.BURN&&a!==e.ADD&&a!==e.NORMAL)throw new Error(\"Mode \"+a+\" not recognized.\");this._renderer.blendMode(a)},b.exports=d},{\"../3d/p5.Renderer3D\":38,\"./constants\":49,\"./core\":50,\"./p5.Graphics\":55,\"./p5.Renderer2D\":57}],59:[function(a,b,c){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1e3/60)}}(),window.performance=window.performance||{},window.performance.now=function(){var a=Date.now();return window.performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow||function(){return Date.now()-a}}(),function(){\"use strict\";\"undefined\"!=typeof Uint8ClampedArray&&(Uint8ClampedArray.prototype.slice=Array.prototype.slice)}()},{}],60:[function(a,b,c){\"use strict\";var d=a(\"./core\");d.prototype.exit=function(){throw\"exit() not implemented, see remove()\"},d.prototype.noLoop=function(){this._loop=!1},d.prototype.loop=function(){this._loop=!0,this._draw()},d.prototype.push=function(){this._renderer.push(),this._styles.push({_doStroke:this._renderer._doStroke,_doFill:this._renderer._doFill,_tint:this._renderer._tint,_imageMode:this._renderer._imageMode,_rectMode:this._renderer._rectMode,_ellipseMode:this._renderer._ellipseMode,_colorMode:this._renderer._colorMode,_textFont:this._renderer._textFont,_textLeading:this._renderer._textLeading,_textSize:this._renderer._textSize,_textStyle:this._renderer._textStyle})},d.prototype.pop=function(){this._renderer.pop();var a=this._styles.pop();for(var b in a)this._renderer[b]=a[b]},d.prototype.pushStyle=function(){throw new Error(\"pushStyle() not used, see push()\")},d.prototype.popStyle=function(){throw new Error(\"popStyle() not used, see pop()\")},d.prototype.redraw=function(){var a=this.setup||window.setup,b=this.draw||window.draw;if(\"function\"==typeof b){this.push(),\"undefined\"==typeof a&&this.scale(this._pixelDensity,this._pixelDensity);var c=this;this._registeredMethods.pre.forEach(function(a){a.call(c)}),b(),this._registeredMethods.post.forEach(function(a){a.call(c)}),this.pop()}},d.prototype.size=function(){var a=\"size() is not a valid p5 function, to set the size of the \";throw a+=\"drawing canvas, please use createCanvas() instead\"},b.exports=d},{\"./core\":50}],61:[function(a,b,c){\"use strict\";var d=a(\"./core\"),e=a(\"./constants\");d.prototype.applyMatrix=function(a,b,c,d,e,f){return this._renderer.applyMatrix(a,b,c,d,e,f),this},d.prototype.popMatrix=function(){throw new Error(\"popMatrix() not used, see pop()\")},d.prototype.printMatrix=function(){throw new Error(\"printMatrix() not implemented\")},d.prototype.pushMatrix=function(){throw new Error(\"pushMatrix() not used, see push()\")},d.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},d.prototype.rotate=function(){var a=arguments[0];return this._angleMode===e.DEGREES&&(a=this.radians(a)),arguments.length>1?this._renderer.rotate(a,arguments[1]):this._renderer.rotate(a),this},d.prototype.rotateX=function(a){for(var b=new Array(arguments.length),c=0;c<b.length;++c)b[c]=arguments[c];if(!this._renderer.isP3D)throw\"not supported in p2d. Please use webgl mode\";return this._validateParameters(\"rotateX\",b,[[\"Number\"]]),this._renderer.rotateX(a),this},d.prototype.rotateY=function(a){if(!this._renderer.isP3D)throw\"not supported in p2d. Please use webgl mode\";for(var b=new Array(arguments.length),c=0;c<b.length;++c)b[c]=arguments[c];return this._validateParameters(\"rotateY\",b,[[\"Number\"]]),this._renderer.rotateY(a),this},d.prototype.rotateZ=function(a){if(!this._renderer.isP3D)throw\"not supported in p2d. Please use webgl mode\";for(var b=new Array(arguments.length),c=0;c<b.length;++c)b[c]=arguments[c];return this._validateParameters(\"rotateZ\",b,[[\"Number\"]]),this._renderer.rotateZ(a),this},d.prototype.scale=function(){for(var a,b,c,e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];return e[0]instanceof d.Vector?(a=e[0].x,b=e[0].y,c=e[0].z):e[0]instanceof Array?(a=e[0][0],b=e[0][1],c=e[0][2]||1):1===e.length?a=b=c=e[0]:(a=e[0],b=e[1],c=e[2]||1),this._renderer.isP3D?this._renderer.scale.call(this._renderer,a,b,c):this._renderer.scale.call(this._renderer,a,b),this},d.prototype.shearX=function(a){return this._angleMode===e.DEGREES&&(a=this.radians(a)),this._renderer.shearX(a),this},d.prototype.shearY=function(a){return this._angleMode===e.DEGREES&&(a=this.radians(a)),this._renderer.shearY(a),this},d.prototype.translate=function(a,b,c){for(var d=new Array(arguments.length),e=0;e<d.length;++e)d[e]=arguments[e];return this._renderer.isP3D?(this._validateParameters(\"translate\",d,[[\"Number\",\"Number\",\"Number\"]]),this._renderer.translate(a,b,c)):(this._validateParameters(\"translate\",d,[[\"Number\",\"Number\"]]),this._renderer.translate(a,b)),this},b.exports=d},{\"./constants\":49,\"./core\":50}],62:[function(a,b,c){\"use strict\";var d=a(\"./core\"),e=a(\"./constants\"),f=null,g=[],h=[],i=!1,j=!1,k=!1,l=!1;d.prototype.beginContour=function(){return h=[],l=!0,this},d.prototype.beginShape=function(a){return f=a===e.POINTS||a===e.LINES||a===e.TRIANGLES||a===e.TRIANGLE_FAN||a===e.TRIANGLE_STRIP||a===e.QUADS||a===e.QUAD_STRIP?a:null,this._renderer.isP3D?this._renderer.beginShape(a):(g=[],h=[]),this},d.prototype.bezierVertex=function(a,b,c,d,e,f){if(0===g.length)throw\"vertex() must be used once before calling bezierVertex()\";i=!0;for(var j=[],k=0;k<arguments.length;k++)j[k]=arguments[k];return j.isVert=!1,l?h.push(j):g.push(j),this},d.prototype.curveVertex=function(a,b){return j=!0,this.vertex(a,b),this},d.prototype.endContour=function(){var a=h[0].slice();a.isVert=h[0].isVert,a.moveTo=!1,h.push(a),g.push(g[0]);for(var b=0;b<h.length;b++)g.push(h[b]);return this},d.prototype.endShape=function(a){if(this._renderer.isP3D)this._renderer.endShape();else{if(0===g.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var b=a===e.CLOSE;b&&!l&&g.push(g[0]),this._renderer.endShape(a,g,j,i,k,l,f),j=!1,i=!1,k=!1,l=!1,b&&g.pop()}return this},d.prototype.quadraticVertex=function(a,b,c,d){if(this._contourInited){var f={};return f.x=a,f.y=b,f.x3=c,f.y3=d,f.type=e.QUADRATIC,this._contourVertices.push(f),this}if(!(g.length>0))throw\"vertex() must be used once before calling quadraticVertex()\";k=!0;for(var i=[],j=0;j<arguments.length;j++)i[j]=arguments[j];return i.isVert=!1,l?h.push(i):g.push(i),this},d.prototype.vertex=function(a,b,c){for(var d=new Array(arguments.length),e=0;e<d.length;++e)d[e]=arguments[e];if(this._renderer.isP3D)this._validateParameters(\"vertex\",d,[[\"Number\",\"Number\",\"Number\"]]),this._renderer.vertex(arguments[0],arguments[1],arguments[2]);else{this._validateParameters(\"vertex\",d,[[\"Number\",\"Number\"],[\"Number\",\"Number\",\"Number\"]]);var f=[];f.isVert=!0,f[0]=a,f[1]=b,f[2]=0,f[3]=0,f[4]=0,f[5]=this._renderer._getFill(),f[6]=this._renderer._getStroke(),c&&(f.moveTo=c),l?(0===h.length&&(f.moveTo=!0),h.push(f)):g.push(f)}return this},b.exports=d},{\"./constants\":49,\"./core\":50}],63:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.deviceOrientation=void 0,d.prototype.accelerationX=0,d.prototype.accelerationY=0,d.prototype.accelerationZ=0,d.prototype.pAccelerationX=0,d.prototype.pAccelerationY=0,d.prototype.pAccelerationZ=0,d.prototype._updatePAccelerations=function(){this._setProperty(\"pAccelerationX\",this.accelerationX),this._setProperty(\"pAccelerationY\",this.accelerationY),this._setProperty(\"pAccelerationZ\",this.accelerationZ)},d.prototype.rotationX=0,d.prototype.rotationY=0,d.prototype.rotationZ=0,d.prototype.pRotationX=0,d.prototype.pRotationY=0,d.prototype.pRotationZ=0;var e,f,g,h=0,i=0,j=0,k=\"clockwise\",l=\"clockwise\",m=\"clockwise\";d.prototype._updatePRotations=function(){this._setProperty(\"pRotationX\",this.rotationX),this._setProperty(\"pRotationY\",this.rotationY),this._setProperty(\"pRotationZ\",this.rotationZ)},d.prototype.turnAxis=void 0;var n=.5,o=30;d.prototype.setMoveThreshold=function(a){\"number\"==typeof a&&(n=a)},d.prototype.setShakeThreshold=function(a){\"number\"==typeof a&&(o=a)},d.prototype._ondeviceorientation=function(a){this._updatePRotations(),this._setProperty(\"rotationX\",a.beta),this._setProperty(\"rotationY\",a.gamma),this._setProperty(\"rotationZ\",a.alpha),this._handleMotion()},d.prototype._ondevicemotion=function(a){this._updatePAccelerations(),this._setProperty(\"accelerationX\",2*a.acceleration.x),this._setProperty(\"accelerationY\",2*a.acceleration.y),this._setProperty(\"accelerationZ\",2*a.acceleration.z),this._handleMotion()},d.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty(\"deviceOrientation\",\"landscape\"):0===window.orientation?this._setProperty(\"deviceOrientation\",\"portrait\"):void 0===window.orientation&&this._setProperty(\"deviceOrientation\",\"undefined\");var a=this.deviceMoved||window.deviceMoved;\"function\"==typeof a&&(Math.abs(this.accelerationX-this.pAccelerationX)>n||Math.abs(this.accelerationY-this.pAccelerationY)>n||Math.abs(this.accelerationZ-this.pAccelerationZ)>n)&&a();var b=this.deviceTurned||window.deviceTurned;if(\"function\"==typeof b){var c=this.rotationX+180,d=this.pRotationX+180,p=h+180;c-d>0&&270>c-d||-270>c-d?k=\"clockwise\":(0>c-d||c-d>270)&&(k=\"counter-clockwise\"),k!==e&&(p=c),Math.abs(c-p)>90&&Math.abs(c-p)<270&&(p=c,this._setProperty(\"turnAxis\",\"X\"),b()),e=k,h=p-180;var q=this.rotationY+180,r=this.pRotationY+180,s=i+180;q-r>0&&270>q-r||-270>q-r?l=\"clockwise\":(0>q-r||q-this.pRotationY>270)&&(l=\"counter-clockwise\"),l!==f&&(s=q),Math.abs(q-s)>90&&Math.abs(q-s)<270&&(s=q,this._setProperty(\"turnAxis\",\"Y\"),b()),f=l,i=s-180,this.rotationZ-this.pRotationZ>0&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?m=\"clockwise\":(this.rotationZ-this.pRotationZ<0||this.rotationZ-this.pRotationZ>270)&&(m=\"counter-clockwise\"),m!==g&&(j=this.rotationZ),Math.abs(this.rotationZ-j)>90&&Math.abs(this.rotationZ-j)<270&&(j=this.rotationZ,this._setProperty(\"turnAxis\",\"Z\"),b()),g=m,this._setProperty(\"turnAxis\",void 0)}var t=this.deviceShaken||window.deviceShaken;if(\"function\"==typeof t){var u,v;null!==this.pAccelerationX&&(u=Math.abs(this.accelerationX-this.pAccelerationX),v=Math.abs(this.accelerationY-this.pAccelerationY)),u+v>o&&t()}},b.exports=d},{\"../core/core\":50}],64:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e={};d.prototype.isKeyPressed=!1,d.prototype.keyIsPressed=!1,d.prototype.key=\"\",d.prototype.keyCode=0,d.prototype._onkeydown=function(a){if(!e[a.which]){this._setProperty(\"isKeyPressed\",!0),this._setProperty(\"keyIsPressed\",!0),this._setProperty(\"keyCode\",a.which),e[a.which]=!0;var b=String.fromCharCode(a.which);b||(b=a.which),this._setProperty(\"key\",b);var c=this.keyPressed||window.keyPressed;if(\"function\"==typeof c&&!a.charCode){var d=c(a);d===!1&&a.preventDefault()}}},d.prototype._onkeyup=function(a){var b=this.keyReleased||window.keyReleased;this._setProperty(\"isKeyPressed\",!1),this._setProperty(\"keyIsPressed\",!1),this._setProperty(\"_lastKeyCodeTyped\",null),e[a.which]=!1;var c=String.fromCharCode(a.which);if(c||(c=a.which),this._setProperty(\"key\",c),this._setProperty(\"keyCode\",a.which),\"function\"==typeof b){var d=b(a);d===!1&&a.preventDefault()}},d.prototype._onkeypress=function(a){if(a.which!==this._lastKeyCodeTyped){this._setProperty(\"keyCode\",a.which),this._setProperty(\"_lastKeyCodeTyped\",a.which),this._setProperty(\"key\",String.fromCharCode(a.which));var b=this.keyTyped||window.keyTyped;if(\"function\"==typeof b){var c=b(a);c===!1&&a.preventDefault()}}},d.prototype._onblur=function(a){e={}},d.prototype.keyIsDown=function(a){return e[a]},b.exports=d},{\"../core/core\":50}],65:[function(a,b,c){\"use strict\";function d(a,b){var c=a.getBoundingClientRect();return{x:b.clientX-c.left,y:b.clientY-c.top}}var e=a(\"../core/core\"),f=a(\"../core/constants\");e.prototype._nextMouseX=0,e.prototype._nextMouseY=0,e.prototype.mouseX=0,e.prototype.mouseY=0,e.prototype.pmouseX=0,e.prototype.pmouseY=0,e.prototype.winMouseX=0,e.prototype.winMouseY=0,e.prototype.pwinMouseX=0,e.prototype.pwinMouseY=0,e.prototype.mouseButton=0,e.prototype.mouseIsPressed=!1,e.prototype.isMousePressed=!1,e.prototype._updateNextMouseCoords=function(a){if(\"touchstart\"===a.type||\"touchmove\"===a.type||\"touchend\"===a.type)this._setProperty(\"_nextMouseX\",this._nextTouchX),this._setProperty(\"_nextMouseY\",this._nextTouchY);else if(null!==this._curElement){var b=d(this._curElement.elt,a);this._setProperty(\"_nextMouseX\",b.x),this._setProperty(\"_nextMouseY\",b.y)}this._setProperty(\"winMouseX\",a.pageX),this._setProperty(\"winMouseY\",a.pageY)},e.prototype._updateMouseCoords=function(){this._setProperty(\"pmouseX\",this.mouseX),this._setProperty(\"pmouseY\",this.mouseY),this._setProperty(\"mouseX\",this._nextMouseX),this._setProperty(\"mouseY\",this._nextMouseY),this._setProperty(\"pwinMouseX\",this.winMouseX),this._setProperty(\"pwinMouseY\",this.winMouseY)},e.prototype._setMouseButton=function(a){1===a.button?this._setProperty(\"mouseButton\",f.CENTER):2===a.button?this._setProperty(\"mouseButton\",f.RIGHT):this._setProperty(\"mouseButton\",f.LEFT)},e.prototype._onmousemove=function(a){var b,c=this._isGlobal?window:this;this._updateNextMouseCoords(a),this._updateNextTouchCoords(a),this.isMousePressed?\"function\"==typeof c.mouseDragged?(b=c.mouseDragged(a),b===!1&&a.preventDefault()):\"function\"==typeof c.touchMoved&&(b=c.touchMoved(a),b===!1&&a.preventDefault()):\"function\"==typeof c.mouseMoved&&(b=c.mouseMoved(a),b===!1&&a.preventDefault())},e.prototype._onmousedown=function(a){var b,c=this._isGlobal?window:this;this._setProperty(\"isMousePressed\",!0),this._setProperty(\"mouseIsPressed\",!0),this._setMouseButton(a),this._updateNextMouseCoords(a),this._updateNextTouchCoords(a),\"function\"==typeof c.mousePressed?(b=c.mousePressed(a),b===!1&&a.preventDefault()):\"function\"==typeof c.touchStarted&&(b=c.touchStarted(a),b===!1&&a.preventDefault())},e.prototype._onmouseup=function(a){var b,c=this._isGlobal?window:this;this._setProperty(\"isMousePressed\",!1),this._setProperty(\"mouseIsPressed\",!1),\"function\"==typeof c.mouseReleased?(b=c.mouseReleased(a),b===!1&&a.preventDefault()):\"function\"==typeof c.touchEnded&&(b=c.touchEnded(a),b===!1&&a.preventDefault())},e.prototype._ondragend=e.prototype._onmouseup,e.prototype._ondragover=e.prototype._onmousemove,e.prototype._onclick=function(a){var b=this._isGlobal?window:this;if(\"function\"==typeof b.mouseClicked){var c=b.mouseClicked(a);c===!1&&a.preventDefault()}},e.prototype._onwheel=function(a){var b=this._isGlobal?window:this;if(\"function\"==typeof b.mouseWheel){a.delta=a.deltaY;var c=b.mouseWheel(a);c===!1&&a.preventDefault()}},b.exports=e},{\"../core/constants\":49,\"../core/core\":50}],66:[function(a,b,c){\"use strict\";function d(a,b,c){c=c||0;var d=a.getBoundingClientRect(),e=b.touches[c]||b.changedTouches[c];return{x:e.clientX-d.left,y:e.clientY-d.top,id:e.identifier}}var e=a(\"../core/core\");e.prototype._nextTouchX=0,e.prototype._nextTouchY=0,e.prototype.touchX=0,e.prototype.touchY=0,e.prototype.ptouchX=0,e.prototype.ptouchY=0,e.prototype.touches=[],e.prototype.touchIsDown=!1,e.prototype._updateNextTouchCoords=function(a){if(\"mousedown\"===a.type||\"mousemove\"===a.type||\"mouseup\"===a.type)this._setProperty(\"_nextTouchX\",this._nextMouseX),this._setProperty(\"_nextTouchY\",this._nextMouseY);else if(null!==this._curElement){var b=d(this._curElement.elt,a,0);this._setProperty(\"_nextTouchX\",b.x),this._setProperty(\"_nextTouchY\",b.y);for(var c=[],e=0;e<a.touches.length;e++)c[e]=d(this._curElement.elt,a,e);this._setProperty(\"touches\",c)}},e.prototype._updateTouchCoords=function(){this._setProperty(\"ptouchX\",this.touchX),this._setProperty(\"ptouchY\",this.touchY),this._setProperty(\"touchX\",this._nextTouchX),this._setProperty(\"touchY\",this._nextTouchY)},e.prototype._ontouchstart=function(a){var b,c=this._isGlobal?window:this;this._updateNextTouchCoords(a),this._updateNextMouseCoords(a),this._setProperty(\"touchIsDown\",!0),\"function\"==typeof c.touchStarted?(b=c.touchStarted(a),b===!1&&a.preventDefault()):\"function\"==typeof c.mousePressed&&(b=c.mousePressed(a),b===!1&&a.preventDefault())},e.prototype._ontouchmove=function(a){var b,c=this._isGlobal?window:this;this._updateNextTouchCoords(a),this._updateNextMouseCoords(a),\"function\"==typeof c.touchMoved?(b=c.touchMoved(a),b===!1&&a.preventDefault()):\"function\"==typeof c.mouseDragged&&(b=c.mouseDragged(a),b===!1&&a.preventDefault())},e.prototype._ontouchend=function(a){this._updateNextTouchCoords(a),this._updateNextMouseCoords(a),0===this.touches.length&&this._setProperty(\"touchIsDown\",!1);var b,c=this._isGlobal?window:this;\"function\"==typeof c.touchEnded?(b=c.touchEnded(a),b===!1&&a.preventDefault()):\"function\"==typeof c.mouseReleased&&(b=c.mouseReleased(a),b===!1&&a.preventDefault())},b.exports=e},{\"../core/core\":50}],67:[function(a,b,c){\"use strict\";function d(a){var b=3.5*a|0;if(b=1>b?1:248>b?b:248,g!==b){g=b,h=1+g<<1,i=new Int32Array(h),j=new Array(h);for(var c=0;h>c;c++)j[c]=new Int32Array(256);for(var d,e,f,k,l=1,m=b-1;b>l;l++){i[b+l]=i[m]=e=m*m,f=j[b+l],k=j[m--];for(var n=0;256>n;n++)f[n]=k[n]=e*n}d=i[b]=b*b,f=j[b];for(var o=0;256>o;o++)f[o]=d*o}}function e(a,b){for(var c=f._toPixels(a),e=a.width,k=a.height,l=e*k,m=new Int32Array(l),n=0;l>n;n++)m[n]=f._getARGB(c,n);var o,p,q,r,s,t,u,v,w,x,y=new Int32Array(l),z=new Int32Array(l),A=new Int32Array(l),B=new Int32Array(l),C=0;d(b);var D,E,F,G;for(E=0;k>E;E++){for(D=0;e>D;D++){if(r=q=p=s=o=0,t=D-g,0>t)x=-t,t=0;else{if(t>=e)break;x=0}for(F=x;h>F&&!(t>=e);F++){var H=m[t+C];G=j[F],s+=G[(-16777216&H)>>>24],p+=G[(16711680&H)>>16],q+=G[(65280&H)>>8],r+=G[255&H],o+=i[F],t++}u=C+D,y[u]=s/o,z[u]=p/o,A[u]=q/o,B[u]=r/o}C+=e}for(C=0,v=-g,w=v*e,E=0;k>E;E++){for(D=0;e>D;D++){if(r=q=p=s=o=0,0>v)x=u=-v,t=D;else{if(v>=k)break;x=0,u=v,t=D+w}for(F=x;h>F&&!(u>=k);F++)G=j[F],s+=G[y[t]],p+=G[z[t]],q+=G[A[t]],r+=G[B[t]],o+=i[F],u++,t+=e;m[D+C]=s/o<<24|p/o<<16|q/o<<8|r/o}C+=e,w+=e,v++}f._setPixels(c,m)}var f={};f._toPixels=function(a){return a instanceof ImageData?a.data:a.getContext(\"2d\").getImageData(0,0,a.width,a.height).data},f._getARGB=function(a,b){var c=4*b;return a[c+3]<<24&4278190080|a[c]<<16&16711680|a[c+1]<<8&65280|255&a[c+2]},f._setPixels=function(a,b){for(var c=0,d=0,e=a.length;e>d;d++)c=4*d,a[c+0]=(16711680&b[d])>>>16,a[c+1]=(65280&b[d])>>>8,a[c+2]=255&b[d],a[c+3]=(4278190080&b[d])>>>24},f._toImageData=function(a){return a instanceof ImageData?a:a.getContext(\"2d\").getImageData(0,0,a.width,a.height)},f._createImageData=function(a,b){return f._tmpCanvas=document.createElement(\"canvas\"),f._tmpCtx=f._tmpCanvas.getContext(\"2d\"),this._tmpCtx.createImageData(a,b)},f.apply=function(a,b,c){var d=a.getContext(\"2d\"),e=d.getImageData(0,0,a.width,a.height),f=b(e,c);f instanceof ImageData?d.putImageData(f,0,0,0,0,a.width,a.height):d.putImageData(e,0,0,0,0,a.width,a.height)},f.threshold=function(a,b){var c=f._toPixels(a);void 0===b&&(b=.5);for(var d=Math.floor(255*b),e=0;e<c.length;e+=4){var g,h=c[e],i=c[e+1],j=c[e+2],k=.2126*h+.7152*i+.0722*j;g=k>=d?255:0,c[e]=c[e+1]=c[e+2]=g}},f.gray=function(a){for(var b=f._toPixels(a),c=0;c<b.length;c+=4){var d=b[c],e=b[c+1],g=b[c+2],h=.2126*d+.7152*e+.0722*g;b[c]=b[c+1]=b[c+2]=h}},f.opaque=function(a){for(var b=f._toPixels(a),c=0;c<b.length;c+=4)b[c+3]=255;return b},f.invert=function(a){for(var b=f._toPixels(a),c=0;c<b.length;c+=4)b[c]=255-b[c],b[c+1]=255-b[c+1],b[c+2]=255-b[c+2]},f.posterize=function(a,b){var c=f._toPixels(a);if(2>b||b>255)throw new Error(\"Level must be greater than 2 and less than 255 for posterize\");for(var d=b-1,e=0;e<c.length;e+=4){var g=c[e],h=c[e+1],i=c[e+2];c[e]=255*(g*b>>8)/d,c[e+1]=255*(h*b>>8)/d,c[e+2]=255*(i*b>>8)/d}},f.dilate=function(a){for(var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t=f._toPixels(a),u=0,v=t.length?t.length/4:0,w=new Int32Array(v);v>u;)for(b=u,c=u+a.width;c>u;)d=e=f._getARGB(t,u),i=u-1,h=u+1,j=u-a.width,k=u+a.width,b>i&&(i=u),h>=c&&(h=u),0>j&&(j=0),k>=v&&(k=u),n=f._getARGB(t,j),m=f._getARGB(t,i),o=f._getARGB(t,k),l=f._getARGB(t,h),g=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),q=77*(m>>16&255)+151*(m>>8&255)+28*(255&m),p=77*(l>>16&255)+151*(l>>8&255)+28*(255&l),r=77*(n>>16&255)+151*(n>>8&255)+28*(255&n),s=77*(o>>16&255)+151*(o>>8&255)+28*(255&o),q>g&&(e=m,g=q),p>g&&(e=l,g=p),r>g&&(e=n,g=r),s>g&&(e=o,g=s),w[u++]=e;f._setPixels(t,w)},f.erode=function(a){for(var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t=f._toPixels(a),u=0,v=t.length?t.length/4:0,w=new Int32Array(v);v>u;)for(b=u,c=u+a.width;c>u;)d=e=f._getARGB(t,u),i=u-1,h=u+1,j=u-a.width,k=u+a.width,b>i&&(i=u),h>=c&&(h=u),0>j&&(j=0),k>=v&&(k=u),n=f._getARGB(t,j),m=f._getARGB(t,i),o=f._getARGB(t,k),l=f._getARGB(t,h),g=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),q=77*(m>>16&255)+151*(m>>8&255)+28*(255&m),p=77*(l>>16&255)+151*(l>>8&255)+28*(255&l),r=77*(n>>16&255)+151*(n>>8&255)+28*(255&n),s=77*(o>>16&255)+151*(o>>8&255)+28*(255&o),g>q&&(e=m,g=q),g>p&&(e=l,g=p),g>r&&(e=n,g=r),g>s&&(e=o,g=s),w[u++]=e;f._setPixels(t,w)};var g,h,i,j;f.blur=function(a,b){e(a,b)},b.exports=f},{}],68:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=[];d.prototype.createImage=function(a,b){return new d.Image(a,b)},d.prototype.saveCanvas=function(){var a,b,c;if(3===arguments.length?(a=arguments[0],b=arguments[1],c=arguments[2]):2===arguments.length?\"object\"==typeof arguments[0]?(a=arguments[0],b=arguments[1]):(b=arguments[0],c=arguments[1]):1===arguments.length&&(\"object\"==typeof arguments[0]?a=arguments[0]:b=arguments[0]),a instanceof d.Element&&(a=a.elt),a instanceof HTMLCanvasElement||(a=null),c||(c=d.prototype._checkFileExtension(b,c)[1],\"\"===c&&(c=\"png\")),a||this._curElement&&this._curElement.elt&&(a=this._curElement.elt),d.prototype._isSafari()){var e=\"Hello, Safari user!\\n\";e+=\"Now capturing a screenshot...\\n\",e+=\"To save this image,\\n\",e+=\"go to File --> Save As.\\n\",alert(e),window.location.href=a.toDataURL()}else{var f;if(\"undefined\"==typeof c)c=\"png\",f=\"image/png\";else switch(c){case\"png\":f=\"image/png\";break;case\"jpeg\":f=\"image/jpeg\";break;case\"jpg\":f=\"image/jpeg\";break;default:f=\"image/png\"}var g=\"image/octet-stream\",h=a.toDataURL(f);h=h.replace(f,g),d.prototype.downloadFile(h,b,c)}},d.prototype.saveFrames=function(a,b,c,f,g){var h=c||3;h=d.prototype.constrain(h,0,15),h=1e3*h;var i=f||15;i=d.prototype.constrain(i,0,22);var j=0,k=d.prototype._makeFrame,l=this._curElement.elt,m=setInterval(function(){k(a+j,b,l),j++},1e3/i);setTimeout(function(){if(clearInterval(m),g)g(e);else for(var a=0;a<e.length;a++){var b=e[a];d.prototype.downloadFile(b.imageData,b.filename,b.ext)}e=[]},h+.01)},d.prototype._makeFrame=function(a,b,c){var d;d=this?this._curElement.elt:c;var f;if(b)switch(b.toLowerCase()){case\"png\":f=\"image/png\";break;case\"jpeg\":f=\"image/jpeg\";break;case\"jpg\":f=\"image/jpeg\";break;default:f=\"image/png\"}else b=\"png\",f=\"image/png\";var g=\"image/octet-stream\",h=d.toDataURL(f);h=h.replace(f,g);var i={};i.imageData=h,i.filename=a,i.ext=b,e.push(i)},b.exports=d},{\"../core/core\":50}],69:[function(a,b,c){\"use strict\";function d(a,b){return a>0&&b>a?a:b}var e=a(\"../core/core\"),f=a(\"./filters\"),g=a(\"../core/canvas\"),h=a(\"../core/constants\");a(\"../core/error_helpers\"),e.prototype.loadImage=function(a,b,c){var d=new Image,f=new e.Image(1,1,this),g=e._getDecrementPreload.apply(this,arguments);return d.onload=function(){f.width=f.canvas.width=d.width,f.height=f.canvas.height=d.height,f.drawingContext.drawImage(d,0,0),\"function\"==typeof b&&b(f),g&&b!==g&&g()},d.onerror=function(a){e._friendlyFileLoadError(0,d.src),\"function\"==typeof c&&c!==g&&c(a)},0!==a.indexOf(\"data:image/\")&&(d.crossOrigin=\"Anonymous\"),d.src=a,f},e.prototype.image=function(a,b,c,e,f,h,i,j,k){if(arguments.length<=5)if(h=b||0,i=c||0,b=0,c=0,a.elt&&a.elt.videoWidth&&!a.canvas){var l=a.elt.videoWidth,m=a.elt.videoHeight;j=e||a.width,k=f||a.width*m/l,e=l,f=m}else j=e||a.width,k=f||a.height,e=a.width,f=a.height;else{if(9!==arguments.length)throw\"Wrong number of arguments to image()\";b=b||0,c=c||0,e=d(e,a.width),f=d(f,a.height),h=h||0,i=i||0,j=j||a.width,k=k||a.height}var n=g.modeAdjust(h,i,j,k,this._renderer._imageMode);this._renderer.image(a,b,c,e,f,n.x,n.y,n.w,n.h)},e.prototype.tint=function(){var a=this.color.apply(this,arguments);this._renderer._tint=a.levels},e.prototype.noTint=function(){this._renderer._tint=null},e.prototype._getTintedImageCanvas=function(a){if(!a.canvas)return a;var b=f._toPixels(a.canvas),c=document.createElement(\"canvas\");c.width=a.canvas.width,c.height=a.canvas.height;for(var d=c.getContext(\"2d\"),e=d.createImageData(a.canvas.width,a.canvas.height),g=e.data,h=0;h<b.length;h+=4){var i=b[h],j=b[h+1],k=b[h+2],l=b[h+3];g[h]=i*this._renderer._tint[0]/255,g[h+1]=j*this._renderer._tint[1]/255,g[h+2]=k*this._renderer._tint[2]/255,g[h+3]=l*this._renderer._tint[3]/255}return d.putImageData(e,0,0),c},e.prototype.imageMode=function(a){(a===h.CORNER||a===h.CORNERS||a===h.CENTER)&&(this._renderer._imageMode=a)},b.exports=e},{\"../core/canvas\":48,\"../core/constants\":49,\"../core/core\":50,\"../core/error_helpers\":53,\"./filters\":67}],70:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"./filters\");d.Image=function(a,b){this.width=a,this.height=b,this.canvas=document.createElement(\"canvas\"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext(\"2d\"),this._pixelDensity=1,this.isTexture=!1,this.pixels=[]},d.Image.prototype._setProperty=function(a,b){this[a]=b},d.Image.prototype.loadPixels=function(){d.Renderer2D.prototype.loadPixels.call(this)},d.Image.prototype.updatePixels=function(a,b,c,e){d.Renderer2D.prototype.updatePixels.call(this,a,b,c,e)},d.Image.prototype.get=function(a,b,c,e){return d.Renderer2D.prototype.get.call(this,a,b,c,e)},d.Image.prototype.set=function(a,b,c){d.Renderer2D.prototype.set.call(this,a,b,c)},d.Image.prototype.resize=function(a,b){0===a&&0===b?(a=this.canvas.width,b=this.canvas.height):0===a?a=this.canvas.width*b/this.canvas.height:0===b&&(b=this.canvas.height*a/this.canvas.width);var c=document.createElement(\"canvas\");c.width=a,c.height=b,c.getContext(\"2d\").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,c.width,c.height),this.canvas.width=this.width=a,this.canvas.height=this.height=b,this.drawingContext.drawImage(c,0,0,a,b,0,0,a,b),this.pixels.length>0&&this.loadPixels()},d.Image.prototype.copy=function(){d.prototype.copy.apply(this,arguments)},d.Image.prototype.mask=function(a){void 0===a&&(a=this);var b=this.drawingContext.globalCompositeOperation,c=1;a instanceof d.Renderer&&(c=a._pInst._pixelDensity);var e=[a,0,0,c*a.width,c*a.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation=\"destination-in\",this.copy.apply(this,e),this.drawingContext.globalCompositeOperation=b},d.Image.prototype.filter=function(a,b){e.apply(this.canvas,e[a.toLowerCase()],b)},d.Image.prototype.blend=function(){d.prototype.blend.apply(this,arguments)},d.Image.prototype.save=function(a,b){var c;if(b)switch(b.toLowerCase()){case\"png\":c=\"image/png\";break;case\"jpeg\":c=\"image/jpeg\";break;case\"jpg\":c=\"image/jpeg\";break;default:c=\"image/png\"}else b=\"png\",c=\"image/png\";var e=\"image/octet-stream\",f=this.canvas.toDataURL(c);f=f.replace(c,e),d.prototype.downloadFile(f,a,b)},d.Image.prototype.createTexture=function(a){return this},b.exports=d.Image},{\"../core/core\":50,\"./filters\":67}],71:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"./filters\");a(\"../color/p5.Color\"),d.prototype.pixels=[],d.prototype.blend=function(){this._renderer.blend.apply(this._renderer,arguments)},d.prototype.copy=function(){d.Renderer2D._copyHelper.apply(this,arguments)},d.prototype.filter=function(a,b){e.apply(this.canvas,e[a.toLowerCase()],b)},d.prototype.get=function(a,b,c,d){return this._renderer.get(a,b,c,d)},d.prototype.loadPixels=function(){this._renderer.loadPixels()},d.prototype.set=function(a,b,c){this._renderer.set(a,b,c)},d.prototype.updatePixels=function(a,b,c,d){0!==this.pixels.length&&this._renderer.updatePixels(a,b,c,d)},b.exports=d},{\"../color/p5.Color\":44,\"../core/core\":50,\"./filters\":67\n}],72:[function(a,b,c){\"use strict\";function d(a,b){var c={};if(b=b||[],\"undefined\"==typeof b)for(var d=0;d<a.length;d++)b[d.toString()]=d;for(var e=0;e<b.length;e++){var f=b[e],g=a[e];c[f]=g}return c}function e(a){return a.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&#039;\")}function f(a,b){b&&b!==!0&&\"true\"!==b||(b=\"\"),a||(a=\"untitled\");var c=\"\";return a&&a.indexOf(\".\")>-1&&(c=a.split(\".\").pop()),b&&c!==b&&(c=b,a=a+\".\"+c),[a,c]}function g(a){document.body.removeChild(a.target)}var h=a(\"../core/core\"),i=a(\"reqwest\"),j=a(\"opentype.js\");a(\"../core/error_helpers\"),h._getDecrementPreload=function(){var a=arguments[arguments.length-1];return(window.preload||this&&this.preload)&&\"function\"==typeof a?a:null},h.prototype.loadFont=function(a,b,c){var d=new h.Font(this),e=h._getDecrementPreload.apply(this,arguments);return j.load(a,function(f,g){if(f){if(\"undefined\"!=typeof c&&c!==e)return c(f);throw f}d.font=g,\"undefined\"!=typeof b&&b(d),e&&b!==e&&e();var h,i,j=[\"ttf\",\"otf\",\"woff\",\"woff2\"],k=a.split(\"\\\\\").pop().split(\"/\").pop(),l=k.lastIndexOf(\".\"),m=1>l?null:k.substr(l+1);j.indexOf(m)>-1&&(h=k.substr(0,l),i=document.createElement(\"style\"),i.appendChild(document.createTextNode(\"\\n@font-face {\\nfont-family: \"+h+\";\\nsrc: url(\"+a+\");\\n}\\n\")),document.head.appendChild(i))}),d},h.prototype.createInput=function(){throw\"not yet implemented\"},h.prototype.createReader=function(){throw\"not yet implemented\"},h.prototype.loadBytes=function(){throw\"not yet implemented\"},h.prototype.loadJSON=function(){for(var a,b=arguments[0],c=arguments[1],d=h._getDecrementPreload.apply(this,arguments),e=[],f=\"json\",g=2;g<arguments.length;g++){var j=arguments[g];\"string\"==typeof j?(\"jsonp\"===j||\"json\"===j)&&(f=j):\"function\"==typeof j&&(a=j)}return i({url:b,type:f,crossOrigin:!0,error:function(b){a?a(b):console.log(b.statusText)},success:function(a){for(var b in a)e[b]=a[b];\"undefined\"!=typeof c&&c(a),d&&c!==d&&d()}}),e},h.prototype.loadStrings=function(a,b,c){var d=[],e=new XMLHttpRequest,f=h._getDecrementPreload.apply(this,arguments);return e.addEventListener(\"error\",function(a){c?c(a):console.log(a.responseText)}),e.open(\"GET\",a,!0),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var a=e.responseText.match(/[^\\r\\n]+/g);for(var g in a)d[g]=a[g];\"undefined\"!=typeof b&&b(d),f&&b!==f&&f()}else c?c(e):console.log(e.statusText)},e.send(null),d},h.prototype.loadTable=function(a){for(var b=null,c=[],e=!1,f=\",\",g=!1,j=h._getDecrementPreload.apply(this,arguments),k=1;k<arguments.length;k++)if(\"function\"==typeof arguments[k]&&arguments[k]!==j)b=arguments[k];else if(\"string\"==typeof arguments[k])if(c.push(arguments[k]),\"header\"===arguments[k]&&(e=!0),\"csv\"===arguments[k]){if(g)throw new Error(\"Cannot set multiple separator types.\");f=\",\",g=!0}else if(\"tsv\"===arguments[k]){if(g)throw new Error(\"Cannot set multiple separator types.\");f=\"\t\",g=!0}var l=new h.Table;return i({url:a,crossOrigin:!0,type:\"csv\"}).then(function(a){a=a.responseText;for(var c,g={},i=0,m=1,n=2,o=4,p='\"',q=\"\\r\",r=\"\\n\",s=[],t=0,u=null,v=function(){g.escaped=!1,u=[],x()},w=function(){g.currentState=o,s.push(u),u=null},x=function(){g.currentState=i,g.token=\"\"},y=function(){u.push(g.token),x()};;){if(c=a[t++],null==c){if(g.escaped)throw new Error(\"Unclosed quote in file.\");if(u){y(),w();break}}if(null===u&&v(),g.currentState===i){if(c===p){g.escaped=!0,g.currentState=m;continue}g.currentState=m}g.currentState===m&&g.escaped?c===p?a[t]===p?(g.token+=p,t++):(g.escaped=!1,g.currentState=n):g.token+=c:c===q?(a[t]===r&&t++,y(),w()):c===r?(y(),w()):c===f?y():g.currentState===m&&(g.token+=c)}if(e)l.columns=s.shift();else for(k=0;k<s.length;k++)l.columns[k]=k.toString();var z;for(k=0;k<s.length&&(k!==s.length-1||1!==s[k].length||\"undefined\"!==s[k][0]);k++)z=new h.TableRow,z.arr=s[k],z.obj=d(s[k],l.columns),l.addRow(z);null!==b&&b(l),j&&b!==j&&j()}).fail(function(c,d){h._friendlyFileLoadError(2,a),\"undefined\"!=typeof b&&b!==j&&b(!1)}),l},h.prototype.loadXML=function(a,b,c){var d=document.implementation.createDocument(null,null),e=h._getDecrementPreload.apply(this,arguments);return i({url:a,type:\"xml\",crossOrigin:!0,error:function(a){c?c(a):console.log(a.statusText)}}).then(function(a){var c=a.documentElement;d.appendChild(c),\"undefined\"!=typeof b&&b(d),e&&b!==e&&e()}),d},h.prototype.parseXML=function(){throw\"not yet implemented\"},h.prototype.selectFolder=function(){throw\"not yet implemented\"},h.prototype.selectInput=function(){throw\"not yet implemented\"},h.prototype.httpGet=function(){var a=Array.prototype.slice.call(arguments);a.push(\"GET\"),h.prototype.httpDo.apply(this,a)},h.prototype.httpPost=function(){var a=Array.prototype.slice.call(arguments);a.push(\"POST\"),h.prototype.httpDo.apply(this,a)},h.prototype.httpDo=function(){if(\"object\"==typeof arguments[0])i(arguments[0]);else{for(var a,b,c=\"GET\",d=arguments[0],e={},f=\"\",g=1;g<arguments.length;g++){var h=arguments[g];\"string\"==typeof h?\"GET\"===h||\"POST\"===h||\"PUT\"===h?c=h:f=h:\"object\"==typeof h?e=h:\"function\"==typeof h&&(a?b=h:a=h)}\"\"===f&&(f=-1!==d.indexOf(\"json\")?\"json\":-1!==d.indexOf(\"xml\")?\"xml\":\"text\"),i({url:d,method:c,data:e,type:f,crossOrigin:!0,success:function(b){\"undefined\"!=typeof a&&a(\"text\"===f?b.response:b)},error:function(a){b?b(a):console.log(a.statusText)}})}},window.URL=window.URL||window.webkitURL,h.prototype._pWriters=[],h.prototype.beginRaw=function(){throw\"not yet implemented\"},h.prototype.beginRecord=function(){throw\"not yet implemented\"},h.prototype.createOutput=function(){throw\"not yet implemented\"},h.prototype.createWriter=function(a,b){var c;for(var d in h.prototype._pWriters)if(h.prototype._pWriters[d].name===a)return c=new h.PrintWriter(a+window.millis(),b),h.prototype._pWriters.push(c),c;return c=new h.PrintWriter(a,b),h.prototype._pWriters.push(c),c},h.prototype.endRaw=function(){throw\"not yet implemented\"},h.prototype.endRecord=function(){throw\"not yet implemented\"},h.PrintWriter=function(a,b){var c=this;this.name=a,this.content=\"\",this.print=function(a){this.content+=a},this.println=function(a){this.content+=a+\"\\n\"},this.flush=function(){this.content=\"\"},this.close=function(){var d=[];d.push(this.content),h.prototype.writeFile(d,a,b);for(var e in h.prototype._pWriters)h.prototype._pWriters[e].name===this.name&&h.prototype._pWriters.splice(e,1);c.flush(),c={}}},h.prototype.saveBytes=function(){throw\"not yet implemented\"},h.prototype.save=function(a,b,c){var d=arguments,e=this._curElement.elt;if(0===d.length)return void h.prototype.saveCanvas(e);if(d[0]instanceof h.Renderer||d[0]instanceof h.Graphics)return void h.prototype.saveCanvas(d[0].elt,d[1],d[2]);if(1===d.length&&\"string\"==typeof d[0])h.prototype.saveCanvas(e,d[0]);else{var g=f(d[1],d[2])[1];switch(g){case\"json\":return void h.prototype.saveJSON(d[0],d[1],d[2]);case\"txt\":return void h.prototype.saveStrings(d[0],d[1],d[2]);default:d[0]instanceof Array?h.prototype.saveStrings(d[0],d[1],d[2]):d[0]instanceof h.Table?h.prototype.saveTable(d[0],d[1],d[2],d[3]):d[0]instanceof h.Image?h.prototype.saveCanvas(d[0].canvas,d[1]):d[0]instanceof h.SoundFile&&h.prototype.saveSound(d[0],d[1],d[2],d[3])}}},h.prototype.saveJSON=function(a,b,c){var d;d=c?JSON.stringify(a):JSON.stringify(a,void 0,2),console.log(d),this.saveStrings(d.split(\"\\n\"),b,\"json\")},h.prototype.saveJSONObject=h.prototype.saveJSON,h.prototype.saveJSONArray=h.prototype.saveJSON,h.prototype.saveStream=function(){throw\"not yet implemented\"},h.prototype.saveStrings=function(a,b,c){for(var d=c||\"txt\",e=this.createWriter(b,d),f=0;f<a.length;f++)f<a.length-1?e.println(a[f]):e.print(a[f]);e.close(),e.flush()},h.prototype.saveXML=function(){throw\"not yet implemented\"},h.prototype.selectOutput=function(){throw\"not yet implemented\"},h.prototype.saveTable=function(a,b,c){var d=this.createWriter(b,c),f=a.columns,g=\",\";if(\"tsv\"===c&&(g=\"\t\"),\"html\"!==c){if(\"0\"!==f[0])for(var h=0;h<f.length;h++)h<f.length-1?d.print(f[h]+g):d.println(f[h]);for(var i=0;i<a.rows.length;i++){var j;for(j=0;j<a.rows[i].arr.length;j++)j<a.rows[i].arr.length-1?d.print(a.rows[i].arr[j]+g):i<a.rows.length-1?d.println(a.rows[i].arr[j]):d.print(a.rows[i].arr[j])}}else{d.println(\"<html>\"),d.println(\"<head>\");var k='  <meta http-equiv=\"content-type\" content';if(k+='=\"text/html;charset=utf-8\" />',d.println(k),d.println(\"</head>\"),d.println(\"<body>\"),d.println(\"  <table>\"),\"0\"!==f[0]){d.println(\"    <tr>\");for(var l=0;l<f.length;l++){var m=e(f[l]);d.println(\"      <td>\"+m),d.println(\"      </td>\")}d.println(\"    </tr>\")}for(var n=0;n<a.rows.length;n++){d.println(\"    <tr>\");for(var o=0;o<a.columns.length;o++){var p=a.rows[n].getString(o),q=e(p);d.println(\"      <td>\"+q),d.println(\"      </td>\")}d.println(\"    </tr>\")}d.println(\"  </table>\"),d.println(\"</body>\"),d.print(\"</html>\")}d.close(),d.flush()},h.prototype.writeFile=function(a,b,c){var d=\"application/octet-stream\";h.prototype._isSafari()&&(d=\"text/plain\");var e=new Blob(a,{type:d}),f=window.URL.createObjectURL(e);h.prototype.downloadFile(f,b,c)},h.prototype.downloadFile=function(a,b,c){var d=f(b,c),e=d[0],i=d[1],j=document.createElement(\"a\");if(j.href=a,j.download=e,j.onclick=g,j.style.display=\"none\",document.body.appendChild(j),h.prototype._isSafari()){var k=\"Hello, Safari user! To download this file...\\n\";k+=\"1. Go to File --> Save As.\\n\",k+='2. Choose \"Page Source\" as the Format.\\n',k+='3. Name it with this extension: .\"'+i+'\"',alert(k)}j.click(),a=null},h.prototype._checkFileExtension=f,h.prototype._isSafari=function(){var a=Object.prototype.toString.call(window.HTMLElement);return a.indexOf(\"Constructor\")>0},b.exports=h},{\"../core/core\":50,\"../core/error_helpers\":53,\"opentype.js\":8,reqwest:29}],73:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.Table=function(a){this.columns=[],this.rows=[]},d.Table.prototype.addRow=function(a){var b=a||new d.TableRow;if(\"undefined\"==typeof b.arr||\"undefined\"==typeof b.obj)throw\"invalid TableRow: \"+b;return b.table=this,this.rows.push(b),b},d.Table.prototype.removeRow=function(a){this.rows[a].table=null;var b=this.rows.splice(a+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(b)},d.Table.prototype.getRow=function(a){return this.rows[a]},d.Table.prototype.getRows=function(){return this.rows},d.Table.prototype.findRow=function(a,b){if(\"string\"==typeof b){for(var c=0;c<this.rows.length;c++)if(this.rows[c].obj[b]===a)return this.rows[c]}else for(var d=0;d<this.rows.length;d++)if(this.rows[d].arr[b]===a)return this.rows[d];return null},d.Table.prototype.findRows=function(a,b){var c=[];if(\"string\"==typeof b)for(var d=0;d<this.rows.length;d++)this.rows[d].obj[b]===a&&c.push(this.rows[d]);else for(var e=0;e<this.rows.length;e++)this.rows[e].arr[b]===a&&c.push(this.rows[e]);return c},d.Table.prototype.matchRow=function(a,b){if(\"number\"==typeof b){for(var c=0;c<this.rows.length;c++)if(this.rows[c].arr[b].match(a))return this.rows[c]}else for(var d=0;d<this.rows.length;d++)if(this.rows[d].obj[b].match(a))return this.rows[d];return null},d.Table.prototype.matchRows=function(a,b){var c=[];if(\"number\"==typeof b)for(var d=0;d<this.rows.length;d++)this.rows[d].arr[b].match(a)&&c.push(this.rows[d]);else for(var e=0;e<this.rows.length;e++)this.rows[e].obj[b].match(a)&&c.push(this.rows[e]);return c},d.Table.prototype.getColumn=function(a){var b=[];if(\"string\"==typeof a)for(var c=0;c<this.rows.length;c++)b.push(this.rows[c].obj[a]);else for(var d=0;d<this.rows.length;d++)b.push(this.rows[d].arr[a]);return b},d.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},d.Table.prototype.addColumn=function(a){var b=a||null;this.columns.push(b)},d.Table.prototype.getColumnCount=function(){return this.columns.length},d.Table.prototype.getRowCount=function(){return this.rows.length},d.Table.prototype.removeTokens=function(a,b){for(var c=function(a){return a.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\")},d=[],e=0;e<a.length;e++)d.push(c(a.charAt(e)));var f=new RegExp(d.join(\"|\"),\"g\");if(\"undefined\"==typeof b)for(var g=0;g<this.columns.length;g++)for(var h=0;h<this.rows.length;h++){var i=this.rows[h].arr[g];i=i.replace(f,\"\"),this.rows[h].arr[g]=i,this.rows[h].obj[this.columns[g]]=i}else if(\"string\"==typeof b)for(var j=0;j<this.rows.length;j++){var k=this.rows[j].obj[b];k=k.replace(f,\"\"),this.rows[j].obj[b]=k;var l=this.columns.indexOf(b);this.rows[j].arr[l]=k}else for(var m=0;m<this.rows.length;m++){var n=this.rows[m].arr[b];n=n.replace(f,\"\"),this.rows[m].arr[b]=n,this.rows[m].obj[this.columns[b]]=n}},d.Table.prototype.trim=function(a){var b=new RegExp(\" \",\"g\");if(\"undefined\"==typeof a)for(var c=0;c<this.columns.length;c++)for(var d=0;d<this.rows.length;d++){var e=this.rows[d].arr[c];e=e.replace(b,\"\"),this.rows[d].arr[c]=e,this.rows[d].obj[this.columns[c]]=e}else if(\"string\"==typeof a)for(var f=0;f<this.rows.length;f++){var g=this.rows[f].obj[a];g=g.replace(b,\"\"),this.rows[f].obj[a]=g;var h=this.columns.indexOf(a);this.rows[f].arr[h]=g}else for(var i=0;i<this.rows.length;i++){var j=this.rows[i].arr[a];j=j.replace(b,\"\"),this.rows[i].arr[a]=j,this.rows[i].obj[this.columns[a]]=j}},d.Table.prototype.removeColumn=function(a){var b,c;\"string\"==typeof a?(b=a,c=this.columns.indexOf(a),console.log(\"string\")):(c=a,b=this.columns[a]);var d=this.columns.splice(c+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(d);for(var e=0;e<this.rows.length;e++){var f=this.rows[e].arr,g=f.splice(c+1,f.length);f.pop(),this.rows[e].arr=f.concat(g),delete this.rows[e].obj[b]}},d.Table.prototype.set=function(a,b,c){this.rows[a].set(b,c)},d.Table.prototype.setNum=function(a,b,c){this.rows[a].setNum(b,c)},d.Table.prototype.setString=function(a,b,c){this.rows[a].setString(b,c)},d.Table.prototype.get=function(a,b){return this.rows[a].get(b)},d.Table.prototype.getNum=function(a,b){return this.rows[a].getNum(b)},d.Table.prototype.getString=function(a,b){return this.rows[a].getString(b)},d.Table.prototype.getObject=function(a){for(var b,c,d,e={},f=0;f<this.rows.length;f++)if(b=this.rows[f].obj,\"string\"==typeof a){if(c=this.columns.indexOf(a),!(c>=0))throw'This table has no column named \"'+a+'\"';d=b[a],e[d]=b}else e[f]=this.rows[f].obj;return e},d.Table.prototype.getArray=function(){for(var a=[],b=0;b<this.rows.length;b++)a.push(this.rows[b].arr);return a},b.exports=d.Table},{\"../core/core\":50}],74:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.TableRow=function(a,b){var c=[],d={};a&&(b=b||\",\",c=a.split(b));for(var e=0;e<c.length;e++){var f=e,g=c[e];d[f]=g}this.arr=c,this.obj=d,this.table=null},d.TableRow.prototype.set=function(a,b){if(\"string\"==typeof a){var c=this.table.columns.indexOf(a);if(!(c>=0))throw'This table has no column named \"'+a+'\"';this.obj[a]=b,this.arr[c]=b}else{if(!(a<this.table.columns.length))throw\"Column #\"+a+\" is out of the range of this table\";this.arr[a]=b;var d=this.table.columns[a];this.obj[d]=b}},d.TableRow.prototype.setNum=function(a,b){var c=parseFloat(b,10);this.set(a,c)},d.TableRow.prototype.setString=function(a,b){var c=b.toString();this.set(a,c)},d.TableRow.prototype.get=function(a){return\"string\"==typeof a?this.obj[a]:this.arr[a]},d.TableRow.prototype.getNum=function(a){var b;if(b=\"string\"==typeof a?parseFloat(this.obj[a],10):parseFloat(this.arr[a],10),\"NaN\"===b.toString())throw\"Error: \"+this.obj[a]+\" is NaN (Not a Number)\";return b},d.TableRow.prototype.getString=function(a){return\"string\"==typeof a?this.obj[a].toString():this.arr[a].toString()},b.exports=d.TableRow},{\"../core/core\":50}],75:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.abs=Math.abs,d.prototype.ceil=Math.ceil,d.prototype.constrain=function(a,b,c){return Math.max(Math.min(a,c),b)},d.prototype.dist=function(a,b,c,d,e,f){return 4===arguments.length?Math.sqrt((c-a)*(c-a)+(d-b)*(d-b)):6===arguments.length?Math.sqrt((d-a)*(d-a)+(e-b)*(e-b)+(f-c)*(f-c)):void 0},d.prototype.exp=Math.exp,d.prototype.floor=Math.floor,d.prototype.lerp=function(a,b,c){return c*(b-a)+a},d.prototype.log=Math.log,d.prototype.mag=function(a,b){return Math.sqrt(a*a+b*b)},d.prototype.map=function(a,b,c,d,e){return(a-b)/(c-b)*(e-d)+d},d.prototype.max=function(){return arguments[0]instanceof Array?Math.max.apply(null,arguments[0]):Math.max.apply(null,arguments)},d.prototype.min=function(){return arguments[0]instanceof Array?Math.min.apply(null,arguments[0]):Math.min.apply(null,arguments)},d.prototype.norm=function(a,b,c){return this.map(a,b,c,0,1)},d.prototype.pow=Math.pow,d.prototype.round=Math.round,d.prototype.sq=function(a){return a*a},d.prototype.sqrt=Math.sqrt,b.exports=d},{\"../core/core\":50}],76:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.createVector=function(a,b,c){return this instanceof d?new d.Vector(this,arguments):new d.Vector(a,b,c)},b.exports=d},{\"../core/core\":50}],77:[function(a,b,c){\"use strict\";var d,e=a(\"../core/core\"),f=4,g=1<<f,h=8,i=1<<h,j=4095,k=4,l=.5,m=function(a){return.5*(1-Math.cos(a*Math.PI))};e.prototype.noise=function(a,b,c){if(b=b||0,c=c||0,null==d){d=new Array(j+1);for(var e=0;j+1>e;e++)d[e]=Math.random()}0>a&&(a=-a),0>b&&(b=-b),0>c&&(c=-c);for(var n,o,p,q,r,s=Math.floor(a),t=Math.floor(b),u=Math.floor(c),v=a-s,w=b-t,x=c-u,y=0,z=.5,A=0;k>A;A++){var B=s+(t<<f)+(u<<h);n=m(v),o=m(w),p=d[B&j],p+=n*(d[B+1&j]-p),q=d[B+g&j],q+=n*(d[B+g+1&j]-q),p+=o*(q-p),B+=i,q=d[B&j],q+=n*(d[B+1&j]-q),r=d[B+g&j],r+=n*(d[B+g+1&j]-r),q+=o*(r-q),p+=m(x)*(q-p),y+=p*z,z*=l,s<<=1,v*=2,t<<=1,w*=2,u<<=1,x*=2,v>=1&&(s++,v--),w>=1&&(t++,w--),x>=1&&(u++,x--)}return y},e.prototype.noiseDetail=function(a,b){a>0&&(k=a),b>0&&(l=b)},e.prototype.noiseSeed=function(a){var b=function(){var a,b,c=4294967296,d=1664525,e=1013904223;return{setSeed:function(d){b=a=(null==d?Math.random()*c:d)>>>0},getSeed:function(){return a},rand:function(){return b=(d*b+e)%c,b/c}}}();b.setSeed(a),d=new Array(j+1);for(var c=0;j+1>c;c++)d[c]=b.rand()},b.exports=e},{\"../core/core\":50}],78:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"./polargeometry\"),f=a(\"../core/constants\");d.Vector=function(){var a,b,c;arguments[0]instanceof d?(this.p5=arguments[0],a=arguments[1][0]||0,b=arguments[1][1]||0,c=arguments[1][2]||0):(a=arguments[0]||0,b=arguments[1]||0,c=arguments[2]||0),this.x=a,this.y=b,this.z=c},d.Vector.prototype.toString=function(){return\"p5.Vector Object : [\"+this.x+\", \"+this.y+\", \"+this.z+\"]\"},d.Vector.prototype.set=function(a,b,c){return a instanceof d.Vector?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this):a instanceof Array?(this.x=a[0]||0,this.y=a[1]||0,this.z=a[2]||0,this):(this.x=a||0,this.y=b||0,this.z=c||0,this)},d.Vector.prototype.copy=function(){return this.p5?new d.Vector(this.p5,[this.x,this.y,this.z]):new d.Vector(this.x,this.y,this.z)},d.Vector.prototype.add=function(a,b,c){return a instanceof d.Vector?(this.x+=a.x||0,this.y+=a.y||0,this.z+=a.z||0,this):a instanceof Array?(this.x+=a[0]||0,this.y+=a[1]||0,this.z+=a[2]||0,this):(this.x+=a||0,this.y+=b||0,this.z+=c||0,this)},d.Vector.prototype.sub=function(a,b,c){return a instanceof d.Vector?(this.x-=a.x||0,this.y-=a.y||0,this.z-=a.z||0,this):a instanceof Array?(this.x-=a[0]||0,this.y-=a[1]||0,this.z-=a[2]||0,this):(this.x-=a||0,this.y-=b||0,this.z-=c||0,this)},d.Vector.prototype.mult=function(a){return this.x*=a||0,this.y*=a||0,this.z*=a||0,this},d.Vector.prototype.div=function(a){return this.x/=a,this.y/=a,this.z/=a,this},d.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},d.Vector.prototype.magSq=function(){var a=this.x,b=this.y,c=this.z;return a*a+b*b+c*c},d.Vector.prototype.dot=function(a,b,c){return a instanceof d.Vector?this.dot(a.x,a.y,a.z):this.x*(a||0)+this.y*(b||0)+this.z*(c||0)},d.Vector.prototype.cross=function(a){var b=this.y*a.z-this.z*a.y,c=this.z*a.x-this.x*a.z,e=this.x*a.y-this.y*a.x;return this.p5?new d.Vector(this.p5,[b,c,e]):new d.Vector(b,c,e)},d.Vector.prototype.dist=function(a){var b=a.copy().sub(this);return b.mag()},d.Vector.prototype.normalize=function(){return this.div(this.mag())},d.Vector.prototype.limit=function(a){var b=this.magSq();return b>a*a&&(this.div(Math.sqrt(b)),this.mult(a)),this},d.Vector.prototype.setMag=function(a){return this.normalize().mult(a)},d.Vector.prototype.heading=function(){var a=Math.atan2(this.y,this.x);return this.p5?this.p5._angleMode===f.RADIANS?a:e.radiansToDegrees(a):a},d.Vector.prototype.rotate=function(a){this.p5&&this.p5._angleMode===f.DEGREES&&(a=e.degreesToRadians(a));var b=this.heading()+a,c=this.mag();return this.x=Math.cos(b)*c,this.y=Math.sin(b)*c,this},d.Vector.prototype.lerp=function(a,b,c,e){return a instanceof d.Vector?this.lerp(a.x,a.y,a.z,b):(this.x+=(a-this.x)*e||0,this.y+=(b-this.y)*e||0,this.z+=(c-this.z)*e||0,this)},d.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},d.Vector.prototype.equals=function(a,b,c){var e,f,g;return a instanceof d.Vector?(e=a.x||0,f=a.y||0,g=a.z||0):a instanceof Array?(e=a[0]||0,f=a[1]||0,g=a[2]||0):(e=a||0,f=b||0,g=c||0),this.x===e&&this.y===f&&this.z===g},d.Vector.fromAngle=function(a){return this.p5&&this.p5._angleMode===f.DEGREES&&(a=e.degreesToRadians(a)),this.p5?new d.Vector(this.p5,[Math.cos(a),Math.sin(a),0]):new d.Vector(Math.cos(a),Math.sin(a),0)},d.Vector.random2D=function(){var a;return a=this.p5?this.p5._angleMode===f.DEGREES?this.p5.random(360):this.p5.random(f.TWO_PI):Math.random()*Math.PI*2,this.fromAngle(a)},d.Vector.random3D=function(){var a,b;this.p5?(a=this.p5.random(0,f.TWO_PI),b=this.p5.random(-1,1)):(a=Math.random()*Math.PI*2,b=2*Math.random()-1);var c=Math.sqrt(1-b*b)*Math.cos(a),e=Math.sqrt(1-b*b)*Math.sin(a);return this.p5?new d.Vector(this.p5,[c,e,b]):new d.Vector(c,e,b)},d.Vector.add=function(a,b,c){return c?c.set(a):c=a.copy(),c.add(b),c},d.Vector.sub=function(a,b,c){return c?c.set(a):c=a.copy(),c.sub(b),c},d.Vector.mult=function(a,b,c){return c?c.set(a):c=a.copy(),c.mult(b),c},d.Vector.div=function(a,b,c){return c?c.set(a):c=a.copy(),c.div(b),c},d.Vector.dot=function(a,b){return a.dot(b)},d.Vector.cross=function(a,b){return a.cross(b)},d.Vector.dist=function(a,b){return a.dist(b)},d.Vector.lerp=function(a,b,c,d){return d?d.set(a):d=a.copy(),d.lerp(b,c),d},d.Vector.angleBetween=function(a,b){var c=Math.acos(a.dot(b)/(a.mag()*b.mag()));return this.p5&&this.p5._angleMode===f.DEGREES&&(c=e.radiansToDegrees(c)),c},b.exports=d.Vector},{\"../core/constants\":49,\"../core/core\":50,\"./polargeometry\":79}],79:[function(a,b,c){b.exports={degreesToRadians:function(a){return 2*Math.PI*a/360},radiansToDegrees:function(a){return 360*a/(2*Math.PI)}}},{}],80:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=!1,f=function(){var a,b,c=4294967296,d=1664525,e=1013904223;return{setSeed:function(d){b=a=(null==d?Math.random()*c:d)>>>0},getSeed:function(){return a},rand:function(){return b=(d*b+e)%c,b/c}}}();d.prototype.randomSeed=function(a){f.setSeed(a),e=!0},d.prototype.random=function(a,b){var c;if(c=e?f.rand():Math.random(),0===arguments.length)return c;if(1===arguments.length)return c*a;if(a>b){var d=a;a=b,b=d}return c*(b-a)+a};var g,h=!1;d.prototype.randomGaussian=function(a,b){var c,d,e,f;if(h)c=g,h=!1;else{do d=this.random(2)-1,e=this.random(2)-1,f=d*d+e*e;while(f>=1);f=Math.sqrt(-2*Math.log(f)/f),c=d*f,g=e*f,h=!0}var i=a||0,j=b||1;return c*j+i},b.exports=d},{\"../core/core\":50}],81:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"./polargeometry\"),f=a(\"../core/constants\");d.prototype._angleMode=f.RADIANS,d.prototype.acos=function(a){return this._angleMode===f.RADIANS?Math.acos(a):e.radiansToDegrees(Math.acos(a))},d.prototype.asin=function(a){return this._angleMode===f.RADIANS?Math.asin(a):e.radiansToDegrees(Math.asin(a))},d.prototype.atan=function(a){return this._angleMode===f.RADIANS?Math.atan(a):e.radiansToDegrees(Math.atan(a))},d.prototype.atan2=function(a,b){return this._angleMode===f.RADIANS?Math.atan2(a,b):e.radiansToDegrees(Math.atan2(a,b))},d.prototype.cos=function(a){return this._angleMode===f.RADIANS?Math.cos(a):Math.cos(this.radians(a))},d.prototype.sin=function(a){return this._angleMode===f.RADIANS?Math.sin(a):Math.sin(this.radians(a))},d.prototype.tan=function(a){return this._angleMode===f.RADIANS?Math.tan(a):Math.tan(this.radians(a))},d.prototype.degrees=function(a){return e.radiansToDegrees(a)},d.prototype.radians=function(a){return e.degreesToRadians(a)},d.prototype.angleMode=function(a){(a===f.DEGREES||a===f.RADIANS)&&(this._angleMode=a)},b.exports=d},{\"../core/constants\":49,\"../core/core\":50,\"./polargeometry\":79}],82:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.textAlign=function(a,b){return this._renderer.textAlign.apply(this._renderer,arguments)},d.prototype.textLeading=function(a){return this._renderer.textLeading.apply(this._renderer,arguments)},d.prototype.textSize=function(a){return this._renderer.textSize.apply(this._renderer,arguments)},d.prototype.textStyle=function(a){return this._renderer.textStyle.apply(this._renderer,arguments)},d.prototype.textWidth=function(a){return this._renderer.textWidth.apply(this._renderer,arguments)},d.prototype.textAscent=function(){return this._renderer.textAscent()},d.prototype.textDescent=function(){return this._renderer.textDescent()},d.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},b.exports=d},{\"../core/core\":50}],83:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"../core/constants\");a(\"../core/error_helpers\"),d.prototype.text=function(a,b,c,d,e){for(var f=new Array(arguments.length),g=0;g<f.length;++g)f[g]=arguments[g];return this._validateParameters(\"text\",f,[[\"*\",\"Number\",\"Number\"],[\"*\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer._doFill||this._renderer._doStroke?this._renderer.text.apply(this._renderer,arguments):this},d.prototype.textFont=function(a,b){if(arguments.length){if(!a)throw Error(\"null font passed to textFont\");return this._renderer._setProperty(\"_textFont\",a),b&&(this._renderer._setProperty(\"_textSize\",b),this._renderer._setProperty(\"_textLeading\",b*e._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this},b.exports=d},{\"../core/constants\":49,\"../core/core\":50,\"../core/error_helpers\":53}],84:[function(a,b,c){\"use strict\";function d(a,b){for(var c=h(b,{sampleFactor:.1,simplifyThreshold:0}),d=n(a,0,1),f=d/(d*c.sampleFactor),g=[],i=0;d>i;i+=f)g.push(n(a,i));return c.simplifyThreshold&&e(g,c.simplifyThreshold),g}function e(a,b){b=\"undefined\"==typeof b?0:b;for(var c=0,d=a.length-1;a.length>3&&d>=0;--d)j(i(a,d-1),i(a,d),i(a,d+1),b)&&(a.splice(d%a.length,1),c++);return c}function f(a){for(var b,c=[],d=0;d<a.length;d++)\"M\"===a[d].type&&(b&&c.push(b),b=[]),b.push(g(a[d]));return c.push(b),c}function g(a){var b=[a.type];return\"M\"===a.type||\"L\"===a.type?b.push(a.x,a.y):\"C\"===a.type?b.push(a.x1,a.y1,a.x2,a.y2,a.x,a.y):\"Q\"===a.type&&b.push(a.x1,a.y1,a.x,a.y),b}function h(a,b){if(\"object\"!=typeof a)a=b;else for(var c in b)\"undefined\"==typeof a[c]&&(a[c]=b[c]);return a}function i(a,b){var c=a.length;return a[0>b?b%c+c:b%c]}function j(a,b,c,d){if(!d)return 0===k(a,b,c);\"undefined\"==typeof j.tmpPoint1&&(j.tmpPoint1=[],j.tmpPoint2=[]);var e=j.tmpPoint1,f=j.tmpPoint2;e.x=b.x-a.x,e.y=b.y-a.y,f.x=c.x-b.x,f.y=c.y-b.y;var g=e.x*f.x+e.y*f.y,h=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.sqrt(f.x*f.x+f.y*f.y),l=Math.acos(g/(h*i));return d>l}function k(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])}function l(a,b,c,d,e,f,g,h,i){var j=1-i,k=Math.pow(j,3),l=Math.pow(j,2),m=i*i,n=m*i,o=k*a+3*l*i*c+3*j*i*i*e+n*g,p=k*b+3*l*i*d+3*j*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,w=j*e+i*g,x=j*f+i*h,y=90-180*Math.atan2(q-s,r-t)/Math.PI;return(q>s||t>r)&&(y+=180),{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:w,y:x},alpha:y}}function m(a,b,c,d,e,f,g,h,i){return null==i?u(a,b,c,d,e,f,g,h):l(a,b,c,d,e,f,g,h,v(a,b,c,d,e,f,g,h,i))}function n(a,b,c){a=p(a);for(var d,e,f,g,h,i=\"\",j={},k=0,n=0,o=a.length;o>n;n++){if(f=a[n],\"M\"===f[0])d=+f[1],e=+f[2];else{if(g=m(d,e,f[1],f[2],f[3],f[4],f[5],f[6]),k+g>b&&!c)return h=m(d,e,f[1],f[2],f[3],f[4],f[5],f[6],b-k),{x:h.x,y:h.y,alpha:h.alpha};k+=g,d=+f[5],e=+f[6]}i+=f.shift()+f}return j.end=i,h=c?k:l(d,e,f[0],f[1],f[2],f[3],f[4],f[5],1),h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}function o(a){var b=[],c=0,d=0,e=0,f=0,g=0;\"M\"===a[0][0]&&(c=+a[0][1],d=+a[0][2],e=c,f=d,g++,b[0]=[\"M\",c,d]);for(var h,i,j,k=3===a.length&&\"M\"===a[0][0]&&\"R\"===a[1][0].toUpperCase()&&\"Z\"===a[2][0].toUpperCase(),l=g,m=a.length;m>l;l++){if(b.push(i=[]),j=a[l],j[0]!==String.prototype.toUpperCase.call(j[0]))switch(i[0]=String.prototype.toUpperCase.call(j[0]),i[0]){case\"A\":i[1]=j[1],i[2]=j[2],i[3]=j[3],i[4]=j[4],i[5]=j[5],i[6]=+(j[6]+c),i[7]=+(j[7]+d);break;case\"V\":i[1]=+j[1]+d;break;case\"H\":i[1]=+j[1]+c;break;case\"R\":h=[c,d].concat(j.slice(1));for(var n=2,o=h.length;o>n;n++)h[n]=+h[n]+c,h[++n]=+h[n]+d;b.pop(),b=b.concat(r(h,k));break;case\"M\":e=+j[1]+c,f=+j[2]+d;break;default:for(n=1,o=j.length;o>n;n++)i[n]=+j[n]+(n%2?c:d)}else if(\"R\"===j[0])h=[c,d].concat(j.slice(1)),b.pop(),b=b.concat(r(h,k)),i=[\"R\"].concat(j.slice(-2));else for(var p=0,q=j.length;q>p;p++)i[p]=j[p];switch(i[0]){case\"Z\":c=e,d=f;break;case\"H\":c=i[1];break;case\"V\":d=i[1];break;case\"M\":e=i[i.length-2],f=i[i.length-1];break;default:c=i[i.length-2],d=i[i.length-1]}}return b}function p(a,b){for(var c=o(a),d=b&&o(b),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g=(function(a,b,c){var d,e,f={T:1,Q:1};if(!a)return[\"C\",b.x,b.y,b.x,b.y,b.x,b.y];switch(a[0]in f||(b.qx=b.qy=null),a[0]){case\"M\":b.X=a[1],b.Y=a[2];break;case\"A\":a=[\"C\"].concat(q.apply(0,[b.x,b.y].concat(a.slice(1))));break;case\"S\":\"C\"===c||\"S\"===c?(d=2*b.x-b.bx,e=2*b.y-b.by):(d=b.x,e=b.y),a=[\"C\",d,e].concat(a.slice(1));break;case\"T\":\"Q\"===c||\"T\"===c?(b.qx=2*b.x-b.qx,b.qy=2*b.y-b.qy):(b.qx=b.x,b.qy=b.y),a=[\"C\"].concat(t(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case\"Q\":b.qx=a[1],b.qy=a[2],a=[\"C\"].concat(t(b.x,b.y,a[1],a[2],a[3],a[4]));break;case\"L\":a=[\"C\"].concat(s(b.x,b.y,a[1],a[2]));break;case\"H\":a=[\"C\"].concat(s(b.x,b.y,a[1],b.y));break;case\"V\":a=[\"C\"].concat(s(b.x,b.y,b.x,a[1]));break;case\"Z\":a=[\"C\"].concat(s(b.x,b.y,b.X,b.Y))}return a}),h=function(a,b){if(a[b].length>7){a[b].shift();for(var e=a[b];e.length;)j[b]=\"A\",d&&(k[b]=\"A\"),a.splice(b++,0,[\"C\"].concat(e.splice(0,6)));a.splice(b,1),p=Math.max(c.length,d&&d.length||0)}},i=function(a,b,e,f,g){a&&b&&\"M\"===a[g][0]&&\"M\"!==b[g][0]&&(b.splice(g,0,[\"M\",f.x,f.y]),e.bx=0,e.by=0,e.x=a[g][1],e.y=a[g][2],p=Math.max(c.length,d&&d.length||0))},j=[],k=[],l=\"\",m=\"\",n=0,p=Math.max(c.length,d&&d.length||0);p>n;n++){c[n]&&(l=c[n][0]),\"C\"!==l&&(j[n]=l,n&&(m=j[n-1])),c[n]=g(c[n],e,m),\"A\"!==j[n]&&\"C\"===l&&(j[n]=\"C\"),h(c,n),d&&(d[n]&&(l=d[n][0]),\"C\"!==l&&(k[n]=l,n&&(m=k[n-1])),d[n]=g(d[n],f,m),\"A\"!==k[n]&&\"C\"===l&&(k[n]=\"C\"),h(d,n)),i(c,d,e,f,n),i(d,c,f,e,n);var r=c[n],u=d&&d[n],v=r.length,w=d&&u.length;e.x=r[v-2],e.y=r[v-1],e.bx=parseFloat(r[v-4])||e.x,e.by=parseFloat(r[v-3])||e.y,f.bx=d&&(parseFloat(u[w-4])||f.x),f.by=d&&(parseFloat(u[w-3])||f.y),f.x=d&&u[w-2],f.y=d&&u[w-1]}return d?[c,d]:c}function q(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p=Math.PI,r=120*p/180,s=p/180*(+e||0),t=[],u=function(a,b,c){var d=a*Math.cos(c)-b*Math.sin(c),e=a*Math.sin(c)+b*Math.cos(c);return{x:d,y:e}};if(j)k=j[0],l=j[1],m=j[2],n=j[3];else{o=u(a,b,-s),a=o.x,b=o.y,o=u(h,i,-s),h=o.x,i=o.y;var v=(a-h)/2,w=(b-i)/2,x=v*v/(c*c)+w*w/(d*d);x>1&&(x=Math.sqrt(x),c=x*c,d=x*d);var y=c*c,z=d*d,A=(f===g?-1:1)*Math.sqrt(Math.abs((y*z-y*w*w-z*v*v)/(y*w*w+z*v*v)));m=A*c*w/d+(a+h)/2,n=A*-d*v/c+(b+i)/2,k=Math.asin(((b-n)/d).toFixed(9)),l=Math.asin(((i-n)/d).toFixed(9)),k=m>a?p-k:k,l=m>h?p-l:l,0>k&&(k=2*p+k),0>l&&(l=2*p+l),g&&k>l&&(k-=2*p),!g&&l>k&&(l-=2*p)}var B=l-k;if(Math.abs(B)>r){var C=l,D=h,E=i;l=k+r*(g&&l>k?1:-1),h=m+c*Math.cos(l),i=n+d*Math.sin(l),t=q(h,i,c,d,e,0,g,D,E,[l,C,m,n])}B=l-k;var F=Math.cos(k),G=Math.sin(k),H=Math.cos(l),I=Math.sin(l),J=Math.tan(B/4),K=4/3*c*J,L=4/3*d*J,M=[a,b],N=[a+K*G,b-L*F],O=[h+K*I,i-L*H],P=[h,i];if(N[0]=2*M[0]-N[0],N[1]=2*M[1]-N[1],j)return[N,O,P].concat(t);t=[N,O,P].concat(t).join().split(\",\");for(var Q=[],R=0,S=t.length;S>R;R++)Q[R]=R%2?u(t[R-1],t[R],s).y:u(t[R],t[R+1],s).x;\nreturn Q}function r(a,b){for(var c=[],d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4===d?f[3]={x:+a[0],y:+a[1]}:e-2===d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4===d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push([\"C\",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function s(a,b,c,d){return[a,b,c,d,c,d]}function t(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]}function u(a,b,c,d,e,f,g,h,i){null==i&&(i=1),i=i>1?1:0>i?0:i;for(var j=i/2,k=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],m=0,n=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],o=0;k>o;o++){var p=j*l[o]+j,q=w(p,a,c,e,g),r=w(p,b,d,f,h),s=q*q+r*r;m+=n[o]*Math.sqrt(s)}return j*m}function v(a,b,c,d,e,f,g,h,i){if(!(0>i||u(a,b,c,d,e,f,g,h)<i)){var j,k=1,l=k/2,m=k-l,n=.01;for(j=u(a,b,c,d,e,f,g,h,m);Math.abs(j-i)>n;)l/=2,m+=(i>j?1:-1)*l,j=u(a,b,c,d,e,f,g,h,m);return m}}function w(a,b,c,d,e){var f=-3*b+9*c-9*d+3*e,g=a*f+6*b-12*c+6*d;return a*g-3*b+3*c}function x(){for(var a=new Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];b=a.length;for(var c=\"\";b--;)c+=a[b]===Object(a[b])?JSON.stringify(a[b]):a[b];return c}var y=a(\"../core/core\"),z=a(\"../core/constants\");y.Font=function(a){this.parent=a,this.cache={},this.font=void 0},y.Font.prototype.list=function(){throw\"not yet implemented\"},y.Font.prototype.textBounds=function(a,b,c,d,e){b=void 0!==b?b:0,c=void 0!==c?c:0,d=d||this.parent._renderer._textSize;var f=this.cache[x(\"textBounds\",a,b,c,d)];if(!f){var g,h,i,j,k=[],l=[],m=this,n=this._scale(d);this.font.forEachGlyph(a,b,c,d,e,function(a,b,c,e){k.push(b),l.push(c);var f=a.getMetrics();\"space\"!==a.name?(k.push(b+f.xMax*n),l.push(c+-f.yMin*n),l.push(c+-f.yMax*n)):k.push(b+m.font.charToGlyph(\" \").advanceWidth*m._scale(d))}),g=Math.max(0,Math.min.apply(null,k)),h=Math.max(0,Math.min.apply(null,l)),i=Math.max(0,Math.max.apply(null,k)),j=Math.max(0,Math.max.apply(null,l)),f={x:g,y:h,h:j-h,w:i-g,advance:g-b},this.cache[x(\"textBounds\",a,b,c,d)]=f}return f},y.Font.prototype.textToPoints=function(a,b,c,e,g){var h=0,i=[],j=this._getGlyphs(a);e=e||this.parent._renderer._textSize;for(var k=0;k<j.length;k++){for(var l=j[k].getPath(b,c,e),m=f(l.commands),n=0;n<m.length;n++)for(var o=d(m[n],g),p=0;p<o.length;p++)o[p].x+=h,i.push(o[p]);h+=j[k].advanceWidth*this._scale(e)}return i},y.Font.prototype._getGlyphs=function(a){return this.font.stringToGlyphs(a)},y.Font.prototype._getPath=function(a,b,c,d){var e=this.parent,f=e._renderer.drawingContext,g=this._handleAlignment(e,f,a,b,c);return this.font.getPath(a,g.x,g.y,e._renderer._textSize,d)},y.Font.prototype._getPathData=function(a,b,c,d){var e=3;return\"string\"==typeof a&&arguments.length>2?a=this._getPath(a,b,c,d):\"object\"==typeof b&&(d=b),d&&\"number\"==typeof d.decimals&&(e=d.decimals),a.toPathData(e)},y.Font.prototype._getSVG=function(a,b,c,d){var e=3;return\"string\"==typeof a&&arguments.length>2?a=this._getPath(a,b,c,d):\"object\"==typeof b&&(d=b),d&&(\"number\"==typeof d.decimals&&(e=d.decimals),\"number\"==typeof d.strokeWidth&&(a.strokeWidth=d.strokeWidth),\"undefined\"!=typeof d.fill&&(a.fill=d.fill),\"undefined\"!=typeof d.stroke&&(a.stroke=d.stroke)),a.toSVG(e)},y.Font.prototype._renderPath=function(a,b,c,d){var e,f=d&&d.renderer||this.parent._renderer,g=f.drawingContext;e=\"object\"==typeof a&&a.commands?a.commands:this._getPath(a,b,c,f._textSize,d).commands,g.beginPath();for(var h=0;h<e.length;h+=1){var i=e[h];\"M\"===i.type?g.moveTo(i.x,i.y):\"L\"===i.type?g.lineTo(i.x,i.y):\"C\"===i.type?g.bezierCurveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):\"Q\"===i.type?g.quadraticCurveTo(i.x1,i.y1,i.x,i.y):\"Z\"===i.type&&g.closePath()}return f._doStroke&&f._strokeSet&&g.stroke(),f._doFill&&(g.fillStyle=f._fillSet?g.fillStyle:z._DEFAULT_TEXT_FILL,g.fill()),this},y.Font.prototype._textWidth=function(a,b){if(\" \"===a)return this.font.charToGlyph(\" \").advanceWidth*this._scale(b);var c=this.textBounds(a,0,0,b);return c.w+c.advance},y.Font.prototype._textAscent=function(a){return this.font.ascender*this._scale(a)},y.Font.prototype._textDescent=function(a){return-this.font.descender*this._scale(a)},y.Font.prototype._scale=function(a){return 1/this.font.unitsPerEm*(a||this.parent._renderer._textSize)},y.Font.prototype._handleAlignment=function(a,b,c,d,e){var f=this._textWidth(c),g=this._textAscent(),h=this._textDescent(),i=g+h;return b.textAlign===z.CENTER?d-=f/2:b.textAlign===z.RIGHT&&(d-=f),b.textBaseline===z.TOP?e+=i:b.textBaseline===z._CTX_MIDDLE?e+=i/2-h:b.textBaseline===z.BOTTOM&&(e-=h),{x:d,y:e}},b.exports=y.Font},{\"../core/constants\":49,\"../core/core\":50}],85:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.append=function(a,b){return a.push(b),a},d.prototype.arrayCopy=function(a,b,c,d,e){var f,g;\"undefined\"!=typeof e?(g=Math.min(e,a.length),f=d,a=a.slice(b,g+b)):(\"undefined\"!=typeof c?(g=c,g=Math.min(g,a.length)):g=a.length,f=0,c=b,a=a.slice(0,g)),Array.prototype.splice.apply(c,[f,g].concat(a))},d.prototype.concat=function(a,b){return a.concat(b)},d.prototype.reverse=function(a){return a.reverse()},d.prototype.shorten=function(a){return a.pop(),a},d.prototype.shuffle=function(a,b){var c=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a);a=b||c?a:a.slice();for(var d,e,f=a.length;f>1;)d=Math.random()*f|0,e=a[--f],a[f]=a[d],a[d]=e;return a},d.prototype.sort=function(a,b){var c=b?a.slice(0,Math.min(b,a.length)):a,d=b?a.slice(Math.min(b,a.length)):[];return c=\"string\"==typeof c[0]?c.sort():c.sort(function(a,b){return a-b}),c.concat(d)},d.prototype.splice=function(a,b,c){return Array.prototype.splice.apply(a,[c,0].concat(b)),a},d.prototype.subset=function(a,b,c){return\"undefined\"!=typeof c?a.slice(b,b+c):a.slice(b,a.length)},b.exports=d},{\"../core/core\":50}],86:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype[\"float\"]=function(a){return parseFloat(a)},d.prototype[\"int\"]=function(a,b){return\"string\"==typeof a?(b=b||10,parseInt(a,b)):\"number\"==typeof a?0|a:\"boolean\"==typeof a?a?1:0:a instanceof Array?a.map(function(a){return d.prototype[\"int\"](a,b)}):void 0},d.prototype.str=function(a){return a instanceof Array?a.map(d.prototype.str):String(a)},d.prototype[\"boolean\"]=function(a){return\"number\"==typeof a?0!==a:\"string\"==typeof a?\"true\"===a.toLowerCase():\"boolean\"==typeof a?a:a instanceof Array?a.map(d.prototype[\"boolean\"]):void 0},d.prototype[\"byte\"]=function(a){var b=d.prototype[\"int\"](a,10);return\"number\"==typeof b?(b+128)%256-128:b instanceof Array?b.map(d.prototype[\"byte\"]):void 0},d.prototype[\"char\"]=function(a){return\"number\"!=typeof a||isNaN(a)?a instanceof Array?a.map(d.prototype[\"char\"]):\"string\"==typeof a?d.prototype[\"char\"](parseInt(a,10)):void 0:String.fromCharCode(a)},d.prototype.unchar=function(a){return\"string\"==typeof a&&1===a.length?a.charCodeAt(0):a instanceof Array?a.map(d.prototype.unchar):void 0},d.prototype.hex=function(a,b){if(b=void 0===b||null===b?b=8:b,a instanceof Array)return a.map(function(a){return d.prototype.hex(a,b)});if(\"number\"==typeof a){0>a&&(a=4294967295+a+1);for(var c=Number(a).toString(16).toUpperCase();c.length<b;)c=\"0\"+c;return c.length>=b&&(c=c.substring(c.length-b,c.length)),c}},d.prototype.unhex=function(a){return a instanceof Array?a.map(d.prototype.unhex):parseInt(\"0x\"+a,16)},b.exports=d},{\"../core/core\":50}],87:[function(a,b,c){\"use strict\";function d(){var a=arguments[0],b=0>a,c=b?a.toString().substring(1):a.toString(),d=c.indexOf(\".\"),e=-1!==d?c.substring(0,d):c,f=-1!==d?c.substring(d+1):\"\",g=b?\"-\":\"\";if(3===arguments.length){var h=\"\";(-1!==d||arguments[2]-f.length>0)&&(h=\".\"),f.length>arguments[2]&&(f=f.substring(0,arguments[2]));for(var i=0;i<arguments[1]-e.length;i++)g+=\"0\";g+=e,g+=h,g+=f;for(var j=0;j<arguments[2]-f.length;j++)g+=\"0\";return g}for(var k=0;k<Math.max(arguments[1]-e.length,0);k++)g+=\"0\";return g+=c}function e(){var a=arguments[0].toString(),b=a.indexOf(\".\"),c=-1!==b?a.substring(b):\"\",d=-1!==b?a.substring(0,b):a;if(d=d.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\"),0===arguments[1])c=\"\";else if(void 0!==arguments[1])if(arguments[1]>c.length){c+=-1===b?\".\":\"\";for(var e=arguments[1]-c.length+1,f=0;e>f;f++)c+=\"0\"}else c=c.substring(0,arguments[1]+1);return d+c}function f(){return parseFloat(arguments[0])>0?\"+\"+arguments[0].toString():arguments[0].toString()}function g(){return parseFloat(arguments[0])>0?\" \"+arguments[0].toString():arguments[0].toString()}var h=a(\"../core/core\");h.prototype.join=function(a,b){return a.join(b)},h.prototype.match=function(a,b){return a.match(b)},h.prototype.matchAll=function(a,b){for(var c=new RegExp(b,\"g\"),d=c.exec(a),e=[];null!==d;)e.push(d),d=c.exec(a);return e},h.prototype.nf=function(){if(arguments[0]instanceof Array){var a=arguments[1],b=arguments[2];return arguments[0].map(function(c){return d(c,a,b)})}var c=Object.prototype.toString.call(arguments[0]);return\"[object Arguments]\"===c?3===arguments[0].length?this.nf(arguments[0][0],arguments[0][1],arguments[0][2]):2===arguments[0].length?this.nf(arguments[0][0],arguments[0][1]):this.nf(arguments[0][0]):d.apply(this,arguments)},h.prototype.nfc=function(){if(arguments[0]instanceof Array){var a=arguments[1];return arguments[0].map(function(b){return e(b,a)})}return e.apply(this,arguments)},h.prototype.nfp=function(){var a=this.nf.apply(this,arguments);return a instanceof Array?a.map(f):f(a)},h.prototype.nfs=function(){var a=this.nf.apply(this,arguments);return a instanceof Array?a.map(g):g(a)},h.prototype.split=function(a,b){return a.split(b)},h.prototype.splitTokens=function(){var a,b,c,d;return d=arguments[1],arguments.length>1?(c=/\\]/g.exec(d),b=/\\[/g.exec(d),b&&c?(d=d.slice(0,c.index)+d.slice(c.index+1),b=/\\[/g.exec(d),d=d.slice(0,b.index)+d.slice(b.index+1),a=new RegExp(\"[\\\\[\"+d+\"\\\\]]\",\"g\")):c?(d=d.slice(0,c.index)+d.slice(c.index+1),a=new RegExp(\"[\"+d+\"\\\\]]\",\"g\")):b?(d=d.slice(0,b.index)+d.slice(b.index+1),a=new RegExp(\"[\"+d+\"\\\\[]\",\"g\")):a=new RegExp(\"[\"+d+\"]\",\"g\")):a=/\\s/g,arguments[0].split(a).filter(function(a){return a})},h.prototype.trim=function(a){return a instanceof Array?a.map(this.trim):a.trim()},b.exports=h},{\"../core/core\":50}],88:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.day=function(){return(new Date).getDate()},d.prototype.hour=function(){return(new Date).getHours()},d.prototype.minute=function(){return(new Date).getMinutes()},d.prototype.millis=function(){return window.performance.now()},d.prototype.month=function(){return(new Date).getMonth()+1},d.prototype.second=function(){return(new Date).getSeconds()},d.prototype.year=function(){return(new Date).getFullYear()},b.exports=d},{\"../core/core\":50}]},{},[41])(41)});p5.prototype._validateParameters = function() {};p5.prototype._friendlyFileLoadError = function() {};","source":"libraries/p5.min.js","raw":"/*! p5.js v0.4.22 February 04, 2016 */ !function(a){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=a();else if(\"function\"==typeof define&&define.amd)define([],a);else{var b;b=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,b.p5=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i=\"function\"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error(\"Cannot find module '\"+g+\"'\");throw j.code=\"MODULE_NOT_FOUND\",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f=\"function\"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){},{}],2:[function(a,b,c){\"use strict\";c.argument=function(a,b){if(!a)throw new Error(b)},c.assert=c.argument},{}],3:[function(a,b,c){\"use strict\";function d(a,b,c,d,e){a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke()}c.line=d},{}],4:[function(a,b,c){\"use strict\";function d(a){this.font=a}function e(a){this.cmap=a}function f(a,b){this.encoding=a,this.charset=b}function g(a){var b;switch(a.version){case 1:this.names=c.standardNames.slice();break;case 2:for(this.names=new Array(a.numberOfGlyphs),b=0;b<a.numberOfGlyphs;b++)a.glyphNameIndex[b]<c.standardNames.length?this.names[b]=c.standardNames[a.glyphNameIndex[b]]:this.names[b]=a.names[a.glyphNameIndex[b]-c.standardNames.length];break;case 2.5:for(this.names=new Array(a.numberOfGlyphs),b=0;b<a.numberOfGlyphs;b++)this.names[b]=c.standardNames[b+a.glyphNameIndex[b]];break;case 3:this.names=[]}}function h(a){for(var b,c=a.tables.cmap.glyphIndexMap,d=Object.keys(c),e=0;e<d.length;e+=1){var f=d[e],g=c[f];b=a.glyphs.get(g),b.addUnicode(parseInt(f))}for(e=0;e<a.glyphs.length;e+=1)b=a.glyphs.get(e),a.cffEncoding?b.name=a.cffEncoding.charset[e]:b.name=a.glyphNames.glyphIndexToName(e)}var i=[\".notdef\",\"space\",\"exclam\",\"quotedbl\",\"numbersign\",\"dollar\",\"percent\",\"ampersand\",\"quoteright\",\"parenleft\",\"parenright\",\"asterisk\",\"plus\",\"comma\",\"hyphen\",\"period\",\"slash\",\"zero\",\"one\",\"two\",\"three\",\"four\",\"five\",\"six\",\"seven\",\"eight\",\"nine\",\"colon\",\"semicolon\",\"less\",\"equal\",\"greater\",\"question\",\"at\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\",\"bracketleft\",\"backslash\",\"bracketright\",\"asciicircum\",\"underscore\",\"quoteleft\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\",\"braceleft\",\"bar\",\"braceright\",\"asciitilde\",\"exclamdown\",\"cent\",\"sterling\",\"fraction\",\"yen\",\"florin\",\"section\",\"currency\",\"quotesingle\",\"quotedblleft\",\"guillemotleft\",\"guilsinglleft\",\"guilsinglright\",\"fi\",\"fl\",\"endash\",\"dagger\",\"daggerdbl\",\"periodcentered\",\"paragraph\",\"bullet\",\"quotesinglbase\",\"quotedblbase\",\"quotedblright\",\"guillemotright\",\"ellipsis\",\"perthousand\",\"questiondown\",\"grave\",\"acute\",\"circumflex\",\"tilde\",\"macron\",\"breve\",\"dotaccent\",\"dieresis\",\"ring\",\"cedilla\",\"hungarumlaut\",\"ogonek\",\"caron\",\"emdash\",\"AE\",\"ordfeminine\",\"Lslash\",\"Oslash\",\"OE\",\"ordmasculine\",\"ae\",\"dotlessi\",\"lslash\",\"oslash\",\"oe\",\"germandbls\",\"onesuperior\",\"logicalnot\",\"mu\",\"trademark\",\"Eth\",\"onehalf\",\"plusminus\",\"Thorn\",\"onequarter\",\"divide\",\"brokenbar\",\"degree\",\"thorn\",\"threequarters\",\"twosuperior\",\"registered\",\"minus\",\"eth\",\"multiply\",\"threesuperior\",\"copyright\",\"Aacute\",\"Acircumflex\",\"Adieresis\",\"Agrave\",\"Aring\",\"Atilde\",\"Ccedilla\",\"Eacute\",\"Ecircumflex\",\"Edieresis\",\"Egrave\",\"Iacute\",\"Icircumflex\",\"Idieresis\",\"Igrave\",\"Ntilde\",\"Oacute\",\"Ocircumflex\",\"Odieresis\",\"Ograve\",\"Otilde\",\"Scaron\",\"Uacute\",\"Ucircumflex\",\"Udieresis\",\"Ugrave\",\"Yacute\",\"Ydieresis\",\"Zcaron\",\"aacute\",\"acircumflex\",\"adieresis\",\"agrave\",\"aring\",\"atilde\",\"ccedilla\",\"eacute\",\"ecircumflex\",\"edieresis\",\"egrave\",\"iacute\",\"icircumflex\",\"idieresis\",\"igrave\",\"ntilde\",\"oacute\",\"ocircumflex\",\"odieresis\",\"ograve\",\"otilde\",\"scaron\",\"uacute\",\"ucircumflex\",\"udieresis\",\"ugrave\",\"yacute\",\"ydieresis\",\"zcaron\",\"exclamsmall\",\"Hungarumlautsmall\",\"dollaroldstyle\",\"dollarsuperior\",\"ampersandsmall\",\"Acutesmall\",\"parenleftsuperior\",\"parenrightsuperior\",\"266 ff\",\"onedotenleader\",\"zerooldstyle\",\"oneoldstyle\",\"twooldstyle\",\"threeoldstyle\",\"fouroldstyle\",\"fiveoldstyle\",\"sixoldstyle\",\"sevenoldstyle\",\"eightoldstyle\",\"nineoldstyle\",\"commasuperior\",\"threequartersemdash\",\"periodsuperior\",\"questionsmall\",\"asuperior\",\"bsuperior\",\"centsuperior\",\"dsuperior\",\"esuperior\",\"isuperior\",\"lsuperior\",\"msuperior\",\"nsuperior\",\"osuperior\",\"rsuperior\",\"ssuperior\",\"tsuperior\",\"ff\",\"ffi\",\"ffl\",\"parenleftinferior\",\"parenrightinferior\",\"Circumflexsmall\",\"hyphensuperior\",\"Gravesmall\",\"Asmall\",\"Bsmall\",\"Csmall\",\"Dsmall\",\"Esmall\",\"Fsmall\",\"Gsmall\",\"Hsmall\",\"Ismall\",\"Jsmall\",\"Ksmall\",\"Lsmall\",\"Msmall\",\"Nsmall\",\"Osmall\",\"Psmall\",\"Qsmall\",\"Rsmall\",\"Ssmall\",\"Tsmall\",\"Usmall\",\"Vsmall\",\"Wsmall\",\"Xsmall\",\"Ysmall\",\"Zsmall\",\"colonmonetary\",\"onefitted\",\"rupiah\",\"Tildesmall\",\"exclamdownsmall\",\"centoldstyle\",\"Lslashsmall\",\"Scaronsmall\",\"Zcaronsmall\",\"Dieresissmall\",\"Brevesmall\",\"Caronsmall\",\"Dotaccentsmall\",\"Macronsmall\",\"figuredash\",\"hypheninferior\",\"Ogoneksmall\",\"Ringsmall\",\"Cedillasmall\",\"questiondownsmall\",\"oneeighth\",\"threeeighths\",\"fiveeighths\",\"seveneighths\",\"onethird\",\"twothirds\",\"zerosuperior\",\"foursuperior\",\"fivesuperior\",\"sixsuperior\",\"sevensuperior\",\"eightsuperior\",\"ninesuperior\",\"zeroinferior\",\"oneinferior\",\"twoinferior\",\"threeinferior\",\"fourinferior\",\"fiveinferior\",\"sixinferior\",\"seveninferior\",\"eightinferior\",\"nineinferior\",\"centinferior\",\"dollarinferior\",\"periodinferior\",\"commainferior\",\"Agravesmall\",\"Aacutesmall\",\"Acircumflexsmall\",\"Atildesmall\",\"Adieresissmall\",\"Aringsmall\",\"AEsmall\",\"Ccedillasmall\",\"Egravesmall\",\"Eacutesmall\",\"Ecircumflexsmall\",\"Edieresissmall\",\"Igravesmall\",\"Iacutesmall\",\"Icircumflexsmall\",\"Idieresissmall\",\"Ethsmall\",\"Ntildesmall\",\"Ogravesmall\",\"Oacutesmall\",\"Ocircumflexsmall\",\"Otildesmall\",\"Odieresissmall\",\"OEsmall\",\"Oslashsmall\",\"Ugravesmall\",\"Uacutesmall\",\"Ucircumflexsmall\",\"Udieresissmall\",\"Yacutesmall\",\"Thornsmall\",\"Ydieresissmall\",\"001.000\",\"001.001\",\"001.002\",\"001.003\",\"Black\",\"Bold\",\"Book\",\"Light\",\"Medium\",\"Regular\",\"Roman\",\"Semibold\"],j=[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"space\",\"exclam\",\"quotedbl\",\"numbersign\",\"dollar\",\"percent\",\"ampersand\",\"quoteright\",\"parenleft\",\"parenright\",\"asterisk\",\"plus\",\"comma\",\"hyphen\",\"period\",\"slash\",\"zero\",\"one\",\"two\",\"three\",\"four\",\"five\",\"six\",\"seven\",\"eight\",\"nine\",\"colon\",\"semicolon\",\"less\",\"equal\",\"greater\",\"question\",\"at\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\",\"bracketleft\",\"backslash\",\"bracketright\",\"asciicircum\",\"underscore\",\"quoteleft\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\",\"braceleft\",\"bar\",\"braceright\",\"asciitilde\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"exclamdown\",\"cent\",\"sterling\",\"fraction\",\"yen\",\"florin\",\"section\",\"currency\",\"quotesingle\",\"quotedblleft\",\"guillemotleft\",\"guilsinglleft\",\"guilsinglright\",\"fi\",\"fl\",\"\",\"endash\",\"dagger\",\"daggerdbl\",\"periodcentered\",\"\",\"paragraph\",\"bullet\",\"quotesinglbase\",\"quotedblbase\",\"quotedblright\",\"guillemotright\",\"ellipsis\",\"perthousand\",\"\",\"questiondown\",\"\",\"grave\",\"acute\",\"circumflex\",\"tilde\",\"macron\",\"breve\",\"dotaccent\",\"dieresis\",\"\",\"ring\",\"cedilla\",\"\",\"hungarumlaut\",\"ogonek\",\"caron\",\"emdash\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"AE\",\"\",\"ordfeminine\",\"\",\"\",\"\",\"\",\"Lslash\",\"Oslash\",\"OE\",\"ordmasculine\",\"\",\"\",\"\",\"\",\"\",\"ae\",\"\",\"\",\"\",\"dotlessi\",\"\",\"\",\"lslash\",\"oslash\",\"oe\",\"germandbls\"],k=[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"space\",\"exclamsmall\",\"Hungarumlautsmall\",\"\",\"dollaroldstyle\",\"dollarsuperior\",\"ampersandsmall\",\"Acutesmall\",\"parenleftsuperior\",\"parenrightsuperior\",\"twodotenleader\",\"onedotenleader\",\"comma\",\"hyphen\",\"period\",\"fraction\",\"zerooldstyle\",\"oneoldstyle\",\"twooldstyle\",\"threeoldstyle\",\"fouroldstyle\",\"fiveoldstyle\",\"sixoldstyle\",\"sevenoldstyle\",\"eightoldstyle\",\"nineoldstyle\",\"colon\",\"semicolon\",\"commasuperior\",\"threequartersemdash\",\"periodsuperior\",\"questionsmall\",\"\",\"asuperior\",\"bsuperior\",\"centsuperior\",\"dsuperior\",\"esuperior\",\"\",\"\",\"isuperior\",\"\",\"\",\"lsuperior\",\"msuperior\",\"nsuperior\",\"osuperior\",\"\",\"\",\"rsuperior\",\"ssuperior\",\"tsuperior\",\"\",\"ff\",\"fi\",\"fl\",\"ffi\",\"ffl\",\"parenleftinferior\",\"\",\"parenrightinferior\",\"Circumflexsmall\",\"hyphensuperior\",\"Gravesmall\",\"Asmall\",\"Bsmall\",\"Csmall\",\"Dsmall\",\"Esmall\",\"Fsmall\",\"Gsmall\",\"Hsmall\",\"Ismall\",\"Jsmall\",\"Ksmall\",\"Lsmall\",\"Msmall\",\"Nsmall\",\"Osmall\",\"Psmall\",\"Qsmall\",\"Rsmall\",\"Ssmall\",\"Tsmall\",\"Usmall\",\"Vsmall\",\"Wsmall\",\"Xsmall\",\"Ysmall\",\"Zsmall\",\"colonmonetary\",\"onefitted\",\"rupiah\",\"Tildesmall\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"exclamdownsmall\",\"centoldstyle\",\"Lslashsmall\",\"\",\"\",\"Scaronsmall\",\"Zcaronsmall\",\"Dieresissmall\",\"Brevesmall\",\"Caronsmall\",\"\",\"Dotaccentsmall\",\"\",\"\",\"Macronsmall\",\"\",\"\",\"figuredash\",\"hypheninferior\",\"\",\"\",\"Ogoneksmall\",\"Ringsmall\",\"Cedillasmall\",\"\",\"\",\"\",\"onequarter\",\"onehalf\",\"threequarters\",\"questiondownsmall\",\"oneeighth\",\"threeeighths\",\"fiveeighths\",\"seveneighths\",\"onethird\",\"twothirds\",\"\",\"\",\"zerosuperior\",\"onesuperior\",\"twosuperior\",\"threesuperior\",\"foursuperior\",\"fivesuperior\",\"sixsuperior\",\"sevensuperior\",\"eightsuperior\",\"ninesuperior\",\"zeroinferior\",\"oneinferior\",\"twoinferior\",\"threeinferior\",\"fourinferior\",\"fiveinferior\",\"sixinferior\",\"seveninferior\",\"eightinferior\",\"nineinferior\",\"centinferior\",\"dollarinferior\",\"periodinferior\",\"commainferior\",\"Agravesmall\",\"Aacutesmall\",\"Acircumflexsmall\",\"Atildesmall\",\"Adieresissmall\",\"Aringsmall\",\"AEsmall\",\"Ccedillasmall\",\"Egravesmall\",\"Eacutesmall\",\"Ecircumflexsmall\",\"Edieresissmall\",\"Igravesmall\",\"Iacutesmall\",\"Icircumflexsmall\",\"Idieresissmall\",\"Ethsmall\",\"Ntildesmall\",\"Ogravesmall\",\"Oacutesmall\",\"Ocircumflexsmall\",\"Otildesmall\",\"Odieresissmall\",\"OEsmall\",\"Oslashsmall\",\"Ugravesmall\",\"Uacutesmall\",\"Ucircumflexsmall\",\"Udieresissmall\",\"Yacutesmall\",\"Thornsmall\",\"Ydieresissmall\"],l=[\".notdef\",\".null\",\"nonmarkingreturn\",\"space\",\"exclam\",\"quotedbl\",\"numbersign\",\"dollar\",\"percent\",\"ampersand\",\"quotesingle\",\"parenleft\",\"parenright\",\"asterisk\",\"plus\",\"comma\",\"hyphen\",\"period\",\"slash\",\"zero\",\"one\",\"two\",\"three\",\"four\",\"five\",\"six\",\"seven\",\"eight\",\"nine\",\"colon\",\"semicolon\",\"less\",\"equal\",\"greater\",\"question\",\"at\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\",\"bracketleft\",\"backslash\",\"bracketright\",\"asciicircum\",\"underscore\",\"grave\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\",\"braceleft\",\"bar\",\"braceright\",\"asciitilde\",\"Adieresis\",\"Aring\",\"Ccedilla\",\"Eacute\",\"Ntilde\",\"Odieresis\",\"Udieresis\",\"aacute\",\"agrave\",\"acircumflex\",\"adieresis\",\"atilde\",\"aring\",\"ccedilla\",\"eacute\",\"egrave\",\"ecircumflex\",\"edieresis\",\"iacute\",\"igrave\",\"icircumflex\",\"idieresis\",\"ntilde\",\"oacute\",\"ograve\",\"ocircumflex\",\"odieresis\",\"otilde\",\"uacute\",\"ugrave\",\"ucircumflex\",\"udieresis\",\"dagger\",\"degree\",\"cent\",\"sterling\",\"section\",\"bullet\",\"paragraph\",\"germandbls\",\"registered\",\"copyright\",\"trademark\",\"acute\",\"dieresis\",\"notequal\",\"AE\",\"Oslash\",\"infinity\",\"plusminus\",\"lessequal\",\"greaterequal\",\"yen\",\"mu\",\"partialdiff\",\"summation\",\"product\",\"pi\",\"integral\",\"ordfeminine\",\"ordmasculine\",\"Omega\",\"ae\",\"oslash\",\"questiondown\",\"exclamdown\",\"logicalnot\",\"radical\",\"florin\",\"approxequal\",\"Delta\",\"guillemotleft\",\"guillemotright\",\"ellipsis\",\"nonbreakingspace\",\"Agrave\",\"Atilde\",\"Otilde\",\"OE\",\"oe\",\"endash\",\"emdash\",\"quotedblleft\",\"quotedblright\",\"quoteleft\",\"quoteright\",\"divide\",\"lozenge\",\"ydieresis\",\"Ydieresis\",\"fraction\",\"currency\",\"guilsinglleft\",\"guilsinglright\",\"fi\",\"fl\",\"daggerdbl\",\"periodcentered\",\"quotesinglbase\",\"quotedblbase\",\"perthousand\",\"Acircumflex\",\"Ecircumflex\",\"Aacute\",\"Edieresis\",\"Egrave\",\"Iacute\",\"Icircumflex\",\"Idieresis\",\"Igrave\",\"Oacute\",\"Ocircumflex\",\"apple\",\"Ograve\",\"Uacute\",\"Ucircumflex\",\"Ugrave\",\"dotlessi\",\"circumflex\",\"tilde\",\"macron\",\"breve\",\"dotaccent\",\"ring\",\"cedilla\",\"hungarumlaut\",\"ogonek\",\"caron\",\"Lslash\",\"lslash\",\"Scaron\",\"scaron\",\"Zcaron\",\"zcaron\",\"brokenbar\",\"Eth\",\"eth\",\"Yacute\",\"yacute\",\"Thorn\",\"thorn\",\"minus\",\"multiply\",\"onesuperior\",\"twosuperior\",\"threesuperior\",\"onehalf\",\"onequarter\",\"threequarters\",\"franc\",\"Gbreve\",\"gbreve\",\"Idotaccent\",\"Scedilla\",\"scedilla\",\"Cacute\",\"cacute\",\"Ccaron\",\"ccaron\",\"dcroat\"];d.prototype.charToGlyphIndex=function(a){var b=a.charCodeAt(0),c=this.font.glyphs;if(!c)return null;for(var d=0;d<c.length;d+=1)for(var e=c.get(d),f=0;f<e.unicodes.length;f+=1)if(e.unicodes[f]===b)return d},e.prototype.charToGlyphIndex=function(a){return this.cmap.glyphIndexMap[a.charCodeAt(0)]||0},f.prototype.charToGlyphIndex=function(a){var b=a.charCodeAt(0),c=this.encoding[b];return this.charset.indexOf(c)},g.prototype.nameToGlyphIndex=function(a){return this.names.indexOf(a)},g.prototype.glyphIndexToName=function(a){return this.names[a]},c.cffStandardStrings=i,c.cffStandardEncoding=j,c.cffExpertEncoding=k,c.standardNames=l,c.DefaultEncoding=d,c.CmapEncoding=e,c.CffEncoding=f,c.GlyphNames=g,c.addGlyphNames=h},{}],5:[function(a,b,c){\"use strict\";function d(a){a=a||{},this.names={fontFamily:{en:a.familyName||\" \"},fontSubfamily:{en:a.styleName||\" \"},designer:{en:a.designer||\" \"},designerURL:{en:a.designerURL||\" \"},manufacturer:{en:a.manufacturer||\" \"},manufacturerURL:{en:a.manufacturerURL||\" \"},license:{en:a.license||\" \"},licenseURL:{en:a.licenseURL||\" \"},version:{en:a.version||\"Version 0.1\"},description:{en:a.description||\" \"},copyright:{en:a.copyright||\" \"},trademark:{en:a.trademark||\" \"}},this.unitsPerEm=a.unitsPerEm||1e3,this.ascender=a.ascender,this.descender=a.descender,this.supported=!0,this.glyphs=new h.GlyphSet(this,a.glyphs||[]),this.encoding=new g.DefaultEncoding(this),this.tables={}}var e=a(\"./path\"),f=a(\"./tables/sfnt\"),g=a(\"./encoding\"),h=a(\"./glyphset\");d.prototype.hasChar=function(a){return null!==this.encoding.charToGlyphIndex(a)},d.prototype.charToGlyphIndex=function(a){return this.encoding.charToGlyphIndex(a)},d.prototype.charToGlyph=function(a){var b=this.charToGlyphIndex(a),c=this.glyphs.get(b);return c||(c=this.glyphs.get(0)),c},d.prototype.stringToGlyphs=function(a){for(var b=[],c=0;c<a.length;c+=1){var d=a[c];b.push(this.charToGlyph(d))}return b},d.prototype.nameToGlyphIndex=function(a){return this.glyphNames.nameToGlyphIndex(a)},d.prototype.nameToGlyph=function(a){var b=this.nametoGlyphIndex(a),c=this.glyphs.get(b);return c||(c=this.glyphs.get(0)),c},d.prototype.glyphIndexToName=function(a){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(a):\"\"},d.prototype.getKerningValue=function(a,b){a=a.index||a,b=b.index||b;var c=this.getGposKerningValue;return c?c(a,b):this.kerningPairs[a+\",\"+b]||0},d.prototype.forEachGlyph=function(a,b,c,d,e,f){b=void 0!==b?b:0,c=void 0!==c?c:0,d=void 0!==d?d:72,e=e||{};for(var g=void 0===e.kerning?!0:e.kerning,h=1/this.unitsPerEm*d,i=this.stringToGlyphs(a),j=0;j<i.length;j+=1){var k=i[j];if(f(k,b,c,d,e),k.advanceWidth&&(b+=k.advanceWidth*h),g&&j<i.length-1){var l=this.getKerningValue(k,i[j+1]);b+=l*h}}},d.prototype.getPath=function(a,b,c,d,f){var g=new e.Path;return this.forEachGlyph(a,b,c,d,f,function(a,b,c,d){var e=a.getPath(b,c,d);g.extend(e)}),g},d.prototype.draw=function(a,b,c,d,e,f){this.getPath(b,c,d,e,f).draw(a)},d.prototype.drawPoints=function(a,b,c,d,e,f){this.forEachGlyph(b,c,d,e,f,function(b,c,d,e){b.drawPoints(a,c,d,e)})},d.prototype.drawMetrics=function(a,b,c,d,e,f){this.forEachGlyph(b,c,d,e,f,function(b,c,d,e){b.drawMetrics(a,c,d,e)})},d.prototype.getEnglishName=function(a){var b=this.names[a];return b?b.en:void 0},d.prototype.validate=function(){function a(a,b){a||c.push(b)}function b(b){var c=d.getEnglishName(b);a(c&&c.trim().length>0,\"No English \"+b+\" specified.\")}var c=[],d=this;b(\"fontFamily\"),b(\"weightName\"),b(\"manufacturer\"),b(\"copyright\"),b(\"version\"),a(this.unitsPerEm>0,\"No unitsPerEm specified.\")},d.prototype.toTables=function(){return f.fontToTable(this)},d.prototype.toBuffer=function(){for(var a=this.toTables(),b=a.encode(),c=new ArrayBuffer(b.length),d=new Uint8Array(c),e=0;e<b.length;e++)d[e]=b[e];return c},d.prototype.download=function(){var a=this.getEnglishName(\"fontFamily\"),b=this.getEnglishName(\"fontSubfamily\"),c=a.replace(/\\s/g,\"\")+\"-\"+b+\".otf\",d=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,d.byteLength,function(a){a.root.getFile(c,{create:!0},function(a){a.createWriter(function(b){var c=new DataView(d),e=new Blob([c],{type:\"font/opentype\"});b.write(e),b.addEventListener(\"writeend\",function(){location.href=a.toURL()},!1)})})},function(a){throw a})},c.Font=d},{\"./encoding\":4,\"./glyphset\":7,\"./path\":10,\"./tables/sfnt\":27}],6:[function(a,b,c){\"use strict\";function d(a,b){var c=b||{commands:[]};return{configurable:!0,get:function(){return\"function\"==typeof c&&(c=c()),c},set:function(a){c=a}}}function e(a){this.bindConstructorValues(a)}var f=a(\"./check\"),g=a(\"./draw\"),h=a(\"./path\");e.prototype.bindConstructorValues=function(a){this.index=a.index||0,this.name=a.name||null,this.unicode=a.unicode||void 0,this.unicodes=a.unicodes||void 0!==a.unicode?[a.unicode]:[],a.xMin&&(this.xMin=a.xMin),a.yMin&&(this.yMin=a.yMin),a.xMax&&(this.xMax=a.xMax),a.yMax&&(this.yMax=a.yMax),a.advanceWidth&&(this.advanceWidth=a.advanceWidth),Object.defineProperty(this,\"path\",d(this,a.path))},e.prototype.addUnicode=function(a){0===this.unicodes.length&&(this.unicode=a),this.unicodes.push(a)},e.prototype.getPath=function(a,b,c){a=void 0!==a?a:0,b=void 0!==b?b:0,c=void 0!==c?c:72;for(var d=1/this.path.unitsPerEm*c,e=new h.Path,f=this.path.commands,g=0;g<f.length;g+=1){var i=f[g];\"M\"===i.type?e.moveTo(a+i.x*d,b+-i.y*d):\"L\"===i.type?e.lineTo(a+i.x*d,b+-i.y*d):\"Q\"===i.type?e.quadraticCurveTo(a+i.x1*d,b+-i.y1*d,a+i.x*d,b+-i.y*d):\"C\"===i.type?e.curveTo(a+i.x1*d,b+-i.y1*d,a+i.x2*d,b+-i.y2*d,a+i.x*d,b+-i.y*d):\"Z\"===i.type&&e.closePath()}return e},e.prototype.getContours=function(){if(void 0===this.points)return[];for(var a=[],b=[],c=0;c<this.points.length;c+=1){var d=this.points[c];b.push(d),d.lastPointOfContour&&(a.push(b),b=[])}return f.argument(0===b.length,\"There are still points left in the current contour.\"),a},e.prototype.getMetrics=function(){for(var a=this.path.commands,b=[],c=[],d=0;d<a.length;d+=1){var e=a[d];\"Z\"!==e.type&&(b.push(e.x),c.push(e.y)),(\"Q\"===e.type||\"C\"===e.type)&&(b.push(e.x1),c.push(e.y1)),\"C\"===e.type&&(b.push(e.x2),c.push(e.y2))}var f={xMin:Math.min.apply(null,b),yMin:Math.min.apply(null,c),xMax:Math.max.apply(null,b),yMax:Math.max.apply(null,c),leftSideBearing:0};return f.rightSideBearing=this.advanceWidth-f.leftSideBearing-(f.xMax-f.xMin),f},e.prototype.draw=function(a,b,c,d){this.getPath(b,c,d).draw(a)},e.prototype.drawPoints=function(a,b,c,d){function e(b,c,d,e){var f=2*Math.PI;a.beginPath();for(var g=0;g<b.length;g+=1)a.moveTo(c+b[g].x*e,d+b[g].y*e),a.arc(c+b[g].x*e,d+b[g].y*e,2,0,f,!1);a.closePath(),a.fill()}b=void 0!==b?b:0,c=void 0!==c?c:0,d=void 0!==d?d:24;for(var f=1/this.path.unitsPerEm*d,g=[],h=[],i=this.path,j=0;j<i.commands.length;j+=1){var k=i.commands[j];void 0!==k.x&&g.push({x:k.x,y:-k.y}),void 0!==k.x1&&h.push({x:k.x1,y:-k.y1}),void 0!==k.x2&&h.push({x:k.x2,y:-k.y2})}a.fillStyle=\"blue\",e(g,b,c,f),a.fillStyle=\"red\",e(h,b,c,f)},e.prototype.drawMetrics=function(a,b,c,d){var e;b=void 0!==b?b:0,c=void 0!==c?c:0,d=void 0!==d?d:24,e=1/this.path.unitsPerEm*d,a.lineWidth=1,a.strokeStyle=\"black\",g.line(a,b,-1e4,b,1e4),g.line(a,-1e4,c,1e4,c);var f=this.xMin||0,h=this.yMin||0,i=this.xMax||0,j=this.yMax||0,k=this.advanceWidth||0;a.strokeStyle=\"blue\",g.line(a,b+f*e,-1e4,b+f*e,1e4),g.line(a,b+i*e,-1e4,b+i*e,1e4),g.line(a,-1e4,c+-h*e,1e4,c+-h*e),g.line(a,-1e4,c+-j*e,1e4,c+-j*e),a.strokeStyle=\"green\",g.line(a,b+k*e,-1e4,b+k*e,1e4)},c.Glyph=e},{\"./check\":2,\"./draw\":3,\"./path\":10}],7:[function(a,b,c){\"use strict\";function d(a,b){if(this.font=a,this.glyphs={},Array.isArray(b))for(var c=0;c<b.length;c++)this.glyphs[c]=b[c];this.length=b&&b.length||0}function e(a,b){return new h.Glyph({index:b,font:a})}function f(a,b,c,d,e,f){return function(){var g=new h.Glyph({index:b,font:a});return g.path=function(){c(g,d,e);var b=f(a.glyphs,g);return b.unitsPerEm=a.unitsPerEm,b},g}}function g(a,b,c,d){return function(){var e=new h.Glyph({index:b,font:a});return e.path=function(){var b=c(a,e,d);return b.unitsPerEm=a.unitsPerEm,b},e}}var h=a(\"./glyph\");d.prototype.get=function(a){return\"function\"==typeof this.glyphs[a]&&(this.glyphs[a]=this.glyphs[a]()),this.glyphs[a]},d.prototype.push=function(a,b){this.glyphs[a]=b,this.length++},c.GlyphSet=d,c.glyphLoader=e,c.ttfGlyphLoader=f,c.cffGlyphLoader=g},{\"./glyph\":6}],8:[function(a,b,c){\"use strict\";function d(a){for(var b=new ArrayBuffer(a.length),c=new Uint8Array(b),d=0;d<a.length;d+=1)c[d]=a[d];return b}function e(b,c){var e=a(\"fs\");e.readFile(b,function(a,b){return a?c(a.message):void c(null,d(b))})}function f(a,b){var c=new XMLHttpRequest;c.open(\"get\",a,!0),c.responseType=\"arraybuffer\",c.onload=function(){return 200!==c.status?b(\"Font could not be loaded: \"+c.statusText):b(null,c.response)},c.send()}function g(a){var b,c,d,e,f,g,h,i,l,n,D=new k.Font,E=new DataView(a,0),F=m.getFixed(E,0);if(1===F)D.outlinesFormat=\"truetype\";else{if(F=m.getTag(E,0),\"OTTO\"!==F)throw new Error(\"Unsupported OpenType version \"+F);D.outlinesFormat=\"cff\"}for(var G=m.getUShort(E,4),H=12,I=0;G>I;I+=1){var J=m.getTag(E,H),K=m.getULong(E,H+8);switch(J){case\"cmap\":D.tables.cmap=o.parse(E,K),D.encoding=new j.CmapEncoding(D.tables.cmap);break;case\"fvar\":e=K;break;case\"head\":D.tables.head=t.parse(E,K),D.unitsPerEm=D.tables.head.unitsPerEm,b=D.tables.head.indexToLocFormat;break;case\"hhea\":D.tables.hhea=u.parse(E,K),D.ascender=D.tables.hhea.ascender,D.descender=D.tables.hhea.descender,D.numberOfHMetrics=D.tables.hhea.numberOfHMetrics;break;case\"hmtx\":h=K;break;case\"ltag\":c=x.parse(E,K);break;case\"maxp\":D.tables.maxp=z.parse(E,K),D.numGlyphs=D.tables.maxp.numGlyphs;break;case\"name\":n=K;break;case\"OS/2\":D.tables.os2=B.parse(E,K);break;case\"post\":D.tables.post=C.parse(E,K),D.glyphNames=new j.GlyphNames(D.tables.post);break;case\"glyf\":f=K;break;case\"loca\":l=K;break;case\"CFF \":d=K;break;case\"kern\":i=K;break;case\"GPOS\":g=K}H+=16}if(D.tables.name=A.parse(E,n,c),D.names=D.tables.name,f&&l){var L=0===b,M=y.parse(E,l,D.numGlyphs,L);D.glyphs=r.parse(E,f,M,D),v.parse(E,h,D.numberOfHMetrics,D.numGlyphs,D.glyphs),j.addGlyphNames(D)}else{if(!d)throw new Error(\"Font doesn't contain TrueType or CFF outlines.\");p.parse(E,d,D),j.addGlyphNames(D)}return i?D.kerningPairs=w.parse(E,i):D.kerningPairs={},g&&s.parse(E,g,D),e&&(D.tables.fvar=q.parse(E,e,D.names)),D}function h(a,b){var c=\"undefined\"==typeof window,d=c?e:f;d(a,function(a,c){if(a)return b(a);var d=g(c);return b(null,d)})}function i(b){var c=a(\"fs\"),e=c.readFileSync(b);return g(d(e))}var j=a(\"./encoding\"),k=a(\"./font\"),l=a(\"./glyph\"),m=a(\"./parse\"),n=a(\"./path\"),o=a(\"./tables/cmap\"),p=a(\"./tables/cff\"),q=a(\"./tables/fvar\"),r=a(\"./tables/glyf\"),s=a(\"./tables/gpos\"),t=a(\"./tables/head\"),u=a(\"./tables/hhea\"),v=a(\"./tables/hmtx\"),w=a(\"./tables/kern\"),x=a(\"./tables/ltag\"),y=a(\"./tables/loca\"),z=a(\"./tables/maxp\"),A=a(\"./tables/name\"),B=a(\"./tables/os2\"),C=a(\"./tables/post\");c._parse=m,c.Font=k.Font,c.Glyph=l.Glyph,c.Path=n.Path,c.parse=g,c.load=h,c.loadSync=i},{\"./encoding\":4,\"./font\":5,\"./glyph\":6,\"./parse\":9,\"./path\":10,\"./tables/cff\":12,\"./tables/cmap\":13,\"./tables/fvar\":14,\"./tables/glyf\":15,\"./tables/gpos\":16,\"./tables/head\":17,\"./tables/hhea\":18,\"./tables/hmtx\":19,\"./tables/kern\":20,\"./tables/loca\":21,\"./tables/ltag\":22,\"./tables/maxp\":23,\"./tables/name\":24,\"./tables/os2\":25,\"./tables/post\":26,fs:1}],9:[function(a,b,c){\"use strict\";function d(a,b){this.data=a,this.offset=b,this.relativeOffset=0}c.getByte=function(a,b){return a.getUint8(b)},c.getCard8=c.getByte,c.getUShort=function(a,b){return a.getUint16(b,!1)},c.getCard16=c.getUShort,c.getShort=function(a,b){return a.getInt16(b,!1)},c.getULong=function(a,b){return a.getUint32(b,!1)},c.getFixed=function(a,b){var c=a.getInt16(b,!1),d=a.getUint16(b+2,!1);return c+d/65535},c.getTag=function(a,b){for(var c=\"\",d=b;b+4>d;d+=1)c+=String.fromCharCode(a.getInt8(d));return c},c.getOffset=function(a,b,c){for(var d=0,e=0;c>e;e+=1)d<<=8,d+=a.getUint8(b+e);return d},c.getBytes=function(a,b,c){for(var d=[],e=b;c>e;e+=1)d.push(a.getUint8(e));return d},c.bytesToString=function(a){for(var b=\"\",c=0;c<a.length;c+=1)b+=String.fromCharCode(a[c]);return b};var e={\"byte\":1,uShort:2,\"short\":2,uLong:4,fixed:4,longDateTime:8,tag:4};d.prototype.parseByte=function(){var a=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a},d.prototype.parseChar=function(){var a=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a},d.prototype.parseCard8=d.prototype.parseByte,d.prototype.parseUShort=function(){var a=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a},d.prototype.parseCard16=d.prototype.parseUShort,d.prototype.parseSID=d.prototype.parseUShort,d.prototype.parseOffset16=d.prototype.parseUShort,d.prototype.parseShort=function(){var a=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a},d.prototype.parseF2Dot14=function(){var a=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,a},d.prototype.parseULong=function(){var a=c.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a},d.prototype.parseFixed=function(){var a=c.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a},d.prototype.parseOffset16List=d.prototype.parseUShortList=function(a){for(var b=new Array(a),d=this.data,e=this.offset+this.relativeOffset,f=0;a>f;f++)b[f]=c.getUShort(d,e),e+=2;return this.relativeOffset+=2*a,b},d.prototype.parseString=function(a){var b=this.data,c=this.offset+this.relativeOffset,d=\"\";this.relativeOffset+=a;for(var e=0;a>e;e++)d+=String.fromCharCode(b.getUint8(c+e));return d},d.prototype.parseTag=function(){return this.parseString(4)},d.prototype.parseLongDateTime=function(){var a=c.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,a},d.prototype.parseFixed=function(){var a=c.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a/65536},d.prototype.parseVersion=function(){var a=c.getUShort(this.data,this.offset+this.relativeOffset),b=c.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,a+b/4096/10},d.prototype.skip=function(a,b){void 0===b&&(b=1),this.relativeOffset+=e[a]*b},c.Parser=d},{}],10:[function(a,b,c){\"use strict\";function d(){this.commands=[],this.fill=\"black\",this.stroke=null,this.strokeWidth=1}d.prototype.moveTo=function(a,b){this.commands.push({type:\"M\",x:a,y:b})},d.prototype.lineTo=function(a,b){this.commands.push({type:\"L\",x:a,y:b})},d.prototype.curveTo=d.prototype.bezierCurveTo=function(a,b,c,d,e,f){this.commands.push({type:\"C\",x1:a,y1:b,x2:c,y2:d,x:e,y:f})},d.prototype.quadTo=d.prototype.quadraticCurveTo=function(a,b,c,d){this.commands.push({type:\"Q\",x1:a,y1:b,x:c,y:d})},d.prototype.close=d.prototype.closePath=function(){this.commands.push({type:\"Z\"})},d.prototype.extend=function(a){a.commands&&(a=a.commands),Array.prototype.push.apply(this.commands,a)},d.prototype.draw=function(a){a.beginPath();for(var b=0;b<this.commands.length;b+=1){var c=this.commands[b];\"M\"===c.type?a.moveTo(c.x,c.y):\"L\"===c.type?a.lineTo(c.x,c.y):\"C\"===c.type?a.bezierCurveTo(c.x1,c.y1,c.x2,c.y2,c.x,c.y):\"Q\"===c.type?a.quadraticCurveTo(c.x1,c.y1,c.x,c.y):\"Z\"===c.type&&a.closePath()}this.fill&&(a.fillStyle=this.fill,a.fill()),this.stroke&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeWidth,a.stroke())},d.prototype.toPathData=function(a){function b(b){return Math.round(b)===b?\"\"+Math.round(b):b.toFixed(a)}function c(){for(var a=\"\",c=0;c<arguments.length;c+=1){var d=arguments[c];d>=0&&c>0&&(a+=\" \"),a+=b(d)}return a}a=void 0!==a?a:2;for(var d=\"\",e=0;e<this.commands.length;e+=1){var f=this.commands[e];\"M\"===f.type?d+=\"M\"+c(f.x,f.y):\"L\"===f.type?d+=\"L\"+c(f.x,f.y):\"C\"===f.type?d+=\"C\"+c(f.x1,f.y1,f.x2,f.y2,f.x,f.y):\"Q\"===f.type?d+=\"Q\"+c(f.x1,f.y1,f.x,f.y):\"Z\"===f.type&&(d+=\"Z\")}return d},d.prototype.toSVG=function(a){var b='<path d=\"';return b+=this.toPathData(a),b+='\"',this.fill&\"black\"!==this.fill&&(b+=null===this.fill?' fill=\"none\"':' fill=\"'+this.fill+'\"'),this.stroke&&(b+=' stroke=\"'+this.stroke+'\" stroke-width=\"'+this.strokeWidth+'\"'),b+=\"/>\"},c.Path=d},{}],11:[function(a,b,c){\"use strict\";function d(a,b,c){var d;for(d=0;d<b.length;d+=1){var e=b[d];this[e.name]=e.value}if(this.tableName=a,this.fields=b,c){var f=Object.keys(c);for(d=0;d<f.length;d+=1){var g=f[d],h=c[g];void 0!==this[g]&&(this[g]=h)}}}var e=a(\"./check\"),f=a(\"./types\").encode,g=a(\"./types\").sizeOf;d.prototype.sizeOf=function(){for(var a=0,b=0;b<this.fields.length;b+=1){var c=this.fields[b],d=this[c.name];if(void 0===d&&(d=c.value),\"function\"==typeof d.sizeOf)a+=d.sizeOf();else{var f=g[c.type];e.assert(\"function\"==typeof f,\"Could not find sizeOf function for field\"+c.name),a+=f(d)}}return a},d.prototype.encode=function(){return f.TABLE(this)},c.Table=d},{\"./check\":2,\"./types\":28}],12:[function(a,b,c){\"use strict\";function d(a,b){if(a===b)return!0;if(Array.isArray(a)&&Array.isArray(b)){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c+=1)if(!d(a[c],b[c]))return!1;return!0}return!1}function e(a,b,c){var d,e,f,g=[],h=[],i=J.getCard16(a,b);if(0!==i){var j=J.getByte(a,b+2);e=b+(i+1)*j+2;var k=b+3;for(d=0;i+1>d;d+=1)g.push(J.getOffset(a,k,j)),k+=j;f=e+g[i]}else f=b+2;for(d=0;d<g.length-1;d+=1){var l=J.getBytes(a,e+g[d],e+g[d+1]);c&&(l=c(l)),h.push(l)}return{objects:h,startOffset:b,endOffset:f}}function f(a){for(var b=\"\",c=15,d=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\".\",\"E\",\"E-\",null,\"-\"];;){var e=a.parseByte(),f=e>>4,g=15&e;if(f===c)break;if(b+=d[f],g===c)break;b+=d[g]}return parseFloat(b)}function g(a,b){var c,d,e,g;if(28===b)return c=a.parseByte(),d=a.parseByte(),c<<8|d;if(29===b)return c=a.parseByte(),d=a.parseByte(),e=a.parseByte(),g=a.parseByte(),c<<24|d<<16|e<<8|g;if(30===b)return f(a);if(b>=32&&246>=b)return b-139;if(b>=247&&250>=b)return c=a.parseByte(),256*(b-247)+c+108;if(b>=251&&254>=b)return c=a.parseByte(),256*-(b-251)-c-108;throw new Error(\"Invalid b0 \"+b)}function h(a){for(var b={},c=0;c<a.length;c+=1){var d,e=a[c][0],f=a[c][1];if(d=1===f.length?f[0]:f,b.hasOwnProperty(e))throw new Error(\"Object \"+b+\" already has key \"+e);b[e]=d}return b}function i(a,b,c){b=void 0!==b?b:0;var d=new J.Parser(a,b),e=[],f=[];for(c=void 0!==c?c:a.length;d.relativeOffset<c;){var i=d.parseByte();21>=i?(12===i&&(i=1200+d.parseByte()),e.push([i,f]),f=[]):f.push(g(d,i))}return h(e)}function j(a,b){return b=390>=b?H.cffStandardStrings[b]:a[b-391]}function k(a,b,c){for(var d={},e=0;e<b.length;e+=1){var f=b[e],g=a[f.op];void 0===g&&(g=void 0!==f.value?f.value:null),\"SID\"===f.type&&(g=j(c,g)),d[f.name]=g}return d}function l(a,b){var c={};return c.formatMajor=J.getCard8(a,b),c.formatMinor=J.getCard8(a,b+1),c.size=J.getCard8(a,b+2),c.offsetSize=J.getCard8(a,b+3),c.startOffset=b,c.endOffset=b+4,c}function m(a,b){var c=i(a,0,a.byteLength);return k(c,M,b)}function n(a,b,c,d){var e=i(a,b,c);return k(e,N,d)}function o(a,b,c,d){var e,f,g,h=new J.Parser(a,b);c-=1;var i=[\".notdef\"],k=h.parseCard8();if(0===k)for(e=0;c>e;e+=1)f=h.parseSID(),i.push(j(d,f));else if(1===k)for(;i.length<=c;)for(f=h.parseSID(),g=h.parseCard8(),e=0;g>=e;e+=1)i.push(j(d,f)),f+=1;else{if(2!==k)throw new Error(\"Unknown charset format \"+k);for(;i.length<=c;)for(f=h.parseSID(),g=h.parseCard16(),e=0;g>=e;e+=1)i.push(j(d,f)),f+=1}return i}function p(a,b,c){var d,e,f={},g=new J.Parser(a,b),h=g.parseCard8();if(0===h){var i=g.parseCard8();for(d=0;i>d;d+=1)e=g.parseCard8(),\nf[e]=d}else{if(1!==h)throw new Error(\"Unknown encoding format \"+h);var j=g.parseCard8();for(e=1,d=0;j>d;d+=1)for(var k=g.parseCard8(),l=g.parseCard8(),m=k;k+l>=m;m+=1)f[m]=e,e+=1}return new H.CffEncoding(f,c)}function q(a,b,c){function d(a,b){p&&k.closePath(),k.moveTo(a,b),p=!0}function e(){var b;b=l.length%2!==0,b&&!n&&(o=l.shift()+a.nominalWidthX),m+=l.length>>1,l.length=0,n=!0}function f(c){for(var s,t,u,v,w,x,y,z,A,B,C,D,E=0;E<c.length;){var F=c[E];switch(E+=1,F){case 1:e();break;case 3:e();break;case 4:l.length>1&&!n&&(o=l.shift()+a.nominalWidthX,n=!0),r+=l.pop(),d(q,r);break;case 5:for(;l.length>0;)q+=l.shift(),r+=l.shift(),k.lineTo(q,r);break;case 6:for(;l.length>0&&(q+=l.shift(),k.lineTo(q,r),0!==l.length);)r+=l.shift(),k.lineTo(q,r);break;case 7:for(;l.length>0&&(r+=l.shift(),k.lineTo(q,r),0!==l.length);)q+=l.shift(),k.lineTo(q,r);break;case 8:for(;l.length>0;)g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j+l.shift(),k.curveTo(g,h,i,j,q,r);break;case 10:w=l.pop()+a.subrsBias,x=a.subrs[w],x&&f(x);break;case 11:return;case 12:switch(F=c[E],E+=1,F){case 35:g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),y=i+l.shift(),z=j+l.shift(),A=y+l.shift(),B=z+l.shift(),C=A+l.shift(),D=B+l.shift(),q=C+l.shift(),r=D+l.shift(),l.shift(),k.curveTo(g,h,i,j,y,z),k.curveTo(A,B,C,D,q,r);break;case 34:g=q+l.shift(),h=r,i=g+l.shift(),j=h+l.shift(),y=i+l.shift(),z=j,A=y+l.shift(),B=j,C=A+l.shift(),D=r,q=C+l.shift(),k.curveTo(g,h,i,j,y,z),k.curveTo(A,B,C,D,q,r);break;case 36:g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),y=i+l.shift(),z=j,A=y+l.shift(),B=j,C=A+l.shift(),D=B+l.shift(),q=C+l.shift(),k.curveTo(g,h,i,j,y,z),k.curveTo(A,B,C,D,q,r);break;case 37:g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),y=i+l.shift(),z=j+l.shift(),A=y+l.shift(),B=z+l.shift(),C=A+l.shift(),D=B+l.shift(),Math.abs(C-q)>Math.abs(D-r)?q=C+l.shift():r=D+l.shift(),k.curveTo(g,h,i,j,y,z),k.curveTo(A,B,C,D,q,r);break;default:console.log(\"Glyph \"+b.index+\": unknown operator 1200\"+F),l.length=0}break;case 14:l.length>0&&!n&&(o=l.shift()+a.nominalWidthX,n=!0),p&&(k.closePath(),p=!1);break;case 18:e();break;case 19:case 20:e(),E+=m+7>>3;break;case 21:l.length>2&&!n&&(o=l.shift()+a.nominalWidthX,n=!0),r+=l.pop(),q+=l.pop(),d(q,r);break;case 22:l.length>1&&!n&&(o=l.shift()+a.nominalWidthX,n=!0),q+=l.pop(),d(q,r);break;case 23:e();break;case 24:for(;l.length>2;)g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j+l.shift(),k.curveTo(g,h,i,j,q,r);q+=l.shift(),r+=l.shift(),k.lineTo(q,r);break;case 25:for(;l.length>6;)q+=l.shift(),r+=l.shift(),k.lineTo(q,r);g=q+l.shift(),h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j+l.shift(),k.curveTo(g,h,i,j,q,r);break;case 26:for(l.length%2&&(q+=l.shift());l.length>0;)g=q,h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i,r=j+l.shift(),k.curveTo(g,h,i,j,q,r);break;case 27:for(l.length%2&&(r+=l.shift());l.length>0;)g=q+l.shift(),h=r,i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j,k.curveTo(g,h,i,j,q,r);break;case 28:s=c[E],t=c[E+1],l.push((s<<24|t<<16)>>16),E+=2;break;case 29:w=l.pop()+a.gsubrsBias,x=a.gsubrs[w],x&&f(x);break;case 30:for(;l.length>0&&(g=q,h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j+(1===l.length?l.shift():0),k.curveTo(g,h,i,j,q,r),0!==l.length);)g=q+l.shift(),h=r,i=g+l.shift(),j=h+l.shift(),r=j+l.shift(),q=i+(1===l.length?l.shift():0),k.curveTo(g,h,i,j,q,r);break;case 31:for(;l.length>0&&(g=q+l.shift(),h=r,i=g+l.shift(),j=h+l.shift(),r=j+l.shift(),q=i+(1===l.length?l.shift():0),k.curveTo(g,h,i,j,q,r),0!==l.length);)g=q,h=r+l.shift(),i=g+l.shift(),j=h+l.shift(),q=i+l.shift(),r=j+(1===l.length?l.shift():0),k.curveTo(g,h,i,j,q,r);break;default:32>F?console.log(\"Glyph \"+b.index+\": unknown operator \"+F):247>F?l.push(F-139):251>F?(s=c[E],E+=1,l.push(256*(F-247)+s+108)):255>F?(s=c[E],E+=1,l.push(256*-(F-251)-s-108)):(s=c[E],t=c[E+1],u=c[E+2],v=c[E+3],E+=4,l.push((s<<24|t<<16|u<<8|v)/65536))}}}var g,h,i,j,k=new K.Path,l=[],m=0,n=!1,o=a.defaultWidthX,p=!1,q=0,r=0;return f(c),b.advanceWidth=o,k}function r(a){var b;return b=a.length<1240?107:a.length<33900?1131:32768}function s(a,b,c){c.tables.cff={};var d=l(a,b),f=e(a,d.endOffset,J.bytesToString),g=e(a,f.endOffset),h=e(a,g.endOffset,J.bytesToString),i=e(a,h.endOffset);c.gsubrs=i.objects,c.gsubrsBias=r(c.gsubrs);var j=new DataView(new Uint8Array(g.objects[0]).buffer),k=m(j,h.objects);c.tables.cff.topDict=k;var s=b+k[\"private\"][1],t=n(a,s,k[\"private\"][0],h.objects);if(c.defaultWidthX=t.defaultWidthX,c.nominalWidthX=t.nominalWidthX,0!==t.subrs){var u=s+t.subrs,v=e(a,u);c.subrs=v.objects,c.subrsBias=r(c.subrs)}else c.subrs=[],c.subrsBias=0;var w=e(a,b+k.charStrings);c.nGlyphs=w.objects.length;var x=o(a,b+k.charset,c.nGlyphs,h.objects);0===k.encoding?c.cffEncoding=new H.CffEncoding(H.cffStandardEncoding,x):1===k.encoding?c.cffEncoding=new H.CffEncoding(H.cffExpertEncoding,x):c.cffEncoding=p(a,b+k.encoding,x),c.encoding=c.encoding||c.cffEncoding,c.glyphs=new I.GlyphSet(c);for(var y=0;y<c.nGlyphs;y+=1){var z=w.objects[y];c.glyphs.push(y,I.cffGlyphLoader(c,y,q,z))}}function t(a,b){var c,d=H.cffStandardStrings.indexOf(a);return d>=0&&(c=d),d=b.indexOf(a),d>=0?c=d+H.cffStandardStrings.length:(c=H.cffStandardStrings.length+b.length,b.push(a)),c}function u(){return new L.Table(\"Header\",[{name:\"major\",type:\"Card8\",value:1},{name:\"minor\",type:\"Card8\",value:0},{name:\"hdrSize\",type:\"Card8\",value:4},{name:\"major\",type:\"Card8\",value:1}])}function v(a){var b=new L.Table(\"Name INDEX\",[{name:\"names\",type:\"INDEX\",value:[]}]);b.names=[];for(var c=0;c<a.length;c+=1)b.names.push({name:\"name_\"+c,type:\"NAME\",value:a[c]});return b}function w(a,b,c){for(var e={},f=0;f<a.length;f+=1){var g=a[f],h=b[g.name];void 0===h||d(h,g.value)||(\"SID\"===g.type&&(h=t(h,c)),e[g.op]={name:g.name,type:g.type,value:h})}return e}function x(a,b){var c=new L.Table(\"Top DICT\",[{name:\"dict\",type:\"DICT\",value:{}}]);return c.dict=w(M,a,b),c}function y(a){var b=new L.Table(\"Top DICT INDEX\",[{name:\"topDicts\",type:\"INDEX\",value:[]}]);return b.topDicts=[{name:\"topDict_0\",type:\"TABLE\",value:a}],b}function z(a){var b=new L.Table(\"String INDEX\",[{name:\"strings\",type:\"INDEX\",value:[]}]);b.strings=[];for(var c=0;c<a.length;c+=1)b.strings.push({name:\"string_\"+c,type:\"STRING\",value:a[c]});return b}function A(){return new L.Table(\"Global Subr INDEX\",[{name:\"subrs\",type:\"INDEX\",value:[]}])}function B(a,b){for(var c=new L.Table(\"Charsets\",[{name:\"format\",type:\"Card8\",value:0}]),d=0;d<a.length;d+=1){var e=a[d],f=t(e,b);c.fields.push({name:\"glyph_\"+d,type:\"SID\",value:f})}return c}function C(a){var b=[],c=a.path;b.push({name:\"width\",type:\"NUMBER\",value:a.advanceWidth});for(var d=0,e=0,f=0;f<c.commands.length;f+=1){var g,h,i=c.commands[f];if(\"Q\"===i.type){var j=1/3,k=2/3;i={type:\"C\",x:i.x,y:i.y,x1:j*d+k*i.x1,y1:j*e+k*i.y1,x2:j*i.x+k*i.x1,y2:j*i.y+k*i.y1}}if(\"M\"===i.type)g=Math.round(i.x-d),h=Math.round(i.y-e),b.push({name:\"dx\",type:\"NUMBER\",value:g}),b.push({name:\"dy\",type:\"NUMBER\",value:h}),b.push({name:\"rmoveto\",type:\"OP\",value:21}),d=Math.round(i.x),e=Math.round(i.y);else if(\"L\"===i.type)g=Math.round(i.x-d),h=Math.round(i.y-e),b.push({name:\"dx\",type:\"NUMBER\",value:g}),b.push({name:\"dy\",type:\"NUMBER\",value:h}),b.push({name:\"rlineto\",type:\"OP\",value:5}),d=Math.round(i.x),e=Math.round(i.y);else if(\"C\"===i.type){var l=Math.round(i.x1-d),m=Math.round(i.y1-e),n=Math.round(i.x2-i.x1),o=Math.round(i.y2-i.y1);g=Math.round(i.x-i.x2),h=Math.round(i.y-i.y2),b.push({name:\"dx1\",type:\"NUMBER\",value:l}),b.push({name:\"dy1\",type:\"NUMBER\",value:m}),b.push({name:\"dx2\",type:\"NUMBER\",value:n}),b.push({name:\"dy2\",type:\"NUMBER\",value:o}),b.push({name:\"dx\",type:\"NUMBER\",value:g}),b.push({name:\"dy\",type:\"NUMBER\",value:h}),b.push({name:\"rrcurveto\",type:\"OP\",value:8}),d=Math.round(i.x),e=Math.round(i.y)}}return b.push({name:\"endchar\",type:\"OP\",value:14}),b}function D(a){for(var b=new L.Table(\"CharStrings INDEX\",[{name:\"charStrings\",type:\"INDEX\",value:[]}]),c=0;c<a.length;c+=1){var d=a.get(c),e=C(d);b.charStrings.push({name:d.name,type:\"CHARSTRING\",value:e})}return b}function E(a,b){var c=new L.Table(\"Private DICT\",[{name:\"dict\",type:\"DICT\",value:{}}]);return c.dict=w(N,a,b),c}function F(a){var b=new L.Table(\"Private DICT INDEX\",[{name:\"privateDicts\",type:\"INDEX\",value:[]}]);return b.privateDicts=[{name:\"privateDict_0\",type:\"TABLE\",value:a}],b}function G(a,b){for(var c,d=new L.Table(\"CFF \",[{name:\"header\",type:\"TABLE\"},{name:\"nameIndex\",type:\"TABLE\"},{name:\"topDictIndex\",type:\"TABLE\"},{name:\"stringIndex\",type:\"TABLE\"},{name:\"globalSubrIndex\",type:\"TABLE\"},{name:\"charsets\",type:\"TABLE\"},{name:\"charStringsIndex\",type:\"TABLE\"},{name:\"privateDictIndex\",type:\"TABLE\"}]),e=1/b.unitsPerEm,f={version:b.version,fullName:b.fullName,familyName:b.familyName,weight:b.weightName,fontMatrix:[e,0,0,e,0,0],charset:999,encoding:0,charStrings:999,\"private\":[0,999]},g={},h=[],i=1;i<a.length;i+=1)c=a.get(i),h.push(c.name);var j=[];d.header=u(),d.nameIndex=v([b.postScriptName]);var k=x(f,j);d.topDictIndex=y(k),d.globalSubrIndex=A(),d.charsets=B(h,j),d.charStringsIndex=D(a);var l=E(g,j);d.privateDictIndex=F(l),d.stringIndex=z(j);var m=d.header.sizeOf()+d.nameIndex.sizeOf()+d.topDictIndex.sizeOf()+d.stringIndex.sizeOf()+d.globalSubrIndex.sizeOf();return f.charset=m,f.encoding=0,f.charStrings=f.charset+d.charsets.sizeOf(),f[\"private\"][1]=f.charStrings+d.charStringsIndex.sizeOf(),k=x(f,j),d.topDictIndex=y(k),d}var H=a(\"../encoding\"),I=a(\"../glyphset\"),J=a(\"../parse\"),K=a(\"../path\"),L=a(\"../table\"),M=[{name:\"version\",op:0,type:\"SID\"},{name:\"notice\",op:1,type:\"SID\"},{name:\"copyright\",op:1200,type:\"SID\"},{name:\"fullName\",op:2,type:\"SID\"},{name:\"familyName\",op:3,type:\"SID\"},{name:\"weight\",op:4,type:\"SID\"},{name:\"isFixedPitch\",op:1201,type:\"number\",value:0},{name:\"italicAngle\",op:1202,type:\"number\",value:0},{name:\"underlinePosition\",op:1203,type:\"number\",value:-100},{name:\"underlineThickness\",op:1204,type:\"number\",value:50},{name:\"paintType\",op:1205,type:\"number\",value:0},{name:\"charstringType\",op:1206,type:\"number\",value:2},{name:\"fontMatrix\",op:1207,type:[\"real\",\"real\",\"real\",\"real\",\"real\",\"real\"],value:[.001,0,0,.001,0,0]},{name:\"uniqueId\",op:13,type:\"number\"},{name:\"fontBBox\",op:5,type:[\"number\",\"number\",\"number\",\"number\"],value:[0,0,0,0]},{name:\"strokeWidth\",op:1208,type:\"number\",value:0},{name:\"xuid\",op:14,type:[],value:null},{name:\"charset\",op:15,type:\"offset\",value:0},{name:\"encoding\",op:16,type:\"offset\",value:0},{name:\"charStrings\",op:17,type:\"offset\",value:0},{name:\"private\",op:18,type:[\"number\",\"offset\"],value:[0,0]}],N=[{name:\"subrs\",op:19,type:\"offset\",value:0},{name:\"defaultWidthX\",op:20,type:\"number\",value:0},{name:\"nominalWidthX\",op:21,type:\"number\",value:0}];c.parse=s,c.make=G},{\"../encoding\":4,\"../glyphset\":7,\"../parse\":9,\"../path\":10,\"../table\":11}],13:[function(a,b,c){\"use strict\";function d(a,b){var c,d={};d.version=i.getUShort(a,b),h.argument(0===d.version,\"cmap table version should be 0.\"),d.numTables=i.getUShort(a,b+2);var e=-1;for(c=0;c<d.numTables;c+=1){var f=i.getUShort(a,b+4+8*c),g=i.getUShort(a,b+4+8*c+2);if(3===f&&(1===g||0===g)){e=i.getULong(a,b+4+8*c+4);break}}if(-1===e)return null;var j=new i.Parser(a,b+e);d.format=j.parseUShort(),h.argument(4===d.format,\"Only format 4 cmap tables are supported.\"),d.length=j.parseUShort(),d.language=j.parseUShort();var k;d.segCount=k=j.parseUShort()>>1,j.skip(\"uShort\",3),d.glyphIndexMap={};var l=new i.Parser(a,b+e+14),m=new i.Parser(a,b+e+16+2*k),n=new i.Parser(a,b+e+16+4*k),o=new i.Parser(a,b+e+16+6*k),p=b+e+16+8*k;for(c=0;k-1>c;c+=1)for(var q,r=l.parseUShort(),s=m.parseUShort(),t=n.parseShort(),u=o.parseUShort(),v=s;r>=v;v+=1)0!==u?(p=o.offset+o.relativeOffset-2,p+=u,p+=2*(v-s),q=i.getUShort(a,p),0!==q&&(q=q+t&65535)):q=v+t&65535,d.glyphIndexMap[v]=q;return d}function e(a,b,c){a.segments.push({end:b,start:b,delta:-(b-c),offset:0})}function f(a){a.segments.push({end:65535,start:65535,delta:1,offset:0})}function g(a){var b,c=new j.Table(\"cmap\",[{name:\"version\",type:\"USHORT\",value:0},{name:\"numTables\",type:\"USHORT\",value:1},{name:\"platformID\",type:\"USHORT\",value:3},{name:\"encodingID\",type:\"USHORT\",value:1},{name:\"offset\",type:\"ULONG\",value:12},{name:\"format\",type:\"USHORT\",value:4},{name:\"length\",type:\"USHORT\",value:0},{name:\"language\",type:\"USHORT\",value:0},{name:\"segCountX2\",type:\"USHORT\",value:0},{name:\"searchRange\",type:\"USHORT\",value:0},{name:\"entrySelector\",type:\"USHORT\",value:0},{name:\"rangeShift\",type:\"USHORT\",value:0}]);for(c.segments=[],b=0;b<a.length;b+=1){for(var d=a.get(b),g=0;g<d.unicodes.length;g+=1)e(c,d.unicodes[g],b);c.segments=c.segments.sort(function(a,b){return a.start-b.start})}f(c);var h;h=c.segments.length,c.segCountX2=2*h,c.searchRange=2*Math.pow(2,Math.floor(Math.log(h)/Math.log(2))),c.entrySelector=Math.log(c.searchRange/2)/Math.log(2),c.rangeShift=c.segCountX2-c.searchRange;var i=[],k=[],l=[],m=[],n=[];for(b=0;h>b;b+=1){var o=c.segments[b];i=i.concat({name:\"end_\"+b,type:\"USHORT\",value:o.end}),k=k.concat({name:\"start_\"+b,type:\"USHORT\",value:o.start}),l=l.concat({name:\"idDelta_\"+b,type:\"SHORT\",value:o.delta}),m=m.concat({name:\"idRangeOffset_\"+b,type:\"USHORT\",value:o.offset}),void 0!==o.glyphId&&(n=n.concat({name:\"glyph_\"+b,type:\"USHORT\",value:o.glyphId}))}return c.fields=c.fields.concat(i),c.fields.push({name:\"reservedPad\",type:\"USHORT\",value:0}),c.fields=c.fields.concat(k),c.fields=c.fields.concat(l),c.fields=c.fields.concat(m),c.fields=c.fields.concat(n),c.length=14+2*i.length+2+2*k.length+2*l.length+2*m.length+2*n.length,c}var h=a(\"../check\"),i=a(\"../parse\"),j=a(\"../table\");c.parse=d,c.make=g},{\"../check\":2,\"../parse\":9,\"../table\":11}],14:[function(a,b,c){\"use strict\";function d(a,b){var c=JSON.stringify(a),d=256;for(var e in b){var f=parseInt(e);if(f&&!(256>f)){if(JSON.stringify(b[e])===c)return f;f>=d&&(d=f+1)}}return b[d]=a,d}function e(a,b){var c=d(a.name,b);return new m.Table(\"fvarAxis\",[{name:\"tag\",type:\"TAG\",value:a.tag},{name:\"minValue\",type:\"FIXED\",value:a.minValue<<16},{name:\"defaultValue\",type:\"FIXED\",value:a.defaultValue<<16},{name:\"maxValue\",type:\"FIXED\",value:a.maxValue<<16},{name:\"flags\",type:\"USHORT\",value:0},{name:\"nameID\",type:\"USHORT\",value:c}])}function f(a,b,c){var d={},e=new l.Parser(a,b);return d.tag=e.parseTag(),d.minValue=e.parseFixed(),d.defaultValue=e.parseFixed(),d.maxValue=e.parseFixed(),e.skip(\"uShort\",1),d.name=c[e.parseUShort()]||{},d}function g(a,b,c){for(var e=d(a.name,c),f=[{name:\"nameID\",type:\"USHORT\",value:e},{name:\"flags\",type:\"USHORT\",value:0}],g=0;g<b.length;++g){var h=b[g].tag;f.push({name:\"axis \"+h,type:\"FIXED\",value:a.coordinates[h]<<16})}return new m.Table(\"fvarInstance\",f)}function h(a,b,c,d){var e={},f=new l.Parser(a,b);e.name=d[f.parseUShort()]||{},f.skip(\"uShort\",1),e.coordinates={};for(var g=0;g<c.length;++g)e.coordinates[c[g].tag]=f.parseFixed();return e}function i(a,b){var c=new m.Table(\"fvar\",[{name:\"version\",type:\"ULONG\",value:65536},{name:\"offsetToData\",type:\"USHORT\",value:0},{name:\"countSizePairs\",type:\"USHORT\",value:2},{name:\"axisCount\",type:\"USHORT\",value:a.axes.length},{name:\"axisSize\",type:\"USHORT\",value:20},{name:\"instanceCount\",type:\"USHORT\",value:a.instances.length},{name:\"instanceSize\",type:\"USHORT\",value:4+4*a.axes.length}]);c.offsetToData=c.sizeOf();for(var d=0;d<a.axes.length;d++)c.fields.push({name:\"axis \"+d,type:\"TABLE\",value:e(a.axes[d],b)});for(var f=0;f<a.instances.length;f++)c.fields.push({name:\"instance \"+f,type:\"TABLE\",value:g(a.instances[f],a.axes,b)});return c}function j(a,b,c){var d=new l.Parser(a,b),e=d.parseULong();k.argument(65536===e,\"Unsupported fvar table version.\");var g=d.parseOffset16();d.skip(\"uShort\",1);for(var i=d.parseUShort(),j=d.parseUShort(),m=d.parseUShort(),n=d.parseUShort(),o=[],p=0;i>p;p++)o.push(f(a,b+g+p*j,c));for(var q=[],r=b+g+i*j,s=0;m>s;s++)q.push(h(a,r+s*n,o,c));return{axes:o,instances:q}}var k=a(\"../check\"),l=a(\"../parse\"),m=a(\"../table\");c.make=i,c.parse=j},{\"../check\":2,\"../parse\":9,\"../table\":11}],15:[function(a,b,c){\"use strict\";function d(a,b,c,d,e){var f;return(b&d)>0?(f=a.parseByte(),0===(b&e)&&(f=-f),f=c+f):f=(b&e)>0?c:c+a.parseShort(),f}function e(a,b,c){var e=new m.Parser(b,c);a.numberOfContours=e.parseShort(),a.xMin=e.parseShort(),a.yMin=e.parseShort(),a.xMax=e.parseShort(),a.yMax=e.parseShort();var f,g;if(a.numberOfContours>0){var h,i=a.endPointIndices=[];for(h=0;h<a.numberOfContours;h+=1)i.push(e.parseUShort());for(a.instructionLength=e.parseUShort(),a.instructions=[],h=0;h<a.instructionLength;h+=1)a.instructions.push(e.parseByte());var j=i[i.length-1]+1;for(f=[],h=0;j>h;h+=1)if(g=e.parseByte(),f.push(g),(8&g)>0)for(var l=e.parseByte(),n=0;l>n;n+=1)f.push(g),h+=1;if(k.argument(f.length===j,\"Bad flags.\"),i.length>0){var o,p=[];if(j>0){for(h=0;j>h;h+=1)g=f[h],o={},o.onCurve=!!(1&g),o.lastPointOfContour=i.indexOf(h)>=0,p.push(o);var q=0;for(h=0;j>h;h+=1)g=f[h],o=p[h],o.x=d(e,g,q,2,16),q=o.x;var r=0;for(h=0;j>h;h+=1)g=f[h],o=p[h],o.y=d(e,g,r,4,32),r=o.y}a.points=p}else a.points=[]}else if(0===a.numberOfContours)a.points=[];else{a.isComposite=!0,a.points=[],a.components=[];for(var s=!0;s;){f=e.parseUShort();var t={glyphIndex:e.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&f)>0?(t.dx=e.parseShort(),t.dy=e.parseShort()):(t.dx=e.parseChar(),t.dy=e.parseChar()),(8&f)>0?t.xScale=t.yScale=e.parseF2Dot14():(64&f)>0?(t.xScale=e.parseF2Dot14(),t.yScale=e.parseF2Dot14()):(128&f)>0&&(t.xScale=e.parseF2Dot14(),t.scale01=e.parseF2Dot14(),t.scale10=e.parseF2Dot14(),t.yScale=e.parseF2Dot14()),a.components.push(t),s=!!(32&f)}}}function f(a,b){for(var c=[],d=0;d<a.length;d+=1){var e=a[d],f={x:b.xScale*e.x+b.scale01*e.y+b.dx,y:b.scale10*e.x+b.yScale*e.y+b.dy,onCurve:e.onCurve,lastPointOfContour:e.lastPointOfContour};c.push(f)}return c}function g(a){for(var b=[],c=[],d=0;d<a.length;d+=1){var e=a[d];c.push(e),e.lastPointOfContour&&(b.push(c),c=[])}return k.argument(0===c.length,\"There are still points left in the current contour.\"),b}function h(a){var b=new n.Path;if(!a)return b;for(var c=g(a),d=0;d<c.length;d+=1){var e,f,h=c[d],i=h[0],j=h[h.length-1];i.onCurve?(e=null,f=!0):(i=j.onCurve?j:{x:(i.x+j.x)/2,y:(i.y+j.y)/2},e=i,f=!1),b.moveTo(i.x,i.y);for(var k=f?1:0;k<h.length;k+=1){var l=h[k],m=0===k?i:h[k-1];if(m.onCurve&&l.onCurve)b.lineTo(l.x,l.y);else if(m.onCurve&&!l.onCurve)e=l;else if(m.onCurve||l.onCurve){if(m.onCurve||!l.onCurve)throw new Error(\"Invalid state.\");b.quadraticCurveTo(e.x,e.y,l.x,l.y),e=null}else{var o={x:(m.x+l.x)/2,y:(m.y+l.y)/2};b.quadraticCurveTo(m.x,m.y,o.x,o.y),e=l}}i!==j&&(e?b.quadraticCurveTo(e.x,e.y,i.x,i.y):b.lineTo(i.x,i.y))}return b.closePath(),b}function i(a,b){if(b.isComposite)for(var c=0;c<b.components.length;c+=1){var d=b.components[c],e=a.get(d.glyphIndex);if(e.points){var g=f(e.points,d);b.points=b.points.concat(g)}}return h(b.points)}function j(a,b,c,d){var f,g=new l.GlyphSet(d);for(f=0;f<c.length-1;f+=1){var h=c[f],j=c[f+1];h!==j?g.push(f,l.ttfGlyphLoader(d,f,e,a,b+h,i)):g.push(f,l.glyphLoader(d,f))}return g}var k=a(\"../check\"),l=a(\"../glyphset\"),m=a(\"../parse\"),n=a(\"../path\");c.parse=j},{\"../check\":2,\"../glyphset\":7,\"../parse\":9,\"../path\":10}],16:[function(a,b,c){\"use strict\";function d(a,b){for(var c=new k.Parser(a,b),d=c.parseUShort(),e=[],f=0;d>f;f++)e[c.parseTag()]={offset:c.parseUShort()};return e}function e(a,b){var c=new k.Parser(a,b),d=c.parseUShort(),e=c.parseUShort();if(1===d)return c.parseUShortList(e);if(2===d){for(var f=[];e--;)for(var g=c.parseUShort(),h=c.parseUShort(),i=c.parseUShort(),j=g;h>=j;j++)f[i++]=j;return f}}function f(a,b){var c=new k.Parser(a,b),d=c.parseUShort();if(1===d){var e=c.parseUShort(),f=c.parseUShort(),g=c.parseUShortList(f);return function(a){return g[a-e]||0}}if(2===d){for(var h=c.parseUShort(),i=[],j=[],l=[],m=0;h>m;m++)i[m]=c.parseUShort(),j[m]=c.parseUShort(),l[m]=c.parseUShort();return function(a){for(var b=0,c=i.length-1;c>b;){var d=b+c+1>>1;a<i[d]?c=d-1:b=d}return i[b]<=a&&a<=j[b]?l[b]||0:0}}}function g(a,b){var c,d,g=new k.Parser(a,b),h=g.parseUShort(),i=g.parseUShort(),j=e(a,b+i),l=g.parseUShort(),m=g.parseUShort();if(4===l&&0===m){var n={};if(1===h){for(var o=g.parseUShort(),p=[],q=g.parseOffset16List(o),r=0;o>r;r++){var s=q[r],t=n[s];if(!t){t={},g.relativeOffset=s;for(var u=g.parseUShort();u--;){var v=g.parseUShort();l&&(c=g.parseShort()),m&&(d=g.parseShort()),t[v]=c}}p[j[r]]=t}return function(a,b){var c=p[a];return c?c[b]:void 0}}if(2===h){for(var w=g.parseUShort(),x=g.parseUShort(),y=g.parseUShort(),z=g.parseUShort(),A=f(a,b+w),B=f(a,b+x),C=[],D=0;y>D;D++)for(var E=C[D]=[],F=0;z>F;F++)l&&(c=g.parseShort()),m&&(d=g.parseShort()),E[F]=c;var G={};for(D=0;D<j.length;D++)G[j[D]]=1;return function(a,b){if(G[a]){var c=A(a),d=B(b),e=C[c];return e?e[d]:void 0}}}}}function h(a,b){var c=new k.Parser(a,b),d=c.parseUShort(),e=c.parseUShort(),f=16&e,h=c.parseUShort(),i=c.parseOffset16List(h),j={lookupType:d,lookupFlag:e,markFilteringSet:f?c.parseUShort():-1};if(2===d){for(var l=[],m=0;h>m;m++)l.push(g(a,b+i[m]));j.getKerningValue=function(a,b){for(var c=l.length;c--;){var d=l[c](a,b);if(void 0!==d)return d}return 0}}return j}function i(a,b,c){var e=new k.Parser(a,b),f=e.parseFixed();j.argument(1===f,\"Unsupported GPOS table version.\"),d(a,b+e.parseUShort()),d(a,b+e.parseUShort());var g=e.parseUShort();e.relativeOffset=g;for(var i=e.parseUShort(),l=e.parseOffset16List(i),m=b+g,n=0;i>n;n++){var o=h(a,m+l[n]);2!==o.lookupType||c.getGposKerningValue||(c.getGposKerningValue=o.getKerningValue)}}var j=a(\"../check\"),k=a(\"../parse\");c.parse=i},{\"../check\":2,\"../parse\":9}],17:[function(a,b,c){\"use strict\";function d(a,b){var c={},d=new g.Parser(a,b);return c.version=d.parseVersion(),c.fontRevision=Math.round(1e3*d.parseFixed())/1e3,c.checkSumAdjustment=d.parseULong(),c.magicNumber=d.parseULong(),f.argument(1594834165===c.magicNumber,\"Font header has wrong magic number.\"),c.flags=d.parseUShort(),c.unitsPerEm=d.parseUShort(),c.created=d.parseLongDateTime(),c.modified=d.parseLongDateTime(),c.xMin=d.parseShort(),c.yMin=d.parseShort(),c.xMax=d.parseShort(),c.yMax=d.parseShort(),c.macStyle=d.parseUShort(),c.lowestRecPPEM=d.parseUShort(),c.fontDirectionHint=d.parseShort(),c.indexToLocFormat=d.parseShort(),c.glyphDataFormat=d.parseShort(),c}function e(a){return new h.Table(\"head\",[{name:\"version\",type:\"FIXED\",value:65536},{name:\"fontRevision\",type:\"FIXED\",value:65536},{name:\"checkSumAdjustment\",type:\"ULONG\",value:0},{name:\"magicNumber\",type:\"ULONG\",value:1594834165},{name:\"flags\",type:\"USHORT\",value:0},{name:\"unitsPerEm\",type:\"USHORT\",value:1e3},{name:\"created\",type:\"LONGDATETIME\",value:0},{name:\"modified\",type:\"LONGDATETIME\",value:0},{name:\"xMin\",type:\"SHORT\",value:0},{name:\"yMin\",type:\"SHORT\",value:0},{name:\"xMax\",type:\"SHORT\",value:0},{name:\"yMax\",type:\"SHORT\",value:0},{name:\"macStyle\",type:\"USHORT\",value:0},{name:\"lowestRecPPEM\",type:\"USHORT\",value:0},{name:\"fontDirectionHint\",type:\"SHORT\",value:2},{name:\"indexToLocFormat\",type:\"SHORT\",value:0},{name:\"glyphDataFormat\",type:\"SHORT\",value:0}],a)}var f=a(\"../check\"),g=a(\"../parse\"),h=a(\"../table\");c.parse=d,c.make=e},{\"../check\":2,\"../parse\":9,\"../table\":11}],18:[function(a,b,c){\"use strict\";function d(a,b){var c={},d=new f.Parser(a,b);return c.version=d.parseVersion(),c.ascender=d.parseShort(),c.descender=d.parseShort(),c.lineGap=d.parseShort(),c.advanceWidthMax=d.parseUShort(),c.minLeftSideBearing=d.parseShort(),c.minRightSideBearing=d.parseShort(),c.xMaxExtent=d.parseShort(),c.caretSlopeRise=d.parseShort(),c.caretSlopeRun=d.parseShort(),c.caretOffset=d.parseShort(),d.relativeOffset+=8,c.metricDataFormat=d.parseShort(),c.numberOfHMetrics=d.parseUShort(),c}function e(a){return new g.Table(\"hhea\",[{name:\"version\",type:\"FIXED\",value:65536},{name:\"ascender\",type:\"FWORD\",value:0},{name:\"descender\",type:\"FWORD\",value:0},{name:\"lineGap\",type:\"FWORD\",value:0},{name:\"advanceWidthMax\",type:\"UFWORD\",value:0},{name:\"minLeftSideBearing\",type:\"FWORD\",value:0},{name:\"minRightSideBearing\",type:\"FWORD\",value:0},{name:\"xMaxExtent\",type:\"FWORD\",value:0},{name:\"caretSlopeRise\",type:\"SHORT\",value:1},{name:\"caretSlopeRun\",type:\"SHORT\",value:0},{name:\"caretOffset\",type:\"SHORT\",value:0},{name:\"reserved1\",type:\"SHORT\",value:0},{name:\"reserved2\",type:\"SHORT\",value:0},{name:\"reserved3\",type:\"SHORT\",value:0},{name:\"reserved4\",type:\"SHORT\",value:0},{name:\"metricDataFormat\",type:\"SHORT\",value:0},{name:\"numberOfHMetrics\",type:\"USHORT\",value:0}],a)}var f=a(\"../parse\"),g=a(\"../table\");c.parse=d,c.make=e},{\"../parse\":9,\"../table\":11}],19:[function(a,b,c){\"use strict\";function d(a,b,c,d,e){for(var g,h,i=new f.Parser(a,b),j=0;d>j;j+=1){c>j&&(g=i.parseUShort(),h=i.parseShort());var k=e.get(j);k.advanceWidth=g,k.leftSideBearing=h}}function e(a){for(var b=new g.Table(\"hmtx\",[]),c=0;c<a.length;c+=1){var d=a.get(c),e=d.advanceWidth||0,f=d.leftSideBearing||0;b.fields.push({name:\"advanceWidth_\"+c,type:\"USHORT\",value:e}),b.fields.push({name:\"leftSideBearing_\"+c,type:\"SHORT\",value:f})}return b}var f=a(\"../parse\"),g=a(\"../table\");c.parse=d,c.make=e},{\"../parse\":9,\"../table\":11}],20:[function(a,b,c){\"use strict\";function d(a,b){var c={},d=new f.Parser(a,b),g=d.parseUShort();e.argument(0===g,\"Unsupported kern table version.\"),d.skip(\"uShort\",1);var h=d.parseUShort();e.argument(0===h,\"Unsupported kern sub-table version.\"),d.skip(\"uShort\",2);var i=d.parseUShort();d.skip(\"uShort\",3);for(var j=0;i>j;j+=1){var k=d.parseUShort(),l=d.parseUShort(),m=d.parseShort();c[k+\",\"+l]=m}return c}var e=a(\"../check\"),f=a(\"../parse\");c.parse=d},{\"../check\":2,\"../parse\":9}],21:[function(a,b,c){\"use strict\";function d(a,b,c,d){for(var f=new e.Parser(a,b),g=d?f.parseUShort:f.parseULong,h=[],i=0;c+1>i;i+=1){var j=g.call(f);d&&(j*=2),h.push(j)}return h}var e=a(\"../parse\");c.parse=d},{\"../parse\":9}],22:[function(a,b,c){\"use strict\";function d(a){for(var b=new h.Table(\"ltag\",[{name:\"version\",type:\"ULONG\",value:1},{name:\"flags\",type:\"ULONG\",value:0},{name:\"numTags\",type:\"ULONG\",value:a.length}]),c=\"\",d=12+4*a.length,e=0;e<a.length;++e){var f=c.indexOf(a[e]);0>f&&(f=c.length,c+=a[e]),b.fields.push({name:\"offset \"+e,type:\"USHORT\",value:d+f}),b.fields.push({name:\"length \"+e,type:\"USHORT\",value:a[e].length})}return b.fields.push({name:\"stringPool\",type:\"CHARARRAY\",value:c}),b}function e(a,b){var c=new g.Parser(a,b),d=c.parseULong();f.argument(1===d,\"Unsupported ltag table version.\"),c.skip(\"uLong\",1);for(var e=c.parseULong(),h=[],i=0;e>i;i++){for(var j=\"\",k=b+c.parseUShort(),l=c.parseUShort(),m=k;k+l>m;++m)j+=String.fromCharCode(a.getInt8(m));h.push(j)}return h}var f=a(\"../check\"),g=a(\"../parse\"),h=a(\"../table\");c.make=d,c.parse=e},{\"../check\":2,\"../parse\":9,\"../table\":11}],23:[function(a,b,c){\"use strict\";function d(a,b){var c={},d=new f.Parser(a,b);return c.version=d.parseVersion(),c.numGlyphs=d.parseUShort(),1===c.version&&(c.maxPoints=d.parseUShort(),c.maxContours=d.parseUShort(),c.maxCompositePoints=d.parseUShort(),c.maxCompositeContours=d.parseUShort(),c.maxZones=d.parseUShort(),c.maxTwilightPoints=d.parseUShort(),c.maxStorage=d.parseUShort(),c.maxFunctionDefs=d.parseUShort(),c.maxInstructionDefs=d.parseUShort(),c.maxStackElements=d.parseUShort(),c.maxSizeOfInstructions=d.parseUShort(),c.maxComponentElements=d.parseUShort(),c.maxComponentDepth=d.parseUShort()),c}function e(a){return new g.Table(\"maxp\",[{name:\"version\",type:\"FIXED\",value:20480},{name:\"numGlyphs\",type:\"USHORT\",value:a}])}var f=a(\"../parse\"),g=a(\"../table\");c.parse=d,c.make=e},{\"../parse\":9,\"../table\":11}],24:[function(a,b,c){\"use strict\";function d(a,b,c){switch(a){case 0:if(65535===b)return\"und\";if(c)return c[b];break;case 1:return r[b];case 3:return t[b]}return void 0}function e(a,b,c){switch(a){case 0:return u;case 1:return w[c]||v[b];case 3:if(1===b||10===b)return u}return void 0}function f(a,b,c){for(var f={},g=new o.Parser(a,b),h=g.parseUShort(),i=g.parseUShort(),j=g.offset+g.parseUShort(),k=0;i>k;k++){var l=g.parseUShort(),n=g.parseUShort(),p=g.parseUShort(),r=g.parseUShort(),s=q[r]||r,t=g.parseUShort(),v=g.parseUShort(),w=d(l,p,c),x=e(l,n,p);if(void 0!==x&&void 0!==w){var y;if(y=x===u?m.UTF16(a,j+v,t):m.MACSTRING(a,j+v,t,x)){var z=f[s];void 0===z&&(z=f[s]={}),z[w]=y}}}var A=0;return 1===h&&(A=g.parseUShort()),f}function g(a){var b={};for(var c in a)b[a[c]]=parseInt(c);return b}function h(a,b,c,d,e,f){return new p.Table(\"NameRecord\",[{name:\"platformID\",type:\"USHORT\",value:a},{name:\"encodingID\",type:\"USHORT\",value:b},{name:\"languageID\",type:\"USHORT\",value:c},{name:\"nameID\",type:\"USHORT\",value:d},{name:\"length\",type:\"USHORT\",value:e},{name:\"offset\",type:\"USHORT\",value:f}])}function i(a,b){var c=a.length,d=b.length-c+1;a:for(var e=0;d>e;e++)for(;d>e;e++){for(var f=0;c>f;f++)if(b[e+f]!==a[f])continue a;return e}return-1}function j(a,b){var c=i(a,b);if(0>c){c=b.length;for(var d=0,e=a.length;e>d;++d)b.push(a[d])}return c}function k(a,b){var c,d=[],f={},i=g(q);for(var k in a){var l=i[k];void 0===l&&(l=k),c=parseInt(l),f[c]=a[k],d.push(c)}for(var m=g(r),o=g(t),u=[],v=[],w=0;w<d.length;w++){c=d[w];var x=f[c];for(var y in x){var z=x[y],A=1,B=m[y],C=s[B],D=e(A,C,B),E=n.MACSTRING(z,D);void 0===E&&(A=0,B=b.indexOf(y),0>B&&(B=b.length,b.push(y)),C=4,E=n.UTF16(z));var F=j(E,v);u.push(h(A,C,B,c,E.length,F));var G=o[y];if(void 0!==G){var H=n.UTF16(z),I=j(H,v);u.push(h(3,1,G,c,H.length,I))}}}u.sort(function(a,b){return a.platformID-b.platformID||a.encodingID-b.encodingID||a.languageID-b.languageID||a.nameID-b.nameID});for(var J=new p.Table(\"name\",[{name:\"format\",type:\"USHORT\",value:0},{name:\"count\",type:\"USHORT\",value:u.length},{name:\"stringOffset\",type:\"USHORT\",value:6+12*u.length}]),K=0;K<u.length;K++)J.fields.push({name:\"record_\"+K,type:\"TABLE\",value:u[K]});return J.fields.push({name:\"strings\",type:\"LITERAL\",value:v}),J}var l=a(\"../types\"),m=l.decode,n=l.encode,o=a(\"../parse\"),p=a(\"../table\"),q=[\"copyright\",\"fontFamily\",\"fontSubfamily\",\"uniqueID\",\"fullName\",\"version\",\"postScriptName\",\"trademark\",\"manufacturer\",\"designer\",\"description\",\"manufacturerURL\",\"designerURL\",\"licence\",\"licenceURL\",\"reserved\",\"preferredFamily\",\"preferredSubfamily\",\"compatibleFullName\",\"sampleText\",\"postScriptFindFontName\",\"wwsFamily\",\"wwsSubfamily\"],r={0:\"en\",1:\"fr\",2:\"de\",3:\"it\",4:\"nl\",5:\"sv\",6:\"es\",7:\"da\",8:\"pt\",9:\"no\",10:\"he\",11:\"ja\",12:\"ar\",13:\"fi\",14:\"el\",15:\"is\",16:\"mt\",17:\"tr\",18:\"hr\",19:\"zh-Hant\",20:\"ur\",21:\"hi\",22:\"th\",23:\"ko\",24:\"lt\",25:\"pl\",26:\"hu\",27:\"es\",28:\"lv\",29:\"se\",30:\"fo\",31:\"fa\",32:\"ru\",33:\"zh\",34:\"nl-BE\",35:\"ga\",36:\"sq\",37:\"ro\",38:\"cz\",39:\"sk\",40:\"si\",41:\"yi\",42:\"sr\",43:\"mk\",44:\"bg\",45:\"uk\",46:\"be\",47:\"uz\",48:\"kk\",49:\"az-Cyrl\",50:\"az-Arab\",51:\"hy\",52:\"ka\",53:\"mo\",54:\"ky\",55:\"tg\",56:\"tk\",57:\"mn-CN\",58:\"mn\",59:\"ps\",60:\"ks\",61:\"ku\",62:\"sd\",63:\"bo\",64:\"ne\",65:\"sa\",66:\"mr\",67:\"bn\",68:\"as\",69:\"gu\",70:\"pa\",71:\"or\",72:\"ml\",73:\"kn\",74:\"ta\",75:\"te\",76:\"si\",77:\"my\",78:\"km\",79:\"lo\",80:\"vi\",81:\"id\",82:\"tl\",83:\"ms\",84:\"ms-Arab\",85:\"am\",86:\"ti\",87:\"om\",88:\"so\",89:\"sw\",90:\"rw\",91:\"rn\",92:\"ny\",93:\"mg\",94:\"eo\",128:\"cy\",129:\"eu\",130:\"ca\",131:\"la\",132:\"qu\",133:\"gn\",134:\"ay\",135:\"tt\",136:\"ug\",137:\"dz\",138:\"jv\",139:\"su\",140:\"gl\",141:\"af\",142:\"br\",143:\"iu\",144:\"gd\",145:\"gv\",146:\"ga\",147:\"to\",148:\"el-polyton\",149:\"kl\",150:\"az\",151:\"nn\"},s={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},t={1078:\"af\",1052:\"sq\",1156:\"gsw\",1118:\"am\",5121:\"ar-DZ\",15361:\"ar-BH\",3073:\"ar\",2049:\"ar-IQ\",11265:\"ar-JO\",13313:\"ar-KW\",12289:\"ar-LB\",4097:\"ar-LY\",6145:\"ary\",8193:\"ar-OM\",16385:\"ar-QA\",1025:\"ar-SA\",10241:\"ar-SY\",7169:\"aeb\",14337:\"ar-AE\",9217:\"ar-YE\",1067:\"hy\",1101:\"as\",2092:\"az-Cyrl\",1068:\"az\",1133:\"ba\",1069:\"eu\",1059:\"be\",2117:\"bn\",1093:\"bn-IN\",\n8218:\"bs-Cyrl\",5146:\"bs\",1150:\"br\",1026:\"bg\",1027:\"ca\",3076:\"zh-HK\",5124:\"zh-MO\",2052:\"zh\",4100:\"zh-SG\",1028:\"zh-TW\",1155:\"co\",1050:\"hr\",4122:\"hr-BA\",1029:\"cs\",1030:\"da\",1164:\"prs\",1125:\"dv\",2067:\"nl-BE\",1043:\"nl\",3081:\"en-AU\",10249:\"en-BZ\",4105:\"en-CA\",9225:\"en-029\",16393:\"en-IN\",6153:\"en-IE\",8201:\"en-JM\",17417:\"en-MY\",5129:\"en-NZ\",13321:\"en-PH\",18441:\"en-SG\",7177:\"en-ZA\",11273:\"en-TT\",2057:\"en-GB\",1033:\"en\",12297:\"en-ZW\",1061:\"et\",1080:\"fo\",1124:\"fil\",1035:\"fi\",2060:\"fr-BE\",3084:\"fr-CA\",1036:\"fr\",5132:\"fr-LU\",6156:\"fr-MC\",4108:\"fr-CH\",1122:\"fy\",1110:\"gl\",1079:\"ka\",3079:\"de-AT\",1031:\"de\",5127:\"de-LI\",4103:\"de-LU\",2055:\"de-CH\",1032:\"el\",1135:\"kl\",1095:\"gu\",1128:\"ha\",1037:\"he\",1081:\"hi\",1038:\"hu\",1039:\"is\",1136:\"ig\",1057:\"id\",1117:\"iu\",2141:\"iu-Latn\",2108:\"ga\",1076:\"xh\",1077:\"zu\",1040:\"it\",2064:\"it-CH\",1041:\"ja\",1099:\"kn\",1087:\"kk\",1107:\"km\",1158:\"quc\",1159:\"rw\",1089:\"sw\",1111:\"kok\",1042:\"ko\",1088:\"ky\",1108:\"lo\",1062:\"lv\",1063:\"lt\",2094:\"dsb\",1134:\"lb\",1071:\"mk\",2110:\"ms-BN\",1086:\"ms\",1100:\"ml\",1082:\"mt\",1153:\"mi\",1146:\"arn\",1102:\"mr\",1148:\"moh\",1104:\"mn\",2128:\"mn-CN\",1121:\"ne\",1044:\"nb\",2068:\"nn\",1154:\"oc\",1096:\"or\",1123:\"ps\",1045:\"pl\",1046:\"pt\",2070:\"pt-PT\",1094:\"pa\",1131:\"qu-BO\",2155:\"qu-EC\",3179:\"qu\",1048:\"ro\",1047:\"rm\",1049:\"ru\",9275:\"smn\",4155:\"smj-NO\",5179:\"smj\",3131:\"se-FI\",1083:\"se\",2107:\"se-SE\",8251:\"sms\",6203:\"sma-NO\",7227:\"sms\",1103:\"sa\",7194:\"sr-Cyrl-BA\",3098:\"sr\",6170:\"sr-Latn-BA\",2074:\"sr-Latn\",1132:\"nso\",1074:\"tn\",1115:\"si\",1051:\"sk\",1060:\"sl\",11274:\"es-AR\",16394:\"es-BO\",13322:\"es-CL\",9226:\"es-CO\",5130:\"es-CR\",7178:\"es-DO\",12298:\"es-EC\",17418:\"es-SV\",4106:\"es-GT\",18442:\"es-HN\",2058:\"es-MX\",19466:\"es-NI\",6154:\"es-PA\",15370:\"es-PY\",10250:\"es-PE\",20490:\"es-PR\",3082:\"es\",1034:\"es\",21514:\"es-US\",14346:\"es-UY\",8202:\"es-VE\",2077:\"sv-FI\",1053:\"sv\",1114:\"syr\",1064:\"tg\",2143:\"tzm\",1097:\"ta\",1092:\"tt\",1098:\"te\",1054:\"th\",1105:\"bo\",1055:\"tr\",1090:\"tk\",1152:\"ug\",1058:\"uk\",1070:\"hsb\",1056:\"ur\",2115:\"uz-Cyrl\",1091:\"uz\",1066:\"vi\",1106:\"cy\",1160:\"wo\",1157:\"sah\",1144:\"ii\",1130:\"yo\"},u=\"utf-16\",v={0:\"macintosh\",1:\"x-mac-japanese\",2:\"x-mac-chinesetrad\",3:\"x-mac-korean\",6:\"x-mac-greek\",7:\"x-mac-cyrillic\",9:\"x-mac-devanagai\",10:\"x-mac-gurmukhi\",11:\"x-mac-gujarati\",12:\"x-mac-oriya\",13:\"x-mac-bengali\",14:\"x-mac-tamil\",15:\"x-mac-telugu\",16:\"x-mac-kannada\",17:\"x-mac-malayalam\",18:\"x-mac-sinhalese\",19:\"x-mac-burmese\",20:\"x-mac-khmer\",21:\"x-mac-thai\",22:\"x-mac-lao\",23:\"x-mac-georgian\",24:\"x-mac-armenian\",25:\"x-mac-chinesesimp\",26:\"x-mac-tibetan\",27:\"x-mac-mongolian\",28:\"x-mac-ethiopic\",29:\"x-mac-ce\",30:\"x-mac-vietnamese\",31:\"x-mac-extarabic\"},w={15:\"x-mac-icelandic\",17:\"x-mac-turkish\",18:\"x-mac-croatian\",24:\"x-mac-ce\",25:\"x-mac-ce\",26:\"x-mac-ce\",27:\"x-mac-ce\",28:\"x-mac-ce\",30:\"x-mac-icelandic\",37:\"x-mac-romanian\",38:\"x-mac-ce\",39:\"x-mac-ce\",40:\"x-mac-ce\",143:\"x-mac-inuit\",146:\"x-mac-gaelic\"};c.parse=f,c.make=k},{\"../parse\":9,\"../table\":11,\"../types\":28}],25:[function(a,b,c){\"use strict\";function d(a){for(var b=0;b<i.length;b+=1){var c=i[b];if(a>=c.begin&&a<c.end)return b}return-1}function e(a,b){var c={},d=new g.Parser(a,b);c.version=d.parseUShort(),c.xAvgCharWidth=d.parseShort(),c.usWeightClass=d.parseUShort(),c.usWidthClass=d.parseUShort(),c.fsType=d.parseUShort(),c.ySubscriptXSize=d.parseShort(),c.ySubscriptYSize=d.parseShort(),c.ySubscriptXOffset=d.parseShort(),c.ySubscriptYOffset=d.parseShort(),c.ySuperscriptXSize=d.parseShort(),c.ySuperscriptYSize=d.parseShort(),c.ySuperscriptXOffset=d.parseShort(),c.ySuperscriptYOffset=d.parseShort(),c.yStrikeoutSize=d.parseShort(),c.yStrikeoutPosition=d.parseShort(),c.sFamilyClass=d.parseShort(),c.panose=[];for(var e=0;10>e;e++)c.panose[e]=d.parseByte();return c.ulUnicodeRange1=d.parseULong(),c.ulUnicodeRange2=d.parseULong(),c.ulUnicodeRange3=d.parseULong(),c.ulUnicodeRange4=d.parseULong(),c.achVendID=String.fromCharCode(d.parseByte(),d.parseByte(),d.parseByte(),d.parseByte()),c.fsSelection=d.parseUShort(),c.usFirstCharIndex=d.parseUShort(),c.usLastCharIndex=d.parseUShort(),c.sTypoAscender=d.parseShort(),c.sTypoDescender=d.parseShort(),c.sTypoLineGap=d.parseShort(),c.usWinAscent=d.parseUShort(),c.usWinDescent=d.parseUShort(),c.version>=1&&(c.ulCodePageRange1=d.parseULong(),c.ulCodePageRange2=d.parseULong()),c.version>=2&&(c.sxHeight=d.parseShort(),c.sCapHeight=d.parseShort(),c.usDefaultChar=d.parseUShort(),c.usBreakChar=d.parseUShort(),c.usMaxContent=d.parseUShort()),c}function f(a){return new h.Table(\"OS/2\",[{name:\"version\",type:\"USHORT\",value:3},{name:\"xAvgCharWidth\",type:\"SHORT\",value:0},{name:\"usWeightClass\",type:\"USHORT\",value:0},{name:\"usWidthClass\",type:\"USHORT\",value:0},{name:\"fsType\",type:\"USHORT\",value:0},{name:\"ySubscriptXSize\",type:\"SHORT\",value:650},{name:\"ySubscriptYSize\",type:\"SHORT\",value:699},{name:\"ySubscriptXOffset\",type:\"SHORT\",value:0},{name:\"ySubscriptYOffset\",type:\"SHORT\",value:140},{name:\"ySuperscriptXSize\",type:\"SHORT\",value:650},{name:\"ySuperscriptYSize\",type:\"SHORT\",value:699},{name:\"ySuperscriptXOffset\",type:\"SHORT\",value:0},{name:\"ySuperscriptYOffset\",type:\"SHORT\",value:479},{name:\"yStrikeoutSize\",type:\"SHORT\",value:49},{name:\"yStrikeoutPosition\",type:\"SHORT\",value:258},{name:\"sFamilyClass\",type:\"SHORT\",value:0},{name:\"bFamilyType\",type:\"BYTE\",value:0},{name:\"bSerifStyle\",type:\"BYTE\",value:0},{name:\"bWeight\",type:\"BYTE\",value:0},{name:\"bProportion\",type:\"BYTE\",value:0},{name:\"bContrast\",type:\"BYTE\",value:0},{name:\"bStrokeVariation\",type:\"BYTE\",value:0},{name:\"bArmStyle\",type:\"BYTE\",value:0},{name:\"bLetterform\",type:\"BYTE\",value:0},{name:\"bMidline\",type:\"BYTE\",value:0},{name:\"bXHeight\",type:\"BYTE\",value:0},{name:\"ulUnicodeRange1\",type:\"ULONG\",value:0},{name:\"ulUnicodeRange2\",type:\"ULONG\",value:0},{name:\"ulUnicodeRange3\",type:\"ULONG\",value:0},{name:\"ulUnicodeRange4\",type:\"ULONG\",value:0},{name:\"achVendID\",type:\"CHARARRAY\",value:\"XXXX\"},{name:\"fsSelection\",type:\"USHORT\",value:0},{name:\"usFirstCharIndex\",type:\"USHORT\",value:0},{name:\"usLastCharIndex\",type:\"USHORT\",value:0},{name:\"sTypoAscender\",type:\"SHORT\",value:0},{name:\"sTypoDescender\",type:\"SHORT\",value:0},{name:\"sTypoLineGap\",type:\"SHORT\",value:0},{name:\"usWinAscent\",type:\"USHORT\",value:0},{name:\"usWinDescent\",type:\"USHORT\",value:0},{name:\"ulCodePageRange1\",type:\"ULONG\",value:0},{name:\"ulCodePageRange2\",type:\"ULONG\",value:0},{name:\"sxHeight\",type:\"SHORT\",value:0},{name:\"sCapHeight\",type:\"SHORT\",value:0},{name:\"usDefaultChar\",type:\"USHORT\",value:0},{name:\"usBreakChar\",type:\"USHORT\",value:0},{name:\"usMaxContext\",type:\"USHORT\",value:0}],a)}var g=a(\"../parse\"),h=a(\"../table\"),i=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];c.unicodeRanges=i,c.getUnicodeRange=d,c.parse=e,c.make=f},{\"../parse\":9,\"../table\":11}],26:[function(a,b,c){\"use strict\";function d(a,b){var c,d={},e=new g.Parser(a,b);switch(d.version=e.parseVersion(),d.italicAngle=e.parseFixed(),d.underlinePosition=e.parseShort(),d.underlineThickness=e.parseShort(),d.isFixedPitch=e.parseULong(),d.minMemType42=e.parseULong(),d.maxMemType42=e.parseULong(),d.minMemType1=e.parseULong(),d.maxMemType1=e.parseULong(),d.version){case 1:d.names=f.standardNames.slice();break;case 2:for(d.numberOfGlyphs=e.parseUShort(),d.glyphNameIndex=new Array(d.numberOfGlyphs),c=0;c<d.numberOfGlyphs;c++)d.glyphNameIndex[c]=e.parseUShort();for(d.names=[],c=0;c<d.numberOfGlyphs;c++)if(d.glyphNameIndex[c]>=f.standardNames.length){var h=e.parseChar();d.names.push(e.parseString(h))}break;case 2.5:for(d.numberOfGlyphs=e.parseUShort(),d.offset=new Array(d.numberOfGlyphs),c=0;c<d.numberOfGlyphs;c++)d.offset[c]=e.parseChar()}return d}function e(){return new h.Table(\"post\",[{name:\"version\",type:\"FIXED\",value:196608},{name:\"italicAngle\",type:\"FIXED\",value:0},{name:\"underlinePosition\",type:\"FWORD\",value:0},{name:\"underlineThickness\",type:\"FWORD\",value:0},{name:\"isFixedPitch\",type:\"ULONG\",value:0},{name:\"minMemType42\",type:\"ULONG\",value:0},{name:\"maxMemType42\",type:\"ULONG\",value:0},{name:\"minMemType1\",type:\"ULONG\",value:0},{name:\"maxMemType1\",type:\"ULONG\",value:0}])}var f=a(\"../encoding\"),g=a(\"../parse\"),h=a(\"../table\");c.parse=d,c.make=e},{\"../encoding\":4,\"../parse\":9,\"../table\":11}],27:[function(a,b,c){\"use strict\";function d(a){return Math.log(a)/Math.log(2)|0}function e(a){for(;a.length%4!==0;)a.push(0);for(var b=0,c=0;c<a.length;c+=4)b+=(a[c]<<24)+(a[c+1]<<16)+(a[c+2]<<8)+a[c+3];return b%=Math.pow(2,32)}function f(a,b,c,d){return new l.Table(\"Table Record\",[{name:\"tag\",type:\"TAG\",value:void 0!==a?a:\"\"},{name:\"checkSum\",type:\"ULONG\",value:void 0!==b?b:0},{name:\"offset\",type:\"ULONG\",value:void 0!==c?c:0},{name:\"length\",type:\"ULONG\",value:void 0!==d?d:0}])}function g(a){var b=new l.Table(\"sfnt\",[{name:\"version\",type:\"TAG\",value:\"OTTO\"},{name:\"numTables\",type:\"USHORT\",value:0},{name:\"searchRange\",type:\"USHORT\",value:0},{name:\"entrySelector\",type:\"USHORT\",value:0},{name:\"rangeShift\",type:\"USHORT\",value:0}]);b.tables=a,b.numTables=a.length;var c=Math.pow(2,d(b.numTables));b.searchRange=16*c,b.entrySelector=d(c),b.rangeShift=16*b.numTables-b.searchRange;for(var g=[],h=[],i=b.sizeOf()+f().sizeOf()*b.numTables;i%4!==0;)i+=1,h.push({name:\"padding\",type:\"BYTE\",value:0});for(var j=0;j<a.length;j+=1){var m=a[j];k.argument(4===m.tableName.length,\"Table name\"+m.tableName+\" is invalid.\");var n=m.sizeOf(),o=f(m.tableName,e(m.encode()),i,n);for(g.push({name:o.tag+\" Table Record\",type:\"TABLE\",value:o}),h.push({name:m.tableName+\" table\",type:\"TABLE\",value:m}),i+=n,k.argument(!isNaN(i),\"Something went wrong calculating the offset.\");i%4!==0;)i+=1,h.push({name:\"padding\",type:\"BYTE\",value:0})}return g.sort(function(a,b){return a.value.tag>b.value.tag?1:-1}),b.fields=b.fields.concat(g),b.fields=b.fields.concat(h),b}function h(a,b,c){for(var d=0;d<b.length;d+=1){var e=a.charToGlyphIndex(b[d]);if(e>0){var f=a.glyphs.get(e);return f.getMetrics()}}return c}function i(a){for(var b=0,c=0;c<a.length;c+=1)b+=a[c];return b/a.length}function j(a){for(var b,c=[],d=[],f=[],j=[],k=[],l=[],w=[],x=0,y=0,z=0,A=0,B=0,C=0;C<a.glyphs.length;C+=1){var D=a.glyphs.get(C),E=0|D.unicode;(b>E||null===b)&&(b=E),E>x&&(x=E);var F=u.getUnicodeRange(E);if(32>F)y|=1<<F;else if(64>F)z|=1<<F-32;else if(96>F)A|=1<<F-64;else{if(!(123>F))throw new Error(\"Unicode ranges bits > 123 are reserved for internal usage\");B|=1<<F-96}if(\".notdef\"!==D.name){var G=D.getMetrics();c.push(G.xMin),d.push(G.yMin),f.push(G.xMax),j.push(G.yMax),l.push(G.leftSideBearing),w.push(G.rightSideBearing),k.push(D.advanceWidth)}}var H={xMin:Math.min.apply(null,c),yMin:Math.min.apply(null,d),xMax:Math.max.apply(null,f),yMax:Math.max.apply(null,j),advanceWidthMax:Math.max.apply(null,k),advanceWidthAvg:i(k),minLeftSideBearing:Math.min.apply(null,l),maxLeftSideBearing:Math.max.apply(null,l),minRightSideBearing:Math.min.apply(null,w)};H.ascender=void 0!==a.ascender?a.ascender:H.yMax,H.descender=void 0!==a.descender?a.descender:H.yMin;var I=o.make({unitsPerEm:a.unitsPerEm,xMin:H.xMin,yMin:H.yMin,xMax:H.xMax,yMax:H.yMax}),J=p.make({ascender:H.ascender,descender:H.descender,advanceWidthMax:H.advanceWidthMax,minLeftSideBearing:H.minLeftSideBearing,minRightSideBearing:H.minRightSideBearing,xMaxExtent:H.maxLeftSideBearing+(H.xMax-H.xMin),numberOfHMetrics:a.glyphs.length}),K=s.make(a.glyphs.length),L=u.make({xAvgCharWidth:Math.round(H.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:b,usLastCharIndex:x,ulUnicodeRange1:y,ulUnicodeRange2:z,ulUnicodeRange3:A,ulUnicodeRange4:B,sTypoAscender:H.ascender,sTypoDescender:H.descender,sTypoLineGap:0,usWinAscent:H.ascender,usWinDescent:-H.descender,sxHeight:h(a,\"xyvw\",{yMax:0}).yMax,sCapHeight:h(a,\"HIKLEFJMNTZBDPRAGOQSUVWXY\",H).yMax,usBreakChar:a.hasChar(\" \")?32:0}),M=q.make(a.glyphs),N=m.make(a.glyphs),O=a.getEnglishName(\"fontFamily\"),P=a.getEnglishName(\"fontSubfamily\"),Q=O+\" \"+P,R=a.getEnglishName(\"postScriptName\");R||(R=O.replace(/\\s/g,\"\")+\"-\"+P);var S={};for(var T in a.names)S[T]=a.names[T];S.uniqueID||(S.uniqueID={en:a.getEnglishName(\"manufacturer\")+\":\"+Q}),S.postScriptName||(S.postScriptName={en:R}),S.preferredFamily||(S.preferredFamily=a.names.fontFamily),S.preferredSubfamily||(S.preferredSubfamily=a.names.fontSubfamily);var U=[],V=t.make(S,U),W=U.length>0?r.make(U):void 0,X=v.make(),Y=n.make(a.glyphs,{version:a.getEnglishName(\"version\"),fullName:Q,familyName:O,weightName:P,postScriptName:R,unitsPerEm:a.unitsPerEm}),Z=[I,J,K,L,V,N,X,Y,M];W&&Z.push(W);var $=g(Z),_=$.encode(),aa=e(_),ba=$.fields,ca=!1;for(C=0;C<ba.length;C+=1)if(\"head table\"===ba[C].name){ba[C].value.checkSumAdjustment=2981146554-aa,ca=!0;break}if(!ca)throw new Error(\"Could not find head table with checkSum to adjust.\");return $}var k=a(\"../check\"),l=a(\"../table\"),m=a(\"./cmap\"),n=a(\"./cff\"),o=a(\"./head\"),p=a(\"./hhea\"),q=a(\"./hmtx\"),r=a(\"./ltag\"),s=a(\"./maxp\"),t=a(\"./name\"),u=a(\"./os2\"),v=a(\"./post\");c.computeCheckSum=e,c.make=g,c.fontToTable=j},{\"../check\":2,\"../table\":11,\"./cff\":12,\"./cmap\":13,\"./head\":17,\"./hhea\":18,\"./hmtx\":19,\"./ltag\":22,\"./maxp\":23,\"./name\":24,\"./os2\":25,\"./post\":26}],28:[function(a,b,c){\"use strict\";function d(a){return function(){return a}}var e=a(\"./check\"),f=32768,g=2147483648,h={},i={},j={};i.BYTE=function(a){return e.argument(a>=0&&255>=a,\"Byte value should be between 0 and 255.\"),[a]},j.BYTE=d(1),i.CHAR=function(a){return[a.charCodeAt(0)]},j.CHAR=d(1),i.CHARARRAY=function(a){for(var b=[],c=0;c<a.length;c+=1)b.push(a.charCodeAt(c));return b},j.CHARARRAY=function(a){return a.length},i.USHORT=function(a){return[a>>8&255,255&a]},j.USHORT=d(2),i.SHORT=function(a){return a>=f&&(a=-(2*f-a)),[a>>8&255,255&a]},j.SHORT=d(2),i.UINT24=function(a){return[a>>16&255,a>>8&255,255&a]},j.UINT24=d(3),i.ULONG=function(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]},j.ULONG=d(4),i.LONG=function(a){return a>=g&&(a=-(2*g-a)),[a>>24&255,a>>16&255,a>>8&255,255&a]},j.LONG=d(4),i.FIXED=i.ULONG,j.FIXED=j.ULONG,i.FWORD=i.SHORT,j.FWORD=j.SHORT,i.UFWORD=i.USHORT,j.UFWORD=j.USHORT,i.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},j.LONGDATETIME=d(8),i.TAG=function(a){return e.argument(4===a.length,\"Tag should be exactly 4 ASCII characters.\"),[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]},j.TAG=d(4),i.Card8=i.BYTE,j.Card8=j.BYTE,i.Card16=i.USHORT,j.Card16=j.USHORT,i.OffSize=i.BYTE,j.OffSize=j.BYTE,i.SID=i.USHORT,j.SID=j.USHORT,i.NUMBER=function(a){return a>=-107&&107>=a?[a+139]:a>=108&&1131>=a?(a-=108,[(a>>8)+247,255&a]):a>=-1131&&-108>=a?(a=-a-108,[(a>>8)+251,255&a]):a>=-32768&&32767>=a?i.NUMBER16(a):i.NUMBER32(a)},j.NUMBER=function(a){return i.NUMBER(a).length},i.NUMBER16=function(a){return[28,a>>8&255,255&a]},j.NUMBER16=d(3),i.NUMBER32=function(a){return[29,a>>24&255,a>>16&255,a>>8&255,255&a]},j.NUMBER32=d(5),i.REAL=function(a){var b=a.toString(),c=/\\.(\\d*?)(?:9{5,20}|0{5,20})\\d{0,2}(?:e(.+)|$)/.exec(b);if(c){var d=parseFloat(\"1e\"+((c[2]?+c[2]:0)+c[1].length));b=(Math.round(a*d)/d).toString()}var e,f,g=\"\";for(e=0,f=b.length;f>e;e+=1){var h=b[e];g+=\"e\"===h?\"-\"===b[++e]?\"c\":\"b\":\".\"===h?\"a\":\"-\"===h?\"e\":h}g+=1&g.length?\"f\":\"ff\";var i=[30];for(e=0,f=g.length;f>e;e+=2)i.push(parseInt(g.substr(e,2),16));return i},j.REAL=function(a){return i.REAL(a).length},i.NAME=i.CHARARRAY,j.NAME=j.CHARARRAY,i.STRING=i.CHARARRAY,j.STRING=j.CHARARRAY,h.UTF16=function(a,b,c){for(var d=[],e=c/2,f=0;e>f;f++,b+=2)d[f]=a.getUint16(b);return String.fromCharCode.apply(null,d)},i.UTF16=function(a){for(var b=[],c=0;c<a.length;c+=1){var d=a.charCodeAt(c);b.push(d>>8&255),b.push(255&d)}return b},j.UTF16=function(a){return 2*a.length};var k={\"x-mac-croatian\":\"\",\"x-mac-cyrillic\":\"\",\"x-mac-gaelic\":\"\",\"x-mac-greek\":\"\",\"x-mac-icelandic\":\"\",\"x-mac-inuit\":\"\",\"x-mac-ce\":\"\",macintosh:\"\",\"x-mac-romanian\":\"\",\"x-mac-turkish\":\"\"};h.MACSTRING=function(a,b,c,d){var e=k[d];if(void 0===e)return void 0;for(var f=\"\",g=0;c>g;g++){var h=a.getUint8(b+g);f+=127>=h?String.fromCharCode(h):e[127&h]}return f};var l,m=\"function\"==typeof WeakMap&&new WeakMap,n=function(a){if(!l){l={};for(var b in k)l[b]=new String(b)}var c=l[a];if(void 0===c)return void 0;if(m){var d=m.get(c);if(void 0!==d)return d}var e=k[a];if(void 0===e)return void 0;for(var f={},g=0;g<e.length;g++)f[e.charCodeAt(g)]=g+128;return m&&m.set(c,f),f};i.MACSTRING=function(a,b){var c=n(b);if(void 0===c)return void 0;for(var d=[],e=0;e<a.length;e++){var f=a.charCodeAt(e);if(f>=128&&(f=c[f],void 0===f))return void 0;d.push(f)}return d},j.MACSTRING=function(a,b){var c=i.MACSTRING(a,b);return void 0!==c?c.length:0},i.INDEX=function(a){var b,c=1,d=[c],e=[],f=0;for(b=0;b<a.length;b+=1){var g=i.OBJECT(a[b]);Array.prototype.push.apply(e,g),f+=g.length,c+=g.length,d.push(c)}if(0===e.length)return[0,0];var h=[],j=1+Math.floor(Math.log(f)/Math.log(2))/8|0,k=[void 0,i.BYTE,i.USHORT,i.UINT24,i.ULONG][j];for(b=0;b<d.length;b+=1){var l=k(d[b]);Array.prototype.push.apply(h,l)}return Array.prototype.concat(i.Card16(a.length),i.OffSize(j),h,e)},j.INDEX=function(a){return i.INDEX(a).length},i.DICT=function(a){for(var b=[],c=Object.keys(a),d=c.length,e=0;d>e;e+=1){var f=parseInt(c[e],0),g=a[f];b=b.concat(i.OPERAND(g.value,g.type)),b=b.concat(i.OPERATOR(f))}return b},j.DICT=function(a){return i.DICT(a).length},i.OPERATOR=function(a){return 1200>a?[a]:[12,a-1200]},i.OPERAND=function(a,b){var c=[];if(Array.isArray(b))for(var d=0;d<b.length;d+=1)e.argument(a.length===b.length,\"Not enough arguments given for type\"+b),c=c.concat(i.OPERAND(a[d],b[d]));else if(\"SID\"===b)c=c.concat(i.NUMBER(a));else if(\"offset\"===b)c=c.concat(i.NUMBER32(a));else if(\"number\"===b)c=c.concat(i.NUMBER(a));else{if(\"real\"!==b)throw new Error(\"Unknown operand type \"+b);c=c.concat(i.REAL(a))}return c},i.OP=i.BYTE,j.OP=j.BYTE;var o=\"function\"==typeof WeakMap&&new WeakMap;i.CHARSTRING=function(a){if(o){var b=o.get(a);if(void 0!==b)return b}for(var c=[],d=a.length,e=0;d>e;e+=1){var f=a[e];c=c.concat(i[f.type](f.value))}return o&&o.set(a,c),c},j.CHARSTRING=function(a){return i.CHARSTRING(a).length},i.OBJECT=function(a){var b=i[a.type];return e.argument(void 0!==b,\"No encoding function for type \"+a.type),b(a.value)},j.OBJECT=function(a){var b=j[a.type];return e.argument(void 0!==b,\"No sizeOf function for type \"+a.type),b(a.value)},i.TABLE=function(a){for(var b=[],c=a.fields.length,d=0;c>d;d+=1){var f=a.fields[d],g=i[f.type];e.argument(void 0!==g,\"No encoding function for field type \"+f.type);var h=a[f.name];void 0===h&&(h=f.value);var j=g(h);b=b.concat(j)}return b},j.TABLE=function(a){for(var b=0,c=a.fields.length,d=0;c>d;d+=1){var f=a.fields[d],g=j[f.type];e.argument(void 0!==g,\"No sizeOf function for field type \"+f.type);var h=a[f.name];void 0===h&&(h=f.value),b+=g(h)}return b},i.LITERAL=function(a){return a},j.LITERAL=function(a){return a.length},c.decode=h,c.encode=i,c.sizeOf=j},{\"./check\":2}],29:[function(_dereq_,module,exports){!function(a,b,c){\"undefined\"!=typeof module&&module.exports?module.exports=c():\"function\"==typeof define&&define.amd?define(c):b[a]=c()}(\"reqwest\",this,function(){function succeed(a){var b=protocolRe.exec(a.url);return b=b&&b[1]||window.location.protocol,httpsRe.test(b)?twoHundo.test(a.request.status):!!a.request.response}function handleReadyState(a,b,c){return function(){return a._aborted?c(a.request):a._timedOut?c(a.request,\"Request is aborted: timeout\"):void(a.request&&4==a.request[readyState]&&(a.request.onreadystatechange=noop,succeed(a)?b(a.request):c(a.request)))}}function setHeaders(a,b){var c,d=b.headers||{};d.Accept=d.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept[\"*\"];var e=\"function\"==typeof FormData&&b.data instanceof FormData;b.crossOrigin||d[requestedWith]||(d[requestedWith]=defaultHeaders.requestedWith),d[contentType]||e||(d[contentType]=b.contentType||defaultHeaders.contentType);for(c in d)d.hasOwnProperty(c)&&\"setRequestHeader\"in a&&a.setRequestHeader(c,d[c])}function setCredentials(a,b){\"undefined\"!=typeof b.withCredentials&&\"undefined\"!=typeof a.withCredentials&&(a.withCredentials=!!b.withCredentials)}function generalCallback(a){lastValue=a}function urlappend(a,b){return a+(/\\?/.test(a)?\"&\":\"?\")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||\"callback\",g=a.jsonpCallbackName||reqwest.getcallbackPrefix(e),h=new RegExp(\"((^|\\\\?|&)\"+f+\")=([^&]+)\"),i=d.match(h),j=doc.createElement(\"script\"),k=0,l=-1!==navigator.userAgent.indexOf(\"MSIE 10.0\");return i?\"?\"===i[3]?d=d.replace(h,\"$1=\"+g):g=i[3]:d=urlappend(d,f+\"=\"+g),win[g]=generalCallback,j.type=\"text/javascript\",j.src=d,j.async=!0,\"undefined\"==typeof j.onreadystatechange||l||(j.htmlFor=j.id=\"_reqwest_\"+e),j.onload=j.onreadystatechange=function(){return j[readyState]&&\"complete\"!==j[readyState]&&\"loaded\"!==j[readyState]||k?!1:(j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),b(lastValue),lastValue=void 0,head.removeChild(j),void(k=1))},head.appendChild(j),{abort:function(){j.onload=j.onreadystatechange=null,c({},\"Request is aborted: timeout\",{}),lastValue=void 0,head.removeChild(j),k=1}}}function getRequest(a,b){var c,d=this.o,e=(d.method||\"GET\").toUpperCase(),f=\"string\"==typeof d?d:d.url,g=d.processData!==!1&&d.data&&\"string\"!=typeof d.data?reqwest.toQueryString(d.data):d.data||null,h=!1;return\"jsonp\"!=d.type&&\"GET\"!=e||!g||(f=urlappend(f,g),g=null),\"jsonp\"==d.type?handleJsonp(d,a,b,f):(c=d.xhr&&d.xhr(d)||xhr(d),c.open(e,f,d.async===!1?!1:!0),setHeaders(c,d),setCredentials(c,d),win[xDomainRequest]&&c instanceof win[xDomainRequest]?(c.onload=a,c.onerror=b,c.onprogress=function(){},h=!0):c.onreadystatechange=handleReadyState(this,a,b),d.before&&d.before(c),h?setTimeout(function(){c.send(g)},200):c.send(g),c)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){return a.match(\"json\")?\"json\":a.match(\"javascript\")?\"js\":a.match(\"text\")?\"html\":a.match(\"xml\")?\"xml\":void 0}function init(o,fn){function complete(a){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(a)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader(\"Content-Type\"));resp=\"jsonp\"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case\"json\":try{resp=win.JSON?win.JSON.parse(r):eval(\"(\"+r+\")\")}catch(err){return error(resp,\"Could not parse JSON in response\",err)}break;case\"js\":resp=eval(r);break;case\"html\":resp=r;break;case\"xml\":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(a,b,c){for(a=self.request,self._responseArgs.resp=a,self._responseArgs.msg=b,self._responseArgs.t=c,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(a,b,c);complete(a)}this.url=\"string\"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\\r?\\n/g,\"\\r\\n\"):\"\"}function serial(a,b){var c,d,e,f,g=a.name,h=a.tagName.toLowerCase(),i=function(a){a&&!a.disabled&&b(g,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(!a.disabled&&g)switch(h){case\"input\":/reset|button|image|file/i.test(a.type)||(c=/checkbox/i.test(a.type),d=/radio/i.test(a.type),e=a.value,(!(c||d)||a.checked)&&b(g,normalize(c&&\"\"===e?\"on\":e)));break;case\"textarea\":b(g,normalize(a.value));break;case\"select\":if(\"select-one\"===a.type.toLowerCase())i(a.selectedIndex>=0?a.options[a.selectedIndex]:null);else for(f=0;a.length&&f<a.length;f++)a.options[f].selected&&i(a.options[f])}}function eachFormElement(){var a,b,c=this,d=function(a,b){var d,e,f;for(d=0;d<b.length;d++)for(f=a[byTag](b[d]),e=0;e<f.length;e++)serial(f[e],c)};for(b=0;b<arguments.length;b++)a=arguments[b],/input|select|textarea/i.test(a.tagName)&&serial(a,c),d(a,[\"input\",\"select\",\"textarea\"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}function buildParams(a,b,c,d){var e,f,g,h=/\\[\\]$/;if(isArray(b))for(f=0;b&&f<b.length;f++)g=b[f],c||h.test(a)?d(a,g):buildParams(a+\"[\"+(\"object\"==typeof g?f:\"\")+\"]\",g,c,d);else if(b&&\"[object Object]\"===b.toString())for(e in b)buildParams(a+\"[\"+e+\"]\",b[e],c,d);else d(a,b)}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\\w+):\\/\\//,twoHundo=/^(20\\d|1223)$/,byTag=\"getElementsByTagName\",readyState=\"readyState\",contentType=\"Content-Type\",requestedWith=\"X-Requested-With\",head=doc[byTag](\"head\")[0],uniqid=0,callbackPrefix=\"reqwest_\"+ +new Date,lastValue,xmlHttpRequest=\"XMLHttpRequest\",xDomainRequest=\"XDomainRequest\",noop=function(){},isArray=\"function\"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:\"application/x-www-form-urlencoded\",requestedWith:xmlHttpRequest,accept:{\"*\":\"text/javascript, text/html, application/xml, text/xml, */*\",xml:\"application/xml, text/xml\",html:\"text/html\",text:\"text/plain\",json:\"application/json, text/javascript\",js:\"application/javascript, text/javascript\"}},xhr=function(a){if(a.crossOrigin===!0){var b=win[xmlHttpRequest]?new XMLHttpRequest:null;if(b&&\"withCredentials\"in b)return b;if(win[xDomainRequest])return new XDomainRequest;throw new Error(\"Browser does not support cross-origin requests\")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject(\"Microsoft.XMLHTTP\")},globalSetupOptions={dataFilter:function(a){return a}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(a,b){return a=a||function(){},b=b||function(){},this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b)),this},always:function(a){return this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a),this},fail:function(a){return this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a),this},\"catch\":function(a){return this.fail(a)}},reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(0===arguments.length)return\"\";var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),b=\"map\"==a?serializeHash:\"array\"==a?reqwest.serializeArray:serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a,b){var c,d,e=b||!1,f=[],g=encodeURIComponent,h=function(a,b){b=\"function\"==typeof b?b():null==b?\"\":b,f[f.length]=g(a)+\"=\"+g(b)};if(isArray(a))for(d=0;a&&d<a.length;d++)h(a[d].name,a[d].value);else for(c in a)a.hasOwnProperty(c)&&buildParams(c,a[c],e,h);return f.join(\"&\").replace(/%20/g,\"+\")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest.ajaxSetup=function(a){a=a||{};for(var b in a)globalSetupOptions[b]=a[b];\n},reqwest})},{}],30:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");a(\"./p5.Geometry3D\"),d.prototype.plane=function(a,b){a=a||50,b=b||50;var c=typeof arguments[2]===Number?arguments[2]:1,e=typeof arguments[3]===Number?arguments[3]:1,f=\"plane|\"+a+\"|\"+b+\"|\"+c+\"|\"+e;if(!this._renderer.geometryInHash(f)){var g=new d.Geometry3D,h=function(c,e){var f=2*a*c-a,g=2*b*e-b,h=0;return new d.Vector(f,g,h)};g.parametricGeometry(h,c,e);var i=g.generateObj();this._renderer.initBuffer(f,[i])}this._renderer.drawBuffer(f)},d.prototype.sphere=function(a,b){a=a||50;var c=b||24,e=b||16,f=\"sphere|\"+a+\"|\"+c+\"|\"+e;if(!this._renderer.geometryInHash(f)){var g=new d.Geometry3D,h=function(b,c){var e=2*Math.PI*b,f=Math.PI*c-Math.PI/2,g=a*Math.cos(f)*Math.sin(e),h=a*Math.sin(f),i=a*Math.cos(f)*Math.cos(e);return new d.Vector(g,h,i)};g.parametricGeometry(h,c,e);var i=g.generateObj(!0,!0);this._renderer.initBuffer(f,[i])}return this._renderer.drawBuffer(f),this},d.prototype.ellipsoid=function(a,b,c,e){a=a||50,b=b||50,c=c||50;var f=e||24,g=e||24,h=\"ellipsoid|\"+a+\"|\"+b+\"|\"+c+\"|\"+f+\"|\"+g;if(!this._renderer.geometryInHash(h)){var i=new d.Geometry3D,j=function(e,f){var g=2*Math.PI*e,h=Math.PI*f-Math.PI/2,i=a*Math.cos(h)*Math.sin(g),j=b*Math.sin(h),k=c*Math.cos(h)*Math.cos(g);return new d.Vector(i,j,k)};i.parametricGeometry(j,f,g);var k=i.generateObj(!0,!0);this._renderer.initBuffer(h,[k])}return this._renderer.drawBuffer(h),this},d.prototype.cylinder=function(a,b,c){a=a||50,b=b||50;var e=c||24,f=c||16,g=\"cylinder|\"+a+\"|\"+b+\"|\"+e+\"|\"+f;if(!this._renderer.geometryInHash(g)){var h=new d.Geometry3D,i=function(c,e){var f=2*Math.PI*c,g=a*Math.sin(f),h=2*b*e-b,i=a*Math.cos(f);return new d.Vector(g,h,i)};h.parametricGeometry(i,e,f);var j=h.generateObj(!0),k=function(c,e){var f=2*Math.PI*c,g=a*Math.sin(-f),h=b,i=a*Math.cos(f);return 0===e?new d.Vector(0,b,0):new d.Vector(g,h,i)},l=new d.Geometry3D;l.parametricGeometry(k,e,1);var m=l.generateObj(),n=function(c,e){var f=2*Math.PI*c,g=a*Math.sin(f),h=-b,i=a*Math.cos(f);return 0===e?new d.Vector(0,-b,0):new d.Vector(g,h,i)},o=new d.Geometry3D;o.parametricGeometry(n,e,1);var p=o.generateObj();this._renderer.initBuffer(g,[j,m,p])}return this._renderer.drawBuffer(g),this},d.prototype.cone=function(a,b,c){a=a||50,b=b||50;var e=c||24,f=c||16,g=\"cone|\"+a+\"|\"+b+\"|\"+e+\"|\"+f;if(!this._renderer.geometryInHash(g)){var h=new d.Geometry3D,i=function(c,e){var f=2*Math.PI*c,g=a*(1-e)*Math.sin(f),h=2*b*e-b,i=a*(1-e)*Math.cos(f);return new d.Vector(g,h,i)};h.parametricGeometry(i,e,f);var j=h.generateObj(!0),k=new d.Geometry3D,l=function(c,e){var f=2*Math.PI*c,g=a*(1-e)*Math.sin(-f),h=-b,i=a*(1-e)*Math.cos(f);return new d.Vector(g,h,i)};k.parametricGeometry(l,e,1);var m=k.generateObj();this._renderer.initBuffer(g,[j,m])}return this._renderer.drawBuffer(g),this},d.prototype.torus=function(a,b,c){a=a||50,b=b||10;var e=c||24,f=c||16,g=\"torus|\"+a+\"|\"+b+\"|\"+e+\"|\"+f;if(!this._renderer.geometryInHash(g)){var h=new d.Geometry3D,i=function(c,e){var f=2*Math.PI*c,g=2*Math.PI*e,h=(a+b*Math.cos(g))*Math.cos(f),i=(a+b*Math.cos(g))*Math.sin(f),j=b*Math.sin(g);return new d.Vector(h,i,j)};h.parametricGeometry(i,e,f);var j=h.generateObj(!0);this._renderer.initBuffer(g,[j])}return this._renderer.drawBuffer(g),this},d.prototype.box=function(a,b,c){a=a||50,b=b||a,c=c||a;var e=typeof arguments[3]===Number?arguments[3]:1,f=typeof arguments[4]===Number?arguments[4]:1,g=\"cube|\"+a+\"|\"+b+\"|\"+c+\"|\"+e+\"|\"+f;if(!this._renderer.geometryInHash(g)){var h=new d.Geometry3D,i=function(e,f){var g=2*a*e-a,h=2*b*f-b,i=c;return new d.Vector(g,h,i)},j=function(e,f){var g=2*a*(1-e)-a,h=2*b*f-b,i=-c;return new d.Vector(g,h,i)},k=function(e,f){var g=2*a*(1-e)-a,h=b,i=2*c*f-c;return new d.Vector(g,h,i)},l=function(e,f){var g=2*a*e-a,h=-b,i=2*c*f-c;return new d.Vector(g,h,i)},m=function(e,f){var g=a,h=2*b*e-b,i=2*c*f-c;return new d.Vector(g,h,i)},n=function(e,f){var g=-a,h=2*b*(1-e)-b,i=2*c*f-c;return new d.Vector(g,h,i)};h.parametricGeometry(i,e,f,h.vertices.length),h.parametricGeometry(j,e,f,h.vertices.length),h.parametricGeometry(k,e,f,h.vertices.length),h.parametricGeometry(l,e,f,h.vertices.length),h.parametricGeometry(m,e,f,h.vertices.length),h.parametricGeometry(n,e,f,h.vertices.length);var o=h.generateObj();this._renderer.initBuffer(g,[o])}return this._renderer.drawBuffer(g),this},b.exports=d},{\"../core/core\":50,\"./p5.Geometry3D\":36}],31:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.camera=function(a,b,c){for(var d=new Array(arguments.length),e=0;e<d.length;++e)d[e]=arguments[e];this._validateParameters(\"camera\",d,[\"Number\",\"Number\",\"Number\"]),this._renderer.translate(-a,-b,-c)},d.prototype.perspective=function(a,b,c,e){for(var f=new Array(arguments.length),g=0;g<f.length;++g)f[g]=arguments[g];this._validateParameters(\"perspective\",f,[\"Number\",\"Number\",\"Number\",\"Number\"]),this._renderer.uPMatrix=d.Matrix.identity(),this._renderer.uPMatrix.perspective(a,b,c,e),this._renderer._setCamera=!0},d.prototype.ortho=function(a,b,c,e,f,g){for(var h=new Array(arguments.length),i=0;i<h.length;++i)h[i]=arguments[i];this._validateParameters(\"ortho\",h,[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]),a/=this.width,b/=this.width,e/=this.height,c/=this.height,this._renderer.uPMatrix=d.Matrix.identity(),this._renderer.uPMatrix.ortho(a,b,c,e,f,g),this._renderer._setCamera=!0},b.exports=d},{\"../core/core\":50}],32:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.Renderer3D.prototype._primitives2D=function(a){this._setDefaultCamera();var b=this.GL,c=this._getColorVertexShader(),d=this.verticeBuffer;b.bindBuffer(b.ARRAY_BUFFER,d),b.bufferData(b.ARRAY_BUFFER,new Float32Array(a),b.STATIC_DRAW),b.vertexAttribPointer(c.vertexPositionAttribute,3,b.FLOAT,!1,0,0);var e=this.colorBuffer;b.bindBuffer(b.ARRAY_BUFFER,e);for(var f=this._getCurColor(),g=[],h=0;h<a.length/3;h++)g=g.concat(f);b.bufferData(b.ARRAY_BUFFER,new Float32Array(g),b.STATIC_DRAW),b.vertexAttribPointer(c.vertexColorAttribute,4,b.FLOAT,!1,0,0);var i=\"vertexColorVert|vertexColorFrag\";this.setMatrixUniforms(i)},d.Renderer3D.prototype.point=function(a,b,c){var d=this.GL;return this._primitives2D([a,b,c]),d.drawArrays(d.POINTS,0,1),this},d.Renderer3D.prototype.line=function(a,b,c,d,e,f){var g=this.GL;return this._primitives2D([a,b,c,d,e,f]),g.drawArrays(g.LINES,0,2),this},d.Renderer3D.prototype.triangle=function(a,b,c,d,e,f,g,h,i){var j=this.GL;return this._primitives2D([a,b,c,d,e,f,g,h,i]),this._strokeCheck(),j.drawArrays(j.TRIANGLES,0,3),this},d.Renderer3D.prototype.quad=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=this.GL;return this._primitives2D([a,b,c,d,e,f,g,h,i,j,k,l]),this._strokeCheck(),m.drawArrays(m.TRIANGLE_STRIP,0,4),this},d.Renderer3D.prototype.beginShape=function(a){return this.shapeMode=a,this.verticeStack=[],this},d.Renderer3D.prototype.vertex=function(a,b,c){return this.verticeStack.push(a,b,c),this},d.Renderer3D.prototype.endShape=function(){var a=this.GL;switch(this._primitives2D(this.verticeStack),this.verticeStack=[],this.shapeMode){case\"POINTS\":a.drawArrays(a.POINTS,0,1);break;case\"LINES\":a.drawArrays(a.LINES,0,2);break;case\"TRIANGLES\":this._strokeCheck(),a.drawArrays(a.TRIANGLES,0,3);break;case\"TRIANGLE_STRIP\":this._strokeCheck(),a.drawArrays(a.TRIANGLE_STRIP,0,4);break;default:this._strokeCheck(),a.drawArrays(a.TRIANGLES,0,3)}return this},d.Renderer3D.prototype._strokeCheck=function(){if(\"stroke\"===this.drawMode)throw new Error(\"stroke for shapes in 3D not yet implemented, use fill for now :(\")},d.Renderer3D.prototype.strokeWeight=function(){throw new Error(\"strokeWeight for 3d not yet implemented\")},d.Renderer3D.prototype.fill=function(a,b,c,d){var e=this._pInst.color.apply(this._pInst,arguments),f=e._array;return this.curColor=f,this.drawMode=\"fill\",this},d.Renderer3D.prototype.stroke=function(a,b,c,d){var e=this._pInst.color.apply(this._pInst,arguments),f=e._array;return this.curColor=f,this.drawMode=\"stroke\",this},d.Renderer3D.prototype._getColorVertexShader=function(){var a,b=this.GL,c=\"vertexColorVert|vertexColorFrag\";return this.materialInHash(c)?a=this.mHash[c]:(a=this.initShaders(\"vertexColorVert\",\"vertexColorFrag\",!0),this.mHash[c]=a,a.vertexColorAttribute=b.getAttribLocation(a,\"aVertexColor\"),b.enableVertexAttribArray(a.vertexColorAttribute)),a},b.exports=d.Renderer3D},{\"../core/core\":50}],33:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.orbitControl=function(){return this.mouseIsPressed&&(this.rotateY((this.mouseX-this.width/2)/(this.width/2)),this.rotateX((this.mouseY-this.height/2)/(this.width/2))),this},b.exports=d},{\"../core/core\":50}],34:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.ambientLight=function(a,b,c,d){var e=this._renderer.GL,f=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");e.useProgram(f),f.uAmbientColor=e.getUniformLocation(f,\"uAmbientColor[\"+this._renderer.ambientLightCount+\"]\");var g=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),h=g._array;return e.uniform3f(f.uAmbientColor,h[0],h[1],h[2]),f.uMaterialColor=e.getUniformLocation(f,\"uMaterialColor\"),e.uniform4f(f.uMaterialColor,1,1,1,1),this._renderer.ambientLightCount++,f.uAmbientLightCount=e.getUniformLocation(f,\"uAmbientLightCount\"),e.uniform1i(f.uAmbientLightCount,this._renderer.ambientLightCount),this},d.prototype.directionalLight=function(a,b,c,d,e,f,g){var h=this._renderer.GL,i=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");h.useProgram(i),i.uDirectionalColor=h.getUniformLocation(i,\"uDirectionalColor[\"+this._renderer.directionalLightCount+\"]\");var j=this._renderer._pInst.color.apply(this._renderer._pInst,[a,b,c]),k=j._array;h.uniform3f(i.uDirectionalColor,k[0],k[1],k[2]);var l,m,n;if(\"number\"==typeof arguments[arguments.length-1])l=arguments[arguments.length-3],m=arguments[arguments.length-2],n=arguments[arguments.length-1];else try{l=arguments[arguments.length-1].x,m=arguments[arguments.length-1].y,n=arguments[arguments.length-1].z}catch(o){throw o}return i.uLightingDirection=h.getUniformLocation(i,\"uLightingDirection[\"+this._renderer.directionalLightCount+\"]\"),h.uniform3f(i.uLightingDirection,l,m,n),i.uMaterialColor=h.getUniformLocation(i,\"uMaterialColor\"),h.uniform4f(i.uMaterialColor,1,1,1,1),this._renderer.directionalLightCount++,i.uDirectionalLightCount=h.getUniformLocation(i,\"uDirectionalLightCount\"),h.uniform1i(i.uDirectionalLightCount,this._renderer.directionalLightCount),this},d.prototype.pointLight=function(a,b,c,d,e,f,g){var h=this._renderer.GL,i=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");h.useProgram(i),i.uPointLightColor=h.getUniformLocation(i,\"uPointLightColor[\"+this._renderer.pointLightCount+\"]\");var j=this._renderer._pInst.color.apply(this._renderer._pInst,[a,b,c]),k=j._array;h.uniform3f(i.uPointLightColor,k[0],k[1],k[2]);var l,m,n;if(\"number\"==typeof arguments[arguments.length-1])l=arguments[arguments.length-3],m=arguments[arguments.length-2],n=arguments[arguments.length-1];else try{l=arguments[arguments.length-1].x,m=arguments[arguments.length-1].y,n=arguments[arguments.length-1].z}catch(o){throw o}return i.uPointLightLocation=h.getUniformLocation(i,\"uPointLightLocation[\"+this._renderer.pointLightCount+\"]\"),h.uniform3f(i.uPointLightLocation,l,m,n),i.uMaterialColor=h.getUniformLocation(i,\"uMaterialColor\"),h.uniform4f(i.uMaterialColor,1,1,1,1),this._renderer.pointLightCount++,i.uPointLightCount=h.getUniformLocation(i,\"uPointLightCount\"),h.uniform1i(i.uPointLightCount,this._renderer.pointLightCount),this},b.exports=d},{\"../core/core\":50}],35:[function(a,b,c){\"use strict\";function d(a){return 0===(a&a-1)}var e=a(\"../core/core\");e.prototype.normalMaterial=function(){return this._renderer._getShader(\"normalVert\",\"normalFrag\"),this},e.prototype.texture=function(a){var b=this._renderer.GL,c=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");if(b.useProgram(c),a instanceof e.Image){if(!a.isTexture){var f=b.createTexture();a.createTexture(f),b.bindTexture(b.TEXTURE_2D,f),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,1),a._setProperty(\"isTexture\",!0)}a.loadPixels();var g=new Uint8Array(a.pixels);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,a.width,a.height,0,b.RGBA,b.UNSIGNED_BYTE,g)}else if(a instanceof e.MediaElement){if(!a.loadedmetadata)return;b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a.elt)}return d(a.width)&&d(a.height)?b.generateMipmap(b.TEXTURE_2D):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE)),b.uniform1i(b.getUniformLocation(c,\"uSampler\"),0),b.uniform1i(b.getUniformLocation(c,\"isTexture\"),!0),this},e.prototype.basicMaterial=function(a,b,c,d){var e=this._renderer.GL,f=this._renderer._getShader(\"normalVert\",\"basicFrag\");e.useProgram(f),f.uMaterialColor=e.getUniformLocation(f,\"uMaterialColor\");var g=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),h=g._array;return e.uniform4f(f.uMaterialColor,h[0],h[1],h[2],h[3]),this},e.prototype.ambientMaterial=function(a,b,c,d){var e=this._renderer.GL,f=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");e.useProgram(f),f.uMaterialColor=e.getUniformLocation(f,\"uMaterialColor\");var g=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),h=g._array;return e.uniform4f(f.uMaterialColor,h[0],h[1],h[2],h[3]),f.uSpecular=e.getUniformLocation(f,\"uSpecular\"),e.uniform1i(f.uSpecular,!1),e.uniform1i(e.getUniformLocation(f,\"isTexture\"),!1),this},e.prototype.specularMaterial=function(a,b,c,d){var e=this._renderer.GL,f=this._renderer._getShader(\"lightVert\",\"lightTextureFrag\");e.uniform1i(e.getUniformLocation(f,\"isTexture\"),!1),e.useProgram(f),f.uMaterialColor=e.getUniformLocation(f,\"uMaterialColor\");var g=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),h=g._array;return e.uniform4f(f.uMaterialColor,h[0],h[1],h[2],h[3]),f.uSpecular=e.getUniformLocation(f,\"uSpecular\"),e.uniform1i(f.uSpecular,!0),this},b.exports=e},{\"../core/core\":50}],36:[function(a,b,c){\"use strict\";function d(a){return a.reduce(function(a,b){return a.concat(b)})}function e(a){return d(a.map(function(a){return[a.x,a.y,a.z]}))}var f=a(\"../core/core\");f.Geometry3D=function(){this.vertices=[],this.vertexNormals=[],this.faces=[],this.faceNormals=[],this.uvs=[]},f.Geometry3D.prototype.parametricGeometry=function(a,b,c,d){var e,f,g,h,i;d=d||0,this.detailX=b,this.detailY=c;var j=b+1;for(e=0;c>=e;e++)for(i=e/c,f=0;b>=f;f++)h=f/b,g=a(h,i),this.vertices.push(g);var k,l,m,n,o,p,q,r;for(e=0;c>e;e++)for(f=0;b>f;f++)k=e*j+f+d,l=e*j+f+1+d,m=(e+1)*j+f+1+d,n=(e+1)*j+f+d,o=[f/b,e/c],p=[(f+1)/b,e/c],q=[(f+1)/b,(e+1)/c],r=[f/b,(e+1)/c],this.faces.push([k,l,n]),this.uvs.push([o,p,r]),this.faces.push([l,m,n]),this.uvs.push([p,q,r])},f.Geometry3D.prototype.computeFaceNormals=function(){for(var a=new f.Vector,b=new f.Vector,c=0;c<this.faces.length;c++){var d=this.faces[c],e=this.vertices[d[0]],g=this.vertices[d[1]],h=this.vertices[d[2]];f.Vector.sub(h,g,a),f.Vector.sub(e,g,b);var i=f.Vector.cross(b,a);i.normalize(),i.mult(-1),this.faceNormals[c]=i}},f.Geometry3D.prototype.computeVertexNormals=function(){var a,b,c,d,e,g=[];for(e=new Array(this.vertices.length),a=0;a<this.vertices.length;a++)e[a]=new f.Vector;for(b=0;b<this.faces.length;b++)c=this.faces[b],d=this.faceNormals[b],e[c[0]].add(d),e[c[1]].add(d),e[c[2]].add(d);for(a=0;a<this.vertices.length;a++)e[a].normalize();for(b=0;b<this.faces.length;b++)c=this.faces[b],g[b]=[],g[b][0]=e[c[0]].copy(),g[b][1]=e[c[1]].copy(),g[b][2]=e[c[2]].copy();for(b=0;b<this.faces.length;b++)c=this.faces[b],d=this.faceNormals[b],this.vertexNormals[c[0]]=g[b][0],this.vertexNormals[c[1]]=g[b][1],this.vertexNormals[c[2]]=g[b][2]},f.Geometry3D.prototype.averageNormals=function(){for(var a=0;a<=this.detailY;a++){var b=this.detailX+1,c=f.Vector.add(this.vertexNormals[a*b],this.vertexNormals[a*b+this.detailX]);c=f.Vector.div(c,2),this.vertexNormals[a*b]=c,this.vertexNormals[a*b+this.detailX]=c}},f.Geometry3D.prototype.averagePoleNormals=function(){for(var a=new f.Vector(0,0,0),b=0;b<this.detailX;b++)a.add(this.vertexNormals[b]);for(a=f.Vector.div(a,this.detailX),b=0;b<this.detailX;b++)this.vertexNormals[b]=a;for(a=new f.Vector(0,0,0),b=this.vertices.length-1;b>this.vertices.length-1-this.detailX;b--)a.add(this.vertexNormals[b]);for(a=f.Vector.div(a,this.detailX),b=this.vertices.length-1;b>this.vertices.length-1-this.detailX;b--)this.vertexNormals[b]=a},f.Geometry3D.prototype.generateUV=function(a,b){a=d(a),b=d(b);var c=[];return a.forEach(function(a,d){c[a]=b[d]}),d(c)},f.Geometry3D.prototype.generateObj=function(a,b){this.computeFaceNormals(),this.computeVertexNormals(),a&&this.averageNormals(),b&&this.averagePoleNormals();var c={vertices:e(this.vertices),vertexNormals:e(this.vertexNormals),uvs:this.generateUV(this.faces,this.uvs),faces:d(this.faces),len:3*this.faces.length};return c},b.exports=f.Geometry3D},{\"../core/core\":50}],37:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"../math/polargeometry\"),f=a(\"../core/constants\"),g=\"undefined\"!=typeof Float32Array?Float32Array:Array;d.Matrix=function(){return arguments[0]instanceof d?(this.p5=arguments[0],this.mat4=arguments[1]||new g([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])):this.mat4=arguments[0]||new g([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},d.Matrix.prototype.set=function(a){return a instanceof d.Matrix?(this.mat4=a.mat4,this):a instanceof g?(this.mat4=a,this):this},d.Matrix.prototype.get=function(){return new d.Matrix(this.mat4)},d.Matrix.prototype.copy=function(){var a=new d.Matrix;return a.mat4[0]=this.mat4[0],a.mat4[1]=this.mat4[1],a.mat4[2]=this.mat4[2],a.mat4[3]=this.mat4[3],a.mat4[4]=this.mat4[4],a.mat4[5]=this.mat4[5],a.mat4[6]=this.mat4[6],a.mat4[7]=this.mat4[7],a.mat4[8]=this.mat4[8],a.mat4[9]=this.mat4[9],a.mat4[10]=this.mat4[10],a.mat4[11]=this.mat4[11],a.mat4[12]=this.mat4[12],a.mat4[13]=this.mat4[13],a.mat4[14]=this.mat4[14],a.mat4[15]=this.mat4[15],a},d.Matrix.identity=function(){return new d.Matrix},d.Matrix.prototype.transpose=function(a){var b,c,e,f,h,i;return a instanceof d.Matrix?(b=a.mat4[1],c=a.mat4[2],e=a.mat4[3],f=a.mat4[6],h=a.mat4[7],i=a.mat4[11],this.mat4[0]=a.mat4[0],this.mat4[1]=a.mat4[4],this.mat4[2]=a.mat4[8],this.mat4[3]=a.mat4[12],this.mat4[4]=b,this.mat4[5]=a.mat4[5],this.mat4[6]=a.mat4[9],this.mat4[7]=a.mat4[13],this.mat4[8]=c,this.mat4[9]=f,this.mat4[10]=a.mat4[10],this.mat4[11]=a.mat4[14],this.mat4[12]=e,this.mat4[13]=h,this.mat4[14]=i,this.mat4[15]=a.mat4[15]):a instanceof g&&(b=a[1],c=a[2],e=a[3],f=a[6],h=a[7],i=a[11],this.mat4[0]=a[0],this.mat4[1]=a[4],this.mat4[2]=a[8],this.mat4[3]=a[12],this.mat4[4]=b,this.mat4[5]=a[5],this.mat4[6]=a[9],this.mat4[7]=a[13],this.mat4[8]=c,this.mat4[9]=f,this.mat4[10]=a[10],this.mat4[11]=a[14],this.mat4[12]=e,this.mat4[13]=h,this.mat4[14]=i,this.mat4[15]=a[15]),this},d.Matrix.prototype.invert=function(a){var b,c,e,f,h,i,j,k,l,m,n,o,p,q,r,s;a instanceof d.Matrix?(b=a.mat4[0],c=a.mat4[1],e=a.mat4[2],f=a.mat4[3],h=a.mat4[4],i=a.mat4[5],j=a.mat4[6],k=a.mat4[7],l=a.mat4[8],m=a.mat4[9],n=a.mat4[10],o=a.mat4[11],p=a.mat4[12],q=a.mat4[13],r=a.mat4[14],s=a.mat4[15]):a instanceof g&&(b=a[0],c=a[1],e=a[2],f=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],s=a[15]);var t=b*i-c*h,u=b*j-e*h,v=b*k-f*h,w=c*j-e*i,x=c*k-f*i,y=e*k-f*j,z=l*q-m*p,A=l*r-n*p,B=l*s-o*p,C=m*r-n*q,D=m*s-o*q,E=n*s-o*r,F=t*E-u*D+v*C+w*B-x*A+y*z;return F?(F=1/F,this.mat4[0]=(i*E-j*D+k*C)*F,this.mat4[1]=(e*D-c*E-f*C)*F,this.mat4[2]=(q*y-r*x+s*w)*F,this.mat4[3]=(n*x-m*y-o*w)*F,this.mat4[4]=(j*B-h*E-k*A)*F,this.mat4[5]=(b*E-e*B+f*A)*F,this.mat4[6]=(r*v-p*y-s*u)*F,this.mat4[7]=(l*y-n*v+o*u)*F,this.mat4[8]=(h*D-i*B+k*z)*F,this.mat4[9]=(c*B-b*D-f*z)*F,this.mat4[10]=(p*x-q*v+s*t)*F,this.mat4[11]=(m*v-l*x-o*t)*F,this.mat4[12]=(i*A-h*C-j*z)*F,this.mat4[13]=(b*C-c*A+e*z)*F,this.mat4[14]=(q*u-p*w-r*t)*F,this.mat4[15]=(l*w-m*u+n*t)*F,this):null},d.Matrix.prototype.determinant=function(){var a=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],b=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],c=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],d=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],e=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],f=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],g=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],h=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],i=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],j=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],k=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13],l=this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14];return a*l-b*k+c*j+d*i-e*h+f*g},d.Matrix.prototype.mult=function(a){var b=new g(16),c=new g(16);a instanceof d.Matrix?c=a.mat4:a instanceof g&&(c=a);var e=this.mat4[0],f=this.mat4[1],h=this.mat4[2],i=this.mat4[3];return b[0]=e*c[0]+f*c[4]+h*c[8]+i*c[12],b[1]=e*c[1]+f*c[5]+h*c[9]+i*c[13],b[2]=e*c[2]+f*c[6]+h*c[10]+i*c[14],b[3]=e*c[3]+f*c[7]+h*c[11]+i*c[15],e=this.mat4[4],f=this.mat4[5],h=this.mat4[6],i=this.mat4[7],b[4]=e*c[0]+f*c[4]+h*c[8]+i*c[12],b[5]=e*c[1]+f*c[5]+h*c[9]+i*c[13],b[6]=e*c[2]+f*c[6]+h*c[10]+i*c[14],b[7]=e*c[3]+f*c[7]+h*c[11]+i*c[15],e=this.mat4[8],f=this.mat4[9],h=this.mat4[10],i=this.mat4[11],b[8]=e*c[0]+f*c[4]+h*c[8]+i*c[12],b[9]=e*c[1]+f*c[5]+h*c[9]+i*c[13],b[10]=e*c[2]+f*c[6]+h*c[10]+i*c[14],b[11]=e*c[3]+f*c[7]+h*c[11]+i*c[15],e=this.mat4[12],f=this.mat4[13],h=this.mat4[14],i=this.mat4[15],b[12]=e*c[0]+f*c[4]+h*c[8]+i*c[12],b[13]=e*c[1]+f*c[5]+h*c[9]+i*c[13],b[14]=e*c[2]+f*c[6]+h*c[10]+i*c[14],b[15]=e*c[3]+f*c[7]+h*c[11]+i*c[15],this.mat4=b,this},d.Matrix.prototype.scale=function(){for(var a,b,c,e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];e[0]instanceof d.Vector?(a=e[0].x,b=e[0].y,c=e[0].z):e[0]instanceof Array&&(a=e[0][0],b=e[0][1],c=e[0][2]);var h=new g(16);return h[0]=this.mat4[0]*a,h[1]=this.mat4[1]*a,h[2]=this.mat4[2]*a,h[3]=this.mat4[3]*a,h[4]=this.mat4[4]*b,h[5]=this.mat4[5]*b,h[6]=this.mat4[6]*b,h[7]=this.mat4[7]*b,h[8]=this.mat4[8]*c,h[9]=this.mat4[9]*c,h[10]=this.mat4[10]*c,h[11]=this.mat4[11]*c,h[12]=this.mat4[12],h[13]=this.mat4[13],h[14]=this.mat4[14],h[15]=this.mat4[15],this.mat4=h,this},d.Matrix.prototype.rotate=function(a,b){var c,g,h,i,j;this.p5?this.p5._angleMode===f.DEGREES&&(i=e.degreesToRadians(a)):i=a,b instanceof d.Vector?(c=b.x,g=b.y,h=b.z):b instanceof Array&&(c=b[0],g=b[1],h=b[2]),j=Math.sqrt(c*c+g*g+h*h),c*=1/j,g*=1/j,h*=1/j;var k=this.mat4[0],l=this.mat4[1],m=this.mat4[2],n=this.mat4[3],o=this.mat4[4],p=this.mat4[5],q=this.mat4[6],r=this.mat4[7],s=this.mat4[8],t=this.mat4[9],u=this.mat4[10],v=this.mat4[11],w=Math.sin(i),x=Math.cos(i),y=1-x,z=c*c*y+x,A=g*c*y+h*w,B=h*c*y-g*w,C=c*g*y-h*w,D=g*g*y+x,E=h*g*y+c*w,F=c*h*y+g*w,G=g*h*y-c*w,H=h*h*y+x;return this.mat4[0]=k*z+o*A+s*B,this.mat4[1]=l*z+p*A+t*B,this.mat4[2]=m*z+q*A+u*B,this.mat4[3]=n*z+r*A+v*B,this.mat4[4]=k*C+o*D+s*E,this.mat4[5]=l*C+p*D+t*E,this.mat4[6]=m*C+q*D+u*E,this.mat4[7]=n*C+r*D+v*E,this.mat4[8]=k*F+o*G+s*H,this.mat4[9]=l*F+p*G+t*H,this.mat4[10]=m*F+q*G+u*H,this.mat4[11]=n*F+r*G+v*H,this},d.Matrix.prototype.translate=function(a){var b=a[0],c=a[1],d=a[2]||0;this.mat4[12]=this.mat4[0]*b+this.mat4[4]*c+this.mat4[8]*d+this.mat4[12],this.mat4[13]=this.mat4[1]*b+this.mat4[5]*c+this.mat4[9]*d+this.mat4[13],this.mat4[14]=this.mat4[2]*b+this.mat4[6]*c+this.mat4[10]*d+this.mat4[14],this.mat4[15]=this.mat4[3]*b+this.mat4[7]*c+this.mat4[11]*d+this.mat4[15]},d.Matrix.prototype.rotateX=function(a){this.rotate(a,[1,0,0])},d.Matrix.prototype.rotateY=function(a){this.rotate(a,[0,1,0])},d.Matrix.prototype.rotateZ=function(a){this.rotate(a,[0,0,1])},d.Matrix.prototype.perspective=function(a,b,c,d){var e=1/Math.tan(a/2),f=1/(c-d);return this.mat4[0]=e/b,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=e,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(d+c)*f,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*d*c*f,this.mat4[15]=0,this},d.Matrix.prototype.ortho=function(a,b,c,d,e,f){var g=1/(a-b),h=1/(c-d),i=1/(e-f);return this.mat4[0]=-2*g,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*h,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*i,this.mat4[11]=0,this.mat4[12]=(a+b)*g,this.mat4[13]=(d+c)*h,this.mat4[14]=(f+e)*i,this.mat4[15]=1,this},b.exports=d.Matrix},{\"../core/constants\":49,\"../core/core\":50,\"../math/polargeometry\":79}],38:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"./shader\");a(\"../core/p5.Renderer\"),a(\"./p5.Matrix\");var f=[],g=1e3,h={alpha:!0,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};d.Renderer3D=function(a,b,c){d.Renderer.call(this,a,b,c);try{if(this.drawingContext=this.canvas.getContext(\"webgl\",h)||this.canvas.getContext(\"experimental-webgl\",h),null===this.drawingContext)throw new Error(\"Error creating webgl context\");console.log(\"p5.Renderer3D: enabled webgl context\")}catch(e){throw new Error(e)}this.isP3D=!0,this.GL=this.drawingContext;var f=this.GL;return f.clearColor(1,1,1,1),f.clearDepth(1),f.enable(f.DEPTH_TEST),f.depthFunc(f.LEQUAL),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT),f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),this._init(),this},d.Renderer3D.prototype=Object.create(d.Renderer.prototype),d.Renderer3D.prototype._applyDefaults=function(){return this},d.Renderer3D.prototype._init=function(a){var b=this.GL;this.initMatrix(),this.initHash(),this.verticeStack=[],this.verticeBuffer=b.createBuffer(),this.colorBuffer=b.createBuffer(),this._setCamera=!1,this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0},d.Renderer3D.prototype._update=function(){this.resetMatrix(),this.translate(0,0,-800),this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0,this.verticeStack=[]},d.Renderer3D.prototype.resize=function(a,b){var c=this.GL;d.Renderer.prototype.resize.call(this,a,b),c.viewport(0,0,c.drawingBufferWidth,c.drawingBufferHeight)},d.Renderer3D.prototype.background=function(){var a=this.GL,b=this._pInst.color.apply(this._pInst,arguments),c=b.levels[0]/255,d=b.levels[1]/255,e=b.levels[2]/255,f=b.levels[3]/255;a.clearColor(c,d,e,f),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},d.Renderer3D.prototype.initShaders=function(a,b,c){var d=this.GL,f=d.createShader(d.VERTEX_SHADER);if(d.shaderSource(f,e[a]),d.compileShader(f),!d.getShaderParameter(f,d.COMPILE_STATUS))return alert(\"Yikes! An error occurred compiling the shaders:\"+d.getShaderInfoLog(f)),null;var g=d.createShader(d.FRAGMENT_SHADER);if(d.shaderSource(g,e[b]),d.compileShader(g),!d.getShaderParameter(g,d.COMPILE_STATUS))return alert(\"Darn! An error occurred compiling the shaders:\"+d.getShaderInfoLog(g)),null;var h=d.createProgram();return d.attachShader(h,f),d.attachShader(h,g),d.linkProgram(h),d.getProgramParameter(h,d.LINK_STATUS)||alert(\"Snap! Error linking shader program\"),this._getLocation(h,c),h},d.Renderer3D.prototype._getLocation=function(a,b){var c=this.GL;c.useProgram(a),a.uResolution=c.getUniformLocation(a,\"uResolution\"),c.uniform1f(a.uResolution,g),a.vertexPositionAttribute=c.getAttribLocation(a,\"aPosition\"),c.enableVertexAttribArray(a.vertexPositionAttribute),a.uPMatrixUniform=c.getUniformLocation(a,\"uProjectionMatrix\"),a.uMVMatrixUniform=c.getUniformLocation(a,\"uModelViewMatrix\"),void 0===b&&(a.vertexNormalAttribute=c.getAttribLocation(a,\"aNormal\"),c.enableVertexAttribArray(a.vertexNormalAttribute),a.uNMatrixUniform=c.getUniformLocation(a,\"uNormalMatrix\"),a.textureCoordAttribute=c.getAttribLocation(a,\"aTexCoord\"),c.enableVertexAttribArray(a.textureCoordAttribute),a.samplerUniform=c.getUniformLocation(a,\"uSampler\"))},d.Renderer3D.prototype.setMatrixUniforms=function(a){var b=this.GL,c=this.mHash[a];b.useProgram(c),b.uniformMatrix4fv(c.uPMatrixUniform,!1,this.uPMatrix.mat4),b.uniformMatrix4fv(c.uMVMatrixUniform,!1,this.uMVMatrix.mat4),this.uNMatrix=new d.Matrix,this.uNMatrix.invert(this.uMVMatrix),this.uNMatrix.transpose(this.uNMatrix),b.uniformMatrix4fv(c.uNMatrixUniform,!1,this.uNMatrix.mat4)},d.Renderer3D.prototype._getShader=function(a,b,c){var d=a+\"|\"+b;if(!this.materialInHash(d)){var e=this.initShaders(a,b,c);this.mHash[d]=e}return this.curShaderId=d,this.mHash[this.curShaderId]},d.Renderer3D.prototype._getCurShaderId=function(){if(void 0===this.curShaderId){var a=\"normalVert|normalFrag\",b=this.initShaders(\"normalVert\",\"normalFrag\");this.mHash[a]=b,this.curShaderId=a}return this.curShaderId},d.Renderer3D.prototype._getCurColor=function(){return void 0===this.curColor&&(this.curColor=[.5,.5,.5,1]),this.curColor},d.Renderer3D.prototype.initHash=function(){this.gHash={},this.mHash={}},d.Renderer3D.prototype.geometryInHash=function(a){return void 0!==this.gHash[a]},d.Renderer3D.prototype.materialInHash=function(a){return void 0!==this.mHash[a]},d.Renderer3D.prototype.initMatrix=function(){this.uMVMatrix=new d.Matrix,this.uPMatrix=new d.Matrix,this.uNMatrix=new d.Matrix},d.Renderer3D.prototype.resetMatrix=function(){this.uMVMatrix=d.Matrix.identity()},d.Renderer3D.prototype._setDefaultCamera=function(){if(!this._setCamera){var a=this.width,b=this.height;this.uPMatrix=d.Matrix.identity(),this.uPMatrix.perspective(60/180*Math.PI,a/b,.1,100),this._setCamera=!0}},d.Renderer3D.prototype.translate=function(a,b,c){return a/=g,b=-b/g,c/=g,this.uMVMatrix.translate([a,b,c]),this},d.Renderer3D.prototype.scale=function(a,b,c){return this.uMVMatrix.scale([a,b,c]),this},d.Renderer3D.prototype.rotate=function(a,b){return this.uMVMatrix.rotate(a,b),this},d.Renderer3D.prototype.rotateX=function(a){return this.uMVMatrix.rotateX(a),this},d.Renderer3D.prototype.rotateY=function(a){return this.uMVMatrix.rotateY(a),this},d.Renderer3D.prototype.rotateZ=function(a){return this.uMVMatrix.rotateZ(a),this},d.Renderer3D.prototype.push=function(){f.push(this.uMVMatrix.copy())},d.Renderer3D.prototype.pop=function(){if(0===f.length)throw new Error(\"Invalid popMatrix!\");this.uMVMatrix=f.pop()},b.exports=d.Renderer3D},{\"../core/core\":50,\"../core/p5.Renderer\":56,\"./p5.Matrix\":37,\"./shader\":40}],39:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=0;d.Renderer3D.prototype.createBuffer=function(a,b){if(e++,e>1e3){var c=Object.keys(this.gHash)[0];delete this.gHash[c],e--}var d=this.GL;this.gHash[a]={},this.gHash[a].len=[],this.gHash[a].vertexBuffer=[],this.gHash[a].normalBuffer=[],this.gHash[a].uvBuffer=[],this.gHash[a].indexBuffer=[],b.forEach(function(b){this.gHash[a].len.push(b.len),this.gHash[a].vertexBuffer.push(d.createBuffer()),this.gHash[a].normalBuffer.push(d.createBuffer()),this.gHash[a].uvBuffer.push(d.createBuffer()),this.gHash[a].indexBuffer.push(d.createBuffer())}.bind(this))},d.Renderer3D.prototype.initBuffer=function(a,b){this._setDefaultCamera();var c=this.GL;this.createBuffer(a,b);var d=this.mHash[this._getCurShaderId()];b.forEach(function(b,e){c.bindBuffer(c.ARRAY_BUFFER,this.gHash[a].vertexBuffer[e]),c.bufferData(c.ARRAY_BUFFER,new Float32Array(b.vertices),c.STATIC_DRAW),c.vertexAttribPointer(d.vertexPositionAttribute,3,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this.gHash[a].normalBuffer[e]),c.bufferData(c.ARRAY_BUFFER,new Float32Array(b.vertexNormals),c.STATIC_DRAW),c.vertexAttribPointer(d.vertexNormalAttribute,3,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,this.gHash[a].uvBuffer[e]),c.bufferData(c.ARRAY_BUFFER,new Float32Array(b.uvs),c.STATIC_DRAW),c.vertexAttribPointer(d.textureCoordAttribute,2,c.FLOAT,!1,0,0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.gHash[a].indexBuffer[e]),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(b.faces),c.STATIC_DRAW)}.bind(this))},d.Renderer3D.prototype.drawBuffer=function(a){this._setDefaultCamera();var b=this.GL,c=this._getCurShaderId(),d=this.mHash[c];this.gHash[a].len.forEach(function(e,f){b.bindBuffer(b.ARRAY_BUFFER,this.gHash[a].vertexBuffer[f]),b.vertexAttribPointer(d.vertexPositionAttribute,3,b.FLOAT,!1,0,0),b.bindBuffer(b.ARRAY_BUFFER,this.gHash[a].normalBuffer[f]),b.vertexAttribPointer(d.vertexNormalAttribute,3,b.FLOAT,!1,0,0),\nb.bindBuffer(b.ARRAY_BUFFER,this.gHash[a].uvBuffer[f]),b.vertexAttribPointer(d.textureCoordAttribute,2,b.FLOAT,!1,0,0),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.gHash[a].indexBuffer[f]),this.setMatrixUniforms(c),b.drawElements(b.TRIANGLES,this.gHash[a].len[f],b.UNSIGNED_SHORT,0)}.bind(this))},b.exports=d.Renderer3D},{\"../core/core\":50}],40:[function(a,b,c){b.exports={vertexColorVert:\"attribute vec3 aPosition;\\nattribute vec4 aVertexColor;\\n\\nuniform mat4 uModelViewMatrix;\\nuniform mat4 uProjectionMatrix;\\nuniform float uResolution;\\n\\nvarying vec4 vColor;\\n\\nvoid main(void) {\\n  vec4 positionVec4 = vec4(aPosition / uResolution * vec3(1.0, -1.0, 1.0), 1.0);\\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\\n  vColor = aVertexColor;\\n}\",vertexColorFrag:\"precision mediump float;\\nvarying vec4 vColor;\\nvoid main(void) {\\n  gl_FragColor = vColor;\\n}\",normalVert:\"attribute vec3 aPosition;\\nattribute vec3 aNormal;\\nattribute vec2 aTexCoord;\\n\\nuniform mat4 uModelViewMatrix;\\nuniform mat4 uProjectionMatrix;\\nuniform mat4 uNormalMatrix;\\nuniform float uResolution;\\n\\nvarying vec3 vVertexNormal;\\nvarying highp vec2 vVertTexCoord;\\n\\nvoid main(void) {\\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\\n  vVertexNormal = vec3( uNormalMatrix * vec4( aNormal, 1.0 ) );\\n  vVertTexCoord = aTexCoord;\\n}\",normalFrag:\"precision mediump float;\\nvarying vec3 vVertexNormal;\\nvoid main(void) {\\n  gl_FragColor = vec4(vVertexNormal, 1.0);\\n}\",basicFrag:\"precision mediump float;\\nvarying vec3 vVertexNormal;\\nuniform vec4 uMaterialColor;\\nvoid main(void) {\\n  gl_FragColor = uMaterialColor;\\n}\",lightVert:\"attribute vec3 aPosition;\\nattribute vec3 aNormal;\\nattribute vec2 aTexCoord;\\n\\nuniform mat4 uModelViewMatrix;\\nuniform mat4 uProjectionMatrix;\\nuniform mat4 uNormalMatrix;\\nuniform float uResolution;\\nuniform int uAmbientLightCount;\\nuniform int uDirectionalLightCount;\\nuniform int uPointLightCount;\\n\\nuniform vec3 uAmbientColor[8];\\nuniform vec3 uLightingDirection[8];\\nuniform vec3 uDirectionalColor[8];\\nuniform vec3 uPointLightLocation[8];\\nuniform vec3 uPointLightColor[8];\\nuniform bool uSpecular;\\n\\nvarying vec3 vVertexNormal;\\nvarying vec2 vVertTexCoord;\\nvarying vec3 vLightWeighting;\\n\\nvec3 ambientLightFactor = vec3(0.0, 0.0, 0.0);\\nvec3 directionalLightFactor = vec3(0.0, 0.0, 0.0);\\nvec3 pointLightFactor = vec3(0.0, 0.0, 0.0);\\nvec3 pointLightFactor2 = vec3(0.0, 0.0, 0.0);\\n\\nvoid main(void){\\n\\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\\n\\n  vec3 vertexNormal = vec3( uNormalMatrix * vec4( aNormal, 1.0 ) );\\n  vVertexNormal = vertexNormal;\\n  vVertTexCoord = aTexCoord;\\n\\n  vec4 mvPosition = uModelViewMatrix * vec4(aPosition / uResolution, 1.0);\\n  vec3 eyeDirection = normalize(-mvPosition.xyz);\\n\\n  float shininess = 32.0;\\n  float specularFactor = 2.0;\\n  float diffuseFactor = 0.3;\\n\\n  for(int i = 0; i < 8; i++){\\n    if(uAmbientLightCount == i) break;\\n    ambientLightFactor += uAmbientColor[i];\\n  }\\n\\n  for(int j = 0; j < 8; j++){\\n    if(uDirectionalLightCount == j) break;\\n    vec3 dir = uLightingDirection[j];\\n    float directionalLightWeighting = max(dot(vertexNormal, dir), 0.0);\\n    directionalLightFactor += uDirectionalColor[j] * directionalLightWeighting;\\n  }\\n\\n  for(int k = 0; k < 8; k++){\\n    if(uPointLightCount == k) break;\\n    vec3 loc = uPointLightLocation[k];\\n    //loc = loc / uResolution;\\n    vec3 lightDirection = normalize(loc - mvPosition.xyz);\\n\\n    float directionalLightWeighting = max(dot(vertexNormal, lightDirection), 0.0);\\n    pointLightFactor += uPointLightColor[k] * directionalLightWeighting;\\n\\n    //factor2 for specular\\n    vec3 reflectionDirection = reflect(-lightDirection, vertexNormal);\\n    float specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\\n\\n    pointLightFactor2 += uPointLightColor[k] * (specularFactor * specularLightWeighting\\n      +  directionalLightWeighting * diffuseFactor);\\n  }\\n  \\n  if(!uSpecular){\\n    vLightWeighting =  ambientLightFactor + directionalLightFactor + pointLightFactor;\\n  }else{\\n    vLightWeighting = ambientLightFactor + directionalLightFactor + pointLightFactor2;\\n  }\\n\\n}\",lightTextureFrag:\"precision mediump float;\\n\\nuniform vec4 uMaterialColor;\\nuniform sampler2D uSampler;\\nuniform bool isTexture;\\n\\nvarying vec3 vLightWeighting;\\nvarying highp vec2 vVertTexCoord;\\n\\nvoid main(void) {\\n  if(!isTexture){\\n    gl_FragColor = vec4(vec3(uMaterialColor.rgb * vLightWeighting), uMaterialColor.a);\\n  }else{\\n    vec4 textureColor = texture2D(uSampler, vVertTexCoord);\\n    if(vLightWeighting == vec3(0., 0., 0.)){\\n      gl_FragColor = textureColor;\\n    }else{\\n      gl_FragColor = vec4(vec3(textureColor.rgb * vLightWeighting), textureColor.a); \\n    }\\n  }\\n}\"}},{}],41:[function(a,b,c){\"use strict\";var d=a(\"./core/core\");a(\"./color/p5.Color\"),a(\"./core/p5.Element\"),a(\"./typography/p5.Font\"),a(\"./core/p5.Graphics\"),a(\"./core/p5.Renderer2D\"),a(\"./image/p5.Image\"),a(\"./math/p5.Vector\"),a(\"./io/p5.TableRow\"),a(\"./io/p5.Table\"),a(\"./color/creating_reading\"),a(\"./color/setting\"),a(\"./core/constants\"),a(\"./utilities/conversion\"),a(\"./utilities/array_functions\"),a(\"./utilities/string_functions\"),a(\"./core/environment\"),a(\"./image/image\"),a(\"./image/loading_displaying\"),a(\"./image/pixels\"),a(\"./io/files\"),a(\"./events/keyboard\"),a(\"./events/acceleration\"),a(\"./events/mouse\"),a(\"./utilities/time_date\"),a(\"./events/touch\"),a(\"./math/math\"),a(\"./math/calculation\"),a(\"./math/random\"),a(\"./math/noise\"),a(\"./math/trigonometry\"),a(\"./core/rendering\"),a(\"./core/2d_primitives\"),a(\"./core/attributes\"),a(\"./core/curves\"),a(\"./core/vertex\"),a(\"./core/structure\"),a(\"./core/transform\"),a(\"./typography/attributes\"),a(\"./typography/loading_displaying\"),a(\"./3d/p5.Renderer3D\"),a(\"./3d/p5.Geometry3D\"),a(\"./3d/retainedMode3D\"),a(\"./3d/immediateMode3D\"),a(\"./3d/3d_primitives\"),a(\"./3d/p5.Matrix\"),a(\"./3d/material\"),a(\"./3d/light\"),a(\"./3d/shader\"),a(\"./3d/camera\"),a(\"./3d/interaction\");var e=function(){window.PHANTOMJS||window.mocha||(window.setup&&\"function\"==typeof window.setup||window.draw&&\"function\"==typeof window.draw)&&new d};\"complete\"===document.readyState?e():window.addEventListener(\"load\",e,!1),b.exports=d},{\"./3d/3d_primitives\":30,\"./3d/camera\":31,\"./3d/immediateMode3D\":32,\"./3d/interaction\":33,\"./3d/light\":34,\"./3d/material\":35,\"./3d/p5.Geometry3D\":36,\"./3d/p5.Matrix\":37,\"./3d/p5.Renderer3D\":38,\"./3d/retainedMode3D\":39,\"./3d/shader\":40,\"./color/creating_reading\":43,\"./color/p5.Color\":44,\"./color/setting\":45,\"./core/2d_primitives\":46,\"./core/attributes\":47,\"./core/constants\":49,\"./core/core\":50,\"./core/curves\":51,\"./core/environment\":52,\"./core/p5.Element\":54,\"./core/p5.Graphics\":55,\"./core/p5.Renderer2D\":57,\"./core/rendering\":58,\"./core/structure\":60,\"./core/transform\":61,\"./core/vertex\":62,\"./events/acceleration\":63,\"./events/keyboard\":64,\"./events/mouse\":65,\"./events/touch\":66,\"./image/image\":68,\"./image/loading_displaying\":69,\"./image/p5.Image\":70,\"./image/pixels\":71,\"./io/files\":72,\"./io/p5.Table\":73,\"./io/p5.TableRow\":74,\"./math/calculation\":75,\"./math/math\":76,\"./math/noise\":77,\"./math/p5.Vector\":78,\"./math/random\":80,\"./math/trigonometry\":81,\"./typography/attributes\":82,\"./typography/loading_displaying\":83,\"./typography/p5.Font\":84,\"./utilities/array_functions\":85,\"./utilities/conversion\":86,\"./utilities/string_functions\":87,\"./utilities/time_date\":88}],42:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.ColorConversion={},d.ColorConversion._hsbaToHSLA=function(a){var b=a[0],c=a[1],d=a[2],e=(2-c)*d/2;return 0!==e&&(1===e?c=0:.5>e?c/=2-c:c=c*d/(2-2*e)),[b,c,e,a[3]]},d.ColorConversion._hsbaToRGBA=function(a){var b=6*a[0],c=a[1],d=a[2],e=[];if(0===c)e=[d,d,d,a[3]];else{var f,g,h,i=Math.floor(b),j=d*(1-c),k=d*(1-c*(b-i)),l=d*(1-c*(1+i-b));0===i?(f=d,g=l,h=j):1===i?(f=k,g=d,h=j):2===i?(f=j,g=d,h=l):3===i?(f=j,g=k,h=d):4===i?(f=l,g=j,h=d):(f=d,g=j,h=k),e=[f,g,h,a[3]]}return e},d.ColorConversion._hslaToHSBA=function(a){var b,c=a[0],d=a[1],e=a[2];return b=.5>e?(1+d)*e:e+d-e*d,d=2*(b-e)/b,[c,d,b,a[3]]},d.ColorConversion._hslaToRGBA=function(a){var b=6*a[0],c=a[1],d=a[2],e=[];if(0===c)e=[d,d,d,a[3]];else{var f;f=.5>d?(1+c)*d:d+c-d*c;var g=2*d-f,h=function(a,b,c){return 0>a?a+=6:a>=6&&(a-=6),1>a?b+(c-b)*a:3>a?c:4>a?b+(c-b)*(4-a):b};e=[h(b+2,g,f),h(b,g,f),h(b-2,g,f),a[3]]}return e},d.ColorConversion._rgbaToHSBA=function(a){var b,c,d=a[0],e=a[1],f=a[2],g=Math.max(d,e,f),h=g-Math.min(d,e,f);return 0===h?(b=0,c=0):(c=h/g,d===g?b=(e-f)/h:e===g?b=2+(f-d)/h:f===g&&(b=4+(d-e)/h),0>b?b+=6:b>=6&&(b-=6)),[b/6,c,g,a[3]]},d.ColorConversion._rgbaToHSLA=function(a){var b,c,d=a[0],e=a[1],f=a[2],g=Math.max(d,e,f),h=Math.min(d,e,f),i=g+h,j=g-h;return 0===j?(b=0,c=0):(c=1>i?j/i:j/(2-j),d===g?b=(e-f)/j:e===g?b=2+(f-d)/j:f===g&&(b=4+(d-e)/j),0>b?b+=6:b>=6&&(b-=6)),[b/6,c,i/2,a[3]]},b.exports=d.ColorConversion},{\"../core/core\":50}],43:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"../core/constants\");a(\"./p5.Color\"),d.prototype.alpha=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getAlpha();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.blue=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getBlue();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.brightness=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getBrightness();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.color=function(){return arguments[0]instanceof d.Color?arguments[0]:arguments[0]instanceof Array?new d.Color(this,arguments[0]):new d.Color(this,arguments)},d.prototype.green=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getGreen();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.hue=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getHue();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.lerpColor=function(a,b,c){var d,f,g,h,i,j,k=this._renderer._colorMode,l=this._renderer._colorMaxes;if(k===e.RGB)i=a.levels.map(function(a){return a/255}),j=b.levels.map(function(a){return a/255});else if(k===e.HSB)a._getBrightness(),b._getBrightness(),i=a.hsba,j=b.hsba;else{if(k!==e.HSL)throw new Error(k+\"cannot be used for interpolation.\");a._getLightness(),b._getLightness(),i=a.hsla,j=b.hsla}return c=Math.max(Math.min(c,1),0),d=this.lerp(i[0],j[0],c),f=this.lerp(i[1],j[1],c),g=this.lerp(i[2],j[2],c),h=this.lerp(i[3],j[3],c),d*=l[k][0],f*=l[k][1],g*=l[k][2],h*=l[k][3],this.color(d,f,g,h)},d.prototype.lightness=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getLightness();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.red=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getRed();throw new Error(\"Needs p5.Color or pixel array as argument.\")},d.prototype.saturation=function(a){if(a instanceof d.Color||a instanceof Array)return this.color(a)._getSaturation();throw new Error(\"Needs p5.Color or pixel array as argument.\")},b.exports=d},{\"../core/constants\":49,\"../core/core\":50,\"./p5.Color\":44}],44:[function(a,b,c){var d=a(\"../core/core\"),e=a(\"../core/constants\"),f=a(\"./color_conversion\");d.Color=function(a,b){if(this.mode=a._renderer._colorMode,this.maxes=a._renderer._colorMaxes,this.mode!==e.RGB&&this.mode!==e.HSL&&this.mode!==e.HSB)throw new Error(this.mode+\" is an invalid colorMode.\");return this._array=d.Color._parseInputs.apply(a,b),this.levels=this._array.map(function(a){return Math.round(255*a)}),this},d.Color.prototype.toString=function(){var a=this.levels;return a[3]=this._array[3],\"rgba(\"+a[0]+\",\"+a[1]+\",\"+a[2]+\",\"+a[3]+\")\"},d.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},d.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[e.RGB][2]},d.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=f._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[e.HSB][2]},d.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[e.RGB][1]},d.Color.prototype._getHue=function(){return this.mode===e.HSB?(this.hsba||(this.hsba=f._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[e.HSB][0]):(this.hsla||(this.hsla=f._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[e.HSL][0])},d.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=f._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[e.HSL][2]},d.Color.prototype._getRed=function(){return this._array[0]*this.maxes[e.RGB][0]},d.Color.prototype._getSaturation=function(){return this.mode===e.HSB?(this.hsba||(this.hsba=f._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[e.HSB][1]):(this.hsla||(this.hsla=f._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[e.HSL][1])};var g={aliceblue:\"#f0f8ff\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",aquamarine:\"#7fffd4\",azure:\"#f0ffff\",beige:\"#f5f5dc\",bisque:\"#ffe4c4\",black:\"#000000\",blanchedalmond:\"#ffebcd\",blue:\"#0000ff\",blueviolet:\"#8a2be2\",brown:\"#a52a2a\",burlywood:\"#deb887\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",cornflowerblue:\"#6495ed\",cornsilk:\"#fff8dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",darkkhaki:\"#bdb76b\",darkmagenta:\"#8b008b\",darkolivegreen:\"#556b2f\",darkorange:\"#ff8c00\",darkorchid:\"#9932cc\",darkred:\"#8b0000\",darksalmon:\"#e9967a\",darkseagreen:\"#8fbc8f\",darkslateblue:\"#483d8b\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",darkturquoise:\"#00ced1\",darkviolet:\"#9400d3\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",dimgray:\"#696969\",dimgrey:\"#696969\",dodgerblue:\"#1e90ff\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",forestgreen:\"#228b22\",fuchsia:\"#ff00ff\",gainsboro:\"#dcdcdc\",ghostwhite:\"#f8f8ff\",gold:\"#ffd700\",goldenrod:\"#daa520\",gray:\"#808080\",green:\"#008000\",greenyellow:\"#adff2f\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",ivory:\"#fffff0\",khaki:\"#f0e68c\",lavender:\"#e6e6fa\",lavenderblush:\"#fff0f5\",lawngreen:\"#7cfc00\",lemonchiffon:\"#fffacd\",lightblue:\"#add8e6\",lightcoral:\"#f08080\",lightcyan:\"#e0ffff\",lightgoldenrodyellow:\"#fafad2\",lightgray:\"#d3d3d3\",lightgreen:\"#90ee90\",lightgrey:\"#d3d3d3\",lightpink:\"#ffb6c1\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",lightskyblue:\"#87cefa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",lightsteelblue:\"#b0c4de\",lightyellow:\"#ffffe0\",lime:\"#00ff00\",limegreen:\"#32cd32\",linen:\"#faf0e6\",magenta:\"#ff00ff\",maroon:\"#800000\",mediumaquamarine:\"#66cdaa\",mediumblue:\"#0000cd\",mediumorchid:\"#ba55d3\",mediumpurple:\"#9370db\",mediumseagreen:\"#3cb371\",mediumslateblue:\"#7b68ee\",mediumspringgreen:\"#00fa9a\",mediumturquoise:\"#48d1cc\",mediumvioletred:\"#c71585\",midnightblue:\"#191970\",mintcream:\"#f5fffa\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",navajowhite:\"#ffdead\",navy:\"#000080\",oldlace:\"#fdf5e6\",olive:\"#808000\",olivedrab:\"#6b8e23\",orange:\"#ffa500\",orangered:\"#ff4500\",orchid:\"#da70d6\",palegoldenrod:\"#eee8aa\",palegreen:\"#98fb98\",paleturquoise:\"#afeeee\",palevioletred:\"#db7093\",papayawhip:\"#ffefd5\",peachpuff:\"#ffdab9\",peru:\"#cd853f\",pink:\"#ffc0cb\",plum:\"#dda0dd\",powderblue:\"#b0e0e6\",purple:\"#800080\",red:\"#ff0000\",rosybrown:\"#bc8f8f\",royalblue:\"#4169e1\",saddlebrown:\"#8b4513\",salmon:\"#fa8072\",sandybrown:\"#f4a460\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",sienna:\"#a0522d\",silver:\"#c0c0c0\",skyblue:\"#87ceeb\",slateblue:\"#6a5acd\",slategray:\"#708090\",slategrey:\"#708090\",snow:\"#fffafa\",springgreen:\"#00ff7f\",steelblue:\"#4682b4\",tan:\"#d2b48c\",teal:\"#008080\",thistle:\"#d8bfd8\",tomato:\"#ff6347\",turquoise:\"#40e0d0\",violet:\"#ee82ee\",wheat:\"#f5deb3\",white:\"#ffffff\",whitesmoke:\"#f5f5f5\",yellow:\"#ffff00\",yellowgreen:\"#9acd32\"},h=/\\s*/,i=/(\\d{1,3})/,j=/((?:\\d+(?:\\.\\d+)?)|(?:\\.\\d+))/,k=new RegExp(j.source+\"%\"),l={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp([\"^rgb\\\\(\",i.source,\",\",i.source,\",\",i.source,\"\\\\)$\"].join(h.source),\"i\"),RGB_PERCENT:new RegExp([\"^rgb\\\\(\",k.source,\",\",k.source,\",\",k.source,\"\\\\)$\"].join(h.source),\"i\"),RGBA:new RegExp([\"^rgba\\\\(\",i.source,\",\",i.source,\",\",i.source,\",\",j.source,\"\\\\)$\"].join(h.source),\"i\"),RGBA_PERCENT:new RegExp([\"^rgba\\\\(\",k.source,\",\",k.source,\",\",k.source,\",\",j.source,\"\\\\)$\"].join(h.source),\"i\"),HSL:new RegExp([\"^hsl\\\\(\",i.source,\",\",k.source,\",\",k.source,\"\\\\)$\"].join(h.source),\"i\"),HSLA:new RegExp([\"^hsla\\\\(\",i.source,\",\",k.source,\",\",k.source,\",\",j.source,\"\\\\)$\"].join(h.source),\"i\"),HSB:new RegExp([\"^hsb\\\\(\",i.source,\",\",k.source,\",\",k.source,\"\\\\)$\"].join(h.source),\"i\"),HSBA:new RegExp([\"^hsba\\\\(\",i.source,\",\",k.source,\",\",k.source,\",\",j.source,\"\\\\)$\"].join(h.source),\"i\")};d.Color._parseInputs=function(){var a=arguments.length,b=this._renderer._colorMode,c=this._renderer._colorMaxes,h=[];if(a>=3)return h[0]=arguments[0]/c[b][0],h[1]=arguments[1]/c[b][1],h[2]=arguments[2]/c[b][2],\"number\"==typeof arguments[3]?h[3]=arguments[3]/c[b][3]:h[3]=1,h=h.map(function(a){return Math.max(Math.min(a,1),0)}),b===e.HSL?f._hslaToRGBA(h):b===e.HSB?f._hsbaToRGBA(h):h;if(1===a&&\"string\"==typeof arguments[0]){var i=arguments[0].trim().toLowerCase();if(g[i])return d.Color._parseInputs.apply(this,[g[i]]);if(l.HEX3.test(i))return h=l.HEX3.exec(i).slice(1).map(function(a){return parseInt(a+a,16)/255}),h[3]=1,h;if(l.HEX6.test(i))return h=l.HEX6.exec(i).slice(1).map(function(a){return parseInt(a,16)/255}),h[3]=1,h;if(l.RGB.test(i))return h=l.RGB.exec(i).slice(1).map(function(a){return a/255}),h[3]=1,h;if(l.RGB_PERCENT.test(i))return h=l.RGB_PERCENT.exec(i).slice(1).map(function(a){return parseFloat(a)/100}),h[3]=1,h;if(l.RGBA.test(i))return h=l.RGBA.exec(i).slice(1).map(function(a,b){return 3===b?parseFloat(a):a/255});if(l.RGBA_PERCENT.test(i))return h=l.RGBA_PERCENT.exec(i).slice(1).map(function(a,b){return 3===b?parseFloat(a):parseFloat(a)/100});if(l.HSL.test(i)?(h=l.HSL.exec(i).slice(1).map(function(a,b){return 0===b?parseInt(a,10)/360:parseInt(a,10)/100}),h[3]=1):l.HSLA.test(i)&&(h=l.HSLA.exec(i).slice(1).map(function(a,b){return 0===b?parseInt(a,10)/360:3===b?parseFloat(a):parseInt(a,10)/100})),h.length)return f._hslaToRGBA(h);if(l.HSB.test(i)?(h=l.HSB.exec(i).slice(1).map(function(a,b){return 0===b?parseInt(a,10)/360:parseInt(a,10)/100}),h[3]=1):l.HSBA.test(i)&&(h=l.HSBA.exec(i).slice(1).map(function(a,b){return 0===b?parseInt(a,10)/360:3===b?parseFloat(a):parseInt(a,10)/100})),h.length)return f._hsbaToRGBA(h);h=[1,1,1,1]}else{if(1!==a&&2!==a||\"number\"!=typeof arguments[0])throw new Error(arguments+\"is not a valid color representation.\");h[0]=arguments[0]/c[b][2],h[1]=arguments[0]/c[b][2],h[2]=arguments[0]/c[b][2],\"number\"==typeof arguments[1]?h[3]=arguments[1]/c[b][3]:h[3]=1,h=h.map(function(a){return Math.max(Math.min(a,1),0)})}return h},b.exports=d.Color},{\"../core/constants\":49,\"../core/core\":50,\"./color_conversion\":42}],45:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"../core/constants\");a(\"./p5.Color\"),d.prototype.background=function(){return arguments[0]instanceof d.Image?this.image(arguments[0],0,0,this.width,this.height):this._renderer.background.apply(this._renderer,arguments),this},d.prototype.clear=function(){return this._renderer.clear(),this},d.prototype.colorMode=function(){if(arguments[0]===e.RGB||arguments[0]===e.HSB||arguments[0]===e.HSL){this._renderer._colorMode=arguments[0];var a=this._renderer._colorMaxes[this._renderer._colorMode];2===arguments.length?(a[0]=arguments[1],a[1]=arguments[1],a[2]=arguments[1],a[3]=arguments[1]):4===arguments.length?(a[0]=arguments[1],a[1]=arguments[2],a[2]=arguments[3]):5===arguments.length&&(a[0]=arguments[1],a[1]=arguments[2],a[2]=arguments[3],a[3]=arguments[4])}return this},d.prototype.fill=function(){return this._renderer._setProperty(\"_fillSet\",!0),this._renderer._setProperty(\"_doFill\",!0),this._renderer.fill.apply(this._renderer,arguments),this},d.prototype.noFill=function(){return this._renderer._setProperty(\"_doFill\",!1),this},d.prototype.noStroke=function(){return this._renderer._setProperty(\"_doStroke\",!1),this},d.prototype.stroke=function(){return this._renderer._setProperty(\"_strokeSet\",!0),this._renderer._setProperty(\"_doStroke\",!0),this._renderer.stroke.apply(this._renderer,arguments),this},b.exports=d},{\"../core/constants\":49,\"../core/core\":50,\"./p5.Color\":44}],46:[function(a,b,c){\"use strict\";var d=a(\"./core\"),e=a(\"./constants\");a(\"./error_helpers\"),d.prototype.arc=function(a,b,c,d,f,g,h){for(var i=new Array(arguments.length),j=0;j<i.length;++j)i[j]=arguments[j];if(this._validateParameters(\"arc\",i,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"],[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"String\"]]),!this._renderer._doStroke&&!this._renderer._doFill)return this;for(this._angleMode===e.DEGREES&&(f=this.radians(f),g=this.radians(g));0>f;)f+=e.TWO_PI;for(;0>g;)g+=e.TWO_PI;return f%=e.TWO_PI,g%=e.TWO_PI,f=f<=e.HALF_PI?Math.atan(c/d*Math.tan(f)):f>e.HALF_PI&&f<=3*e.HALF_PI?Math.atan(c/d*Math.tan(f))+e.PI:Math.atan(c/d*Math.tan(f))+e.TWO_PI,g=g<=e.HALF_PI?Math.atan(c/d*Math.tan(g)):g>e.HALF_PI&&g<=3*e.HALF_PI?Math.atan(c/d*Math.tan(g))+e.PI:Math.atan(c/d*Math.tan(g))+e.TWO_PI,f>g&&(g+=e.TWO_PI),c=Math.abs(c),d=Math.abs(d),this._renderer.arc(a,b,c,d,f,g,h),this},d.prototype.ellipse=function(a,b,c,d){for(var e=new Array(arguments.length),f=0;f<e.length;++f)e[f]=arguments[f];return this._validateParameters(\"ellipse\",e,[\"Number\",\"Number\",\"Number\",\"Number\"]),this._renderer._doStroke||this._renderer._doFill?(c=Math.abs(c),d=Math.abs(d),this._renderer.ellipse(a,b,c,d),this):this},d.prototype.line=function(){if(!this._renderer._doStroke)return this;for(var a=new Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];return this._renderer.isP3D?(this._validateParameters(\"line\",a,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.line(a[0],a[1],a[2],a[3],a[4],a[5])):(this._validateParameters(\"line\",a,[[\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.line(a[0],a[1],a[2],a[3])),this},d.prototype.point=function(){if(!this._renderer._doStroke)return this;for(var a=new Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];return this._renderer.isP3D?(this._validateParameters(\"point\",a,[[\"Number\",\"Number\",\"Number\"]]),this._renderer.point(a[0],a[1],a[2])):(this._validateParameters(\"point\",a,[[\"Number\",\"Number\"]]),this._renderer.point(a[0],a[1])),this},d.prototype.quad=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var a=new Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];return this._renderer.isP3D?(this._validateParameters(\"quad\",a,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.quad(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11])):(this._validateParameters(\"quad\",a,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.quad(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7])),this},d.prototype.rect=function(a,b,c,d,e,f,g,h){for(var i=new Array(arguments.length),j=0;j<i.length;++j)i[j]=arguments[j];return this._validateParameters(\"rect\",i,[[\"Number\",\"Number\",\"Number\",\"Number\"],[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"],[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer._doStroke||this._renderer._doFill?(this._renderer.rect(a,b,c,d,e,f,g,h),this):void 0},d.prototype.triangle=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var a=new Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];return this._renderer.isP3D?(this._validateParameters(\"triangle\",a,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.triangle(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])):(this._validateParameters(\"triangle\",a,[[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer.triangle(a[0],a[1],a[2],a[3],a[4],a[5])),this},b.exports=d},{\"./constants\":49,\"./core\":50,\"./error_helpers\":53}],47:[function(a,b,c){\"use strict\";var d=a(\"./core\"),e=a(\"./constants\");d.prototype.ellipseMode=function(a){return(a===e.CORNER||a===e.CORNERS||a===e.RADIUS||a===e.CENTER)&&(this._renderer._ellipseMode=a),this},d.prototype.noSmooth=function(){return this._renderer.noSmooth(),this},d.prototype.rectMode=function(a){return(a===e.CORNER||a===e.CORNERS||a===e.RADIUS||a===e.CENTER)&&(this._renderer._rectMode=a),this},d.prototype.smooth=function(){return this._renderer.smooth(),this},d.prototype.strokeCap=function(a){return(a===e.ROUND||a===e.SQUARE||a===e.PROJECT)&&this._renderer.strokeCap(a),this},d.prototype.strokeJoin=function(a){return(a===e.ROUND||a===e.BEVEL||a===e.MITER)&&this._renderer.strokeJoin(a),this},d.prototype.strokeWeight=function(a){return this._renderer.strokeWeight(a),this},b.exports=d},{\"./constants\":49,\"./core\":50}],48:[function(a,b,c){var d=a(\"./constants\");b.exports={modeAdjust:function(a,b,c,e,f){return f===d.CORNER?{x:a,y:b,w:c,h:e}:f===d.CORNERS?{x:a,y:b,w:c-a,h:e-b}:f===d.RADIUS?{x:a-c,y:b-e,w:2*c,h:2*e}:f===d.CENTER?{x:a-.5*c,y:b-.5*e,w:c,h:e}:void 0},arcModeAdjust:function(a,b,c,e,f){return f===d.CORNER?{x:a+.5*c,y:b+.5*e,w:c,h:e}:f===d.CORNERS?{x:a,y:b,w:c+a,h:e+b}:f===d.RADIUS?{x:a,y:b,w:2*c,h:2*e}:f===d.CENTER?{x:a,y:b,w:c,h:e}:void 0}}},{\"./constants\":49}],49:[function(a,b,c){var d=Math.PI;b.exports={P2D:\"p2d\",WEBGL:\"webgl\",ARROW:\"default\",CROSS:\"crosshair\",HAND:\"pointer\",MOVE:\"move\",TEXT:\"text\",WAIT:\"wait\",HALF_PI:d/2,PI:d,QUARTER_PI:d/4,TAU:2*d,TWO_PI:2*d,DEGREES:\"degrees\",RADIANS:\"radians\",CORNER:\"corner\",CORNERS:\"corners\",RADIUS:\"radius\",RIGHT:\"right\",LEFT:\"left\",CENTER:\"center\",TOP:\"top\",BOTTOM:\"bottom\",BASELINE:\"alphabetic\",POINTS:\"points\",LINES:\"lines\",TRIANGLES:\"triangles\",TRIANGLE_FAN:\"triangles_fan\",TRIANGLE_STRIP:\"triangles_strip\",QUADS:\"quads\",QUAD_STRIP:\"quad_strip\",CLOSE:\"close\",OPEN:\"open\",CHORD:\"chord\",PIE:\"pie\",PROJECT:\"square\",SQUARE:\"butt\",ROUND:\"round\",BEVEL:\"bevel\",MITER:\"miter\",RGB:\"rgb\",HSB:\"hsb\",HSL:\"hsl\",AUTO:\"auto\",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:\"normal\",ADD:\"lighter\",DARKEST:\"darken\",LIGHTEST:\"lighten\",DIFFERENCE:\"difference\",EXCLUSION:\"exclusion\",MULTIPLY:\"multiply\",SCREEN:\"screen\",REPLACE:\"source-over\",OVERLAY:\"overlay\",HARD_LIGHT:\"hard-light\",SOFT_LIGHT:\"soft-light\",DODGE:\"color-dodge\",BURN:\"color-burn\",THRESHOLD:\"threshold\",GRAY:\"gray\",OPAQUE:\"opaque\",INVERT:\"invert\",POSTERIZE:\"posterize\",DILATE:\"dilate\",ERODE:\"erode\",BLUR:\"blur\",NORMAL:\"normal\",ITALIC:\"italic\",BOLD:\"bold\",_DEFAULT_TEXT_FILL:\"#000000\",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:\"middle\",LINEAR:\"linear\",QUADRATIC:\"quadratic\",BEZIER:\"bezier\",CURVE:\"curve\",_DEFAULT_STROKE:\"#000000\",_DEFAULT_FILL:\"#FFFFFF\"}},{}],50:[function(a,b,c){\"use strict\";a(\"./shim\");var d=a(\"./constants\"),e=function(a,b,c){2===arguments.length&&\"boolean\"==typeof b&&(c=b,b=void 0),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=b,this._curElement=null,this._elements=[],this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._styles=[],this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._events.wheel=null,this._loadingScreenId=\"p5_loading\",this._start=function(){this._userNode&&\"string\"==typeof this._userNode&&(this._userNode=document.getElementById(this._userNode)),this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,\"p2d\",!0);var a=this.preload||window.preload;if(a){var b=document.getElementById(this._loadingScreenId);if(!b){b=document.createElement(\"div\"),b.innerHTML=\"Loading...\",b.style.position=\"absolute\",b.id=this._loadingScreenId;var c=this._userNode||document.body;c.appendChild(b)}for(var d in this._preloadMethods){this._preloadMethods[d]=this._preloadMethods[d]||e;var f=this._preloadMethods[d];(f===e.prototype||f===e)&&(f=this._isGlobal?window:this),this._registeredPreloadMethods[d]=f[d],f[d]=this._wrapPreload(f,d)}a(),this._runIfPreloadsAreDone()}else this._setup(),this._runFrames(),this._draw()}.bind(this),this._runIfPreloadsAreDone=function(){var a=this._isGlobal?window:this;if(0===a._preloadCount){var b=document.getElementById(a._loadingScreenId);b&&b.parentNode.removeChild(b),a._setup(),a._runFrames(),a._draw()}},this._decrementPreload=function(){var a=this._isGlobal?window:this;a._setProperty(\"_preloadCount\",a._preloadCount-1),a._runIfPreloadsAreDone()},this._wrapPreload=function(a,b){return function(){this._incrementPreload();var c=Array.prototype.slice.call(arguments);return c.push(this._decrementPreload.bind(this)),this._registeredPreloadMethods[b].apply(a,c)}.bind(this)},this._incrementPreload=function(){var a=this._isGlobal?window:this;a._setProperty(\"_preloadCount\",a._preloadCount+1)},this._setup=function(){var a=this._isGlobal?window:this;if(\"function\"==typeof a.preload)for(var b in this._preloadMethods)a[b]=this._preloadMethods[b][b],a[b]&&this&&(a[b]=a[b].bind(this));\"function\"==typeof a.setup&&a.setup();for(var c=new RegExp(/(^|\\s)p5_hidden(?!\\S)/g),d=document.getElementsByClassName(\"p5_hidden\"),e=0;e<d.length;e++){var f=d[e];f.style.visibility=\"\",f.className=f.className.replace(c,\"\")}this._setupDone=!0}.bind(this),this._draw=function(){var a=window.performance.now(),b=a-this._lastFrameTime,c=1e3/this._targetFrameRate,d=5;(!this._loop||b>=c-d)&&(this._renderer.isP3D&&this._renderer._update(),this._setProperty(\"frameCount\",this.frameCount+1),this._updateMouseCoords(),this._updateTouchCoords(),this.redraw(),this._frameRate=1e3/(a-this._lastFrameTime),this._lastFrameTime=a),this._loop&&(this._requestAnimId=window.requestAnimationFrame(this._draw))}.bind(this),this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this),this._setProperty=function(a,b){this[a]=b,this._isGlobal&&(window[a]=b)}.bind(this),this.remove=function(){if(this._curElement){this._loop=!1,this._requestAnimId&&window.cancelAnimationFrame(this._requestAnimId);for(var a in this._events)window.removeEventListener(a,this._events[a]);for(var b=0;b<this._elements.length;b++){var c=this._elements[b];c.elt.parentNode&&c.elt.parentNode.removeChild(c.elt);for(var d in c._events)c.elt.removeEventListener(d,c._events[d])}var f=this;if(this._registeredMethods.remove.forEach(function(a){\"undefined\"!=typeof a&&a.call(f)}),this._isGlobal){for(var g in e.prototype)try{delete window[g]}catch(h){window[g]=void 0}for(var i in this)if(this.hasOwnProperty(i))try{delete window[i]}catch(h){window[i]=void 0}}}}.bind(this);for(var f in d)e.prototype[f]=d[f];if(a)a(this);else{this._isGlobal=!0;for(var g in e.prototype)if(\"function\"==typeof e.prototype[g]){var h=g.substring(2);this._events.hasOwnProperty(h)||(window[g]=e.prototype[g].bind(this))}else window[g]=e.prototype[g];for(var i in this)this.hasOwnProperty(i)&&(window[i]=this[i])}for(var j in this._events){var k=this[\"_on\"+j];if(k){var l=k.bind(this);window.addEventListener(j,l),this._events[j]=l}}var m=function(){this._setProperty(\"focused\",!0)}.bind(this),n=function(){this._setProperty(\"focused\",!1)}.bind(this);window.addEventListener(\"focus\",m),window.addEventListener(\"blur\",n),this.registerMethod(\"remove\",function(){window.removeEventListener(\"focus\",m),window.removeEventListener(\"blur\",n)}),c?this._start():\"complete\"===document.readyState?this._start():window.addEventListener(\"load\",this._start.bind(this),!1);\n};e.prototype._preloadMethods={loadJSON:e.prototype,loadImage:e.prototype,loadStrings:e.prototype,loadXML:e.prototype,loadShape:e.prototype,loadTable:e.prototype,loadFont:e.prototype},e.prototype._registeredMethods={pre:[],post:[],remove:[]},e.prototype._registeredPreloadMethods={},e.prototype.registerPreloadMethod=function(a,b){e.prototype._preloadMethods.hasOwnProperty(a)||(e.prototype._preloadMethods[a]=b)},e.prototype.registerMethod=function(a,b){e.prototype._registeredMethods.hasOwnProperty(a)||(e.prototype._registeredMethods[a]=[]),e.prototype._registeredMethods[a].push(b)},b.exports=e},{\"./constants\":49,\"./shim\":59}],51:[function(a,b,c){\"use strict\";var d=a(\"./core\");a(\"./error_helpers\");var e=20,f=20;d.prototype.bezier=function(a,b,c,d,e,f,g,h){for(var i=new Array(arguments.length),j=0;j<i.length;++j)i[j]=arguments[j];return this._validateParameters(\"bezier\",i,[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]),this._renderer._doStroke?(this._renderer.bezier(a,b,c,d,e,f,g,h),this):this},d.prototype.bezierDetail=function(a){return e=a,this},d.prototype.bezierPoint=function(a,b,c,d,e){var f=1-e;return Math.pow(f,3)*a+3*Math.pow(f,2)*e*b+3*f*Math.pow(e,2)*c+Math.pow(e,3)*d},d.prototype.bezierTangent=function(a,b,c,d,e){var f=1-e;return 3*d*Math.pow(e,2)-3*c*Math.pow(e,2)+6*c*f*e-6*b*f*e+3*b*Math.pow(f,2)-3*a*Math.pow(f,2)},d.prototype.curve=function(a,b,c,d,e,f,g,h){for(var i=new Array(arguments.length),j=0;j<i.length;++j)i[j]=arguments[j];return this._validateParameters(\"curve\",i,[\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\",\"Number\"]),this._renderer._doStroke?(this._renderer.curve(a,b,c,d,e,f,g,h),this):void 0},d.prototype.curveDetail=function(a){return f=a,this},d.prototype.curveTightness=function(a){this._renderer._curveTightness=a},d.prototype.curvePoint=function(a,b,c,d,e){var f=e*e*e,g=e*e,h=-.5*f+g-.5*e,i=1.5*f-2.5*g+1,j=-1.5*f+2*g+.5*e,k=.5*f-.5*g;return a*h+b*i+c*j+d*k},d.prototype.curveTangent=function(a,b,c,d,e){var f=e*e,g=-3*f/2+2*e-.5,h=9*f/2-5*e,i=-9*f/2+4*e+.5,j=3*f/2-e;return a*g+b*h+c*i+d*j},b.exports=d},{\"./core\":50,\"./error_helpers\":53}],52:[function(a,b,c){\"use strict\";function d(a){var b=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!b)throw new Error(\"Fullscreen not enabled in this browser.\");a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}function e(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}var f=a(\"./core\"),g=a(\"./constants\"),h=[g.ARROW,g.CROSS,g.HAND,g.MOVE,g.TEXT,g.WAIT];f.prototype._frameRate=0,f.prototype._lastFrameTime=window.performance.now(),f.prototype._targetFrameRate=60,window.console&&console.log?f.prototype.print=function(a){try{var b=JSON.parse(JSON.stringify(a));console.log(b)}catch(c){console.log(a)}}:f.prototype.print=function(){},f.prototype.println=f.prototype.print,f.prototype.frameCount=0,f.prototype.focused=document.hasFocus(),f.prototype.cursor=function(a,b,c){var d=\"auto\",e=this._curElement.elt;if(h.indexOf(a)>-1)d=a;else if(\"string\"==typeof a){var f=\"\";b&&c&&\"number\"==typeof b&&\"number\"==typeof c&&(f=b+\" \"+c),d=\"http://\"!==a.substring(0,6)?\"url(\"+a+\") \"+f+\", auto\":/\\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(a)?\"url(\"+a+\") \"+f+\", auto\":a}e.style.cursor=d},f.prototype.frameRate=function(a){return\"number\"!=typeof a||0>=a?this._frameRate:(this._setProperty(\"_targetFrameRate\",a),this._runFrames(),this)},f.prototype.getFrameRate=function(){return this.frameRate()},f.prototype.setFrameRate=function(a){return this.frameRate(a)},f.prototype.noCursor=function(){this._curElement.elt.style.cursor=\"none\"},f.prototype.displayWidth=screen.width,f.prototype.displayHeight=screen.height,f.prototype.windowWidth=window.innerWidth,f.prototype.windowHeight=window.innerHeight,f.prototype._onresize=function(a){this._setProperty(\"windowWidth\",window.innerWidth),this._setProperty(\"windowHeight\",window.innerHeight);var b,c=this._isGlobal?window:this;\"function\"==typeof c.windowResized&&(b=c.windowResized(a),void 0===b||b||a.preventDefault())},f.prototype.width=0,f.prototype.height=0,f.prototype.fullScreen=function(a){return\"undefined\"==typeof a?document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement:void(a?d(document.documentElement):e())},f.prototype.pixelDensity=function(a){return\"number\"!=typeof a?this._pixelDensity:(this._pixelDensity=a,void this.resizeCanvas(this.width,this.height,!0))},f.prototype.displayDensity=function(){return window.devicePixelRatio},f.prototype.getURL=function(){return location.href},f.prototype.getURLPath=function(){return location.pathname.split(\"/\").filter(function(a){return\"\"!==a})},f.prototype.getURLParams=function(){for(var a,b=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,c={};null!=(a=b.exec(location.search));)a.index===b.lastIndex&&b.lastIndex++,c[a[1]]=a[2];return c},b.exports=f},{\"./constants\":49,\"./core\":50}],53:[function(a,b,c){\"use strict\";function d(a,b,c){if(a.match(/^p5\\./)){var d=a.split(\".\");return c instanceof h[d[1]]}return\"Boolean\"===a||a.toLowerCase()===b||q.indexOf(a)>-1&&p(c)}function e(a,b,c){i&&(f(),i=!1),\"undefined\"===n(c)?c=\"#B40033\":\"number\"===n(c)&&(c=v[c])}function f(){var a=\"transparent\",b=\"#ED225D\",c=\"#ED225D\",d=\"white\";console.log(\"%c    _ \\n /\\\\| |/\\\\ \\n \\\\ ` ' /  \\n / , . \\\\  \\n \\\\/|_|\\\\/ \\n\\n%c> p5.js says: Welcome! This is your friendly debugger. To turn me off switch to using p5.min.js.\",\"background-color:\"+a+\";color:\"+b+\";\",\"background-color:\"+c+\";color:\"+d+\";\")}function g(a){x.forEach(function(b){a.message&&-1!==a.message.indexOf(b)&&console.log(\"%c Did you just try to use p5.js's '\"+b+\"' function or variable? If so, you may want to move it into your sketch's setup() function.\",\"color: #B40033\")})}for(var h=a(\"./core\"),i=!1,j={},k=j.toString,l=[\"Boolean\",\"Number\",\"String\",\"Function\",\"Array\",\"Date\",\"RegExp\",\"Object\",\"Error\"],m=0;m<l.length;m++)j[\"[object \"+l[m]+\"]\"]=l[m].toLowerCase();var n=function(a){return null==a?a+\"\":\"object\"==typeof a||\"function\"==typeof a?j[k.call(a)]||\"object\":typeof a},o=Array.isArray||function(a){return\"array\"===n(a)},p=function(a){return!o(a)&&a-parseFloat(a)+1>=0},q=[\"Number\",\"Integer\",\"Number/Constant\"],r=0,s=1,t=2,u=3,v=[\"#2D7BB6\",\"#EE9900\",\"#4DB200\",\"#C83C00\"];h.prototype._validateParameters=function(a,b,c){o(c[0])||(c=[c]);for(var f,g=Math.abs(b.length-c[0].length),h=0,i=1,j=c.length;j>i;i++){var k=Math.abs(b.length-c[i].length);g>=k&&(h=i,g=k)}var l=\"X\";g>0&&(f=\"You wrote \"+a+\"(\",b.length>0&&(f+=l+Array(b.length).join(\",\"+l)),f+=\"). \"+a+\" was expecting \"+c[h].length+\" parameters. Try \"+a+\"(\",c[h].length>0&&(f+=l+Array(c[h].length).join(\",\"+l)),f+=\").\",c.length>1&&(f+=\" \"+a+\" takes different numbers of parameters depending on what you want to do. Click this link to learn more: \"),e(f,a,r));for(var m=0;m<c.length;m++)for(var p=0;p<c[m].length&&p<b.length;p++){var q=c[m][p],u=n(b[p]);\"undefined\"===u||null===u?e(\"It looks like \"+a+\" received an empty variable in spot #\"+(p+1)+\". If not intentional, this is often a problem with scope: [link to scope].\",a,s):\"*\"===q||d(q,u,b[p])||(f=a+\" was expecting a \"+q.toLowerCase()+\" for parameter #\"+(p+1)+\", received \",f+=\"string\"===u?'\"'+b[p]+'\"':b[p],f+=\" instead.\",c.length>1&&(f+=\" \"+a+\" takes different numbers of parameters depending on what you want to do. Click this link to learn more:\"),e(f,a,t))}},h.prototype._validateParameters=function(){return!0};var w={0:{fileType:\"image\",method:\"loadImage\",message:\" hosting the image online,\"},1:{fileType:\"XML file\",method:\"loadXML\"},2:{fileType:\"table file\",method:\"loadTable\"},3:{fileType:\"text file\",method:\"loadStrings\"}};h._friendlyFileLoadError=function(a,b){var c=w[a],d=\"It looks like there was a problem loading your \"+c.fileType+\". Try checking if the file path%c [\"+b+\"] %cis correct,\"+(c.message||\"\")+\" or running a local server.\";e(d,c.method,u)};var x=[\"color\",\"random\"];\"complete\"!==document.readyState&&(window.addEventListener(\"error\",g,!1),window.addEventListener(\"load\",function(){window.removeEventListener(\"error\",g,!1)})),b.exports=h},{\"./core\":50}],54:[function(a,b,c){function d(a,b,c){var d=b.bind(c);c.elt.addEventListener(a,d,!1),c._events[a]=d}var e=a(\"./core\");e.Element=function(a,b){this.elt=a,this._pInst=b,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},e.Element.prototype.parent=function(a){return 0===arguments.length?this.elt.parentNode:(\"string\"==typeof a?(\"#\"===a[0]&&(a=a.substring(1)),a=document.getElementById(a)):a instanceof e.Element&&(a=a.elt),a.appendChild(this.elt),this)},e.Element.prototype.id=function(a){return 0===arguments.length?this.elt.id:(this.elt.id=a,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},e.Element.prototype[\"class\"]=function(a){return 0===arguments.length?this.elt.className:(this.elt.className=a,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},e.Element.prototype.mousePressed=function(a){return d(\"mousedown\",a,this),d(\"touchstart\",a,this),this},e.Element.prototype.mouseWheel=function(a){return d(\"wheel\",a,this),this},e.Element.prototype.mouseReleased=function(a){return d(\"mouseup\",a,this),d(\"touchend\",a,this),this},e.Element.prototype.mouseClicked=function(a){return d(\"click\",a,this),this},e.Element.prototype.mouseMoved=function(a){return d(\"mousemove\",a,this),d(\"touchmove\",a,this),this},e.Element.prototype.mouseOver=function(a){return d(\"mouseover\",a,this),this},e.Element.prototype.changed=function(a){return d(\"change\",a,this),this},e.Element.prototype.input=function(a){return d(\"input\",a,this),this},e.Element.prototype.mouseOut=function(a){return d(\"mouseout\",a,this),this},e.Element.prototype.touchStarted=function(a){return d(\"touchstart\",a,this),d(\"mousedown\",a,this),this},e.Element.prototype.touchMoved=function(a){return d(\"touchmove\",a,this),d(\"mousemove\",a,this),this},e.Element.prototype.touchEnded=function(a){return d(\"touchend\",a,this),d(\"mouseup\",a,this),this},e.Element.prototype.dragOver=function(a){return d(\"dragover\",a,this),this},e.Element.prototype.dragLeave=function(a){return d(\"dragleave\",a,this),this},e.Element.prototype.drop=function(a,b){function c(b){var c=new e.File(b);return function(b){c.data=b.target.result,a(c)}}return window.File&&window.FileReader&&window.FileList&&window.Blob?(d(\"dragover\",function(a){a.stopPropagation(),a.preventDefault()},this),d(\"dragleave\",function(a){a.stopPropagation(),a.preventDefault()},this),arguments.length>1&&d(\"drop\",b,this),d(\"drop\",function(a){a.stopPropagation(),a.preventDefault();for(var b=a.dataTransfer.files,d=0;d<b.length;d++){var e=b[d],f=new FileReader;f.onload=c(e),e.type.indexOf(\"text\")>-1?f.readAsText(e):f.readAsDataURL(e)}},this)):console.log(\"The File APIs are not fully supported in this browser.\"),this},e.Element.prototype._setProperty=function(a,b){this[a]=b},b.exports=e.Element},{\"./core\":50}],55:[function(a,b,c){var d=a(\"./core\"),e=a(\"./constants\");d.Graphics=function(a,b,c,f){var g=c||e.P2D,h=document.createElement(\"canvas\"),i=this._userNode||document.body;i.appendChild(h),d.Element.call(this,h,f,!1),this._styles=[],this.width=a,this.height=b,this._pixelDensity=f._pixelDensity,g===e.WEBGL?this._renderer=new d.Renderer3D(h,f,!1):this._renderer=new d.Renderer2D(h,f,!1),this._renderer.resize(a,b),this._renderer._applyDefaults(),f._elements.push(this);for(var j in d.prototype)this[j]||(\"function\"==typeof d.prototype[j]?this[j]=d.prototype[j].bind(this):this[j]=d.prototype[j]);return this},d.Graphics.prototype=Object.create(d.Element.prototype),b.exports=d.Graphics},{\"./constants\":49,\"./core\":50}],56:[function(a,b,c){function d(a){var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}else b+=a.offsetLeft,c+=a.offsetTop;return[b,c]}var e=a(\"./core\"),f=a(\"../core/constants\");e.Renderer=function(a,b,c){e.Element.call(this,a,b),this.canvas=a,this._pInst=b,c?(this._isMainCanvas=!0,this._pInst._setProperty(\"_curElement\",this),this._pInst._setProperty(\"canvas\",this.canvas),this._pInst._setProperty(\"width\",this.width),this._pInst._setProperty(\"height\",this.height)):(this.canvas.style.display=\"none\",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont=\"sans-serif\",this._textStyle=f.NORMAL,this._textAscent=null,this._textDescent=null,this._rectMode=f.CORNER,this._ellipseMode=f.CENTER,this._curveTightness=0,this._imageMode=f.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._colorMode=f.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]}},e.Renderer.prototype=Object.create(e.Element.prototype),e.Renderer.prototype.resize=function(a,b){this.width=a,this.height=b,this.elt.width=a*this._pInst._pixelDensity,this.elt.height=b*this._pInst._pixelDensity,this.elt.style.width=a+\"px\",this.elt.style.height=b+\"px\",this._isMainCanvas&&(this._pInst._setProperty(\"width\",this.width),this._pInst._setProperty(\"height\",this.height))},e.Renderer.prototype.textLeading=function(a){return arguments.length&&arguments[0]?(this._setProperty(\"_textLeading\",a),this):this._textLeading},e.Renderer.prototype.textSize=function(a){return arguments.length&&arguments[0]?(this._setProperty(\"_textSize\",a),this._setProperty(\"_textLeading\",a*f._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},e.Renderer.prototype.textStyle=function(a){return arguments.length&&arguments[0]?((a===f.NORMAL||a===f.ITALIC||a===f.BOLD)&&this._setProperty(\"_textStyle\",a),this._applyTextProperties()):this._textStyle},e.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},e.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},e.Renderer.prototype._isOpenType=function(a){return a=a||this._textFont,\"object\"==typeof a&&a.font&&a.font.supported},e.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty(\"_textAscent\",this._textFont._textAscent()),this._setProperty(\"_textDescent\",this._textFont._textDescent()),this;var a=document.createElement(\"span\");a.style.fontFamily=this._textFont,a.style.fontSize=this._textSize+\"px\",a.innerHTML=\"ABCjgq|\";var b=document.createElement(\"div\");b.style.display=\"inline-block\",b.style.width=\"1px\",b.style.height=\"0px\";var c=document.createElement(\"div\");c.appendChild(a),c.appendChild(b),c.style.height=\"0px\",c.style.overflow=\"hidden\",document.body.appendChild(c),b.style.verticalAlign=\"baseline\";var e=d(b),f=d(a),g=e[1]-f[1];b.style.verticalAlign=\"bottom\",e=d(b),f=d(a);var h=e[1]-f[1],i=h-g;return document.body.removeChild(c),this._setProperty(\"_textAscent\",g),this._setProperty(\"_textDescent\",i),this},b.exports=e.Renderer},{\"../core/constants\":49,\"./core\":50}],57:[function(a,b,c){var d=a(\"./core\"),e=a(\"./canvas\"),f=a(\"./constants\"),g=a(\"../image/filters\");a(\"./p5.Renderer\");var h=\"rgba(0,0,0,0)\";d.Renderer2D=function(a,b,c){return d.Renderer.call(this,a,b,c),this.drawingContext=this.canvas.getContext(\"2d\"),this._pInst._setProperty(\"drawingContext\",this.drawingContext),this},d.Renderer2D.prototype=Object.create(d.Renderer.prototype),d.Renderer2D.prototype._applyDefaults=function(){this.drawingContext.fillStyle=f._DEFAULT_FILL,this.drawingContext.strokeStyle=f._DEFAULT_STROKE,this.drawingContext.lineCap=f.ROUND,this.drawingContext.font=\"normal 12px sans-serif\"},d.Renderer2D.prototype.resize=function(a,b){d.Renderer.prototype.resize.call(this,a,b),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},d.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),arguments[0]instanceof d.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var a=this.drawingContext.fillStyle,b=this._pInst.color.apply(this._pInst,arguments),c=b.toString();this.drawingContext.fillStyle=c,this.drawingContext.fillRect(0,0,this.width,this.height),this.drawingContext.fillStyle=a}this.drawingContext.restore()},d.Renderer2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)},d.Renderer2D.prototype.fill=function(){var a=this.drawingContext,b=this._pInst.color.apply(this._pInst,arguments);a.fillStyle=b.toString()},d.Renderer2D.prototype.stroke=function(){var a=this.drawingContext,b=this._pInst.color.apply(this._pInst,arguments);a.strokeStyle=b.toString()},d.Renderer2D.prototype.image=function(a,b,c,e,f,g,h,i,j){var k;try{this._tint&&(d.MediaElement&&a instanceof d.MediaElement&&a.loadPixels(),a.canvas&&(k=this._getTintedImageCanvas(a))),k||(k=a.canvas||a.elt),this.drawingContext.drawImage(k,b,c,e,f,g,h,i,j)}catch(l){if(\"NS_ERROR_NOT_AVAILABLE\"!==l.name)throw l}},d.Renderer2D.prototype._getTintedImageCanvas=function(a){if(!a.canvas)return a;var b=g._toPixels(a.canvas),c=document.createElement(\"canvas\");c.width=a.canvas.width,c.height=a.canvas.height;for(var d=c.getContext(\"2d\"),e=d.createImageData(a.canvas.width,a.canvas.height),f=e.data,h=0;h<b.length;h+=4){var i=b[h],j=b[h+1],k=b[h+2],l=b[h+3];f[h]=i*this._tint[0]/255,f[h+1]=j*this._tint[1]/255,f[h+2]=k*this._tint[2]/255,f[h+3]=l*this._tint[3]/255}return d.putImageData(e,0,0),c},d.Renderer2D.prototype.blendMode=function(a){this.drawingContext.globalCompositeOperation=a},d.Renderer2D.prototype.blend=function(){var a=this.drawingContext.globalCompositeOperation,b=arguments[arguments.length-1],c=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=b,this._pInst.copy.apply(this._pInst,c),this.drawingContext.globalCompositeOperation=a},d.Renderer2D.prototype.copy=function(){var a,b,c,e,f,g,h,i,j;if(9===arguments.length)a=arguments[0],b=arguments[1],c=arguments[2],e=arguments[3],f=arguments[4],g=arguments[5],h=arguments[6],i=arguments[7],j=arguments[8];else{if(8!==arguments.length)throw new Error(\"Signature not supported\");a=this._pInst,b=arguments[0],c=arguments[1],e=arguments[2],f=arguments[3],g=arguments[4],h=arguments[5],i=arguments[6],j=arguments[7]}d.Renderer2D._copyHelper(a,b,c,e,f,g,h,i,j)},d.Renderer2D._copyHelper=function(a,b,c,d,e,f,g,h,i){var j=a.canvas.width/a.width;this.drawingContext.drawImage(a.canvas,j*b,j*c,j*d,j*e,f,g,h,i)},d.Renderer2D.prototype.get=function(a,b,c,e){if(void 0===a&&void 0===b&&void 0===c&&void 0===e?(a=0,b=0,c=this.width,e=this.height):void 0===c&&void 0===e&&(c=1,e=1),0>a+c||0>b+e||a>this.width||b>this.height)return[0,0,0,255];var f=this._pInst||this,g=f._pixelDensity;if(this.loadPixels.call(f),a=Math.floor(a),b=Math.floor(b),1===c&&1===e)return[f.pixels[4*g*(b*this.width+a)],f.pixels[g*(4*(b*this.width+a)+1)],f.pixels[g*(4*(b*this.width+a)+2)],f.pixels[g*(4*(b*this.width+a)+3)]];var h=a*g,i=b*g,j=Math.min(c,f.width),k=Math.min(e,f.height),l=j*g,m=k*g,n=new d.Image(j,k);return n.canvas.getContext(\"2d\").drawImage(this.canvas,h,i,l,m,0,0,j,k),n},d.Renderer2D.prototype.loadPixels=function(){var a=this._pixelDensity||this._pInst._pixelDensity,b=this.width*a,c=this.height*a,d=this.drawingContext.getImageData(0,0,b,c);this._pInst?(this._pInst._setProperty(\"imageData\",d),this._pInst._setProperty(\"pixels\",d.data)):(this._setProperty(\"imageData\",d),this._setProperty(\"pixels\",d.data))},d.Renderer2D.prototype.set=function(a,b,c){if(a=Math.floor(a),b=Math.floor(b),c instanceof d.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this.drawingContext.drawImage(c.canvas,a,b),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var e=this._pInst||this,f=0,g=0,h=0,i=0,j=4*(b*e._pixelDensity*this.width*e._pixelDensity+a*e._pixelDensity);if(e.imageData||e.loadPixels.call(e),\"number\"==typeof c)j<e.pixels.length&&(f=c,g=c,h=c,i=255);else if(c instanceof Array){if(c.length<4)throw new Error(\"pixel array must be of the form [R, G, B, A]\");j<e.pixels.length&&(f=c[0],g=c[1],h=c[2],i=c[3])}else c instanceof d.Color&&j<e.pixels.length&&(f=c.levels[0],g=c.levels[1],h=c.levels[2],i=c.levels[3]);for(var k=0;k<e._pixelDensity;k++)for(var l=0;l<e._pixelDensity;l++)j=4*((b*e._pixelDensity+l)*this.width*e._pixelDensity+(a*e._pixelDensity+k)),e.pixels[j]=f,e.pixels[j+1]=g,e.pixels[j+2]=h,e.pixels[j+3]=i}},d.Renderer2D.prototype.updatePixels=function(a,b,c,d){var e=this._pixelDensity||this._pInst._pixelDensity;void 0===a&&void 0===b&&void 0===c&&void 0===d&&(a=0,b=0,c=this.width,d=this.height),c*=e,d*=e,this._pInst?this.drawingContext.putImageData(this._pInst.imageData,a,b,0,0,c,d):this.drawingContext.putImageData(this.imageData,a,b,0,0,c,d)},d.Renderer2D.prototype._acuteArcToBezier=function(a,b){var c=b/2,d=Math.cos(c),e=Math.sin(c),f=1/Math.tan(c),g=a+c,h=Math.cos(g),i=Math.sin(g),j=(4-d)/3,k=e+(d-j)*f;return{ax:Math.cos(a),ay:Math.sin(a),bx:j*h+k*i,by:j*i-k*h,cx:j*h-k*i,cy:j*i+k*h,dx:Math.cos(a+b),dy:Math.sin(a+b)}},d.Renderer2D.prototype.arc=function(a,b,c,d,g,h,i){for(var j=this.drawingContext,k=e.arcModeAdjust(a,b,c,d,this._ellipseMode),l=k.w/2,m=k.h/2,n=1e-5,o=0,p=[];h-g>n;)o=Math.min(h-g,f.HALF_PI),p.push(this._acuteArcToBezier(g,o)),g+=o;return this._doFill&&(j.beginPath(),p.forEach(function(a,b){0===b&&j.moveTo(k.x+a.ax*l,k.y+a.ay*m),j.bezierCurveTo(k.x+a.bx*l,k.y+a.by*m,k.x+a.cx*l,k.y+a.cy*m,k.x+a.dx*l,k.y+a.dy*m)}),(i===f.PIE||null==i)&&j.lineTo(k.x,k.y),j.closePath(),j.fill()),this._doStroke&&(j.beginPath(),p.forEach(function(a,b){0===b&&j.moveTo(k.x+a.ax*l,k.y+a.ay*m),j.bezierCurveTo(k.x+a.bx*l,k.y+a.by*m,k.x+a.cx*l,k.y+a.cy*m,k.x+a.dx*l,k.y+a.dy*m)}),i===f.PIE?(j.lineTo(k.x,k.y),j.closePath()):i===f.CHORD&&j.closePath(),j.stroke()),this},d.Renderer2D.prototype.ellipse=function(a,b,c,d){var f=this.drawingContext,g=this._doFill,i=this._doStroke;if(g&&!i){if(f.fillStyle===h)return this}else if(!g&&i&&f.strokeStyle===h)return this;var j=e.modeAdjust(a,b,c,d,this._ellipseMode),k=.5522847498,l=j.w/2*k,m=j.h/2*k,n=j.x+j.w,o=j.y+j.h,p=j.x+j.w/2,q=j.y+j.h/2;f.beginPath(),f.moveTo(j.x,q),f.bezierCurveTo(j.x,q-m,p-l,j.y,p,j.y),f.bezierCurveTo(p+l,j.y,n,q-m,n,q),f.bezierCurveTo(n,q+m,p+l,o,p,o),f.bezierCurveTo(p-l,o,j.x,q+m,j.x,q),f.closePath(),g&&f.fill(),i&&f.stroke()},d.Renderer2D.prototype.line=function(a,b,c,d){var e=this.drawingContext;return this._doStroke?e.strokeStyle===h?this:(e.lineWidth%2===1&&e.translate(.5,.5),e.beginPath(),e.moveTo(a,b),e.lineTo(c,d),e.stroke(),e.lineWidth%2===1&&e.translate(-.5,-.5),this):this},d.Renderer2D.prototype.point=function(a,b){var c=this.drawingContext,d=c.strokeStyle,e=c.fillStyle;return this._doStroke?c.strokeStyle===h?this:(a=Math.round(a),b=Math.round(b),c.fillStyle=d,c.lineWidth>1?(c.beginPath(),c.arc(a,b,c.lineWidth/2,0,f.TWO_PI,!1),c.fill()):c.fillRect(a,b,1,1),void(c.fillStyle=e)):this},d.Renderer2D.prototype.quad=function(a,b,c,d,e,f,g,i){var j=this.drawingContext,k=this._doFill,l=this._doStroke;if(k&&!l){if(j.fillStyle===h)return this}else if(!k&&l&&j.strokeStyle===h)return this;return j.beginPath(),j.moveTo(a,b),j.lineTo(c,d),j.lineTo(e,f),j.lineTo(g,i),j.closePath(),k&&j.fill(),l&&j.stroke(),this},d.Renderer2D.prototype.rect=function(a,b,c,d,f,g,i,j){var k=this.drawingContext,l=this._doFill,m=this._doStroke;if(l&&!m){if(k.fillStyle===h)return this}else if(!l&&m&&k.strokeStyle===h)return this;var n=e.modeAdjust(a,b,c,d,this._rectMode);if(this._doStroke&&k.lineWidth%2===1&&k.translate(.5,.5),k.beginPath(),\"undefined\"==typeof f)k.rect(n.x,n.y,n.w,n.h);else{\"undefined\"==typeof g&&(g=f),\"undefined\"==typeof i&&(i=g),\"undefined\"==typeof j&&(j=i);var o=n.x,p=n.y,q=n.w,r=n.h,s=q/2,t=r/2;2*f>q&&(f=s),2*f>r&&(f=t),2*g>q&&(g=s),2*g>r&&(g=t),2*i>q&&(i=s),2*i>r&&(i=t),2*j>q&&(j=s),2*j>r&&(j=t),k.beginPath(),k.moveTo(o+f,p),k.arcTo(o+q,p,o+q,p+r,g),k.arcTo(o+q,p+r,o,p+r,i),k.arcTo(o,p+r,o,p,j),k.arcTo(o,p,o+q,p,f),k.closePath()}return this._doFill&&k.fill(),this._doStroke&&k.stroke(),this._doStroke&&k.lineWidth%2===1&&k.translate(-.5,-.5),this},d.Renderer2D.prototype.triangle=function(a,b,c,d,e,f){var g=this.drawingContext,i=this._doFill,j=this._doStroke;if(i&&!j){if(g.fillStyle===h)return this}else if(!i&&j&&g.strokeStyle===h)return this;g.beginPath(),g.moveTo(a,b),g.lineTo(c,d),g.lineTo(e,f),g.closePath(),i&&g.fill(),j&&g.stroke()},d.Renderer2D.prototype.endShape=function(a,b,c,d,e,g,h){if(0===b.length)return this;if(!this._doStroke&&!this._doFill)return this;var i,j=a===f.CLOSE;j&&!g&&b.push(b[0]);var k,l,m=b.length;if(!c||h!==f.POLYGON&&null!==h)if(!d||h!==f.POLYGON&&null!==h)if(!e||h!==f.POLYGON&&null!==h)if(h===f.POINTS)for(k=0;m>k;k++)i=b[k],this._doStroke&&this._pInst.stroke(i[6]),this._pInst.point(i[0],i[1]);else if(h===f.LINES)for(k=0;m>k+1;k+=2)i=b[k],this._doStroke&&this._pInst.stroke(b[k+1][6]),this._pInst.line(i[0],i[1],b[k+1][0],b[k+1][1]);else if(h===f.TRIANGLES)for(k=0;m>k+2;k+=3)i=b[k],this.drawingContext.beginPath(),this.drawingContext.moveTo(i[0],i[1]),this.drawingContext.lineTo(b[k+1][0],b[k+1][1]),this.drawingContext.lineTo(b[k+2][0],b[k+2][1]),this.drawingContext.lineTo(i[0],i[1]),this._doFill&&(this._pInst.fill(b[k+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(b[k+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(h===f.TRIANGLE_STRIP)for(k=0;m>k+1;k++)i=b[k],this.drawingContext.beginPath(),this.drawingContext.moveTo(b[k+1][0],b[k+1][1]),this.drawingContext.lineTo(i[0],i[1]),this._doStroke&&this._pInst.stroke(b[k+1][6]),this._doFill&&this._pInst.fill(b[k+1][5]),m>k+2&&(this.drawingContext.lineTo(b[k+2][0],b[k+2][1]),this._doStroke&&this._pInst.stroke(b[k+2][6]),this._doFill&&this._pInst.fill(b[k+2][5])),this._doFillStrokeClose();else if(h===f.TRIANGLE_FAN){if(m>2)for(this.drawingContext.beginPath(),this.drawingContext.moveTo(b[0][0],b[0][1]),this.drawingContext.lineTo(b[1][0],b[1][1]),this.drawingContext.lineTo(b[2][0],b[2][1]),this._doFill&&this._pInst.fill(b[2][5]),this._doStroke&&this._pInst.stroke(b[2][6]),this._doFillStrokeClose(),k=3;m>k;k++)i=b[k],this.drawingContext.beginPath(),this.drawingContext.moveTo(b[0][0],b[0][1]),this.drawingContext.lineTo(b[k-1][0],b[k-1][1]),this.drawingContext.lineTo(i[0],i[1]),this._doFill&&this._pInst.fill(i[5]),this._doStroke&&this._pInst.stroke(i[6]),this._doFillStrokeClose()}else if(h===f.QUADS)for(k=0;m>k+3;k+=4){for(i=b[k],this.drawingContext.beginPath(),this.drawingContext.moveTo(i[0],i[1]),l=1;4>l;l++)this.drawingContext.lineTo(b[k+l][0],b[k+l][1]);this.drawingContext.lineTo(i[0],i[1]),this._doFill&&this._pInst.fill(b[k+3][5]),this._doStroke&&this._pInst.stroke(b[k+3][6]),this._doFillStrokeClose()}else if(h===f.QUAD_STRIP){if(m>3)for(k=0;m>k+1;k+=2)i=b[k],this.drawingContext.beginPath(),m>k+3?(this.drawingContext.moveTo(b[k+2][0],b[k+2][1]),this.drawingContext.lineTo(i[0],i[1]),this.drawingContext.lineTo(b[k+1][0],b[k+1][1]),this.drawingContext.lineTo(b[k+3][0],b[k+3][1]),this._doFill&&this._pInst.fill(b[k+3][5]),this._doStroke&&this._pInst.stroke(b[k+3][6])):(this.drawingContext.moveTo(i[0],i[1]),this.drawingContext.lineTo(b[k+1][0],b[k+1][1])),this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(b[0][0],b[0][1]),k=1;m>k;k++)i=b[k],i.isVert&&(i.moveTo?this.drawingContext.moveTo(i[0],i[1]):this.drawingContext.lineTo(i[0],i[1]));this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),k=0;m>k;k++)b[k].isVert?b[k].moveTo?this.drawingContext.moveTo([0],b[k][1]):this.drawingContext.lineTo(b[k][0],b[k][1]):this.drawingContext.quadraticCurveTo(b[k][0],b[k][1],b[k][2],b[k][3]);this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),k=0;m>k;k++)b[k].isVert?b[k].moveTo?this.drawingContext.moveTo(b[k][0],b[k][1]):this.drawingContext.lineTo(b[k][0],b[k][1]):this.drawingContext.bezierCurveTo(b[k][0],b[k][1],b[k][2],b[k][3],b[k][4],b[k][5]);this._doFillStrokeClose()}else if(m>3){var n=[],o=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(b[1][0],b[1][1]),k=1;m>k+2;k++)i=b[k],n[0]=[i[0],i[1]],n[1]=[i[0]+(o*b[k+1][0]-o*b[k-1][0])/6,i[1]+(o*b[k+1][1]-o*b[k-1][1])/6],n[2]=[b[k+1][0]+(o*b[k][0]-o*b[k+2][0])/6,b[k+1][1]+(o*b[k][1]-o*b[k+2][1])/6],n[3]=[b[k+1][0],b[k+1][1]],this.drawingContext.bezierCurveTo(n[1][0],n[1][1],n[2][0],n[2][1],n[3][0],n[3][1]);j&&this.drawingContext.lineTo(b[k+1][0],b[k+1][1]),this._doFillStrokeClose()}return c=!1,d=!1,e=!1,g=!1,j&&b.pop(),this},d.Renderer2D.prototype.noSmooth=function(){return\"imageSmoothingEnabled\"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!1:\"mozImageSmoothingEnabled\"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!1:\"webkitImageSmoothingEnabled\"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!1:\"msImageSmoothingEnabled\"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!1),this},d.Renderer2D.prototype.smooth=function(){return\"imageSmoothingEnabled\"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!0:\"mozImageSmoothingEnabled\"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!0:\"webkitImageSmoothingEnabled\"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!0:\"msImageSmoothingEnabled\"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!0),this},d.Renderer2D.prototype.strokeCap=function(a){return(a===f.ROUND||a===f.SQUARE||a===f.PROJECT)&&(this.drawingContext.lineCap=a),this},d.Renderer2D.prototype.strokeJoin=function(a){return(a===f.ROUND||a===f.BEVEL||a===f.MITER)&&(this.drawingContext.lineJoin=a),this},d.Renderer2D.prototype.strokeWeight=function(a){return\"undefined\"==typeof a||0===a?this.drawingContext.lineWidth=1e-4:this.drawingContext.lineWidth=a,this},d.Renderer2D.prototype._getFill=function(){return this.drawingContext.fillStyle},d.Renderer2D.prototype._getStroke=function(){return this.drawingContext.strokeStyle},d.Renderer2D.prototype.bezier=function(a,b,c,d,e,f,g,h){return this._pInst.beginShape(),this._pInst.vertex(a,b),this._pInst.bezierVertex(c,d,e,f,g,h),this._pInst.endShape(),this},d.Renderer2D.prototype.curve=function(a,b,c,d,e,f,g,h){return this._pInst.beginShape(),this._pInst.curveVertex(a,b),this._pInst.curveVertex(c,d),this._pInst.curveVertex(e,f),this._pInst.curveVertex(g,h),this._pInst.endShape(),this},d.Renderer2D.prototype._doFillStrokeClose=function(){this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke(),this.drawingContext.closePath()},d.Renderer2D.prototype.applyMatrix=function(a,b,c,d,e,f){this.drawingContext.transform(a,b,c,d,e,f)},d.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},d.Renderer2D.prototype.rotate=function(a){this.drawingContext.rotate(a)},d.Renderer2D.prototype.scale=function(a,b){return this.drawingContext.scale(a,b),this},d.Renderer2D.prototype.shearX=function(a){return this._pInst._angleMode===f.DEGREES&&(a=this._pInst.radians(a)),this.drawingContext.transform(1,0,this._pInst.tan(a),1,0,0),this},d.Renderer2D.prototype.shearY=function(a){return this._pInst._angleMode===f.DEGREES&&(a=this._pInst.radians(a)),this.drawingContext.transform(1,this._pInst.tan(a),0,1,0,0),this},d.Renderer2D.prototype.translate=function(a,b){return this.drawingContext.translate(a,b),this},d.Renderer2D.prototype.text=function(a,b,c,d,e){var g,h,i,j,k,l,m,n,o,p,q=this._pInst,r=Number.MAX_VALUE;if(this._doFill||this._doStroke){if(\"string\"!=typeof a&&(a=a.toString()),a=a.replace(/(\\t)/g,\"  \"),g=a.split(\"\\n\"),\"undefined\"!=typeof d){for(o=0,i=0;i<g.length;i++)for(k=\"\",n=g[i].split(\" \"),h=0;h<n.length;h++)l=k+n[h]+\" \",\nm=this.textWidth(l),m>d?(k=n[h]+\" \",o+=q.textLeading()):k=l;switch(this._rectMode===f.CENTER&&(b-=d/2,c-=e/2),this.drawingContext.textAlign){case f.CENTER:b+=d/2;break;case f.RIGHT:b+=d}if(\"undefined\"!=typeof e){switch(this.drawingContext.textBaseline){case f.BOTTOM:c+=e-o;break;case f._CTX_MIDDLE:c+=(e-o)/2;break;case f.BASELINE:p=!0,this.drawingContext.textBaseline=f.TOP}r=c+e-q.textAscent()}for(i=0;i<g.length;i++){for(k=\"\",n=g[i].split(\" \"),h=0;h<n.length;h++)l=k+n[h]+\" \",m=this.textWidth(l),m>d&&k.length>0?(this._renderText(q,k,b,c,r),k=n[h]+\" \",c+=q.textLeading()):k=l;this._renderText(q,k,b,c,r),c+=q.textLeading()}}else for(j=0;j<g.length;j++)this._renderText(q,g[j],b,c,r),c+=q.textLeading();return p&&(this.drawingContext.textBaseline=f.BASELINE),q}},d.Renderer2D.prototype._renderText=function(a,b,c,d,e){return d>=e?void 0:(a.push(),this._isOpenType()?this._textFont._renderPath(b,c,d,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(b,c,d),this._doFill&&(this.drawingContext.fillStyle=this._fillSet?this.drawingContext.fillStyle:f._DEFAULT_TEXT_FILL,this.drawingContext.fillText(b,c,d))),a.pop(),a)},d.Renderer2D.prototype.textWidth=function(a){return this._isOpenType()?this._textFont._textWidth(a):this.drawingContext.measureText(a).width},d.Renderer2D.prototype.textAlign=function(a,b){if(arguments.length)return(a===f.LEFT||a===f.RIGHT||a===f.CENTER)&&(this.drawingContext.textAlign=a),(b===f.TOP||b===f.BOTTOM||b===f.CENTER||b===f.BASELINE)&&(b===f.CENTER?this.drawingContext.textBaseline=f._CTX_MIDDLE:this.drawingContext.textBaseline=b),this._pInst;var c=this.drawingContext.textBaseline;return c===f._CTX_MIDDLE&&(c=f.CENTER),{horizontal:this.drawingContext.textAlign,vertical:c}},d.Renderer2D.prototype._applyTextProperties=function(){var a,b=this._pInst;return this._setProperty(\"_textAscent\",null),this._setProperty(\"_textDescent\",null),a=this._textFont,this._isOpenType()&&(a=this._textFont.font.familyName,this._setProperty(\"_textStyle\",this._textFont.font.styleName)),this.drawingContext.font=this._textStyle+\" \"+this._textSize+\"px \"+a,b},d.Renderer2D.prototype.push=function(){this.drawingContext.save()},d.Renderer2D.prototype.pop=function(){this.drawingContext.restore()},b.exports=d.Renderer2D},{\"../image/filters\":67,\"./canvas\":48,\"./constants\":49,\"./core\":50,\"./p5.Renderer\":56}],58:[function(a,b,c){var d=a(\"./core\"),e=a(\"./constants\");a(\"./p5.Graphics\"),a(\"./p5.Renderer2D\"),a(\"../3d/p5.Renderer3D\");var f=\"defaultCanvas0\";d.prototype.createCanvas=function(a,b,c){var g,h,i=c||e.P2D;if(arguments[3]&&(g=\"boolean\"==typeof arguments[3]?arguments[3]:!1),i===e.WEBGL)h=document.getElementById(f),h&&h.parentNode.removeChild(h),h=document.createElement(\"canvas\"),h.id=f;else if(g){h=document.createElement(\"canvas\");for(var j=0;document.getElementById(\"defaultCanvas\"+j);)j++;f=\"defaultCanvas\"+j,h.id=f}else h=this.canvas;return this._setupDone||(h.className+=\" p5_hidden\",h.style.visibility=\"hidden\"),this._userNode?this._userNode.appendChild(h):document.body.appendChild(h),i===e.WEBGL?(this._setProperty(\"_renderer\",new d.Renderer3D(h,this,!0)),this._isdefaultGraphics=!0):this._isdefaultGraphics||(this._setProperty(\"_renderer\",new d.Renderer2D(h,this,!0)),this._isdefaultGraphics=!0),this._renderer.resize(a,b),this._renderer._applyDefaults(),g&&this._elements.push(this._renderer),this._renderer},d.prototype.resizeCanvas=function(a,b,c){if(this._renderer){var d={};for(var e in this.drawingContext){var f=this.drawingContext[e];\"object\"!=typeof f&&\"function\"!=typeof f&&(d[e]=f)}this._renderer.resize(a,b);for(var g in d)this.drawingContext[g]=d[g];c||this.redraw()}},d.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},d.prototype.createGraphics=function(a,b,c){return new d.Graphics(a,b,c,this)},d.prototype.blendMode=function(a){if(a!==e.BLEND&&a!==e.DARKEST&&a!==e.LIGHTEST&&a!==e.DIFFERENCE&&a!==e.MULTIPLY&&a!==e.EXCLUSION&&a!==e.SCREEN&&a!==e.REPLACE&&a!==e.OVERLAY&&a!==e.HARD_LIGHT&&a!==e.SOFT_LIGHT&&a!==e.DODGE&&a!==e.BURN&&a!==e.ADD&&a!==e.NORMAL)throw new Error(\"Mode \"+a+\" not recognized.\");this._renderer.blendMode(a)},b.exports=d},{\"../3d/p5.Renderer3D\":38,\"./constants\":49,\"./core\":50,\"./p5.Graphics\":55,\"./p5.Renderer2D\":57}],59:[function(a,b,c){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1e3/60)}}(),window.performance=window.performance||{},window.performance.now=function(){var a=Date.now();return window.performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow||function(){return Date.now()-a}}(),function(){\"use strict\";\"undefined\"!=typeof Uint8ClampedArray&&(Uint8ClampedArray.prototype.slice=Array.prototype.slice)}()},{}],60:[function(a,b,c){\"use strict\";var d=a(\"./core\");d.prototype.exit=function(){throw\"exit() not implemented, see remove()\"},d.prototype.noLoop=function(){this._loop=!1},d.prototype.loop=function(){this._loop=!0,this._draw()},d.prototype.push=function(){this._renderer.push(),this._styles.push({_doStroke:this._renderer._doStroke,_doFill:this._renderer._doFill,_tint:this._renderer._tint,_imageMode:this._renderer._imageMode,_rectMode:this._renderer._rectMode,_ellipseMode:this._renderer._ellipseMode,_colorMode:this._renderer._colorMode,_textFont:this._renderer._textFont,_textLeading:this._renderer._textLeading,_textSize:this._renderer._textSize,_textStyle:this._renderer._textStyle})},d.prototype.pop=function(){this._renderer.pop();var a=this._styles.pop();for(var b in a)this._renderer[b]=a[b]},d.prototype.pushStyle=function(){throw new Error(\"pushStyle() not used, see push()\")},d.prototype.popStyle=function(){throw new Error(\"popStyle() not used, see pop()\")},d.prototype.redraw=function(){var a=this.setup||window.setup,b=this.draw||window.draw;if(\"function\"==typeof b){this.push(),\"undefined\"==typeof a&&this.scale(this._pixelDensity,this._pixelDensity);var c=this;this._registeredMethods.pre.forEach(function(a){a.call(c)}),b(),this._registeredMethods.post.forEach(function(a){a.call(c)}),this.pop()}},d.prototype.size=function(){var a=\"size() is not a valid p5 function, to set the size of the \";throw a+=\"drawing canvas, please use createCanvas() instead\"},b.exports=d},{\"./core\":50}],61:[function(a,b,c){\"use strict\";var d=a(\"./core\"),e=a(\"./constants\");d.prototype.applyMatrix=function(a,b,c,d,e,f){return this._renderer.applyMatrix(a,b,c,d,e,f),this},d.prototype.popMatrix=function(){throw new Error(\"popMatrix() not used, see pop()\")},d.prototype.printMatrix=function(){throw new Error(\"printMatrix() not implemented\")},d.prototype.pushMatrix=function(){throw new Error(\"pushMatrix() not used, see push()\")},d.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},d.prototype.rotate=function(){var a=arguments[0];return this._angleMode===e.DEGREES&&(a=this.radians(a)),arguments.length>1?this._renderer.rotate(a,arguments[1]):this._renderer.rotate(a),this},d.prototype.rotateX=function(a){for(var b=new Array(arguments.length),c=0;c<b.length;++c)b[c]=arguments[c];if(!this._renderer.isP3D)throw\"not supported in p2d. Please use webgl mode\";return this._validateParameters(\"rotateX\",b,[[\"Number\"]]),this._renderer.rotateX(a),this},d.prototype.rotateY=function(a){if(!this._renderer.isP3D)throw\"not supported in p2d. Please use webgl mode\";for(var b=new Array(arguments.length),c=0;c<b.length;++c)b[c]=arguments[c];return this._validateParameters(\"rotateY\",b,[[\"Number\"]]),this._renderer.rotateY(a),this},d.prototype.rotateZ=function(a){if(!this._renderer.isP3D)throw\"not supported in p2d. Please use webgl mode\";for(var b=new Array(arguments.length),c=0;c<b.length;++c)b[c]=arguments[c];return this._validateParameters(\"rotateZ\",b,[[\"Number\"]]),this._renderer.rotateZ(a),this},d.prototype.scale=function(){for(var a,b,c,e=new Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];return e[0]instanceof d.Vector?(a=e[0].x,b=e[0].y,c=e[0].z):e[0]instanceof Array?(a=e[0][0],b=e[0][1],c=e[0][2]||1):1===e.length?a=b=c=e[0]:(a=e[0],b=e[1],c=e[2]||1),this._renderer.isP3D?this._renderer.scale.call(this._renderer,a,b,c):this._renderer.scale.call(this._renderer,a,b),this},d.prototype.shearX=function(a){return this._angleMode===e.DEGREES&&(a=this.radians(a)),this._renderer.shearX(a),this},d.prototype.shearY=function(a){return this._angleMode===e.DEGREES&&(a=this.radians(a)),this._renderer.shearY(a),this},d.prototype.translate=function(a,b,c){for(var d=new Array(arguments.length),e=0;e<d.length;++e)d[e]=arguments[e];return this._renderer.isP3D?(this._validateParameters(\"translate\",d,[[\"Number\",\"Number\",\"Number\"]]),this._renderer.translate(a,b,c)):(this._validateParameters(\"translate\",d,[[\"Number\",\"Number\"]]),this._renderer.translate(a,b)),this},b.exports=d},{\"./constants\":49,\"./core\":50}],62:[function(a,b,c){\"use strict\";var d=a(\"./core\"),e=a(\"./constants\"),f=null,g=[],h=[],i=!1,j=!1,k=!1,l=!1;d.prototype.beginContour=function(){return h=[],l=!0,this},d.prototype.beginShape=function(a){return f=a===e.POINTS||a===e.LINES||a===e.TRIANGLES||a===e.TRIANGLE_FAN||a===e.TRIANGLE_STRIP||a===e.QUADS||a===e.QUAD_STRIP?a:null,this._renderer.isP3D?this._renderer.beginShape(a):(g=[],h=[]),this},d.prototype.bezierVertex=function(a,b,c,d,e,f){if(0===g.length)throw\"vertex() must be used once before calling bezierVertex()\";i=!0;for(var j=[],k=0;k<arguments.length;k++)j[k]=arguments[k];return j.isVert=!1,l?h.push(j):g.push(j),this},d.prototype.curveVertex=function(a,b){return j=!0,this.vertex(a,b),this},d.prototype.endContour=function(){var a=h[0].slice();a.isVert=h[0].isVert,a.moveTo=!1,h.push(a),g.push(g[0]);for(var b=0;b<h.length;b++)g.push(h[b]);return this},d.prototype.endShape=function(a){if(this._renderer.isP3D)this._renderer.endShape();else{if(0===g.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var b=a===e.CLOSE;b&&!l&&g.push(g[0]),this._renderer.endShape(a,g,j,i,k,l,f),j=!1,i=!1,k=!1,l=!1,b&&g.pop()}return this},d.prototype.quadraticVertex=function(a,b,c,d){if(this._contourInited){var f={};return f.x=a,f.y=b,f.x3=c,f.y3=d,f.type=e.QUADRATIC,this._contourVertices.push(f),this}if(!(g.length>0))throw\"vertex() must be used once before calling quadraticVertex()\";k=!0;for(var i=[],j=0;j<arguments.length;j++)i[j]=arguments[j];return i.isVert=!1,l?h.push(i):g.push(i),this},d.prototype.vertex=function(a,b,c){for(var d=new Array(arguments.length),e=0;e<d.length;++e)d[e]=arguments[e];if(this._renderer.isP3D)this._validateParameters(\"vertex\",d,[[\"Number\",\"Number\",\"Number\"]]),this._renderer.vertex(arguments[0],arguments[1],arguments[2]);else{this._validateParameters(\"vertex\",d,[[\"Number\",\"Number\"],[\"Number\",\"Number\",\"Number\"]]);var f=[];f.isVert=!0,f[0]=a,f[1]=b,f[2]=0,f[3]=0,f[4]=0,f[5]=this._renderer._getFill(),f[6]=this._renderer._getStroke(),c&&(f.moveTo=c),l?(0===h.length&&(f.moveTo=!0),h.push(f)):g.push(f)}return this},b.exports=d},{\"./constants\":49,\"./core\":50}],63:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.deviceOrientation=void 0,d.prototype.accelerationX=0,d.prototype.accelerationY=0,d.prototype.accelerationZ=0,d.prototype.pAccelerationX=0,d.prototype.pAccelerationY=0,d.prototype.pAccelerationZ=0,d.prototype._updatePAccelerations=function(){this._setProperty(\"pAccelerationX\",this.accelerationX),this._setProperty(\"pAccelerationY\",this.accelerationY),this._setProperty(\"pAccelerationZ\",this.accelerationZ)},d.prototype.rotationX=0,d.prototype.rotationY=0,d.prototype.rotationZ=0,d.prototype.pRotationX=0,d.prototype.pRotationY=0,d.prototype.pRotationZ=0;var e,f,g,h=0,i=0,j=0,k=\"clockwise\",l=\"clockwise\",m=\"clockwise\";d.prototype._updatePRotations=function(){this._setProperty(\"pRotationX\",this.rotationX),this._setProperty(\"pRotationY\",this.rotationY),this._setProperty(\"pRotationZ\",this.rotationZ)},d.prototype.turnAxis=void 0;var n=.5,o=30;d.prototype.setMoveThreshold=function(a){\"number\"==typeof a&&(n=a)},d.prototype.setShakeThreshold=function(a){\"number\"==typeof a&&(o=a)},d.prototype._ondeviceorientation=function(a){this._updatePRotations(),this._setProperty(\"rotationX\",a.beta),this._setProperty(\"rotationY\",a.gamma),this._setProperty(\"rotationZ\",a.alpha),this._handleMotion()},d.prototype._ondevicemotion=function(a){this._updatePAccelerations(),this._setProperty(\"accelerationX\",2*a.acceleration.x),this._setProperty(\"accelerationY\",2*a.acceleration.y),this._setProperty(\"accelerationZ\",2*a.acceleration.z),this._handleMotion()},d.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty(\"deviceOrientation\",\"landscape\"):0===window.orientation?this._setProperty(\"deviceOrientation\",\"portrait\"):void 0===window.orientation&&this._setProperty(\"deviceOrientation\",\"undefined\");var a=this.deviceMoved||window.deviceMoved;\"function\"==typeof a&&(Math.abs(this.accelerationX-this.pAccelerationX)>n||Math.abs(this.accelerationY-this.pAccelerationY)>n||Math.abs(this.accelerationZ-this.pAccelerationZ)>n)&&a();var b=this.deviceTurned||window.deviceTurned;if(\"function\"==typeof b){var c=this.rotationX+180,d=this.pRotationX+180,p=h+180;c-d>0&&270>c-d||-270>c-d?k=\"clockwise\":(0>c-d||c-d>270)&&(k=\"counter-clockwise\"),k!==e&&(p=c),Math.abs(c-p)>90&&Math.abs(c-p)<270&&(p=c,this._setProperty(\"turnAxis\",\"X\"),b()),e=k,h=p-180;var q=this.rotationY+180,r=this.pRotationY+180,s=i+180;q-r>0&&270>q-r||-270>q-r?l=\"clockwise\":(0>q-r||q-this.pRotationY>270)&&(l=\"counter-clockwise\"),l!==f&&(s=q),Math.abs(q-s)>90&&Math.abs(q-s)<270&&(s=q,this._setProperty(\"turnAxis\",\"Y\"),b()),f=l,i=s-180,this.rotationZ-this.pRotationZ>0&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?m=\"clockwise\":(this.rotationZ-this.pRotationZ<0||this.rotationZ-this.pRotationZ>270)&&(m=\"counter-clockwise\"),m!==g&&(j=this.rotationZ),Math.abs(this.rotationZ-j)>90&&Math.abs(this.rotationZ-j)<270&&(j=this.rotationZ,this._setProperty(\"turnAxis\",\"Z\"),b()),g=m,this._setProperty(\"turnAxis\",void 0)}var t=this.deviceShaken||window.deviceShaken;if(\"function\"==typeof t){var u,v;null!==this.pAccelerationX&&(u=Math.abs(this.accelerationX-this.pAccelerationX),v=Math.abs(this.accelerationY-this.pAccelerationY)),u+v>o&&t()}},b.exports=d},{\"../core/core\":50}],64:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e={};d.prototype.isKeyPressed=!1,d.prototype.keyIsPressed=!1,d.prototype.key=\"\",d.prototype.keyCode=0,d.prototype._onkeydown=function(a){if(!e[a.which]){this._setProperty(\"isKeyPressed\",!0),this._setProperty(\"keyIsPressed\",!0),this._setProperty(\"keyCode\",a.which),e[a.which]=!0;var b=String.fromCharCode(a.which);b||(b=a.which),this._setProperty(\"key\",b);var c=this.keyPressed||window.keyPressed;if(\"function\"==typeof c&&!a.charCode){var d=c(a);d===!1&&a.preventDefault()}}},d.prototype._onkeyup=function(a){var b=this.keyReleased||window.keyReleased;this._setProperty(\"isKeyPressed\",!1),this._setProperty(\"keyIsPressed\",!1),this._setProperty(\"_lastKeyCodeTyped\",null),e[a.which]=!1;var c=String.fromCharCode(a.which);if(c||(c=a.which),this._setProperty(\"key\",c),this._setProperty(\"keyCode\",a.which),\"function\"==typeof b){var d=b(a);d===!1&&a.preventDefault()}},d.prototype._onkeypress=function(a){if(a.which!==this._lastKeyCodeTyped){this._setProperty(\"keyCode\",a.which),this._setProperty(\"_lastKeyCodeTyped\",a.which),this._setProperty(\"key\",String.fromCharCode(a.which));var b=this.keyTyped||window.keyTyped;if(\"function\"==typeof b){var c=b(a);c===!1&&a.preventDefault()}}},d.prototype._onblur=function(a){e={}},d.prototype.keyIsDown=function(a){return e[a]},b.exports=d},{\"../core/core\":50}],65:[function(a,b,c){\"use strict\";function d(a,b){var c=a.getBoundingClientRect();return{x:b.clientX-c.left,y:b.clientY-c.top}}var e=a(\"../core/core\"),f=a(\"../core/constants\");e.prototype._nextMouseX=0,e.prototype._nextMouseY=0,e.prototype.mouseX=0,e.prototype.mouseY=0,e.prototype.pmouseX=0,e.prototype.pmouseY=0,e.prototype.winMouseX=0,e.prototype.winMouseY=0,e.prototype.pwinMouseX=0,e.prototype.pwinMouseY=0,e.prototype.mouseButton=0,e.prototype.mouseIsPressed=!1,e.prototype.isMousePressed=!1,e.prototype._updateNextMouseCoords=function(a){if(\"touchstart\"===a.type||\"touchmove\"===a.type||\"touchend\"===a.type)this._setProperty(\"_nextMouseX\",this._nextTouchX),this._setProperty(\"_nextMouseY\",this._nextTouchY);else if(null!==this._curElement){var b=d(this._curElement.elt,a);this._setProperty(\"_nextMouseX\",b.x),this._setProperty(\"_nextMouseY\",b.y)}this._setProperty(\"winMouseX\",a.pageX),this._setProperty(\"winMouseY\",a.pageY)},e.prototype._updateMouseCoords=function(){this._setProperty(\"pmouseX\",this.mouseX),this._setProperty(\"pmouseY\",this.mouseY),this._setProperty(\"mouseX\",this._nextMouseX),this._setProperty(\"mouseY\",this._nextMouseY),this._setProperty(\"pwinMouseX\",this.winMouseX),this._setProperty(\"pwinMouseY\",this.winMouseY)},e.prototype._setMouseButton=function(a){1===a.button?this._setProperty(\"mouseButton\",f.CENTER):2===a.button?this._setProperty(\"mouseButton\",f.RIGHT):this._setProperty(\"mouseButton\",f.LEFT)},e.prototype._onmousemove=function(a){var b,c=this._isGlobal?window:this;this._updateNextMouseCoords(a),this._updateNextTouchCoords(a),this.isMousePressed?\"function\"==typeof c.mouseDragged?(b=c.mouseDragged(a),b===!1&&a.preventDefault()):\"function\"==typeof c.touchMoved&&(b=c.touchMoved(a),b===!1&&a.preventDefault()):\"function\"==typeof c.mouseMoved&&(b=c.mouseMoved(a),b===!1&&a.preventDefault())},e.prototype._onmousedown=function(a){var b,c=this._isGlobal?window:this;this._setProperty(\"isMousePressed\",!0),this._setProperty(\"mouseIsPressed\",!0),this._setMouseButton(a),this._updateNextMouseCoords(a),this._updateNextTouchCoords(a),\"function\"==typeof c.mousePressed?(b=c.mousePressed(a),b===!1&&a.preventDefault()):\"function\"==typeof c.touchStarted&&(b=c.touchStarted(a),b===!1&&a.preventDefault())},e.prototype._onmouseup=function(a){var b,c=this._isGlobal?window:this;this._setProperty(\"isMousePressed\",!1),this._setProperty(\"mouseIsPressed\",!1),\"function\"==typeof c.mouseReleased?(b=c.mouseReleased(a),b===!1&&a.preventDefault()):\"function\"==typeof c.touchEnded&&(b=c.touchEnded(a),b===!1&&a.preventDefault())},e.prototype._ondragend=e.prototype._onmouseup,e.prototype._ondragover=e.prototype._onmousemove,e.prototype._onclick=function(a){var b=this._isGlobal?window:this;if(\"function\"==typeof b.mouseClicked){var c=b.mouseClicked(a);c===!1&&a.preventDefault()}},e.prototype._onwheel=function(a){var b=this._isGlobal?window:this;if(\"function\"==typeof b.mouseWheel){a.delta=a.deltaY;var c=b.mouseWheel(a);c===!1&&a.preventDefault()}},b.exports=e},{\"../core/constants\":49,\"../core/core\":50}],66:[function(a,b,c){\"use strict\";function d(a,b,c){c=c||0;var d=a.getBoundingClientRect(),e=b.touches[c]||b.changedTouches[c];return{x:e.clientX-d.left,y:e.clientY-d.top,id:e.identifier}}var e=a(\"../core/core\");e.prototype._nextTouchX=0,e.prototype._nextTouchY=0,e.prototype.touchX=0,e.prototype.touchY=0,e.prototype.ptouchX=0,e.prototype.ptouchY=0,e.prototype.touches=[],e.prototype.touchIsDown=!1,e.prototype._updateNextTouchCoords=function(a){if(\"mousedown\"===a.type||\"mousemove\"===a.type||\"mouseup\"===a.type)this._setProperty(\"_nextTouchX\",this._nextMouseX),this._setProperty(\"_nextTouchY\",this._nextMouseY);else if(null!==this._curElement){var b=d(this._curElement.elt,a,0);this._setProperty(\"_nextTouchX\",b.x),this._setProperty(\"_nextTouchY\",b.y);for(var c=[],e=0;e<a.touches.length;e++)c[e]=d(this._curElement.elt,a,e);this._setProperty(\"touches\",c)}},e.prototype._updateTouchCoords=function(){this._setProperty(\"ptouchX\",this.touchX),this._setProperty(\"ptouchY\",this.touchY),this._setProperty(\"touchX\",this._nextTouchX),this._setProperty(\"touchY\",this._nextTouchY)},e.prototype._ontouchstart=function(a){var b,c=this._isGlobal?window:this;this._updateNextTouchCoords(a),this._updateNextMouseCoords(a),this._setProperty(\"touchIsDown\",!0),\"function\"==typeof c.touchStarted?(b=c.touchStarted(a),b===!1&&a.preventDefault()):\"function\"==typeof c.mousePressed&&(b=c.mousePressed(a),b===!1&&a.preventDefault())},e.prototype._ontouchmove=function(a){var b,c=this._isGlobal?window:this;this._updateNextTouchCoords(a),this._updateNextMouseCoords(a),\"function\"==typeof c.touchMoved?(b=c.touchMoved(a),b===!1&&a.preventDefault()):\"function\"==typeof c.mouseDragged&&(b=c.mouseDragged(a),b===!1&&a.preventDefault())},e.prototype._ontouchend=function(a){this._updateNextTouchCoords(a),this._updateNextMouseCoords(a),0===this.touches.length&&this._setProperty(\"touchIsDown\",!1);var b,c=this._isGlobal?window:this;\"function\"==typeof c.touchEnded?(b=c.touchEnded(a),b===!1&&a.preventDefault()):\"function\"==typeof c.mouseReleased&&(b=c.mouseReleased(a),b===!1&&a.preventDefault())},b.exports=e},{\"../core/core\":50}],67:[function(a,b,c){\"use strict\";function d(a){var b=3.5*a|0;if(b=1>b?1:248>b?b:248,g!==b){g=b,h=1+g<<1,i=new Int32Array(h),j=new Array(h);for(var c=0;h>c;c++)j[c]=new Int32Array(256);for(var d,e,f,k,l=1,m=b-1;b>l;l++){i[b+l]=i[m]=e=m*m,f=j[b+l],k=j[m--];for(var n=0;256>n;n++)f[n]=k[n]=e*n}d=i[b]=b*b,f=j[b];for(var o=0;256>o;o++)f[o]=d*o}}function e(a,b){for(var c=f._toPixels(a),e=a.width,k=a.height,l=e*k,m=new Int32Array(l),n=0;l>n;n++)m[n]=f._getARGB(c,n);var o,p,q,r,s,t,u,v,w,x,y=new Int32Array(l),z=new Int32Array(l),A=new Int32Array(l),B=new Int32Array(l),C=0;d(b);var D,E,F,G;for(E=0;k>E;E++){for(D=0;e>D;D++){if(r=q=p=s=o=0,t=D-g,0>t)x=-t,t=0;else{if(t>=e)break;x=0}for(F=x;h>F&&!(t>=e);F++){var H=m[t+C];G=j[F],s+=G[(-16777216&H)>>>24],p+=G[(16711680&H)>>16],q+=G[(65280&H)>>8],r+=G[255&H],o+=i[F],t++}u=C+D,y[u]=s/o,z[u]=p/o,A[u]=q/o,B[u]=r/o}C+=e}for(C=0,v=-g,w=v*e,E=0;k>E;E++){for(D=0;e>D;D++){if(r=q=p=s=o=0,0>v)x=u=-v,t=D;else{if(v>=k)break;x=0,u=v,t=D+w}for(F=x;h>F&&!(u>=k);F++)G=j[F],s+=G[y[t]],p+=G[z[t]],q+=G[A[t]],r+=G[B[t]],o+=i[F],u++,t+=e;m[D+C]=s/o<<24|p/o<<16|q/o<<8|r/o}C+=e,w+=e,v++}f._setPixels(c,m)}var f={};f._toPixels=function(a){return a instanceof ImageData?a.data:a.getContext(\"2d\").getImageData(0,0,a.width,a.height).data},f._getARGB=function(a,b){var c=4*b;return a[c+3]<<24&4278190080|a[c]<<16&16711680|a[c+1]<<8&65280|255&a[c+2]},f._setPixels=function(a,b){for(var c=0,d=0,e=a.length;e>d;d++)c=4*d,a[c+0]=(16711680&b[d])>>>16,a[c+1]=(65280&b[d])>>>8,a[c+2]=255&b[d],a[c+3]=(4278190080&b[d])>>>24},f._toImageData=function(a){return a instanceof ImageData?a:a.getContext(\"2d\").getImageData(0,0,a.width,a.height)},f._createImageData=function(a,b){return f._tmpCanvas=document.createElement(\"canvas\"),f._tmpCtx=f._tmpCanvas.getContext(\"2d\"),this._tmpCtx.createImageData(a,b)},f.apply=function(a,b,c){var d=a.getContext(\"2d\"),e=d.getImageData(0,0,a.width,a.height),f=b(e,c);f instanceof ImageData?d.putImageData(f,0,0,0,0,a.width,a.height):d.putImageData(e,0,0,0,0,a.width,a.height)},f.threshold=function(a,b){var c=f._toPixels(a);void 0===b&&(b=.5);for(var d=Math.floor(255*b),e=0;e<c.length;e+=4){var g,h=c[e],i=c[e+1],j=c[e+2],k=.2126*h+.7152*i+.0722*j;g=k>=d?255:0,c[e]=c[e+1]=c[e+2]=g}},f.gray=function(a){for(var b=f._toPixels(a),c=0;c<b.length;c+=4){var d=b[c],e=b[c+1],g=b[c+2],h=.2126*d+.7152*e+.0722*g;b[c]=b[c+1]=b[c+2]=h}},f.opaque=function(a){for(var b=f._toPixels(a),c=0;c<b.length;c+=4)b[c+3]=255;return b},f.invert=function(a){for(var b=f._toPixels(a),c=0;c<b.length;c+=4)b[c]=255-b[c],b[c+1]=255-b[c+1],b[c+2]=255-b[c+2]},f.posterize=function(a,b){var c=f._toPixels(a);if(2>b||b>255)throw new Error(\"Level must be greater than 2 and less than 255 for posterize\");for(var d=b-1,e=0;e<c.length;e+=4){var g=c[e],h=c[e+1],i=c[e+2];c[e]=255*(g*b>>8)/d,c[e+1]=255*(h*b>>8)/d,c[e+2]=255*(i*b>>8)/d}},f.dilate=function(a){for(var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t=f._toPixels(a),u=0,v=t.length?t.length/4:0,w=new Int32Array(v);v>u;)for(b=u,c=u+a.width;c>u;)d=e=f._getARGB(t,u),i=u-1,h=u+1,j=u-a.width,k=u+a.width,b>i&&(i=u),h>=c&&(h=u),0>j&&(j=0),k>=v&&(k=u),n=f._getARGB(t,j),m=f._getARGB(t,i),o=f._getARGB(t,k),l=f._getARGB(t,h),g=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),q=77*(m>>16&255)+151*(m>>8&255)+28*(255&m),p=77*(l>>16&255)+151*(l>>8&255)+28*(255&l),r=77*(n>>16&255)+151*(n>>8&255)+28*(255&n),s=77*(o>>16&255)+151*(o>>8&255)+28*(255&o),q>g&&(e=m,g=q),p>g&&(e=l,g=p),r>g&&(e=n,g=r),s>g&&(e=o,g=s),w[u++]=e;f._setPixels(t,w)},f.erode=function(a){for(var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t=f._toPixels(a),u=0,v=t.length?t.length/4:0,w=new Int32Array(v);v>u;)for(b=u,c=u+a.width;c>u;)d=e=f._getARGB(t,u),i=u-1,h=u+1,j=u-a.width,k=u+a.width,b>i&&(i=u),h>=c&&(h=u),0>j&&(j=0),k>=v&&(k=u),n=f._getARGB(t,j),m=f._getARGB(t,i),o=f._getARGB(t,k),l=f._getARGB(t,h),g=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),q=77*(m>>16&255)+151*(m>>8&255)+28*(255&m),p=77*(l>>16&255)+151*(l>>8&255)+28*(255&l),r=77*(n>>16&255)+151*(n>>8&255)+28*(255&n),s=77*(o>>16&255)+151*(o>>8&255)+28*(255&o),g>q&&(e=m,g=q),g>p&&(e=l,g=p),g>r&&(e=n,g=r),g>s&&(e=o,g=s),w[u++]=e;f._setPixels(t,w)};var g,h,i,j;f.blur=function(a,b){e(a,b)},b.exports=f},{}],68:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=[];d.prototype.createImage=function(a,b){return new d.Image(a,b)},d.prototype.saveCanvas=function(){var a,b,c;if(3===arguments.length?(a=arguments[0],b=arguments[1],c=arguments[2]):2===arguments.length?\"object\"==typeof arguments[0]?(a=arguments[0],b=arguments[1]):(b=arguments[0],c=arguments[1]):1===arguments.length&&(\"object\"==typeof arguments[0]?a=arguments[0]:b=arguments[0]),a instanceof d.Element&&(a=a.elt),a instanceof HTMLCanvasElement||(a=null),c||(c=d.prototype._checkFileExtension(b,c)[1],\"\"===c&&(c=\"png\")),a||this._curElement&&this._curElement.elt&&(a=this._curElement.elt),d.prototype._isSafari()){var e=\"Hello, Safari user!\\n\";e+=\"Now capturing a screenshot...\\n\",e+=\"To save this image,\\n\",e+=\"go to File --> Save As.\\n\",alert(e),window.location.href=a.toDataURL()}else{var f;if(\"undefined\"==typeof c)c=\"png\",f=\"image/png\";else switch(c){case\"png\":f=\"image/png\";break;case\"jpeg\":f=\"image/jpeg\";break;case\"jpg\":f=\"image/jpeg\";break;default:f=\"image/png\"}var g=\"image/octet-stream\",h=a.toDataURL(f);h=h.replace(f,g),d.prototype.downloadFile(h,b,c)}},d.prototype.saveFrames=function(a,b,c,f,g){var h=c||3;h=d.prototype.constrain(h,0,15),h=1e3*h;var i=f||15;i=d.prototype.constrain(i,0,22);var j=0,k=d.prototype._makeFrame,l=this._curElement.elt,m=setInterval(function(){k(a+j,b,l),j++},1e3/i);setTimeout(function(){if(clearInterval(m),g)g(e);else for(var a=0;a<e.length;a++){var b=e[a];d.prototype.downloadFile(b.imageData,b.filename,b.ext)}e=[]},h+.01)},d.prototype._makeFrame=function(a,b,c){var d;d=this?this._curElement.elt:c;var f;if(b)switch(b.toLowerCase()){case\"png\":f=\"image/png\";break;case\"jpeg\":f=\"image/jpeg\";break;case\"jpg\":f=\"image/jpeg\";break;default:f=\"image/png\"}else b=\"png\",f=\"image/png\";var g=\"image/octet-stream\",h=d.toDataURL(f);h=h.replace(f,g);var i={};i.imageData=h,i.filename=a,i.ext=b,e.push(i)},b.exports=d},{\"../core/core\":50}],69:[function(a,b,c){\"use strict\";function d(a,b){return a>0&&b>a?a:b}var e=a(\"../core/core\"),f=a(\"./filters\"),g=a(\"../core/canvas\"),h=a(\"../core/constants\");a(\"../core/error_helpers\"),e.prototype.loadImage=function(a,b,c){var d=new Image,f=new e.Image(1,1,this),g=e._getDecrementPreload.apply(this,arguments);return d.onload=function(){f.width=f.canvas.width=d.width,f.height=f.canvas.height=d.height,f.drawingContext.drawImage(d,0,0),\"function\"==typeof b&&b(f),g&&b!==g&&g()},d.onerror=function(a){e._friendlyFileLoadError(0,d.src),\"function\"==typeof c&&c!==g&&c(a)},0!==a.indexOf(\"data:image/\")&&(d.crossOrigin=\"Anonymous\"),d.src=a,f},e.prototype.image=function(a,b,c,e,f,h,i,j,k){if(arguments.length<=5)if(h=b||0,i=c||0,b=0,c=0,a.elt&&a.elt.videoWidth&&!a.canvas){var l=a.elt.videoWidth,m=a.elt.videoHeight;j=e||a.width,k=f||a.width*m/l,e=l,f=m}else j=e||a.width,k=f||a.height,e=a.width,f=a.height;else{if(9!==arguments.length)throw\"Wrong number of arguments to image()\";b=b||0,c=c||0,e=d(e,a.width),f=d(f,a.height),h=h||0,i=i||0,j=j||a.width,k=k||a.height}var n=g.modeAdjust(h,i,j,k,this._renderer._imageMode);this._renderer.image(a,b,c,e,f,n.x,n.y,n.w,n.h)},e.prototype.tint=function(){var a=this.color.apply(this,arguments);this._renderer._tint=a.levels},e.prototype.noTint=function(){this._renderer._tint=null},e.prototype._getTintedImageCanvas=function(a){if(!a.canvas)return a;var b=f._toPixels(a.canvas),c=document.createElement(\"canvas\");c.width=a.canvas.width,c.height=a.canvas.height;for(var d=c.getContext(\"2d\"),e=d.createImageData(a.canvas.width,a.canvas.height),g=e.data,h=0;h<b.length;h+=4){var i=b[h],j=b[h+1],k=b[h+2],l=b[h+3];g[h]=i*this._renderer._tint[0]/255,g[h+1]=j*this._renderer._tint[1]/255,g[h+2]=k*this._renderer._tint[2]/255,g[h+3]=l*this._renderer._tint[3]/255}return d.putImageData(e,0,0),c},e.prototype.imageMode=function(a){(a===h.CORNER||a===h.CORNERS||a===h.CENTER)&&(this._renderer._imageMode=a)},b.exports=e},{\"../core/canvas\":48,\"../core/constants\":49,\"../core/core\":50,\"../core/error_helpers\":53,\"./filters\":67}],70:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"./filters\");d.Image=function(a,b){this.width=a,this.height=b,this.canvas=document.createElement(\"canvas\"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext(\"2d\"),this._pixelDensity=1,this.isTexture=!1,this.pixels=[]},d.Image.prototype._setProperty=function(a,b){this[a]=b},d.Image.prototype.loadPixels=function(){d.Renderer2D.prototype.loadPixels.call(this)},d.Image.prototype.updatePixels=function(a,b,c,e){d.Renderer2D.prototype.updatePixels.call(this,a,b,c,e)},d.Image.prototype.get=function(a,b,c,e){return d.Renderer2D.prototype.get.call(this,a,b,c,e)},d.Image.prototype.set=function(a,b,c){d.Renderer2D.prototype.set.call(this,a,b,c)},d.Image.prototype.resize=function(a,b){0===a&&0===b?(a=this.canvas.width,b=this.canvas.height):0===a?a=this.canvas.width*b/this.canvas.height:0===b&&(b=this.canvas.height*a/this.canvas.width);var c=document.createElement(\"canvas\");c.width=a,c.height=b,c.getContext(\"2d\").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,c.width,c.height),this.canvas.width=this.width=a,this.canvas.height=this.height=b,this.drawingContext.drawImage(c,0,0,a,b,0,0,a,b),this.pixels.length>0&&this.loadPixels()},d.Image.prototype.copy=function(){d.prototype.copy.apply(this,arguments)},d.Image.prototype.mask=function(a){void 0===a&&(a=this);var b=this.drawingContext.globalCompositeOperation,c=1;a instanceof d.Renderer&&(c=a._pInst._pixelDensity);var e=[a,0,0,c*a.width,c*a.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation=\"destination-in\",this.copy.apply(this,e),this.drawingContext.globalCompositeOperation=b},d.Image.prototype.filter=function(a,b){e.apply(this.canvas,e[a.toLowerCase()],b)},d.Image.prototype.blend=function(){d.prototype.blend.apply(this,arguments)},d.Image.prototype.save=function(a,b){var c;if(b)switch(b.toLowerCase()){case\"png\":c=\"image/png\";break;case\"jpeg\":c=\"image/jpeg\";break;case\"jpg\":c=\"image/jpeg\";break;default:c=\"image/png\"}else b=\"png\",c=\"image/png\";var e=\"image/octet-stream\",f=this.canvas.toDataURL(c);f=f.replace(c,e),d.prototype.downloadFile(f,a,b)},d.Image.prototype.createTexture=function(a){return this},b.exports=d.Image},{\"../core/core\":50,\"./filters\":67}],71:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"./filters\");a(\"../color/p5.Color\"),d.prototype.pixels=[],d.prototype.blend=function(){this._renderer.blend.apply(this._renderer,arguments)},d.prototype.copy=function(){d.Renderer2D._copyHelper.apply(this,arguments)},d.prototype.filter=function(a,b){e.apply(this.canvas,e[a.toLowerCase()],b)},d.prototype.get=function(a,b,c,d){return this._renderer.get(a,b,c,d)},d.prototype.loadPixels=function(){this._renderer.loadPixels()},d.prototype.set=function(a,b,c){this._renderer.set(a,b,c)},d.prototype.updatePixels=function(a,b,c,d){0!==this.pixels.length&&this._renderer.updatePixels(a,b,c,d)},b.exports=d},{\"../color/p5.Color\":44,\"../core/core\":50,\"./filters\":67\n}],72:[function(a,b,c){\"use strict\";function d(a,b){var c={};if(b=b||[],\"undefined\"==typeof b)for(var d=0;d<a.length;d++)b[d.toString()]=d;for(var e=0;e<b.length;e++){var f=b[e],g=a[e];c[f]=g}return c}function e(a){return a.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&#039;\")}function f(a,b){b&&b!==!0&&\"true\"!==b||(b=\"\"),a||(a=\"untitled\");var c=\"\";return a&&a.indexOf(\".\")>-1&&(c=a.split(\".\").pop()),b&&c!==b&&(c=b,a=a+\".\"+c),[a,c]}function g(a){document.body.removeChild(a.target)}var h=a(\"../core/core\"),i=a(\"reqwest\"),j=a(\"opentype.js\");a(\"../core/error_helpers\"),h._getDecrementPreload=function(){var a=arguments[arguments.length-1];return(window.preload||this&&this.preload)&&\"function\"==typeof a?a:null},h.prototype.loadFont=function(a,b,c){var d=new h.Font(this),e=h._getDecrementPreload.apply(this,arguments);return j.load(a,function(f,g){if(f){if(\"undefined\"!=typeof c&&c!==e)return c(f);throw f}d.font=g,\"undefined\"!=typeof b&&b(d),e&&b!==e&&e();var h,i,j=[\"ttf\",\"otf\",\"woff\",\"woff2\"],k=a.split(\"\\\\\").pop().split(\"/\").pop(),l=k.lastIndexOf(\".\"),m=1>l?null:k.substr(l+1);j.indexOf(m)>-1&&(h=k.substr(0,l),i=document.createElement(\"style\"),i.appendChild(document.createTextNode(\"\\n@font-face {\\nfont-family: \"+h+\";\\nsrc: url(\"+a+\");\\n}\\n\")),document.head.appendChild(i))}),d},h.prototype.createInput=function(){throw\"not yet implemented\"},h.prototype.createReader=function(){throw\"not yet implemented\"},h.prototype.loadBytes=function(){throw\"not yet implemented\"},h.prototype.loadJSON=function(){for(var a,b=arguments[0],c=arguments[1],d=h._getDecrementPreload.apply(this,arguments),e=[],f=\"json\",g=2;g<arguments.length;g++){var j=arguments[g];\"string\"==typeof j?(\"jsonp\"===j||\"json\"===j)&&(f=j):\"function\"==typeof j&&(a=j)}return i({url:b,type:f,crossOrigin:!0,error:function(b){a?a(b):console.log(b.statusText)},success:function(a){for(var b in a)e[b]=a[b];\"undefined\"!=typeof c&&c(a),d&&c!==d&&d()}}),e},h.prototype.loadStrings=function(a,b,c){var d=[],e=new XMLHttpRequest,f=h._getDecrementPreload.apply(this,arguments);return e.addEventListener(\"error\",function(a){c?c(a):console.log(a.responseText)}),e.open(\"GET\",a,!0),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var a=e.responseText.match(/[^\\r\\n]+/g);for(var g in a)d[g]=a[g];\"undefined\"!=typeof b&&b(d),f&&b!==f&&f()}else c?c(e):console.log(e.statusText)},e.send(null),d},h.prototype.loadTable=function(a){for(var b=null,c=[],e=!1,f=\",\",g=!1,j=h._getDecrementPreload.apply(this,arguments),k=1;k<arguments.length;k++)if(\"function\"==typeof arguments[k]&&arguments[k]!==j)b=arguments[k];else if(\"string\"==typeof arguments[k])if(c.push(arguments[k]),\"header\"===arguments[k]&&(e=!0),\"csv\"===arguments[k]){if(g)throw new Error(\"Cannot set multiple separator types.\");f=\",\",g=!0}else if(\"tsv\"===arguments[k]){if(g)throw new Error(\"Cannot set multiple separator types.\");f=\"\t\",g=!0}var l=new h.Table;return i({url:a,crossOrigin:!0,type:\"csv\"}).then(function(a){a=a.responseText;for(var c,g={},i=0,m=1,n=2,o=4,p='\"',q=\"\\r\",r=\"\\n\",s=[],t=0,u=null,v=function(){g.escaped=!1,u=[],x()},w=function(){g.currentState=o,s.push(u),u=null},x=function(){g.currentState=i,g.token=\"\"},y=function(){u.push(g.token),x()};;){if(c=a[t++],null==c){if(g.escaped)throw new Error(\"Unclosed quote in file.\");if(u){y(),w();break}}if(null===u&&v(),g.currentState===i){if(c===p){g.escaped=!0,g.currentState=m;continue}g.currentState=m}g.currentState===m&&g.escaped?c===p?a[t]===p?(g.token+=p,t++):(g.escaped=!1,g.currentState=n):g.token+=c:c===q?(a[t]===r&&t++,y(),w()):c===r?(y(),w()):c===f?y():g.currentState===m&&(g.token+=c)}if(e)l.columns=s.shift();else for(k=0;k<s.length;k++)l.columns[k]=k.toString();var z;for(k=0;k<s.length&&(k!==s.length-1||1!==s[k].length||\"undefined\"!==s[k][0]);k++)z=new h.TableRow,z.arr=s[k],z.obj=d(s[k],l.columns),l.addRow(z);null!==b&&b(l),j&&b!==j&&j()}).fail(function(c,d){h._friendlyFileLoadError(2,a),\"undefined\"!=typeof b&&b!==j&&b(!1)}),l},h.prototype.loadXML=function(a,b,c){var d=document.implementation.createDocument(null,null),e=h._getDecrementPreload.apply(this,arguments);return i({url:a,type:\"xml\",crossOrigin:!0,error:function(a){c?c(a):console.log(a.statusText)}}).then(function(a){var c=a.documentElement;d.appendChild(c),\"undefined\"!=typeof b&&b(d),e&&b!==e&&e()}),d},h.prototype.parseXML=function(){throw\"not yet implemented\"},h.prototype.selectFolder=function(){throw\"not yet implemented\"},h.prototype.selectInput=function(){throw\"not yet implemented\"},h.prototype.httpGet=function(){var a=Array.prototype.slice.call(arguments);a.push(\"GET\"),h.prototype.httpDo.apply(this,a)},h.prototype.httpPost=function(){var a=Array.prototype.slice.call(arguments);a.push(\"POST\"),h.prototype.httpDo.apply(this,a)},h.prototype.httpDo=function(){if(\"object\"==typeof arguments[0])i(arguments[0]);else{for(var a,b,c=\"GET\",d=arguments[0],e={},f=\"\",g=1;g<arguments.length;g++){var h=arguments[g];\"string\"==typeof h?\"GET\"===h||\"POST\"===h||\"PUT\"===h?c=h:f=h:\"object\"==typeof h?e=h:\"function\"==typeof h&&(a?b=h:a=h)}\"\"===f&&(f=-1!==d.indexOf(\"json\")?\"json\":-1!==d.indexOf(\"xml\")?\"xml\":\"text\"),i({url:d,method:c,data:e,type:f,crossOrigin:!0,success:function(b){\"undefined\"!=typeof a&&a(\"text\"===f?b.response:b)},error:function(a){b?b(a):console.log(a.statusText)}})}},window.URL=window.URL||window.webkitURL,h.prototype._pWriters=[],h.prototype.beginRaw=function(){throw\"not yet implemented\"},h.prototype.beginRecord=function(){throw\"not yet implemented\"},h.prototype.createOutput=function(){throw\"not yet implemented\"},h.prototype.createWriter=function(a,b){var c;for(var d in h.prototype._pWriters)if(h.prototype._pWriters[d].name===a)return c=new h.PrintWriter(a+window.millis(),b),h.prototype._pWriters.push(c),c;return c=new h.PrintWriter(a,b),h.prototype._pWriters.push(c),c},h.prototype.endRaw=function(){throw\"not yet implemented\"},h.prototype.endRecord=function(){throw\"not yet implemented\"},h.PrintWriter=function(a,b){var c=this;this.name=a,this.content=\"\",this.print=function(a){this.content+=a},this.println=function(a){this.content+=a+\"\\n\"},this.flush=function(){this.content=\"\"},this.close=function(){var d=[];d.push(this.content),h.prototype.writeFile(d,a,b);for(var e in h.prototype._pWriters)h.prototype._pWriters[e].name===this.name&&h.prototype._pWriters.splice(e,1);c.flush(),c={}}},h.prototype.saveBytes=function(){throw\"not yet implemented\"},h.prototype.save=function(a,b,c){var d=arguments,e=this._curElement.elt;if(0===d.length)return void h.prototype.saveCanvas(e);if(d[0]instanceof h.Renderer||d[0]instanceof h.Graphics)return void h.prototype.saveCanvas(d[0].elt,d[1],d[2]);if(1===d.length&&\"string\"==typeof d[0])h.prototype.saveCanvas(e,d[0]);else{var g=f(d[1],d[2])[1];switch(g){case\"json\":return void h.prototype.saveJSON(d[0],d[1],d[2]);case\"txt\":return void h.prototype.saveStrings(d[0],d[1],d[2]);default:d[0]instanceof Array?h.prototype.saveStrings(d[0],d[1],d[2]):d[0]instanceof h.Table?h.prototype.saveTable(d[0],d[1],d[2],d[3]):d[0]instanceof h.Image?h.prototype.saveCanvas(d[0].canvas,d[1]):d[0]instanceof h.SoundFile&&h.prototype.saveSound(d[0],d[1],d[2],d[3])}}},h.prototype.saveJSON=function(a,b,c){var d;d=c?JSON.stringify(a):JSON.stringify(a,void 0,2),console.log(d),this.saveStrings(d.split(\"\\n\"),b,\"json\")},h.prototype.saveJSONObject=h.prototype.saveJSON,h.prototype.saveJSONArray=h.prototype.saveJSON,h.prototype.saveStream=function(){throw\"not yet implemented\"},h.prototype.saveStrings=function(a,b,c){for(var d=c||\"txt\",e=this.createWriter(b,d),f=0;f<a.length;f++)f<a.length-1?e.println(a[f]):e.print(a[f]);e.close(),e.flush()},h.prototype.saveXML=function(){throw\"not yet implemented\"},h.prototype.selectOutput=function(){throw\"not yet implemented\"},h.prototype.saveTable=function(a,b,c){var d=this.createWriter(b,c),f=a.columns,g=\",\";if(\"tsv\"===c&&(g=\"\t\"),\"html\"!==c){if(\"0\"!==f[0])for(var h=0;h<f.length;h++)h<f.length-1?d.print(f[h]+g):d.println(f[h]);for(var i=0;i<a.rows.length;i++){var j;for(j=0;j<a.rows[i].arr.length;j++)j<a.rows[i].arr.length-1?d.print(a.rows[i].arr[j]+g):i<a.rows.length-1?d.println(a.rows[i].arr[j]):d.print(a.rows[i].arr[j])}}else{d.println(\"<html>\"),d.println(\"<head>\");var k='  <meta http-equiv=\"content-type\" content';if(k+='=\"text/html;charset=utf-8\" />',d.println(k),d.println(\"</head>\"),d.println(\"<body>\"),d.println(\"  <table>\"),\"0\"!==f[0]){d.println(\"    <tr>\");for(var l=0;l<f.length;l++){var m=e(f[l]);d.println(\"      <td>\"+m),d.println(\"      </td>\")}d.println(\"    </tr>\")}for(var n=0;n<a.rows.length;n++){d.println(\"    <tr>\");for(var o=0;o<a.columns.length;o++){var p=a.rows[n].getString(o),q=e(p);d.println(\"      <td>\"+q),d.println(\"      </td>\")}d.println(\"    </tr>\")}d.println(\"  </table>\"),d.println(\"</body>\"),d.print(\"</html>\")}d.close(),d.flush()},h.prototype.writeFile=function(a,b,c){var d=\"application/octet-stream\";h.prototype._isSafari()&&(d=\"text/plain\");var e=new Blob(a,{type:d}),f=window.URL.createObjectURL(e);h.prototype.downloadFile(f,b,c)},h.prototype.downloadFile=function(a,b,c){var d=f(b,c),e=d[0],i=d[1],j=document.createElement(\"a\");if(j.href=a,j.download=e,j.onclick=g,j.style.display=\"none\",document.body.appendChild(j),h.prototype._isSafari()){var k=\"Hello, Safari user! To download this file...\\n\";k+=\"1. Go to File --> Save As.\\n\",k+='2. Choose \"Page Source\" as the Format.\\n',k+='3. Name it with this extension: .\"'+i+'\"',alert(k)}j.click(),a=null},h.prototype._checkFileExtension=f,h.prototype._isSafari=function(){var a=Object.prototype.toString.call(window.HTMLElement);return a.indexOf(\"Constructor\")>0},b.exports=h},{\"../core/core\":50,\"../core/error_helpers\":53,\"opentype.js\":8,reqwest:29}],73:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.Table=function(a){this.columns=[],this.rows=[]},d.Table.prototype.addRow=function(a){var b=a||new d.TableRow;if(\"undefined\"==typeof b.arr||\"undefined\"==typeof b.obj)throw\"invalid TableRow: \"+b;return b.table=this,this.rows.push(b),b},d.Table.prototype.removeRow=function(a){this.rows[a].table=null;var b=this.rows.splice(a+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(b)},d.Table.prototype.getRow=function(a){return this.rows[a]},d.Table.prototype.getRows=function(){return this.rows},d.Table.prototype.findRow=function(a,b){if(\"string\"==typeof b){for(var c=0;c<this.rows.length;c++)if(this.rows[c].obj[b]===a)return this.rows[c]}else for(var d=0;d<this.rows.length;d++)if(this.rows[d].arr[b]===a)return this.rows[d];return null},d.Table.prototype.findRows=function(a,b){var c=[];if(\"string\"==typeof b)for(var d=0;d<this.rows.length;d++)this.rows[d].obj[b]===a&&c.push(this.rows[d]);else for(var e=0;e<this.rows.length;e++)this.rows[e].arr[b]===a&&c.push(this.rows[e]);return c},d.Table.prototype.matchRow=function(a,b){if(\"number\"==typeof b){for(var c=0;c<this.rows.length;c++)if(this.rows[c].arr[b].match(a))return this.rows[c]}else for(var d=0;d<this.rows.length;d++)if(this.rows[d].obj[b].match(a))return this.rows[d];return null},d.Table.prototype.matchRows=function(a,b){var c=[];if(\"number\"==typeof b)for(var d=0;d<this.rows.length;d++)this.rows[d].arr[b].match(a)&&c.push(this.rows[d]);else for(var e=0;e<this.rows.length;e++)this.rows[e].obj[b].match(a)&&c.push(this.rows[e]);return c},d.Table.prototype.getColumn=function(a){var b=[];if(\"string\"==typeof a)for(var c=0;c<this.rows.length;c++)b.push(this.rows[c].obj[a]);else for(var d=0;d<this.rows.length;d++)b.push(this.rows[d].arr[a]);return b},d.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},d.Table.prototype.addColumn=function(a){var b=a||null;this.columns.push(b)},d.Table.prototype.getColumnCount=function(){return this.columns.length},d.Table.prototype.getRowCount=function(){return this.rows.length},d.Table.prototype.removeTokens=function(a,b){for(var c=function(a){return a.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\")},d=[],e=0;e<a.length;e++)d.push(c(a.charAt(e)));var f=new RegExp(d.join(\"|\"),\"g\");if(\"undefined\"==typeof b)for(var g=0;g<this.columns.length;g++)for(var h=0;h<this.rows.length;h++){var i=this.rows[h].arr[g];i=i.replace(f,\"\"),this.rows[h].arr[g]=i,this.rows[h].obj[this.columns[g]]=i}else if(\"string\"==typeof b)for(var j=0;j<this.rows.length;j++){var k=this.rows[j].obj[b];k=k.replace(f,\"\"),this.rows[j].obj[b]=k;var l=this.columns.indexOf(b);this.rows[j].arr[l]=k}else for(var m=0;m<this.rows.length;m++){var n=this.rows[m].arr[b];n=n.replace(f,\"\"),this.rows[m].arr[b]=n,this.rows[m].obj[this.columns[b]]=n}},d.Table.prototype.trim=function(a){var b=new RegExp(\" \",\"g\");if(\"undefined\"==typeof a)for(var c=0;c<this.columns.length;c++)for(var d=0;d<this.rows.length;d++){var e=this.rows[d].arr[c];e=e.replace(b,\"\"),this.rows[d].arr[c]=e,this.rows[d].obj[this.columns[c]]=e}else if(\"string\"==typeof a)for(var f=0;f<this.rows.length;f++){var g=this.rows[f].obj[a];g=g.replace(b,\"\"),this.rows[f].obj[a]=g;var h=this.columns.indexOf(a);this.rows[f].arr[h]=g}else for(var i=0;i<this.rows.length;i++){var j=this.rows[i].arr[a];j=j.replace(b,\"\"),this.rows[i].arr[a]=j,this.rows[i].obj[this.columns[a]]=j}},d.Table.prototype.removeColumn=function(a){var b,c;\"string\"==typeof a?(b=a,c=this.columns.indexOf(a),console.log(\"string\")):(c=a,b=this.columns[a]);var d=this.columns.splice(c+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(d);for(var e=0;e<this.rows.length;e++){var f=this.rows[e].arr,g=f.splice(c+1,f.length);f.pop(),this.rows[e].arr=f.concat(g),delete this.rows[e].obj[b]}},d.Table.prototype.set=function(a,b,c){this.rows[a].set(b,c)},d.Table.prototype.setNum=function(a,b,c){this.rows[a].setNum(b,c)},d.Table.prototype.setString=function(a,b,c){this.rows[a].setString(b,c)},d.Table.prototype.get=function(a,b){return this.rows[a].get(b)},d.Table.prototype.getNum=function(a,b){return this.rows[a].getNum(b)},d.Table.prototype.getString=function(a,b){return this.rows[a].getString(b)},d.Table.prototype.getObject=function(a){for(var b,c,d,e={},f=0;f<this.rows.length;f++)if(b=this.rows[f].obj,\"string\"==typeof a){if(c=this.columns.indexOf(a),!(c>=0))throw'This table has no column named \"'+a+'\"';d=b[a],e[d]=b}else e[f]=this.rows[f].obj;return e},d.Table.prototype.getArray=function(){for(var a=[],b=0;b<this.rows.length;b++)a.push(this.rows[b].arr);return a},b.exports=d.Table},{\"../core/core\":50}],74:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.TableRow=function(a,b){var c=[],d={};a&&(b=b||\",\",c=a.split(b));for(var e=0;e<c.length;e++){var f=e,g=c[e];d[f]=g}this.arr=c,this.obj=d,this.table=null},d.TableRow.prototype.set=function(a,b){if(\"string\"==typeof a){var c=this.table.columns.indexOf(a);if(!(c>=0))throw'This table has no column named \"'+a+'\"';this.obj[a]=b,this.arr[c]=b}else{if(!(a<this.table.columns.length))throw\"Column #\"+a+\" is out of the range of this table\";this.arr[a]=b;var d=this.table.columns[a];this.obj[d]=b}},d.TableRow.prototype.setNum=function(a,b){var c=parseFloat(b,10);this.set(a,c)},d.TableRow.prototype.setString=function(a,b){var c=b.toString();this.set(a,c)},d.TableRow.prototype.get=function(a){return\"string\"==typeof a?this.obj[a]:this.arr[a]},d.TableRow.prototype.getNum=function(a){var b;if(b=\"string\"==typeof a?parseFloat(this.obj[a],10):parseFloat(this.arr[a],10),\"NaN\"===b.toString())throw\"Error: \"+this.obj[a]+\" is NaN (Not a Number)\";return b},d.TableRow.prototype.getString=function(a){return\"string\"==typeof a?this.obj[a].toString():this.arr[a].toString()},b.exports=d.TableRow},{\"../core/core\":50}],75:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.abs=Math.abs,d.prototype.ceil=Math.ceil,d.prototype.constrain=function(a,b,c){return Math.max(Math.min(a,c),b)},d.prototype.dist=function(a,b,c,d,e,f){return 4===arguments.length?Math.sqrt((c-a)*(c-a)+(d-b)*(d-b)):6===arguments.length?Math.sqrt((d-a)*(d-a)+(e-b)*(e-b)+(f-c)*(f-c)):void 0},d.prototype.exp=Math.exp,d.prototype.floor=Math.floor,d.prototype.lerp=function(a,b,c){return c*(b-a)+a},d.prototype.log=Math.log,d.prototype.mag=function(a,b){return Math.sqrt(a*a+b*b)},d.prototype.map=function(a,b,c,d,e){return(a-b)/(c-b)*(e-d)+d},d.prototype.max=function(){return arguments[0]instanceof Array?Math.max.apply(null,arguments[0]):Math.max.apply(null,arguments)},d.prototype.min=function(){return arguments[0]instanceof Array?Math.min.apply(null,arguments[0]):Math.min.apply(null,arguments)},d.prototype.norm=function(a,b,c){return this.map(a,b,c,0,1)},d.prototype.pow=Math.pow,d.prototype.round=Math.round,d.prototype.sq=function(a){return a*a},d.prototype.sqrt=Math.sqrt,b.exports=d},{\"../core/core\":50}],76:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.createVector=function(a,b,c){return this instanceof d?new d.Vector(this,arguments):new d.Vector(a,b,c)},b.exports=d},{\"../core/core\":50}],77:[function(a,b,c){\"use strict\";var d,e=a(\"../core/core\"),f=4,g=1<<f,h=8,i=1<<h,j=4095,k=4,l=.5,m=function(a){return.5*(1-Math.cos(a*Math.PI))};e.prototype.noise=function(a,b,c){if(b=b||0,c=c||0,null==d){d=new Array(j+1);for(var e=0;j+1>e;e++)d[e]=Math.random()}0>a&&(a=-a),0>b&&(b=-b),0>c&&(c=-c);for(var n,o,p,q,r,s=Math.floor(a),t=Math.floor(b),u=Math.floor(c),v=a-s,w=b-t,x=c-u,y=0,z=.5,A=0;k>A;A++){var B=s+(t<<f)+(u<<h);n=m(v),o=m(w),p=d[B&j],p+=n*(d[B+1&j]-p),q=d[B+g&j],q+=n*(d[B+g+1&j]-q),p+=o*(q-p),B+=i,q=d[B&j],q+=n*(d[B+1&j]-q),r=d[B+g&j],r+=n*(d[B+g+1&j]-r),q+=o*(r-q),p+=m(x)*(q-p),y+=p*z,z*=l,s<<=1,v*=2,t<<=1,w*=2,u<<=1,x*=2,v>=1&&(s++,v--),w>=1&&(t++,w--),x>=1&&(u++,x--)}return y},e.prototype.noiseDetail=function(a,b){a>0&&(k=a),b>0&&(l=b)},e.prototype.noiseSeed=function(a){var b=function(){var a,b,c=4294967296,d=1664525,e=1013904223;return{setSeed:function(d){b=a=(null==d?Math.random()*c:d)>>>0},getSeed:function(){return a},rand:function(){return b=(d*b+e)%c,b/c}}}();b.setSeed(a),d=new Array(j+1);for(var c=0;j+1>c;c++)d[c]=b.rand()},b.exports=e},{\"../core/core\":50}],78:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"./polargeometry\"),f=a(\"../core/constants\");d.Vector=function(){var a,b,c;arguments[0]instanceof d?(this.p5=arguments[0],a=arguments[1][0]||0,b=arguments[1][1]||0,c=arguments[1][2]||0):(a=arguments[0]||0,b=arguments[1]||0,c=arguments[2]||0),this.x=a,this.y=b,this.z=c},d.Vector.prototype.toString=function(){return\"p5.Vector Object : [\"+this.x+\", \"+this.y+\", \"+this.z+\"]\"},d.Vector.prototype.set=function(a,b,c){return a instanceof d.Vector?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this):a instanceof Array?(this.x=a[0]||0,this.y=a[1]||0,this.z=a[2]||0,this):(this.x=a||0,this.y=b||0,this.z=c||0,this)},d.Vector.prototype.copy=function(){return this.p5?new d.Vector(this.p5,[this.x,this.y,this.z]):new d.Vector(this.x,this.y,this.z)},d.Vector.prototype.add=function(a,b,c){return a instanceof d.Vector?(this.x+=a.x||0,this.y+=a.y||0,this.z+=a.z||0,this):a instanceof Array?(this.x+=a[0]||0,this.y+=a[1]||0,this.z+=a[2]||0,this):(this.x+=a||0,this.y+=b||0,this.z+=c||0,this)},d.Vector.prototype.sub=function(a,b,c){return a instanceof d.Vector?(this.x-=a.x||0,this.y-=a.y||0,this.z-=a.z||0,this):a instanceof Array?(this.x-=a[0]||0,this.y-=a[1]||0,this.z-=a[2]||0,this):(this.x-=a||0,this.y-=b||0,this.z-=c||0,this)},d.Vector.prototype.mult=function(a){return this.x*=a||0,this.y*=a||0,this.z*=a||0,this},d.Vector.prototype.div=function(a){return this.x/=a,this.y/=a,this.z/=a,this},d.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},d.Vector.prototype.magSq=function(){var a=this.x,b=this.y,c=this.z;return a*a+b*b+c*c},d.Vector.prototype.dot=function(a,b,c){return a instanceof d.Vector?this.dot(a.x,a.y,a.z):this.x*(a||0)+this.y*(b||0)+this.z*(c||0)},d.Vector.prototype.cross=function(a){var b=this.y*a.z-this.z*a.y,c=this.z*a.x-this.x*a.z,e=this.x*a.y-this.y*a.x;return this.p5?new d.Vector(this.p5,[b,c,e]):new d.Vector(b,c,e)},d.Vector.prototype.dist=function(a){var b=a.copy().sub(this);return b.mag()},d.Vector.prototype.normalize=function(){return this.div(this.mag())},d.Vector.prototype.limit=function(a){var b=this.magSq();return b>a*a&&(this.div(Math.sqrt(b)),this.mult(a)),this},d.Vector.prototype.setMag=function(a){return this.normalize().mult(a)},d.Vector.prototype.heading=function(){var a=Math.atan2(this.y,this.x);return this.p5?this.p5._angleMode===f.RADIANS?a:e.radiansToDegrees(a):a},d.Vector.prototype.rotate=function(a){this.p5&&this.p5._angleMode===f.DEGREES&&(a=e.degreesToRadians(a));var b=this.heading()+a,c=this.mag();return this.x=Math.cos(b)*c,this.y=Math.sin(b)*c,this},d.Vector.prototype.lerp=function(a,b,c,e){return a instanceof d.Vector?this.lerp(a.x,a.y,a.z,b):(this.x+=(a-this.x)*e||0,this.y+=(b-this.y)*e||0,this.z+=(c-this.z)*e||0,this)},d.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},d.Vector.prototype.equals=function(a,b,c){var e,f,g;return a instanceof d.Vector?(e=a.x||0,f=a.y||0,g=a.z||0):a instanceof Array?(e=a[0]||0,f=a[1]||0,g=a[2]||0):(e=a||0,f=b||0,g=c||0),this.x===e&&this.y===f&&this.z===g},d.Vector.fromAngle=function(a){return this.p5&&this.p5._angleMode===f.DEGREES&&(a=e.degreesToRadians(a)),this.p5?new d.Vector(this.p5,[Math.cos(a),Math.sin(a),0]):new d.Vector(Math.cos(a),Math.sin(a),0)},d.Vector.random2D=function(){var a;return a=this.p5?this.p5._angleMode===f.DEGREES?this.p5.random(360):this.p5.random(f.TWO_PI):Math.random()*Math.PI*2,this.fromAngle(a)},d.Vector.random3D=function(){var a,b;this.p5?(a=this.p5.random(0,f.TWO_PI),b=this.p5.random(-1,1)):(a=Math.random()*Math.PI*2,b=2*Math.random()-1);var c=Math.sqrt(1-b*b)*Math.cos(a),e=Math.sqrt(1-b*b)*Math.sin(a);return this.p5?new d.Vector(this.p5,[c,e,b]):new d.Vector(c,e,b)},d.Vector.add=function(a,b,c){return c?c.set(a):c=a.copy(),c.add(b),c},d.Vector.sub=function(a,b,c){return c?c.set(a):c=a.copy(),c.sub(b),c},d.Vector.mult=function(a,b,c){return c?c.set(a):c=a.copy(),c.mult(b),c},d.Vector.div=function(a,b,c){return c?c.set(a):c=a.copy(),c.div(b),c},d.Vector.dot=function(a,b){return a.dot(b)},d.Vector.cross=function(a,b){return a.cross(b)},d.Vector.dist=function(a,b){return a.dist(b)},d.Vector.lerp=function(a,b,c,d){return d?d.set(a):d=a.copy(),d.lerp(b,c),d},d.Vector.angleBetween=function(a,b){var c=Math.acos(a.dot(b)/(a.mag()*b.mag()));return this.p5&&this.p5._angleMode===f.DEGREES&&(c=e.radiansToDegrees(c)),c},b.exports=d.Vector},{\"../core/constants\":49,\"../core/core\":50,\"./polargeometry\":79}],79:[function(a,b,c){b.exports={degreesToRadians:function(a){return 2*Math.PI*a/360},radiansToDegrees:function(a){return 360*a/(2*Math.PI)}}},{}],80:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=!1,f=function(){var a,b,c=4294967296,d=1664525,e=1013904223;return{setSeed:function(d){b=a=(null==d?Math.random()*c:d)>>>0},getSeed:function(){return a},rand:function(){return b=(d*b+e)%c,b/c}}}();d.prototype.randomSeed=function(a){f.setSeed(a),e=!0},d.prototype.random=function(a,b){var c;if(c=e?f.rand():Math.random(),0===arguments.length)return c;if(1===arguments.length)return c*a;if(a>b){var d=a;a=b,b=d}return c*(b-a)+a};var g,h=!1;d.prototype.randomGaussian=function(a,b){var c,d,e,f;if(h)c=g,h=!1;else{do d=this.random(2)-1,e=this.random(2)-1,f=d*d+e*e;while(f>=1);f=Math.sqrt(-2*Math.log(f)/f),c=d*f,g=e*f,h=!0}var i=a||0,j=b||1;return c*j+i},b.exports=d},{\"../core/core\":50}],81:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"./polargeometry\"),f=a(\"../core/constants\");d.prototype._angleMode=f.RADIANS,d.prototype.acos=function(a){return this._angleMode===f.RADIANS?Math.acos(a):e.radiansToDegrees(Math.acos(a))},d.prototype.asin=function(a){return this._angleMode===f.RADIANS?Math.asin(a):e.radiansToDegrees(Math.asin(a))},d.prototype.atan=function(a){return this._angleMode===f.RADIANS?Math.atan(a):e.radiansToDegrees(Math.atan(a))},d.prototype.atan2=function(a,b){return this._angleMode===f.RADIANS?Math.atan2(a,b):e.radiansToDegrees(Math.atan2(a,b))},d.prototype.cos=function(a){return this._angleMode===f.RADIANS?Math.cos(a):Math.cos(this.radians(a))},d.prototype.sin=function(a){return this._angleMode===f.RADIANS?Math.sin(a):Math.sin(this.radians(a))},d.prototype.tan=function(a){return this._angleMode===f.RADIANS?Math.tan(a):Math.tan(this.radians(a))},d.prototype.degrees=function(a){return e.radiansToDegrees(a)},d.prototype.radians=function(a){return e.degreesToRadians(a)},d.prototype.angleMode=function(a){(a===f.DEGREES||a===f.RADIANS)&&(this._angleMode=a)},b.exports=d},{\"../core/constants\":49,\"../core/core\":50,\"./polargeometry\":79}],82:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.textAlign=function(a,b){return this._renderer.textAlign.apply(this._renderer,arguments)},d.prototype.textLeading=function(a){return this._renderer.textLeading.apply(this._renderer,arguments)},d.prototype.textSize=function(a){return this._renderer.textSize.apply(this._renderer,arguments)},d.prototype.textStyle=function(a){return this._renderer.textStyle.apply(this._renderer,arguments)},d.prototype.textWidth=function(a){return this._renderer.textWidth.apply(this._renderer,arguments)},d.prototype.textAscent=function(){return this._renderer.textAscent()},d.prototype.textDescent=function(){return this._renderer.textDescent()},d.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},b.exports=d},{\"../core/core\":50}],83:[function(a,b,c){\"use strict\";var d=a(\"../core/core\"),e=a(\"../core/constants\");a(\"../core/error_helpers\"),d.prototype.text=function(a,b,c,d,e){for(var f=new Array(arguments.length),g=0;g<f.length;++g)f[g]=arguments[g];return this._validateParameters(\"text\",f,[[\"*\",\"Number\",\"Number\"],[\"*\",\"Number\",\"Number\",\"Number\",\"Number\"]]),this._renderer._doFill||this._renderer._doStroke?this._renderer.text.apply(this._renderer,arguments):this},d.prototype.textFont=function(a,b){if(arguments.length){if(!a)throw Error(\"null font passed to textFont\");return this._renderer._setProperty(\"_textFont\",a),b&&(this._renderer._setProperty(\"_textSize\",b),this._renderer._setProperty(\"_textLeading\",b*e._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this},b.exports=d},{\"../core/constants\":49,\"../core/core\":50,\"../core/error_helpers\":53}],84:[function(a,b,c){\"use strict\";function d(a,b){for(var c=h(b,{sampleFactor:.1,simplifyThreshold:0}),d=n(a,0,1),f=d/(d*c.sampleFactor),g=[],i=0;d>i;i+=f)g.push(n(a,i));return c.simplifyThreshold&&e(g,c.simplifyThreshold),g}function e(a,b){b=\"undefined\"==typeof b?0:b;for(var c=0,d=a.length-1;a.length>3&&d>=0;--d)j(i(a,d-1),i(a,d),i(a,d+1),b)&&(a.splice(d%a.length,1),c++);return c}function f(a){for(var b,c=[],d=0;d<a.length;d++)\"M\"===a[d].type&&(b&&c.push(b),b=[]),b.push(g(a[d]));return c.push(b),c}function g(a){var b=[a.type];return\"M\"===a.type||\"L\"===a.type?b.push(a.x,a.y):\"C\"===a.type?b.push(a.x1,a.y1,a.x2,a.y2,a.x,a.y):\"Q\"===a.type&&b.push(a.x1,a.y1,a.x,a.y),b}function h(a,b){if(\"object\"!=typeof a)a=b;else for(var c in b)\"undefined\"==typeof a[c]&&(a[c]=b[c]);return a}function i(a,b){var c=a.length;return a[0>b?b%c+c:b%c]}function j(a,b,c,d){if(!d)return 0===k(a,b,c);\"undefined\"==typeof j.tmpPoint1&&(j.tmpPoint1=[],j.tmpPoint2=[]);var e=j.tmpPoint1,f=j.tmpPoint2;e.x=b.x-a.x,e.y=b.y-a.y,f.x=c.x-b.x,f.y=c.y-b.y;var g=e.x*f.x+e.y*f.y,h=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.sqrt(f.x*f.x+f.y*f.y),l=Math.acos(g/(h*i));return d>l}function k(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])}function l(a,b,c,d,e,f,g,h,i){var j=1-i,k=Math.pow(j,3),l=Math.pow(j,2),m=i*i,n=m*i,o=k*a+3*l*i*c+3*j*i*i*e+n*g,p=k*b+3*l*i*d+3*j*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,w=j*e+i*g,x=j*f+i*h,y=90-180*Math.atan2(q-s,r-t)/Math.PI;return(q>s||t>r)&&(y+=180),{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:w,y:x},alpha:y}}function m(a,b,c,d,e,f,g,h,i){return null==i?u(a,b,c,d,e,f,g,h):l(a,b,c,d,e,f,g,h,v(a,b,c,d,e,f,g,h,i))}function n(a,b,c){a=p(a);for(var d,e,f,g,h,i=\"\",j={},k=0,n=0,o=a.length;o>n;n++){if(f=a[n],\"M\"===f[0])d=+f[1],e=+f[2];else{if(g=m(d,e,f[1],f[2],f[3],f[4],f[5],f[6]),k+g>b&&!c)return h=m(d,e,f[1],f[2],f[3],f[4],f[5],f[6],b-k),{x:h.x,y:h.y,alpha:h.alpha};k+=g,d=+f[5],e=+f[6]}i+=f.shift()+f}return j.end=i,h=c?k:l(d,e,f[0],f[1],f[2],f[3],f[4],f[5],1),h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}function o(a){var b=[],c=0,d=0,e=0,f=0,g=0;\"M\"===a[0][0]&&(c=+a[0][1],d=+a[0][2],e=c,f=d,g++,b[0]=[\"M\",c,d]);for(var h,i,j,k=3===a.length&&\"M\"===a[0][0]&&\"R\"===a[1][0].toUpperCase()&&\"Z\"===a[2][0].toUpperCase(),l=g,m=a.length;m>l;l++){if(b.push(i=[]),j=a[l],j[0]!==String.prototype.toUpperCase.call(j[0]))switch(i[0]=String.prototype.toUpperCase.call(j[0]),i[0]){case\"A\":i[1]=j[1],i[2]=j[2],i[3]=j[3],i[4]=j[4],i[5]=j[5],i[6]=+(j[6]+c),i[7]=+(j[7]+d);break;case\"V\":i[1]=+j[1]+d;break;case\"H\":i[1]=+j[1]+c;break;case\"R\":h=[c,d].concat(j.slice(1));for(var n=2,o=h.length;o>n;n++)h[n]=+h[n]+c,h[++n]=+h[n]+d;b.pop(),b=b.concat(r(h,k));break;case\"M\":e=+j[1]+c,f=+j[2]+d;break;default:for(n=1,o=j.length;o>n;n++)i[n]=+j[n]+(n%2?c:d)}else if(\"R\"===j[0])h=[c,d].concat(j.slice(1)),b.pop(),b=b.concat(r(h,k)),i=[\"R\"].concat(j.slice(-2));else for(var p=0,q=j.length;q>p;p++)i[p]=j[p];switch(i[0]){case\"Z\":c=e,d=f;break;case\"H\":c=i[1];break;case\"V\":d=i[1];break;case\"M\":e=i[i.length-2],f=i[i.length-1];break;default:c=i[i.length-2],d=i[i.length-1]}}return b}function p(a,b){for(var c=o(a),d=b&&o(b),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g=(function(a,b,c){var d,e,f={T:1,Q:1};if(!a)return[\"C\",b.x,b.y,b.x,b.y,b.x,b.y];switch(a[0]in f||(b.qx=b.qy=null),a[0]){case\"M\":b.X=a[1],b.Y=a[2];break;case\"A\":a=[\"C\"].concat(q.apply(0,[b.x,b.y].concat(a.slice(1))));break;case\"S\":\"C\"===c||\"S\"===c?(d=2*b.x-b.bx,e=2*b.y-b.by):(d=b.x,e=b.y),a=[\"C\",d,e].concat(a.slice(1));break;case\"T\":\"Q\"===c||\"T\"===c?(b.qx=2*b.x-b.qx,b.qy=2*b.y-b.qy):(b.qx=b.x,b.qy=b.y),a=[\"C\"].concat(t(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case\"Q\":b.qx=a[1],b.qy=a[2],a=[\"C\"].concat(t(b.x,b.y,a[1],a[2],a[3],a[4]));break;case\"L\":a=[\"C\"].concat(s(b.x,b.y,a[1],a[2]));break;case\"H\":a=[\"C\"].concat(s(b.x,b.y,a[1],b.y));break;case\"V\":a=[\"C\"].concat(s(b.x,b.y,b.x,a[1]));break;case\"Z\":a=[\"C\"].concat(s(b.x,b.y,b.X,b.Y))}return a}),h=function(a,b){if(a[b].length>7){a[b].shift();for(var e=a[b];e.length;)j[b]=\"A\",d&&(k[b]=\"A\"),a.splice(b++,0,[\"C\"].concat(e.splice(0,6)));a.splice(b,1),p=Math.max(c.length,d&&d.length||0)}},i=function(a,b,e,f,g){a&&b&&\"M\"===a[g][0]&&\"M\"!==b[g][0]&&(b.splice(g,0,[\"M\",f.x,f.y]),e.bx=0,e.by=0,e.x=a[g][1],e.y=a[g][2],p=Math.max(c.length,d&&d.length||0))},j=[],k=[],l=\"\",m=\"\",n=0,p=Math.max(c.length,d&&d.length||0);p>n;n++){c[n]&&(l=c[n][0]),\"C\"!==l&&(j[n]=l,n&&(m=j[n-1])),c[n]=g(c[n],e,m),\"A\"!==j[n]&&\"C\"===l&&(j[n]=\"C\"),h(c,n),d&&(d[n]&&(l=d[n][0]),\"C\"!==l&&(k[n]=l,n&&(m=k[n-1])),d[n]=g(d[n],f,m),\"A\"!==k[n]&&\"C\"===l&&(k[n]=\"C\"),h(d,n)),i(c,d,e,f,n),i(d,c,f,e,n);var r=c[n],u=d&&d[n],v=r.length,w=d&&u.length;e.x=r[v-2],e.y=r[v-1],e.bx=parseFloat(r[v-4])||e.x,e.by=parseFloat(r[v-3])||e.y,f.bx=d&&(parseFloat(u[w-4])||f.x),f.by=d&&(parseFloat(u[w-3])||f.y),f.x=d&&u[w-2],f.y=d&&u[w-1]}return d?[c,d]:c}function q(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p=Math.PI,r=120*p/180,s=p/180*(+e||0),t=[],u=function(a,b,c){var d=a*Math.cos(c)-b*Math.sin(c),e=a*Math.sin(c)+b*Math.cos(c);return{x:d,y:e}};if(j)k=j[0],l=j[1],m=j[2],n=j[3];else{o=u(a,b,-s),a=o.x,b=o.y,o=u(h,i,-s),h=o.x,i=o.y;var v=(a-h)/2,w=(b-i)/2,x=v*v/(c*c)+w*w/(d*d);x>1&&(x=Math.sqrt(x),c=x*c,d=x*d);var y=c*c,z=d*d,A=(f===g?-1:1)*Math.sqrt(Math.abs((y*z-y*w*w-z*v*v)/(y*w*w+z*v*v)));m=A*c*w/d+(a+h)/2,n=A*-d*v/c+(b+i)/2,k=Math.asin(((b-n)/d).toFixed(9)),l=Math.asin(((i-n)/d).toFixed(9)),k=m>a?p-k:k,l=m>h?p-l:l,0>k&&(k=2*p+k),0>l&&(l=2*p+l),g&&k>l&&(k-=2*p),!g&&l>k&&(l-=2*p)}var B=l-k;if(Math.abs(B)>r){var C=l,D=h,E=i;l=k+r*(g&&l>k?1:-1),h=m+c*Math.cos(l),i=n+d*Math.sin(l),t=q(h,i,c,d,e,0,g,D,E,[l,C,m,n])}B=l-k;var F=Math.cos(k),G=Math.sin(k),H=Math.cos(l),I=Math.sin(l),J=Math.tan(B/4),K=4/3*c*J,L=4/3*d*J,M=[a,b],N=[a+K*G,b-L*F],O=[h+K*I,i-L*H],P=[h,i];if(N[0]=2*M[0]-N[0],N[1]=2*M[1]-N[1],j)return[N,O,P].concat(t);t=[N,O,P].concat(t).join().split(\",\");for(var Q=[],R=0,S=t.length;S>R;R++)Q[R]=R%2?u(t[R-1],t[R],s).y:u(t[R],t[R+1],s).x;\nreturn Q}function r(a,b){for(var c=[],d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4===d?f[3]={x:+a[0],y:+a[1]}:e-2===d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4===d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push([\"C\",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function s(a,b,c,d){return[a,b,c,d,c,d]}function t(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]}function u(a,b,c,d,e,f,g,h,i){null==i&&(i=1),i=i>1?1:0>i?0:i;for(var j=i/2,k=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],m=0,n=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],o=0;k>o;o++){var p=j*l[o]+j,q=w(p,a,c,e,g),r=w(p,b,d,f,h),s=q*q+r*r;m+=n[o]*Math.sqrt(s)}return j*m}function v(a,b,c,d,e,f,g,h,i){if(!(0>i||u(a,b,c,d,e,f,g,h)<i)){var j,k=1,l=k/2,m=k-l,n=.01;for(j=u(a,b,c,d,e,f,g,h,m);Math.abs(j-i)>n;)l/=2,m+=(i>j?1:-1)*l,j=u(a,b,c,d,e,f,g,h,m);return m}}function w(a,b,c,d,e){var f=-3*b+9*c-9*d+3*e,g=a*f+6*b-12*c+6*d;return a*g-3*b+3*c}function x(){for(var a=new Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];b=a.length;for(var c=\"\";b--;)c+=a[b]===Object(a[b])?JSON.stringify(a[b]):a[b];return c}var y=a(\"../core/core\"),z=a(\"../core/constants\");y.Font=function(a){this.parent=a,this.cache={},this.font=void 0},y.Font.prototype.list=function(){throw\"not yet implemented\"},y.Font.prototype.textBounds=function(a,b,c,d,e){b=void 0!==b?b:0,c=void 0!==c?c:0,d=d||this.parent._renderer._textSize;var f=this.cache[x(\"textBounds\",a,b,c,d)];if(!f){var g,h,i,j,k=[],l=[],m=this,n=this._scale(d);this.font.forEachGlyph(a,b,c,d,e,function(a,b,c,e){k.push(b),l.push(c);var f=a.getMetrics();\"space\"!==a.name?(k.push(b+f.xMax*n),l.push(c+-f.yMin*n),l.push(c+-f.yMax*n)):k.push(b+m.font.charToGlyph(\" \").advanceWidth*m._scale(d))}),g=Math.max(0,Math.min.apply(null,k)),h=Math.max(0,Math.min.apply(null,l)),i=Math.max(0,Math.max.apply(null,k)),j=Math.max(0,Math.max.apply(null,l)),f={x:g,y:h,h:j-h,w:i-g,advance:g-b},this.cache[x(\"textBounds\",a,b,c,d)]=f}return f},y.Font.prototype.textToPoints=function(a,b,c,e,g){var h=0,i=[],j=this._getGlyphs(a);e=e||this.parent._renderer._textSize;for(var k=0;k<j.length;k++){for(var l=j[k].getPath(b,c,e),m=f(l.commands),n=0;n<m.length;n++)for(var o=d(m[n],g),p=0;p<o.length;p++)o[p].x+=h,i.push(o[p]);h+=j[k].advanceWidth*this._scale(e)}return i},y.Font.prototype._getGlyphs=function(a){return this.font.stringToGlyphs(a)},y.Font.prototype._getPath=function(a,b,c,d){var e=this.parent,f=e._renderer.drawingContext,g=this._handleAlignment(e,f,a,b,c);return this.font.getPath(a,g.x,g.y,e._renderer._textSize,d)},y.Font.prototype._getPathData=function(a,b,c,d){var e=3;return\"string\"==typeof a&&arguments.length>2?a=this._getPath(a,b,c,d):\"object\"==typeof b&&(d=b),d&&\"number\"==typeof d.decimals&&(e=d.decimals),a.toPathData(e)},y.Font.prototype._getSVG=function(a,b,c,d){var e=3;return\"string\"==typeof a&&arguments.length>2?a=this._getPath(a,b,c,d):\"object\"==typeof b&&(d=b),d&&(\"number\"==typeof d.decimals&&(e=d.decimals),\"number\"==typeof d.strokeWidth&&(a.strokeWidth=d.strokeWidth),\"undefined\"!=typeof d.fill&&(a.fill=d.fill),\"undefined\"!=typeof d.stroke&&(a.stroke=d.stroke)),a.toSVG(e)},y.Font.prototype._renderPath=function(a,b,c,d){var e,f=d&&d.renderer||this.parent._renderer,g=f.drawingContext;e=\"object\"==typeof a&&a.commands?a.commands:this._getPath(a,b,c,f._textSize,d).commands,g.beginPath();for(var h=0;h<e.length;h+=1){var i=e[h];\"M\"===i.type?g.moveTo(i.x,i.y):\"L\"===i.type?g.lineTo(i.x,i.y):\"C\"===i.type?g.bezierCurveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):\"Q\"===i.type?g.quadraticCurveTo(i.x1,i.y1,i.x,i.y):\"Z\"===i.type&&g.closePath()}return f._doStroke&&f._strokeSet&&g.stroke(),f._doFill&&(g.fillStyle=f._fillSet?g.fillStyle:z._DEFAULT_TEXT_FILL,g.fill()),this},y.Font.prototype._textWidth=function(a,b){if(\" \"===a)return this.font.charToGlyph(\" \").advanceWidth*this._scale(b);var c=this.textBounds(a,0,0,b);return c.w+c.advance},y.Font.prototype._textAscent=function(a){return this.font.ascender*this._scale(a)},y.Font.prototype._textDescent=function(a){return-this.font.descender*this._scale(a)},y.Font.prototype._scale=function(a){return 1/this.font.unitsPerEm*(a||this.parent._renderer._textSize)},y.Font.prototype._handleAlignment=function(a,b,c,d,e){var f=this._textWidth(c),g=this._textAscent(),h=this._textDescent(),i=g+h;return b.textAlign===z.CENTER?d-=f/2:b.textAlign===z.RIGHT&&(d-=f),b.textBaseline===z.TOP?e+=i:b.textBaseline===z._CTX_MIDDLE?e+=i/2-h:b.textBaseline===z.BOTTOM&&(e-=h),{x:d,y:e}},b.exports=y.Font},{\"../core/constants\":49,\"../core/core\":50}],85:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.append=function(a,b){return a.push(b),a},d.prototype.arrayCopy=function(a,b,c,d,e){var f,g;\"undefined\"!=typeof e?(g=Math.min(e,a.length),f=d,a=a.slice(b,g+b)):(\"undefined\"!=typeof c?(g=c,g=Math.min(g,a.length)):g=a.length,f=0,c=b,a=a.slice(0,g)),Array.prototype.splice.apply(c,[f,g].concat(a))},d.prototype.concat=function(a,b){return a.concat(b)},d.prototype.reverse=function(a){return a.reverse()},d.prototype.shorten=function(a){return a.pop(),a},d.prototype.shuffle=function(a,b){var c=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a);a=b||c?a:a.slice();for(var d,e,f=a.length;f>1;)d=Math.random()*f|0,e=a[--f],a[f]=a[d],a[d]=e;return a},d.prototype.sort=function(a,b){var c=b?a.slice(0,Math.min(b,a.length)):a,d=b?a.slice(Math.min(b,a.length)):[];return c=\"string\"==typeof c[0]?c.sort():c.sort(function(a,b){return a-b}),c.concat(d)},d.prototype.splice=function(a,b,c){return Array.prototype.splice.apply(a,[c,0].concat(b)),a},d.prototype.subset=function(a,b,c){return\"undefined\"!=typeof c?a.slice(b,b+c):a.slice(b,a.length)},b.exports=d},{\"../core/core\":50}],86:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype[\"float\"]=function(a){return parseFloat(a)},d.prototype[\"int\"]=function(a,b){return\"string\"==typeof a?(b=b||10,parseInt(a,b)):\"number\"==typeof a?0|a:\"boolean\"==typeof a?a?1:0:a instanceof Array?a.map(function(a){return d.prototype[\"int\"](a,b)}):void 0},d.prototype.str=function(a){return a instanceof Array?a.map(d.prototype.str):String(a)},d.prototype[\"boolean\"]=function(a){return\"number\"==typeof a?0!==a:\"string\"==typeof a?\"true\"===a.toLowerCase():\"boolean\"==typeof a?a:a instanceof Array?a.map(d.prototype[\"boolean\"]):void 0},d.prototype[\"byte\"]=function(a){var b=d.prototype[\"int\"](a,10);return\"number\"==typeof b?(b+128)%256-128:b instanceof Array?b.map(d.prototype[\"byte\"]):void 0},d.prototype[\"char\"]=function(a){return\"number\"!=typeof a||isNaN(a)?a instanceof Array?a.map(d.prototype[\"char\"]):\"string\"==typeof a?d.prototype[\"char\"](parseInt(a,10)):void 0:String.fromCharCode(a)},d.prototype.unchar=function(a){return\"string\"==typeof a&&1===a.length?a.charCodeAt(0):a instanceof Array?a.map(d.prototype.unchar):void 0},d.prototype.hex=function(a,b){if(b=void 0===b||null===b?b=8:b,a instanceof Array)return a.map(function(a){return d.prototype.hex(a,b)});if(\"number\"==typeof a){0>a&&(a=4294967295+a+1);for(var c=Number(a).toString(16).toUpperCase();c.length<b;)c=\"0\"+c;return c.length>=b&&(c=c.substring(c.length-b,c.length)),c}},d.prototype.unhex=function(a){return a instanceof Array?a.map(d.prototype.unhex):parseInt(\"0x\"+a,16)},b.exports=d},{\"../core/core\":50}],87:[function(a,b,c){\"use strict\";function d(){var a=arguments[0],b=0>a,c=b?a.toString().substring(1):a.toString(),d=c.indexOf(\".\"),e=-1!==d?c.substring(0,d):c,f=-1!==d?c.substring(d+1):\"\",g=b?\"-\":\"\";if(3===arguments.length){var h=\"\";(-1!==d||arguments[2]-f.length>0)&&(h=\".\"),f.length>arguments[2]&&(f=f.substring(0,arguments[2]));for(var i=0;i<arguments[1]-e.length;i++)g+=\"0\";g+=e,g+=h,g+=f;for(var j=0;j<arguments[2]-f.length;j++)g+=\"0\";return g}for(var k=0;k<Math.max(arguments[1]-e.length,0);k++)g+=\"0\";return g+=c}function e(){var a=arguments[0].toString(),b=a.indexOf(\".\"),c=-1!==b?a.substring(b):\"\",d=-1!==b?a.substring(0,b):a;if(d=d.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\"),0===arguments[1])c=\"\";else if(void 0!==arguments[1])if(arguments[1]>c.length){c+=-1===b?\".\":\"\";for(var e=arguments[1]-c.length+1,f=0;e>f;f++)c+=\"0\"}else c=c.substring(0,arguments[1]+1);return d+c}function f(){return parseFloat(arguments[0])>0?\"+\"+arguments[0].toString():arguments[0].toString()}function g(){return parseFloat(arguments[0])>0?\" \"+arguments[0].toString():arguments[0].toString()}var h=a(\"../core/core\");h.prototype.join=function(a,b){return a.join(b)},h.prototype.match=function(a,b){return a.match(b)},h.prototype.matchAll=function(a,b){for(var c=new RegExp(b,\"g\"),d=c.exec(a),e=[];null!==d;)e.push(d),d=c.exec(a);return e},h.prototype.nf=function(){if(arguments[0]instanceof Array){var a=arguments[1],b=arguments[2];return arguments[0].map(function(c){return d(c,a,b)})}var c=Object.prototype.toString.call(arguments[0]);return\"[object Arguments]\"===c?3===arguments[0].length?this.nf(arguments[0][0],arguments[0][1],arguments[0][2]):2===arguments[0].length?this.nf(arguments[0][0],arguments[0][1]):this.nf(arguments[0][0]):d.apply(this,arguments)},h.prototype.nfc=function(){if(arguments[0]instanceof Array){var a=arguments[1];return arguments[0].map(function(b){return e(b,a)})}return e.apply(this,arguments)},h.prototype.nfp=function(){var a=this.nf.apply(this,arguments);return a instanceof Array?a.map(f):f(a)},h.prototype.nfs=function(){var a=this.nf.apply(this,arguments);return a instanceof Array?a.map(g):g(a)},h.prototype.split=function(a,b){return a.split(b)},h.prototype.splitTokens=function(){var a,b,c,d;return d=arguments[1],arguments.length>1?(c=/\\]/g.exec(d),b=/\\[/g.exec(d),b&&c?(d=d.slice(0,c.index)+d.slice(c.index+1),b=/\\[/g.exec(d),d=d.slice(0,b.index)+d.slice(b.index+1),a=new RegExp(\"[\\\\[\"+d+\"\\\\]]\",\"g\")):c?(d=d.slice(0,c.index)+d.slice(c.index+1),a=new RegExp(\"[\"+d+\"\\\\]]\",\"g\")):b?(d=d.slice(0,b.index)+d.slice(b.index+1),a=new RegExp(\"[\"+d+\"\\\\[]\",\"g\")):a=new RegExp(\"[\"+d+\"]\",\"g\")):a=/\\s/g,arguments[0].split(a).filter(function(a){return a})},h.prototype.trim=function(a){return a instanceof Array?a.map(this.trim):a.trim()},b.exports=h},{\"../core/core\":50}],88:[function(a,b,c){\"use strict\";var d=a(\"../core/core\");d.prototype.day=function(){return(new Date).getDate()},d.prototype.hour=function(){return(new Date).getHours()},d.prototype.minute=function(){return(new Date).getMinutes()},d.prototype.millis=function(){return window.performance.now()},d.prototype.month=function(){return(new Date).getMonth()+1},d.prototype.second=function(){return(new Date).getSeconds()},d.prototype.year=function(){return(new Date).getFullYear()},b.exports=d},{\"../core/core\":50}]},{},[41])(41)});p5.prototype._validateParameters = function() {};p5.prototype._friendlyFileLoadError = function() {};","date":"2016-02-11T06:17:23.000Z","updated":"2016-02-11T06:17:07.000Z","path":"libraries/p5.min.js","layout":"false","title":"","comments":1,"_id":"cikt700v6000bafgn4txvqo83"},{"_content":"/*! p5.dom.js v0.2.8 February 4, 2016 */\n/**\n * <p>The web is much more than just canvas and p5.dom makes it easy to interact\n * with other HTML5 objects, including text, hyperlink, image, input, video,\n * audio, and webcam.</p>\n * <p>There is a set of creation methods, DOM manipulation methods, and\n * an extended p5.Element that supports a range of HTML elements. See the\n * <a href=\"https://github.com/processing/p5.js/wiki/Beyond-the-canvas\" target=\"_blank\" rel=\"external\">\n * beyond the canvas tutorial</a> for a full overview of how this addon works.\n *\n * </p><p>Methods and properties shown in black are part of the p5.js core, items in\n * blue are part of the p5.dom library. You will need to include an extra file\n * in order to access the blue functions. See the\n * <a href=\"http://p5js.org/libraries/#using-a-library\" target=\"_blank\" rel=\"external\">using a library</a>\n * section for information on how to include this library. p5.dom comes with\n * <a href=\"http://p5js.org/download\" target=\"_blank\" rel=\"external\">p5 complete</a> or you can download the single file\n * <a href=\"https://raw.githubusercontent.com/lmccart/p5.js/master/lib/addons/p5.dom.js\" target=\"_blank\" rel=\"external\">\n * here</a>.</p>\n * <p>See <a href=\"https://github.com/processing/p5.js/wiki/Beyond-the-canvas\" target=\"_blank\" rel=\"external\">tutorial: beyond the canvas</a>\n * for more info on how to use this libary.\n *\n * @module p5.dom\n * @submodule p5.dom\n * @for p5.dom\n * @main\n */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd)\n    define('p5.dom', ['p5'], function (p5) { (factory(p5));});\n  else if (typeof exports === 'object')\n    factory(require('../p5'));\n  else\n    factory(root['p5']);\n}(this, function (p5) {\n// =============================================================================\n//                         p5 additions\n// =============================================================================\n\n  /**\n   * Searches the page for an element with the given ID, class, or tag name (using the '#' or '.'\n   * prefixes to specify an ID or class respectively, and none for a tag) and returns it as\n   * a p5.Element. If a class or tag name is given with more than 1 element,\n   * only the first element will be returned.\n   * The DOM node itself can be accessed with .elt.\n   * Returns null if none found. You can also specify a container to search within.\n   *\n   * @method select\n   * @param  {String} name id, class, or tag name of element to search for\n   * @param  {String} [container] id, p5.Element, or HTML element to search within\n   * @return {Object/p5.Element|Null} p5.Element containing node found\n   * @example\n   * <div><code class=\"norender\">\n   * function setup() {\n   *   createCanvas(100,100);\n   *   //translates canvas 50px down\n   *   select('canvas').translate(0,50);\n   * }\n   * </code></div>\n   * <div><code class=\"norender\">\n   * // these are all valid calls to select()\n   * var a = select('#moo');\n   * var b = select('#blah', '#myContainer');\n   * var c = select('#foo', b);\n   * var d = document.getElementById('beep');\n   * var e = select('p', d);\n   * </code></div>\n   *\n   */\n  p5.prototype.select = function (e, p) {\n    var res = null;\n    var container = getContainer(p);\n    if (e[0] === '.'){\n      e = e.slice(1);\n      res = container.getElementsByClassName(e);\n      if (res.length) {\n        res = res[0];\n      } else {\n        res = null;\n      }\n    }else if (e[0] === '#'){\n      e = e.slice(1);\n      res = container.getElementById(e);\n    }else {\n      res = container.getElementsByTagName(e);\n      if (res.length) {\n        res = res[0];\n      } else {\n        res = null;\n      }\n    }\n    if (res) {\n      return wrapElement(res);\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   * Searches the page for elements with the given class or tag name (using the '.' prefix\n   * to specify a class and no prefix for a tag) and returns them as p5.Elements\n   * in an array.\n   * The DOM node itself can be accessed with .elt.\n   * Returns an empty array if none found.\n   * You can also specify a container to search within.\n   *\n   * @method selectAll\n   * @param  {String} name class or tag name of elements to search for\n   * @param  {String} [container] id, p5.Element, or HTML element to search within\n   * @return {Array} Array of p5.Elements containing nodes found\n   * @example\n   * <div><code class=\"norender\">\n   * function setup() {\n   *   createButton('btn');\n   *   createButton('2nd btn');\n   *   createButton('3rd btn');\n   *   var buttons = selectAll('button');\n   *\n   *   for (var i = 0; i < buttons.length; i++){\n   *     buttons[i].size(100,100);\n   *   }\n   * }\n   * </code></div>\n   * <div><code class=\"norender\">\n   * // these are all valid calls to selectAll()\n   * var a = selectAll('.moo');\n   * var b = selectAll('div');\n   * var c = selectAll('button', '#myContainer');\n   * var d = select('#container');\n   * var e = selectAll('p', d);\n   * var f = document.getElementById('beep');\n   * var g = select('.blah', f);\n   * </code></div>\n   *\n   */\n  p5.prototype.selectAll = function (e, p) {\n    var arr = [];\n    var res;\n    var container = getContainer(p);\n    if (e[0] === '.'){\n      e = e.slice(1);\n      res = container.getElementsByClassName(e);\n    } else {\n      res = container.getElementsByTagName(e);\n    }\n    if (res) {\n      for (var j = 0; j < res.length; j++) {\n        var obj = wrapElement(res[j]);\n        arr.push(obj);\n      }\n    }\n    return arr;\n  };\n\n  /**\n   * Helper function for select and selectAll\n   */\n  function getContainer(p) {\n    var container = document;\n    if (typeof p === 'string' && p[0] === '#'){\n      p = p.slice(1);\n      container = document.getElementById(p) || document;\n    } else if (p instanceof p5.Element){\n      container = p.elt;\n    } else if (p instanceof HTMLElement){\n      container = p;\n    }\n    return container;\n  }\n\n  /**\n   * Helper function for getElement and getElements.\n   */\n  function wrapElement(elt) {\n    if(elt.tagName === \"INPUT\" && elt.type === \"checkbox\") {\n      var converted = new p5.Element(elt);\n      converted.checked = function(){\n      if (arguments.length === 0){\n        return this.elt.checked;\n      } else if(arguments[0]) {\n        this.elt.checked = true;\n      } else {\n        this.elt.checked = false;\n      }\n      return this;\n      };\n      return converted;\n    } else if (elt.tagName === \"VIDEO\" || elt.tagName === \"AUDIO\") {\n      return new p5.MediaElement(elt);\n    } else {\n      return new p5.Element(elt);\n    }\n  }\n\n  /**\n   * Removes all elements created by p5, except any canvas / graphics\n   * elements created by createCanvas or createGraphics.\n   * Event handlers are removed, and element is removed from the DOM.\n   * @method removeElements\n   * @example\n   * <div class=\"norender\"><code>\n   * function setup() {\n   *   createCanvas(100, 100);\n   *   createDiv('this is some text');\n   *   createP('this is a paragraph');\n   * }\n   * function mousePressed() {\n   *   removeElements(); // this will remove the div and p, not canvas\n   * }\n   * </code></div>\n   *\n   */\n  p5.prototype.removeElements = function (e) {\n    for (var i=0; i<this._elements.length; i++)=\"\" {=\"\" if=\"\" (!(this._elements[i].elt=\"\" instanceof=\"\" htmlcanvaselement))=\"\" this._elements[i].remove();=\"\" }=\"\" };=\"\" **=\"\" *=\"\" helpers=\"\" for=\"\" create=\"\" methods.=\"\" function=\"\" addelement(elt,=\"\" pinst,=\"\" media)=\"\" var=\"\" node=\"pInst._userNode\" ?=\"\" pinst._usernode=\"\" :=\"\" document.body;=\"\" node.appendchild(elt);=\"\" c=\"media\" new=\"\" p5.mediaelement(elt)=\"\" p5.element(elt);=\"\" pinst._elements.push(c);=\"\" return=\"\" c;=\"\" creates=\"\" a=\"\" &lt;div&gt;&lt;=\"\" div&gt;=\"\" element=\"\" in=\"\" the=\"\" dom=\"\" with=\"\" given=\"\" inner=\"\" html.=\"\" appends=\"\" to=\"\" container=\"\" one=\"\" is=\"\" specified,=\"\" otherwise=\"\" body.=\"\" @method=\"\" creatediv=\"\" @param=\"\" {string}=\"\" html=\"\" created=\"\" @return=\"\" {object=\"\" p5.element}=\"\" pointer=\"\" p5.element=\"\" holding=\"\" @example=\"\" <div=\"\" class=\"norender\"><code>\n   * var myDiv;\n   * function setup() {\n   *   myDiv = createDiv('this is some text');\n   * }\n   * </code>\n   */\n\n  /**\n   * Creates a &lt;p&gt;&lt;/p&gt; element in the DOM with given inner HTML. Used\n   * for paragraph length text.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createP\n   * @param  {String} html inner HTML for element created\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var myP;\n   * function setup() {\n   *   myP = createP('this is some text');\n   * }\n   * </code></div>\n   */\n\n  /**\n   * Creates a &lt;span&gt;&lt;/span&gt; element in the DOM with given inner HTML.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createSpan\n   * @param  {String} html inner HTML for element created\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var mySpan;\n   * function setup() {\n   *   mySpan = createSpan('this is some text');\n   * }\n   * </code></div>\n   */\n  var tags = ['div', 'p', 'span'];\n  tags.forEach(function(tag) {\n    var method = 'create' + tag.charAt(0).toUpperCase() + tag.slice(1);\n    p5.prototype[method] = function(html) {\n      var elt = document.createElement(tag);\n      elt.innerHTML = typeof html === undefined ? \"\" : html;\n      return addElement(elt, this);\n    }\n  });\n\n  /**\n   * Creates an &lt;img /&gt; element in the DOM with given src and\n   * alternate text.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createImg\n   * @param  {String} src src path or url for image\n   * @param  {String} [alt] alternate text to be used if image does not load\n   * @param  {Function} [successCallback] callback to be called once image data is loaded\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var img;\n   * function setup() {\n   *   img = createImg('http://p5js.org/img/asterisk-01.png');\n   * }\n   * </code></div>\n   */\n  p5.prototype.createImg = function() {\n    var elt = document.createElement('img');\n    var args = arguments;\n    var self;\n    var setAttrs = function(){\n      self.width = elt.offsetWidth;\n      self.height = elt.offsetHeight;\n      if (args.length > 1 && typeof args[1] === 'function'){\n        self.fn = args[1];\n        self.fn();\n      }else if (args.length > 1 && typeof args[2] === 'function'){\n        self.fn = args[2];\n        self.fn();\n      }\n    };\n    elt.src = args[0];\n    if (args.length > 1 && typeof args[1] === 'string'){\n      elt.alt = args[1];\n    }\n    elt.onload = function(){\n      setAttrs();\n    }\n    self = addElement(elt, this);\n    return self;\n  };\n\n  /**\n   * Creates an &lt;a&gt;&lt;/a&gt; element in the DOM for including a hyperlink.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createA\n   * @param  {String} href       url of page to link to\n   * @param  {String} html       inner html of link element to display\n   * @param  {String} [target]   target where new link should open,\n   *                             could be _blank, _self, _parent, _top.\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var myLink;\n   * function setup() {\n   *   myLink = createA('http://p5js.org/', 'this is a link');\n   * }\n   * </code></div>\n   */\n  p5.prototype.createA = function(href, html, target) {\n    var elt = document.createElement('a');\n    elt.href = href;\n    elt.innerHTML = html;\n    if (target) elt.target = target;\n    return addElement(elt, this);\n  };\n\n  /** INPUT **/\n\n\n  /**\n   * Creates a slider &lt;input&gt;&lt;/input&gt; element in the DOM.\n   * Use .size() to set the display length of the slider.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createSlider\n   * @param  {Number} min minimum value of the slider\n   * @param  {Number} max maximum value of the slider\n   * @param  {Number} [value] default value of the slider\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div><code>\n   * var slider;\n   * function setup() {\n   *   slider = createSlider(0, 255, 100);\n   *   slider.position(10, 10);\n   *   slider.style('width', '80px');\n   * }\n   *\n   * function draw() {\n   *   var val = slider.value();\n   *   background(val);\n   * }\n   * </code></div>\n   */\n  p5.prototype.createSlider = function(min, max, value, step) {\n    var elt = document.createElement('input');\n    elt.type = 'range';\n    elt.min = min;\n    elt.max = max;\n    if (step) elt.step = step;\n    if (typeof(value) === \"number\") elt.value = value;\n    return addElement(elt, this);\n  };\n\n  /**\n   * Creates a &lt;button&gt;&lt;/button&gt; element in the DOM.\n   * Use .size() to set the display size of the button.\n   * Use .mousePressed() to specify behavior on press.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createButton\n   * @param  {String} label label displayed on the button\n   * @param  {String} [value] value of the button\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var button;\n   * function setup() {\n   *   createCanvas(100, 100);\n   *   background(0);\n   *   button = createButton('click me');\n   *   button.position(19, 19);\n   *   button.mousePressed(changeBG);\n   * }\n   *\n   * function changeBG() {\n   *   var val = random(255);\n   *   background(val);\n   * }\n   * </code></div>\n   */\n  p5.prototype.createButton = function(label, value) {\n    var elt = document.createElement('button');\n    elt.innerHTML = label;\n    elt.value = value;\n    if (value) elt.value = value;\n    return addElement(elt, this);\n  };\n\n  /**\n   * Creates a checkbox &lt;input&gt;&lt;/input&gt; element in the DOM.\n   * Calling .checked() on a checkbox returns if it is checked or not\n   *\n   * @method createCheckbox\n   * @param  {String} [label] label displayed after checkbox\n   * @param  {boolean} [value] value of the checkbox; checked is true, unchecked is false.Unchecked if no value given\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var checkbox;\n   *\n   * function setup() {\n   *   checkbox = createCheckbox('label', false);\n   *   checkbox.changed(myCheckedEvent);\n   * }\n   *\n   * function myCheckedEvent() {\n   *   if (this.checked()) {\n   *     console.log(\"Unchecking!\");\n   *   } else {\n   *     console.log(\"Checking!\");\n   *   }\n   *\n   * </code></div>\n   */\n  p5.prototype.createCheckbox = function() {\n    var elt = document.createElement('input');\n    elt.type = 'checkbox';\n    //checkbox must be wrapped in p5.Element before label so that label appears after\n    var self = addElement(elt, this);\n    self.checked = function(){\n      if (arguments.length === 0){\n        return self.elt.checked;\n      }else if(arguments[0]){\n        self.elt.checked = true;\n      }else{\n        self.elt.checked = false;\n      }\n      return self;\n    };\n    this.value = function(val){\n      self.value = val;\n      return this;\n    };\n    if (arguments[0]){\n      var ran = Math.random().toString(36).slice(2);\n      var label = document.createElement('label');\n      elt.setAttribute('id', ran);\n      label.htmlFor = ran;\n      self.value(arguments[0]);\n      label.appendChild(document.createTextNode(arguments[0]));\n      addElement(label, this);\n    }\n    if (arguments[1]){\n      elt.checked = true;\n    }\n    return self;\n  };\n\n  /**\n   * Creates a dropdown menu &lt;select&gt;&lt;/select&gt; element in the DOM.\n   * @method createSelect\n   * @param {boolean} [multiple] [true if dropdown should support multiple selections]\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div><code>\n   * var sel;\n   *\n   * function setup() {\n   *   textAlign(CENTER);\n   *   background(200);\n   *   sel = createSelect();\n   *   sel.position(10, 10);\n   *   sel.option('pear');\n   *   sel.option('kiwi');\n   *   sel.option('grape');\n   *   sel.changed(mySelectEvent);\n   * }\n   *\n   * function mySelectEvent() {\n   *   var item = sel.value();\n   *   background(200);\n   *   text(\"it's a \"+item+\"!\", 50, 50);\n   * }\n   * </code></div>\n   */\n  p5.prototype.createSelect = function(mult) {\n    var elt = document.createElement('select');\n    if (mult){\n      elt.setAttribute('multiple', 'true');\n    }\n    var self = addElement(elt, this);\n    self.option = function(name, value){\n      var opt = document.createElement('option');\n      opt.innerHTML = name;\n      if (arguments.length > 1)\n        opt.value = value;\n      else\n        opt.value = name;\n      elt.appendChild(opt);\n    };\n    self.selected = function(value){\n      var arr = [];\n      if (arguments.length > 0){\n        for (var i = 0; i < this.elt.length; i++){\n          if (value.toString() === this.elt[i].value){\n            this.elt.selectedIndex = i;\n          }\n        }\n        return this;\n      }else{\n        if (mult){\n          for (var i = 0; i < this.elt.selectedOptions.length; i++){\n            arr.push(this.elt.selectedOptions[i].value);\n          }\n          return arr;\n        }else{\n          return this.elt.value;\n        }\n      }\n    };\n    return self;\n  };\n\n  /**\n   * Creates a radio button &lt;input&gt;&lt;/input&gt; element in the DOM.\n   *\n   * @method createRadio\n   * @param  {String} [divId] the id and name of the created div and input field respectively \n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   */\n  p5.prototype.createRadio = function() {\n    var radios = document.querySelectorAll(\"input[type=radio]\");\n    var count = 0;\n    if(radios.length > 1){\n      console.log(radios,radios[0].name);\n      var length = radios.length;\n      var prev=radios[0].name;\n      var current = radios[1].name;\n      count=1;\n      for(var i = 1; i < length; i++ ){\n        current = radios[i].name;\n        if(prev != current){\n          count++;\n        }\n        prev = current;\n      }\n    }\n    else if (radios.length == 1){\n      count = 1;\n    }\n    var elt = document.createElement('div');\n    var self = addElement(elt, this);\n    var times = -1;\n    self.option = function(name, value){\n      var opt = document.createElement('input');\n      opt.type = 'radio';\n      opt.innerHTML = name;\n      if (arguments.length > 1)\n        opt.value = value;\n      else\n        opt.value = name;\n      opt.setAttribute('name',\"defaultradio\"+count);\n      elt.appendChild(opt);\n      if (name){\n        times++;\n        var ran = Math.random().toString(36).slice(2);\n        var label = document.createElement('label');\n        opt.setAttribute('id', \"defaultradio\"+count+\"-\"+times);\n        label.htmlFor = \"defaultradio\"+count+\"-\"+times;\n        label.appendChild(document.createTextNode(name));\n        elt.appendChild(label);\n      }\n      return opt;\n    };\n    self.selected = function(){\n      var length = this.elt.childNodes.length;\n      if(arguments[0]) {\n        for (var i = 0; i < length; i+=2){\n          if(this.elt.childNodes[i].value == arguments[0])\n            this.elt.childNodes[i].checked = true;\n        }\n        return this;\n      } else {\n        for (var i = 0; i < length; i+=2){\n          if(this.elt.childNodes[i].checked == true)\n            return this.elt.childNodes[i].value;\n        }\n      }\n    };\n    self.value = function(){\n      var length = this.elt.childNodes.length;\n      if(arguments[0]) {\n        for (var i = 0; i < length; i+=2){\n          if(this.elt.childNodes[i].value == arguments[0])\n            this.elt.childNodes[i].checked = true;\n        }\n        return this;\n      } else {\n        for (var i = 0; i < length; i+=2){\n          if(this.elt.childNodes[i].checked == true)\n            return this.elt.childNodes[i].value;\n        }\n        return \"\";\n      }\n    };\n    return self\n  };\n  \n  /**\n   * Creates an &lt;input&gt;&lt;/input&gt; element in the DOM for text input.\n   * Use .size() to set the display length of the box.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createInput\n   * @param  {Number} [value] default value of the input box\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * function setup(){\n   *   var inp = createInput('');\n   *   inp.input(myInputEvent);\n   * }\n   *\n   * function myInputEvent(){\n   *   console.log('you are typing: ', this.value());\n   * }\n   *\n   * </code></div>\n   */\n  p5.prototype.createInput = function(value) {\n    var elt = document.createElement('input');\n    elt.type = 'text';\n    if (value) elt.value = value;\n    return addElement(elt, this);\n  };\n\n  /**\n   * Creates an &lt;input&gt;&lt;/input&gt; element in the DOM of type 'file'.\n   * This allows users to select local files for use in a sketch.\n   *\n   * @method createFileInput\n   * @param  {Function} [callback] callback function for when a file loaded\n   * @param  {String} [multiple] optional to allow multiple files selected\n   * @return {Object/p5.Element} pointer to p5.Element holding created DOM element\n   */\n  p5.prototype.createFileInput = function(callback, multiple) {\n\n    // Is the file stuff supported?\n    if (window.File && window.FileReader && window.FileList && window.Blob) {\n      // Yup, we're ok and make an input file selector\n      var elt = document.createElement('input');\n      elt.type = 'file';\n\n      // If we get a second argument that evaluates to true\n      // then we are looking for multiple files\n      if (multiple) {\n        // Anything gets the job done\n        elt.multiple = 'multiple';\n      }\n\n      // Function to handle when a file is selected\n      // We're simplifying life and assuming that we always\n      // want to load every selected file\n      function handleFileSelect(evt) {\n        // These are the files\n        var files = evt.target.files;\n        // Load each one and trigger a callback\n        for (var i = 0; i < files.length; i++) {\n          var f = files[i];\n          var reader = new FileReader();\n          function makeLoader(theFile) {\n            // Making a p5.File object\n            var p5file = new p5.File(theFile);\n            return function(e) {\n              p5file.data = e.target.result;\n              callback(p5file);\n            };\n          };\n          reader.onload = makeLoader(f);\n\n          // Text or data?\n          // This should likely be improved\n          if (f.type.indexOf('text') > -1) {\n            reader.readAsText(f);\n          } else {\n            reader.readAsDataURL(f);\n          }\n        }\n      }\n      \n      // Now let's handle when a file was selected\n      elt.addEventListener('change', handleFileSelect, false);\n      return addElement(elt, this);\n    } else {\n      console.log('The File APIs are not fully supported in this browser. Cannot create element.');\n    }\n  };\n\n\n  /** VIDEO STUFF **/\n\n  function createMedia(pInst, type, src, callback) {\n    var elt = document.createElement(type);\n\n    // allow src to be empty\n    var src = src || '';\n    if (typeof src === 'string') {\n      src = [src];\n    }\n    for (var i=0; i<src.length; i++)=\"\" {=\"\" var=\"\" source=\"document.createElement('source');\" source.src=\"src[i];\" elt.appendchild(source);=\"\" }=\"\" if=\"\" (typeof=\"\" callback=\"\" !=\"=\" 'undefined')=\"\" callbackhandler=\"function()\" callback();=\"\" elt.removeeventlistener('canplaythrough',=\"\" callbackhandler);=\"\" elt.addeventlistener('canplaythrough',=\"\" c=\"addElement(elt,\" pinst,=\"\" true);=\"\" c.loadedmetadata=\"false;\" set=\"\" width=\"\" and=\"\" height=\"\" onload=\"\" metadata=\"\" elt.addeventlistener('loadedmetadata',=\"\" function()=\"\" c.width=\"elt.videoWidth;\" c.height=\"elt.videoHeight;\" });=\"\" return=\"\" c;=\"\" **=\"\" *=\"\" creates=\"\" an=\"\" html5=\"\" &lt;video&gt;=\"\" element=\"\" in=\"\" the=\"\" dom=\"\" for=\"\" simple=\"\" playback=\"\" of=\"\" audio=\"\" video.=\"\" shown=\"\" by=\"\" default,=\"\" can=\"\" be=\"\" hidden with=\"\" .hide()=\"\" drawn=\"\" into=\"\" canvas=\"\" using=\"\" video().=\"\" appends=\"\" to=\"\" container=\"\" node=\"\" one=\"\" is=\"\" specified,=\"\" otherwise=\"\" body.=\"\" first=\"\" parameter=\"\" either=\"\" a=\"\" single=\"\" string=\"\" path=\"\" video=\"\" file,=\"\" or=\"\" array=\"\" paths=\"\" different=\"\" formats=\"\" same=\"\" this=\"\" useful=\"\" ensuring=\"\" that=\"\" your=\"\" play=\"\" across=\"\" browsers,=\"\" as=\"\" each=\"\" supports=\"\" formats.=\"\" see=\"\" <a=\"\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats\">this\n   * page for further information about supported formats.\n   *\n   * @method createVideo\n   * @param  {String|Array} src  path to a video file, or array of paths for\n   *                             supporting different browsers\n   * @param  {Object} [callback] callback function to be called upon\n   *                             'canplaythrough' event fire, that is, when the\n   *                             browser can play the media, and estimates that\n   *                             enough data has been loaded to play the media\n   *                             up to its end without having to stop for\n   *                             further buffering of content\n   * @return {Object/p5.Element} pointer to video p5.Element\n   */\n  p5.prototype.createVideo = function(src, callback) {\n    return createMedia(this, 'video', src, callback);\n  };\n\n  /** AUDIO STUFF **/\n\n  /**\n   * Creates a hidden HTML5 &lt;audio&gt; element in the DOM for simple audio\n   * playback. Appends to the container node if one is specified,\n   * otherwise appends to body. The first parameter\n   * can be either a single string path to a audio file, or an array of string\n   * paths to different formats of the same audio. This is useful for ensuring\n   * that your audio can play across different browsers, as each supports\n   * different formats. See <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats\" target=\"_blank\" rel=\"external\">this\n   * page for further information about supported formats</a>.\n   *\n   * @method createAudio\n   * @param  {String|Array} src  path to an audio file, or array of paths for\n   *                             supporting different browsers\n   * @param  {Object} [callback] callback function to be called upon\n   *                             'canplaythrough' event fire, that is, when the\n   *                             browser can play the media, and estimates that\n   *                             enough data has been loaded to play the media\n   *                             up to its end without having to stop for\n   *                             further buffering of content\n   * @return {Object/p5.Element} pointer to audio p5.Element\n   */\n  p5.prototype.createAudio = function(src, callback) {\n    return createMedia(this, 'audio', src, callback);\n  };\n\n\n  /** CAMERA STUFF **/\n\n  p5.prototype.VIDEO = 'video';\n  p5.prototype.AUDIO = 'audio';\n\n  navigator.getUserMedia  = navigator.getUserMedia ||\n                            navigator.webkitGetUserMedia ||\n                            navigator.mozGetUserMedia ||\n                            navigator.msGetUserMedia;\n\n  /**\n   * Creates a new &lt;video&gt; element that contains the audio/video feed\n   * from a webcam. This can be drawn onto the canvas using video(). More\n   * specific properties of the stream can be passing in a Constraints object.\n   * See the\n   * <a href=\"http://w3c.github.io/mediacapture-main/getusermedia.html\" target=\"_blank\" rel=\"external\">W3C\n   * spec</a> for possible properties. Note that not all of these are supported\n   * by all browsers.\n   *\n   * @method createCapture\n   * @param  {String|Constant|Object}   type type of capture, either VIDEO or\n   *                                    AUDIO if none specified, default both,\n   *                                    or a Constraints boject\n   * @param  {Function}                 callback function to be called once\n   *                                    stream has loaded\n   * @return {Object/p5.Element} capture video p5.Element\n   * @example\n   * <div class=\"norender\"><code>\n   * var capture;\n   *\n   * function setup() {\n   *   createCanvas(480, 120);\n   *   capture = createCapture(VIDEO);\n   * }\n   *\n   * function draw() {\n   *   image(capture, 0, 0, width, width*capture.height/capture.width);\n   *   filter(INVERT);\n   * }\n   * </code></div>\n   * <div class=\"norender\"><code>\n   * function setup() {\n   *   createCanvas(480, 120);\n   *   var constraints = {\n   *     video: {\n   *       mandatory: {\n   *         minWidth: 1280,\n   *         minHeight: 720\n   *       },\n   *       optional: [\n   *         { maxFrameRate: 10 }\n   *       ]\n   *     },\n   *     audio: true\n   *   };\n   *   createCapture(constraints, function(stream) {\n   *     console.log(stream);\n   *   });\n   * }\n   * </code></div>\n   */\n  p5.prototype.createCapture = function() {\n    var useVideo = true;\n    var useAudio = true;\n    var constraints;\n    var cb;\n    for (var i=0; i<arguments.length; i++)=\"\" {=\"\" if=\"\" (arguments[i]=\"==\" p5.prototype.video)=\"\" useaudio=\"false;\" }=\"\" else=\"\" p5.prototype.audio)=\"\" usevideo=\"false;\" (typeof=\"\" arguments[i]=\"==\" 'object')=\"\" constraints=\"arguments[i];\" 'function')=\"\" cb=\"arguments[i];\" (navigator.getusermedia)=\"\" var=\"\" elt=\"document.createElement('video');\" (!constraints)=\"\" usevideo,=\"\" audio:=\"\" useaudio};=\"\" navigator.getusermedia(constraints,=\"\" function(stream)=\"\" elt.src=\"window.URL.createObjectURL(stream);\" elt.onloadedmetadata=\"function(e)\" elt.play();=\"\" (cb)=\"\" cb(stream);=\"\" };=\"\" },=\"\" function(e)=\"\" console.log(e);=\"\" });=\"\" throw=\"\" 'getusermedia=\"\" not=\"\" supported=\"\" in=\"\" this=\"\" browser';=\"\" c=\"addElement(elt,\" this,=\"\" true);=\"\" c.loadedmetadata=\"false;\" set=\"\" width=\"\" and=\"\" height=\"\" onload=\"\" metadata=\"\" elt.addeventlistener('loadedmetadata',=\"\" function()=\"\" c.width=\"elt.videoWidth;\" c.height=\"elt.videoHeight;\" return=\"\" c;=\"\" **=\"\" *=\"\" creates=\"\" element=\"\" with=\"\" given=\"\" tag=\"\" the=\"\" dom=\"\" content.=\"\" appends=\"\" to=\"\" container=\"\" node=\"\" one=\"\" is=\"\" specified,=\"\" otherwise=\"\" body.=\"\" @method=\"\" createelement=\"\" @param=\"\" {string}=\"\" for=\"\" new=\"\" [content]=\"\" html=\"\" content=\"\" be=\"\" inserted=\"\" into=\"\" @return=\"\" {object=\"\" p5.element}=\"\" pointer=\"\" p5.element=\"\" holding=\"\" created=\"\" @example=\"\" <div=\"\" class=\"norender\"><code>\n   * var h2 = createElement('h2','im an h2 p5.element!');\n   * </code>\n   */\n  p5.prototype.createElement = function(tag, content) {\n    var elt = document.createElement(tag);\n    if (typeof content !== 'undefined') {\n      elt.innerHTML = content;\n    }\n    return addElement(elt, this);\n  };\n\n\n// =============================================================================\n//                         p5.Element additions\n// =============================================================================\n  /**\n   *\n   * Adds specified class to the element.\n   *\n   * @for p5.Element\n   * @method addClass\n   * @param  {String} class name of class to add\n   * @return {Object/p5.Element}\n   * @example\n   * <div class=\"norender\"><code>\n   * var div = createDiv('div');\n   * div.addClass('myClass');\n   * </code></div>\n   */\n  p5.Element.prototype.addClass = function(c) {\n    if (this.elt.className) {\n      // PEND don't add class more than once\n      //var regex = new RegExp('[^a-zA-Z\\d:]?'+c+'[^a-zA-Z\\d:]?');\n      //if (this.elt.className.search(/[^a-zA-Z\\d:]?hi[^a-zA-Z\\d:]?/) === -1) {\n      this.elt.className = this.elt.className+' '+c;\n      //}\n    } else {\n      this.elt.className = c;\n    }\n    return this;\n  }\n\n  /**\n   *\n   * Removes specified class from the element.\n   *\n   * @method removeClass\n   * @param  {String} class name of class to remove\n   * @return {Object/p5.Element}\n   */\n  p5.Element.prototype.removeClass = function(c) {\n    var regex = new RegExp('(?:^|\\\\s)'+c+'(?!\\\\S)');\n    this.elt.className = this.elt.className.replace(regex, '');\n    this.elt.className = this.elt.className.replace(/^\\s+|\\s+$/g, \"\"); //prettify (optional)\n    return this;\n  }\n\n  /**\n   *\n   * Attaches the element  as a child to the parent specified.\n   * Accepts either a string ID, DOM node, or p5.Element.\n   * If no argument is specified, an array of children DOM nodes is returned.\n   *\n   * @method child\n   * @param  {String|Object|p5.Element} [child] the ID, DOM node, or p5.Element\n   *                         to add to the current element\n   * @return {p5.Element}\n   * @example\n   * <div class=\"norender\"><code>\n   * var div0 = createDiv('this is the parent');\n   * var div1 = createDiv('this is the child');\n   * div0.child(div1); // use p5.Element\n   * </code></div>\n   * <div class=\"norender\"><code>\n   * var div0 = createDiv('this is the parent');\n   * var div1 = createDiv('this is the child');\n   * div1.id('apples');\n   * div0.child('apples'); // use id\n   * </code></div>\n   * <div class=\"norender\"><code>\n   * var div0 = createDiv('this is the parent');\n   * var elt = document.getElementById('myChildDiv');\n   * div0.child(elt); // use element from page\n   * </code></div>\n   */\n  p5.Element.prototype.child = function(c) {\n    if (c === null){\n      return this.elt.childNodes\n    }\n    if (typeof c === 'string') {\n      if (c[0] === '#') {\n        c = c.substring(1);\n      }\n      c = document.getElementById(c);\n    } else if (c instanceof p5.Element) {\n      c = c.elt;\n    }\n    this.elt.appendChild(c);\n    return this;\n  };\n\n  /**\n   * Centers a p5 Element either vertically, horizontally,\n   * or both, relative to its parent or according to\n   * the body if the Element has no parent. If no argument is passed\n   * the Element is aligned both vertically and horizontally.\n   *\n   * @param  {String} align       passing 'vertical', 'horizontal' aligns element accordingly\n   * @return {Object/p5.Element} pointer to p5.Element\n   * @example\n   * <div><code>\n   * function setup() {\n   *   var div = createDiv('').size(10,10);\n   *   div.style('background-color','orange');\n   *   div.center();\n   *\n   * }\n   * </code></div>\n   */\n  p5.Element.prototype.center = function(align) {\n    var style = this.elt.style.display;\n    var hidden = this.elt.style.display === 'none';\n    var parentHidden = this.parent().style.display === 'none';\n    var pos = { x : this.elt.offsetLeft, y : this.elt.offsetTop };\n\n    if (hidden) this.show();\n\n    this.elt.style.display = 'block';\n    this.position(0,0);\n\n    if (parentHidden) this.parent().style.display = 'block';\n\n    var wOffset = Math.abs(this.parent().offsetWidth - this.elt.offsetWidth);\n    var hOffset = Math.abs(this.parent().offsetHeight - this.elt.offsetHeight);\n    var y = pos.y;\n    var x = pos.x;\n\n    if (align === 'both' || align === undefined){\n      this.position(wOffset/2, hOffset/2);\n    }else if (align === 'horizontal'){\n      this.position(wOffset/2, y);\n    }else if (align === 'vertical'){\n      this.position(x, hOffset/2);\n    }\n\n    this.style('display', style);\n\n    if (hidden) this.hide();\n\n    if (parentHidden) this.parent().style.display = 'none';\n\n    return this;\n  };\n\n  /**\n   *\n   * If an argument is given, sets the inner HTML of the element,\n   * replacing any existing html. If no arguments are given, returns\n   * the inner HTML of the element.\n   *\n   * @for p5.Element\n   * @method html\n   * @param  {String} [html] the HTML to be placed inside the element\n   * @return {Object/p5.Element|String}\n   * @example\n   * <div class=\"norender\"><code>\n   * var div = createDiv('').size(100,100);\n   * div.style('background-color','orange');\n   * div.html('hi');\n   * </code></div>\n   */\n  p5.Element.prototype.html = function(html) {\n    if (typeof html !== 'undefined') {\n      this.elt.innerHTML = html;\n      return this;\n    } else {\n      return this.elt.innerHTML;\n    }\n  };\n\n  /**\n   *\n   * Sets the position of the element relative to (0, 0) of the\n   * window. Essentially, sets position:absolute and left and top\n   * properties of style. If no arguments given returns the x and y position\n   * of the element in an object.\n   *\n   * @method position\n   * @param  {Number} [x] x-position relative to upper left of window\n   * @param  {Number} [y] y-position relative to upper left of window\n   * @return {Object/p5.Element}\n   * @example\n   * <div><code class=\"norender\">\n   * function setup() {\n   *   var cnv = createCanvas(100, 100);\n   *   // positions canvas 50px to the right and 100px\n   *   // below upper left corner of the window\n   *   cnv.position(50, 100);\n   * }\n   * </code></div>\n   */\n  p5.Element.prototype.position = function() {\n    if (arguments.length === 0){\n      return { 'x' : this.elt.offsetLeft , 'y' : this.elt.offsetTop };\n    }else{\n      this.elt.style.position = 'absolute';\n      this.elt.style.left = arguments[0]+'px';\n      this.elt.style.top = arguments[1]+'px';\n      this.x = arguments[0];\n      this.y = arguments[1];\n      return this;\n    }\n  };\n\n  /**\n   * Translates an element with css transforms in either 2d (if 2 arguments given)\n   * or 3d (if 3 arguments given) space.\n   * @method  translate\n   * @param  {Number} x x-position in px\n   * @param  {Number} y y-position in px\n   * @param  {Number} [z] z-position in px\n   * @param  {Number} [perspective] sets the perspective of the parent element in px,\n   * default value set to 1000px\n   * @return {Object/p5.Element}\n   * @example\n   * <div><code class=\"norender\">\n   * function setup() {\n   *   var cnv = createCanvas(100,100);\n   *   //translates canvas 50px down\n   *   cnv.translate(0,50);\n   * }\n   * </code></div>\n   */\n  p5.Element.prototype.translate = function(){\n    this.elt.style.position = 'absolute';\n    // save out initial non-translate transform styling\n    var transform = '';\n    if (this.elt.style.transform) {\n      transform = this.elt.style.transform.replace(/translate3d\\(.*\\)/g, '');\n      transform = transform.replace(/translate[X-Z]?\\(.*\\)/g, '');\n    }\n    if (arguments.length === 2) {\n      this.elt.style.transform = 'translate('+arguments[0]+'px, '+arguments[1]+'px)';\n    } else if (arguments.length > 2) {\n      this.elt.style.transform = 'translate3d('+arguments[0]+'px,'+arguments[1]+'px,'+arguments[2]+'px)';\n      if (arguments.length === 3) {\n        this.elt.parentElement.style.perspective = '1000px';\n      } else {\n        this.elt.parentElement.style.perspective = arguments[3]+'px';\n      }\n    }\n    // add any extra transform styling back on end\n    this.elt.style.transform += transform;\n    return this;\n  };\n\n  /**\n   * Rotates an element with css transforms in either 2d (if 2 arguments given)\n   * or 3d (if 3 arguments given) space.\n   * @method  rotate\n   * @param  {Number} x amount of degrees to rotate the element along the x-axis in deg\n   * @param  {Number} [y] amount of degrees to rotate the element along the y-axis in deg\n   * @param  {Number} [z] amount of degrees to rotate the element along the z-axis in deg\n   * @return {Object/p5.Element}\n   * @example\n   * <div><code>\n   * var x = 0,\n   *     y = 0,\n   *     z = 0;\n   *\n   * function draw(){\n   *   x+=.5 % 360;\n   *   y+=.5 % 360;\n   *   z+=.5 % 360;\n   *   //rotates p5.js logo .5 degrees on every axis each frame.\n   *   select('canvas').rotate(x,y,z);\n   * }\n   * </code></div>\n   */\n  p5.Element.prototype.rotate = function(){\n    // save out initial non-rotate transform styling\n    var transform = '';\n    if (this.elt.style.transform) {\n      var transform = this.elt.style.transform.replace(/rotate3d\\(.*\\)/g, '');\n      transform = transform.replace(/rotate[X-Z]?\\(.*\\)/g, '');\n    }\n\n    if (arguments.length === 1){\n      this.elt.style.transform = 'rotate('+arguments[0]+'deg)';\n    }else if (arguments.length === 2){\n      this.elt.style.transform = 'rotate('+arguments[0]+'deg, '+arguments[1]+'deg)';\n    }else if (arguments.length === 3){\n      this.elt.style.transform = 'rotateX('+arguments[0]+'deg)';\n      this.elt.style.transform += 'rotateY('+arguments[1]+'deg)';\n      this.elt.style.transform += 'rotateZ('+arguments[2]+'deg)';\n    }\n    // add remaining transform back on\n    this.elt.style.transform += transform;\n    return this;\n  };\n\n  /**\n   * Sets the given style (css) property (1st arg) of the element with the\n   * given value (2nd arg). If a single argument is given, .style()\n   * returns the value of the given property; however, if the single argument\n   * is given in css syntax ('text-align:center'), .style() sets the css\n   * appropriatly. .style() also handles 2d and 3d css transforms. If\n   * the 1st arg is 'rotate', 'translate', or 'position', the following arguments\n   * accept Numbers as values. ('translate', 10, 100, 50);\n   *\n   * @method style\n   * @param  {String} property   property to be set\n   * @param  {String|Number|p5.Color} [value]   value to assign to property\n   * @param  {String|Number} [value]   value to assign to property (rotate/translate)\n   * @param  {String|Number} [value]   value to assign to property (rotate/translate)\n   * @param  {String|Number} [value]   value to assign to property (translate)\n   * @return {String|Object/p5.Element} value of property, if no value is specified\n   * or p5.Element\n   * @example\n   * <div><code class=\"norender\">\n   * var myDiv = createDiv(\"I like pandas.\");\n   * myDiv.style(\"font-size\", \"18px\");\n   * myDiv.style(\"color\", \"#ff0000\");\n   * </code></div>\n   * <div><code class=\"norender\">\n   * var col = color(25,23,200,50);\n   * var button = createButton(\"button\");\n   * button.style(\"background-color\", col);\n   * button.position(10, 10);\n   * </code></div>\n   * <div><code class=\"norender\">\n   * var myDiv = createDiv(\"I like lizards.\");\n   * myDiv.style(\"position\", 20, 20);\n   * myDiv.style(\"rotate\", 45);\n   * </code></div>\n   * <div><code class=\"norender\">\n   * var myDiv;\n   * function setup() {\n   *   background(200);\n   *   myDiv = createDiv(\"I like gray.\");\n   *   myDiv.position(20, 20);\n   * }\n   *\n   * function draw() {\n   *   myDiv.style(\"font-size\", mouseX+\"px\");\n   * }\n   * </code></div>\n   */\n  p5.Element.prototype.style = function(prop, val) {\n    var self = this;\n\n    if (val instanceof p5.Color) {\n      val = 'rgba(' + val.levels[0] + ',' + val.levels[1] + ',' + val.levels[2] + ',' + val.levels[3]/255 + ')'\n    }\n\n    if (typeof val === 'undefined') {\n      if (prop.indexOf(':') === -1) {\n        var styles = window.getComputedStyle(self.elt);\n        var style = styles.getPropertyValue(prop);\n        return style;\n      } else {\n        var attrs = prop.split(';');\n        for (var i = 0; i < attrs.length; i++) {\n          var parts = attrs[i].split(':');\n          if (parts[0] && parts[1]) {\n            this.elt.style[parts[0].trim()] = parts[1].trim();\n          }\n        }\n      }\n    } else {\n      if (prop === 'rotate' || prop === 'translate' || prop === 'position'){\n        var trans = Array.prototype.shift.apply(arguments);\n        this[trans].apply(this, arguments);\n      } else {\n        this.elt.style[prop] = val;\n        if (prop === 'width' || prop === 'height' || prop === 'left' || prop === 'top') {\n          var numVal = val.replace(/\\D+/g, '');\n          this[prop] = parseInt(numVal, 10); // pend: is this necessary?\n        }\n      }\n    }\n    return this;\n  };\n\n\n  /**\n   *\n   * Adds a new attribute or changes the value of an existing attribute\n   * on the specified element. If no value is specified, returns the\n   * value of the given attribute, or null if attribute is not set.\n   *\n   * @method attribute\n   * @param  {String} attr       attribute to set\n   * @param  {String} [value]    value to assign to attribute\n   * @return {String|Object/p5.Element} value of attribute, if no value is\n   *                             specified or p5.Element\n   * @example\n   * <div class=\"norender\"><code>\n   * var myDiv = createDiv(\"I like pandas.\");\n   *myDiv.attribute(\"align\", \"center\");\n   * </code></div>\n   */\n  p5.Element.prototype.attribute = function(attr, value) {\n    if (typeof value === 'undefined') {\n      return this.elt.getAttribute(attr);\n    } else {\n      this.elt.setAttribute(attr, value);\n      return this;\n    }\n  };\n\n\n  /**\n   * Either returns the value of the element if no arguments\n   * given, or sets the value of the element.\n   *\n   * @method value\n   * @param  {String|Number}     [value]\n   * @return {String|Object/p5.Element} value of element if no value is specified or p5.Element\n   */\n  p5.Element.prototype.value = function() {\n    if (arguments.length > 0) {\n      this.elt.value = arguments[0];\n      return this;\n    } else {\n      if (this.elt.type === 'range') {\n        return parseFloat(this.elt.value);\n      }\n      else return this.elt.value;\n    }\n  };\n\n  /**\n   *\n   * Shows the current element. Essentially, setting display:block for the style.\n   *\n   * @method show\n   * @return {Object/p5.Element}\n   */\n  p5.Element.prototype.show = function() {\n    this.elt.style.display = 'block';\n    return this;\n  };\n\n  /**\n   * Hides the current element. Essentially, setting display:none for the style.\n   *\n   * @method hide\n   * @return {Object/p5.Element}\n   */\n  p5.Element.prototype.hide = function() {\n    this.elt.style.display = 'none';\n    return this;\n  };\n\n  /**\n   *\n   * Sets the width and height of the element. AUTO can be used to\n   * only adjust one dimension. If no arguments given returns the width and height\n   * of the element in an object.\n   *\n   * @method size\n   * @param  {Number} [w] width of the element\n   * @param  {Number} [h] height of the element\n   * @return {Object/p5.Element}\n   */\n  p5.Element.prototype.size = function(w, h) {\n    if (arguments.length === 0){\n      return { 'width' : this.elt.offsetWidth , 'height' : this.elt.offsetHeight };\n    }else{\n      var aW = w;\n      var aH = h;\n      var AUTO = p5.prototype.AUTO;\n      if (aW !== AUTO || aH !== AUTO) {\n        if (aW === AUTO) {\n          aW = h * this.width / this.height;\n        } else if (aH === AUTO) {\n          aH = w * this.height / this.width;\n        }\n        // set diff for cnv vs normal div\n        if (this.elt instanceof HTMLCanvasElement) {\n          var j = {};\n          var k  = this.elt.getContext('2d');\n          for (var prop in k) {\n            j[prop] = k[prop];\n          }\n          this.elt.setAttribute('width', aW * this._pInst._pixelDensity);\n          this.elt.setAttribute('height', aH * this._pInst._pixelDensity);\n          this.elt.setAttribute('style', 'width:' + aW + 'px; height:' + aH + 'px');\n          this._pInst.scale(this._pInst._pixelDensity, this._pInst._pixelDensity);\n          for (var prop in j) {\n            this.elt.getContext('2d')[prop] = j[prop];\n          }\n        } else {\n          this.elt.style.width = aW+'px';\n          this.elt.style.height = aH+'px';\n          this.elt.width = aW;\n          this.elt.height = aH;\n          this.width = aW;\n          this.height = aH;\n        }\n\n        this.width = this.elt.offsetWidth;\n        this.height = this.elt.offsetHeight;\n\n        if (this._pInst) { // main canvas associated with p5 instance\n          if (this._pInst._curElement.elt === this.elt) {\n            this._pInst._setProperty('width', this.elt.offsetWidth);\n            this._pInst._setProperty('height', this.elt.offsetHeight);\n          }\n        }\n      }\n      return this;\n    }\n  };\n\n  /**\n   * Removes the element and deregisters all listeners.\n   * @method remove\n   * @example\n   * <div class=\"norender\"><code>\n   * var myDiv = createDiv('this is some text');\n   * myDiv.remove();\n   * </code></div>\n   */\n  p5.Element.prototype.remove = function() {\n    // deregister events\n    for (var ev in this._events) {\n      this.elt.removeEventListener(ev, this._events[ev]);\n    }\n    if (this.elt.parentNode) {\n      this.elt.parentNode.removeChild(this.elt);\n    }\n    delete(this);\n  };\n\n\n\n// =============================================================================\n//                         p5.MediaElement additions\n// =============================================================================\n\n\n  /**\n   * Extends p5.Element to handle audio and video. In addition to the methods\n   * of p5.Element, it also contains methods for controlling media. It is not\n   * called directly, but p5.MediaElements are created by calling createVideo,\n   * createAudio, and createCapture.\n   *\n   * @class p5.MediaElement\n   * @constructor\n   * @param {String} elt DOM node that is wrapped\n   * @param {Object} [pInst] pointer to p5 instance\n   */\n  p5.MediaElement = function(elt, pInst) {\n    p5.Element.call(this, elt, pInst);\n\n    var self = this;\n    this.elt.crossOrigin = 'anonymous';\n\n    this._prevTime = 0;\n    this._cueIDCounter = 0;\n    this._cues = [];\n    this._pixelDensity = 1;\n\n    /**\n     *  Path to the media element source.\n     *\n     *  @property src\n     *  @return {String} src\n     */\n    Object.defineProperty(self, 'src', {\n      get: function() {\n        var firstChildSrc = self.elt.children[0].src;\n        var srcVal = self.elt.src === window.location.href ? '' : self.elt.src;\n        var ret = firstChildSrc === window.location.href ? srcVal : firstChildSrc;\n        return ret;\n      },\n      set: function(newValue) {\n        for (var i = 0; i < self.elt.children.length; i++) {\n          self.elt.removeChild(self.elt.children[i]);\n        }\n        var source = document.createElement('source');\n        source.src = newValue;\n        elt.appendChild(source);\n        self.elt.src = newValue;\n      },\n    });\n\n    // private _onended callback, set by the method: onended(callback)\n    self._onended = function() {};\n    self.elt.onended = function() {\n      self._onended(self);\n    }\n  };\n  p5.MediaElement.prototype = Object.create(p5.Element.prototype);\n\n\n\n\n  /**\n   * Play an HTML5 media element.\n   *\n   * @method play\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.play = function() {\n    if (this.elt.currentTime === this.elt.duration) {\n      this.elt.currentTime = 0;\n    }\n\n    if (this.elt.readyState > 1) {\n      this.elt.play();\n    } else {\n      // in Chrome, playback cannot resume after being stopped and must reload\n      this.elt.load();\n      this.elt.play();\n    }\n    return this;\n  };\n\n  /**\n   * Stops an HTML5 media element (sets current time to zero).\n   *\n   * @method stop\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.stop = function() {\n    this.elt.pause();\n    this.elt.currentTime = 0;\n    return this;\n  };\n\n  /**\n   * Pauses an HTML5 media element.\n   *\n   * @method pause\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.pause = function() {\n    this.elt.pause();\n    return this;\n  };\n\n  /**\n   * Set 'loop' to true for an HTML5 media element, and starts playing.\n   *\n   * @method loop\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.loop = function() {\n    this.elt.setAttribute('loop', true);\n    this.play();\n    return this;\n  };\n  /**\n   * Set 'loop' to false for an HTML5 media element. Element will stop\n   * when it reaches the end.\n   *\n   * @method noLoop\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.noLoop = function() {\n    this.elt.setAttribute('loop', false);\n    return this;\n  };\n\n\n  /**\n   * Set HTML5 media element to autoplay or not.\n   *\n   * @method autoplay\n   * @param {Boolean} autoplay whether the element should autoplay\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.autoplay = function(val) {\n    this.elt.setAttribute('autoplay', val);\n    return this;\n  };\n\n  /**\n   * Sets volume for this HTML5 media element. If no argument is given,\n   * returns the current volume.\n   *\n   * @param {Number}            [val] volume between 0.0 and 1.0\n   * @return {Number|p5.MediaElement} current volume or p5.MediaElement\n   * @method volume\n   */\n  p5.MediaElement.prototype.volume = function(val) {\n    if (typeof val === 'undefined') {\n      return this.elt.volume;\n    } else {\n      this.elt.volume = val;\n    }\n  };\n\n  /**\n   * If no arguments are given, returns the current time of the element.\n   * If an argument is given the current time of the element is set to it.\n   *\n   * @method time\n   * @param {Number} [time] time to jump to (in seconds)\n   * @return {Number|Object/p5.MediaElement} current time (in seconds)\n   *                                  or p5.MediaElement\n   */\n  p5.MediaElement.prototype.time = function(val) {\n    if (typeof val === 'undefined') {\n      return this.elt.currentTime;\n    } else {\n      this.elt.currentTime = val;\n    }\n  };\n\n  /**\n   * Returns the duration of the HTML5 media element.\n   *\n   * @method duration\n   * @return {Number} duration\n   */\n  p5.MediaElement.prototype.duration = function() {\n    return this.elt.duration;\n  };\n  p5.MediaElement.prototype.pixels = [];\n  p5.MediaElement.prototype.loadPixels = function() {\n    if (this.loadedmetadata) { // wait for metadata for w/h\n      if (!this.canvas) {\n        this.canvas = document.createElement('canvas');\n        this.drawingContext = this.canvas.getContext('2d');\n      }\n      if (this.canvas.width !== this.elt.width) {\n        this.canvas.width = this.elt.width;\n        this.canvas.height = this.elt.height;\n        this.width = this.canvas.width;\n        this.height = this.canvas.height;\n      }\n      this.drawingContext.drawImage(this.elt, 0, 0, this.canvas.width, this.canvas.height);\n      p5.Renderer2D.prototype.loadPixels.call(this);\n    }\n    return this;\n  }\n  p5.MediaElement.prototype.updatePixels =  function(x, y, w, h){\n    if (this.loadedmetadata) { // wait for metadata\n      p5.Renderer2D.prototype.updatePixels.call(this, x, y, w, h);\n    }\n    return this;\n  }\n  p5.MediaElement.prototype.get = function(x, y, w, h){\n    if (this.loadedmetadata) { // wait for metadata\n      return p5.Renderer2D.prototype.get.call(this, x, y, w, h);\n    } else return [0, 0, 0, 255];\n  };\n  p5.MediaElement.prototype.set = function(x, y, imgOrCol){\n    if (this.loadedmetadata) { // wait for metadata\n      p5.Renderer2D.prototype.set.call(this, x, y, imgOrCol);\n    }\n  };\n  /**\n   *  Schedule an event to be called when the audio or video\n   *  element reaches the end. If the element is looping,\n   *  this will not be called. The element is passed in\n   *  as the argument to the onended callback.\n   *  \n   *  @method  onended\n   *  @param  {Function} callback function to call when the\n   *                              soundfile has ended. The\n   *                              media element will be passed\n   *                              in as the argument to the\n   *                              callback.                            \n   *  @return {Object/p5.MediaElement}\n   *  @example\n   *  <div><code>\n   *  function setup() {\n   *    audioEl = createAudio('assets/beat.mp3');\n   *    audioEl.showControls(true);\n   *    audioEl.onended(sayDone);\n   *  }\n   *\n   *  function sayDone(elt) {\n   *    alert('done playing ' + elt.src );\n   *  }\n   *  </code></div>\n   */\n  p5.MediaElement.prototype.onended = function(callback) {\n    this._onended = callback;\n    return this;\n  };\n\n\n  /*** CONNECT TO WEB AUDIO API / p5.sound.js ***/\n\n  /**\n   *  Send the audio output of this element to a specified audioNode or\n   *  p5.sound object. If no element is provided, connects to p5's master\n   *  output. That connection is established when this method is first called.\n   *  All connections are removed by the .disconnect() method.\n   *\n   *  This method is meant to be used with the p5.sound.js addon library.\n   *\n   *  @method  connect\n   *  @param  {AudioNode|p5.sound object} audioNode AudioNode from the Web Audio API,\n   *  or an object from the p5.sound library\n   */\n  p5.MediaElement.prototype.connect = function(obj) {\n    var audioContext, masterOutput;\n\n    // if p5.sound exists, same audio context\n    if (typeof p5.prototype.getAudioContext === 'function') {\n      audioContext = p5.prototype.getAudioContext();\n      masterOutput = p5.soundOut.input;\n    } else {\n      try {\n        audioContext = obj.context;\n        masterOutput = audioContext.destination\n      } catch(e) {\n        throw 'connect() is meant to be used with Web Audio API or p5.sound.js'\n      }\n    }\n\n    // create a Web Audio MediaElementAudioSourceNode if none already exists\n    if (!this.audioSourceNode) {\n      this.audioSourceNode = audioContext.createMediaElementSource(this.elt);\n\n      // connect to master output when this method is first called\n      this.audioSourceNode.connect(masterOutput);\n    }\n\n    // connect to object if provided\n    if (obj) {\n      if (obj.input) {\n        this.audioSourceNode.connect(obj.input);\n      } else {\n        this.audioSourceNode.connect(obj);\n      }\n    }\n\n    // otherwise connect to master output of p5.sound / AudioContext\n    else {\n      this.audioSourceNode.connect(masterOutput);\n    }\n\n  };\n\n  /**\n   *  Disconnect all Web Audio routing, including to master output.\n   *  This is useful if you want to re-route the output through\n   *  audio effects, for example.\n   *\n   *  @method  disconnect\n   */\n  p5.MediaElement.prototype.disconnect = function() {\n    if (this.audioSourceNode) {\n      this.audioSourceNode.disconnect();\n    } else {\n      throw 'nothing to disconnect';\n    }\n  };\n\n\n  /*** SHOW / HIDE CONTROLS ***/\n\n  /**\n   *  Show the default MediaElement controls, as determined by the web browser.\n   *\n   *  @method  showControls\n   */\n  p5.MediaElement.prototype.showControls = function() {\n    // must set style for the element to show on the page\n    this.elt.style['text-align'] = 'inherit';\n    this.elt.controls = true;\n  };\n\n  /**\n   *  Hide the default mediaElement controls.\n   *\n   *  @method hideControls\n   */\n  p5.MediaElement.prototype.hideControls = function() {\n    this.elt.controls = false;\n  };\n\n  /*** SCHEDULE EVENTS ***/\n\n  /**\n   *  Schedule events to trigger every time a MediaElement\n   *  (audio/video) reaches a playback cue point.\n   *\n   *  Accepts a callback function, a time (in seconds) at which to trigger\n   *  the callback, and an optional parameter for the callback.\n   *\n   *  Time will be passed as the first parameter to the callback function,\n   *  and param will be the second parameter.\n   *\n   *\n   *  @method  addCue\n   *  @param {Number}   time     Time in seconds, relative to this media\n   *                             element's playback. For example, to trigger\n   *                             an event every time playback reaches two\n   *                             seconds, pass in the number 2. This will be\n   *                             passed as the first parameter to\n   *                             the callback function.\n   *  @param {Function} callback Name of a function that will be\n   *                             called at the given time. The callback will\n   *                             receive time and (optionally) param as its\n   *                             two parameters.\n   *  @param {Object} [value]    An object to be passed as the\n   *                             second parameter to the\n   *                             callback function.\n   *  @return {Number} id ID of this cue,\n   *                      useful for removeCue(id)\n   *  @example\n   *  <div><code>\n   *  function setup() {\n   *    background(255,255,255);\n   *\n   *    audioEl = createAudio('assets/beat.mp3');\n   *    audioEl.showControls();\n   *\n   *    // schedule three calls to changeBackground\n   *    audioEl.addCue(0.5, changeBackground, color(255,0,0) );\n   *    audioEl.addCue(1.0, changeBackground, color(0,255,0) );\n   *    audioEl.addCue(2.5, changeBackground, color(0,0,255) );\n   *    audioEl.addCue(3.0, changeBackground, color(0,255,255) );\n   *    audioEl.addCue(4.2, changeBackground, color(255,255,0) );\n   *    audioEl.addCue(5.0, changeBackground, color(255,255,0) );\n   *  }\n   *\n   *  function changeBackground(val) {\n   *    background(val);\n   *  }\n   *  </code></div>\n   */\n  p5.MediaElement.prototype.addCue = function(time, callback, val) {\n    var id = this._cueIDCounter++;\n\n    var cue = new Cue(callback, time, id, val);\n    this._cues.push(cue);\n\n    if (!this.elt.ontimeupdate) {\n      this.elt.ontimeupdate = this._onTimeUpdate.bind(this);\n    }\n\n    return id;\n  };\n\n  /**\n   *  Remove a callback based on its ID. The ID is returned by the\n   *  addCue method.\n   *\n   *  @method removeCue\n   *  @param  {Number} id ID of the cue, as returned by addCue\n   */\n  p5.MediaElement.prototype.removeCue = function(id) {\n    for (var i = 0; i < this._cues.length; i++) {\n      var cue = this._cues[i];\n      if (cue.id === id) {\n        this.cues.splice(i, 1);\n      }\n    }\n\n    if (this._cues.length === 0) {\n      this.elt.ontimeupdate = null\n    }\n  };\n\n  /**\n   *  Remove all of the callbacks that had originally been scheduled\n   *  via the addCue method.\n   *\n   *  @method  clearCues\n   */\n  p5.MediaElement.prototype.clearCues = function() {\n    this._cues = [];\n    this.elt.ontimeupdate = null;\n  };\n\n  // private method that checks for cues to be fired if events\n  // have been scheduled using addCue(callback, time).\n  p5.MediaElement.prototype._onTimeUpdate = function() {\n    var playbackTime = this.time();\n\n    for (var i = 0 ; i < this._cues.length; i++) {\n      var callbackTime = this._cues[i].time;\n      var val = this._cues[i].val;\n\n\n      if (this._prevTime < callbackTime && callbackTime </arguments.length;></src.length;></this._elements.length;></p>","source":"libraries/p5.dom.js","raw":"/*! p5.dom.js v0.2.8 February 4, 2016 */\n/**\n * <p>The web is much more than just canvas and p5.dom makes it easy to interact\n * with other HTML5 objects, including text, hyperlink, image, input, video,\n * audio, and webcam.</p>\n * <p>There is a set of creation methods, DOM manipulation methods, and\n * an extended p5.Element that supports a range of HTML elements. See the\n * <a href=\"https://github.com/processing/p5.js/wiki/Beyond-the-canvas\" target=\"_blank\" rel=\"external\">\n * beyond the canvas tutorial</a> for a full overview of how this addon works.\n *\n * </p><p>Methods and properties shown in black are part of the p5.js core, items in\n * blue are part of the p5.dom library. You will need to include an extra file\n * in order to access the blue functions. See the\n * <a href=\"http://p5js.org/libraries/#using-a-library\" target=\"_blank\" rel=\"external\">using a library</a>\n * section for information on how to include this library. p5.dom comes with\n * <a href=\"http://p5js.org/download\" target=\"_blank\" rel=\"external\">p5 complete</a> or you can download the single file\n * <a href=\"https://raw.githubusercontent.com/lmccart/p5.js/master/lib/addons/p5.dom.js\" target=\"_blank\" rel=\"external\">\n * here</a>.</p>\n * <p>See <a href=\"https://github.com/processing/p5.js/wiki/Beyond-the-canvas\" target=\"_blank\" rel=\"external\">tutorial: beyond the canvas</a>\n * for more info on how to use this libary.\n *\n * @module p5.dom\n * @submodule p5.dom\n * @for p5.dom\n * @main\n */\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd)\n    define('p5.dom', ['p5'], function (p5) { (factory(p5));});\n  else if (typeof exports === 'object')\n    factory(require('../p5'));\n  else\n    factory(root['p5']);\n}(this, function (p5) {\n// =============================================================================\n//                         p5 additions\n// =============================================================================\n\n  /**\n   * Searches the page for an element with the given ID, class, or tag name (using the '#' or '.'\n   * prefixes to specify an ID or class respectively, and none for a tag) and returns it as\n   * a p5.Element. If a class or tag name is given with more than 1 element,\n   * only the first element will be returned.\n   * The DOM node itself can be accessed with .elt.\n   * Returns null if none found. You can also specify a container to search within.\n   *\n   * @method select\n   * @param  {String} name id, class, or tag name of element to search for\n   * @param  {String} [container] id, p5.Element, or HTML element to search within\n   * @return {Object/p5.Element|Null} p5.Element containing node found\n   * @example\n   * <div><code class=\"norender\">\n   * function setup() {\n   *   createCanvas(100,100);\n   *   //translates canvas 50px down\n   *   select('canvas').translate(0,50);\n   * }\n   * </code></div>\n   * <div><code class=\"norender\">\n   * // these are all valid calls to select()\n   * var a = select('#moo');\n   * var b = select('#blah', '#myContainer');\n   * var c = select('#foo', b);\n   * var d = document.getElementById('beep');\n   * var e = select('p', d);\n   * </code></div>\n   *\n   */\n  p5.prototype.select = function (e, p) {\n    var res = null;\n    var container = getContainer(p);\n    if (e[0] === '.'){\n      e = e.slice(1);\n      res = container.getElementsByClassName(e);\n      if (res.length) {\n        res = res[0];\n      } else {\n        res = null;\n      }\n    }else if (e[0] === '#'){\n      e = e.slice(1);\n      res = container.getElementById(e);\n    }else {\n      res = container.getElementsByTagName(e);\n      if (res.length) {\n        res = res[0];\n      } else {\n        res = null;\n      }\n    }\n    if (res) {\n      return wrapElement(res);\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   * Searches the page for elements with the given class or tag name (using the '.' prefix\n   * to specify a class and no prefix for a tag) and returns them as p5.Elements\n   * in an array.\n   * The DOM node itself can be accessed with .elt.\n   * Returns an empty array if none found.\n   * You can also specify a container to search within.\n   *\n   * @method selectAll\n   * @param  {String} name class or tag name of elements to search for\n   * @param  {String} [container] id, p5.Element, or HTML element to search within\n   * @return {Array} Array of p5.Elements containing nodes found\n   * @example\n   * <div><code class=\"norender\">\n   * function setup() {\n   *   createButton('btn');\n   *   createButton('2nd btn');\n   *   createButton('3rd btn');\n   *   var buttons = selectAll('button');\n   *\n   *   for (var i = 0; i < buttons.length; i++){\n   *     buttons[i].size(100,100);\n   *   }\n   * }\n   * </code></div>\n   * <div><code class=\"norender\">\n   * // these are all valid calls to selectAll()\n   * var a = selectAll('.moo');\n   * var b = selectAll('div');\n   * var c = selectAll('button', '#myContainer');\n   * var d = select('#container');\n   * var e = selectAll('p', d);\n   * var f = document.getElementById('beep');\n   * var g = select('.blah', f);\n   * </code></div>\n   *\n   */\n  p5.prototype.selectAll = function (e, p) {\n    var arr = [];\n    var res;\n    var container = getContainer(p);\n    if (e[0] === '.'){\n      e = e.slice(1);\n      res = container.getElementsByClassName(e);\n    } else {\n      res = container.getElementsByTagName(e);\n    }\n    if (res) {\n      for (var j = 0; j < res.length; j++) {\n        var obj = wrapElement(res[j]);\n        arr.push(obj);\n      }\n    }\n    return arr;\n  };\n\n  /**\n   * Helper function for select and selectAll\n   */\n  function getContainer(p) {\n    var container = document;\n    if (typeof p === 'string' && p[0] === '#'){\n      p = p.slice(1);\n      container = document.getElementById(p) || document;\n    } else if (p instanceof p5.Element){\n      container = p.elt;\n    } else if (p instanceof HTMLElement){\n      container = p;\n    }\n    return container;\n  }\n\n  /**\n   * Helper function for getElement and getElements.\n   */\n  function wrapElement(elt) {\n    if(elt.tagName === \"INPUT\" && elt.type === \"checkbox\") {\n      var converted = new p5.Element(elt);\n      converted.checked = function(){\n      if (arguments.length === 0){\n        return this.elt.checked;\n      } else if(arguments[0]) {\n        this.elt.checked = true;\n      } else {\n        this.elt.checked = false;\n      }\n      return this;\n      };\n      return converted;\n    } else if (elt.tagName === \"VIDEO\" || elt.tagName === \"AUDIO\") {\n      return new p5.MediaElement(elt);\n    } else {\n      return new p5.Element(elt);\n    }\n  }\n\n  /**\n   * Removes all elements created by p5, except any canvas / graphics\n   * elements created by createCanvas or createGraphics.\n   * Event handlers are removed, and element is removed from the DOM.\n   * @method removeElements\n   * @example\n   * <div class=\"norender\"><code>\n   * function setup() {\n   *   createCanvas(100, 100);\n   *   createDiv('this is some text');\n   *   createP('this is a paragraph');\n   * }\n   * function mousePressed() {\n   *   removeElements(); // this will remove the div and p, not canvas\n   * }\n   * </code></div>\n   *\n   */\n  p5.prototype.removeElements = function (e) {\n    for (var i=0; i<this._elements.length; i++)=\"\" {=\"\" if=\"\" (!(this._elements[i].elt=\"\" instanceof=\"\" htmlcanvaselement))=\"\" this._elements[i].remove();=\"\" }=\"\" };=\"\" **=\"\" *=\"\" helpers=\"\" for=\"\" create=\"\" methods.=\"\" function=\"\" addelement(elt,=\"\" pinst,=\"\" media)=\"\" var=\"\" node=\"pInst._userNode\" ?=\"\" pinst._usernode=\"\" :=\"\" document.body;=\"\" node.appendchild(elt);=\"\" c=\"media\" new=\"\" p5.mediaelement(elt)=\"\" p5.element(elt);=\"\" pinst._elements.push(c);=\"\" return=\"\" c;=\"\" creates=\"\" a=\"\" &lt;div&gt;&lt;=\"\" div&gt;=\"\" element=\"\" in=\"\" the=\"\" dom=\"\" with=\"\" given=\"\" inner=\"\" html.=\"\" appends=\"\" to=\"\" container=\"\" one=\"\" is=\"\" specified,=\"\" otherwise=\"\" body.=\"\" @method=\"\" creatediv=\"\" @param=\"\" {string}=\"\" html=\"\" created=\"\" @return=\"\" {object=\"\" p5.element}=\"\" pointer=\"\" p5.element=\"\" holding=\"\" @example=\"\" <div=\"\" class=\"norender\"><code>\n   * var myDiv;\n   * function setup() {\n   *   myDiv = createDiv('this is some text');\n   * }\n   * </code>\n   */\n\n  /**\n   * Creates a &lt;p&gt;&lt;/p&gt; element in the DOM with given inner HTML. Used\n   * for paragraph length text.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createP\n   * @param  {String} html inner HTML for element created\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var myP;\n   * function setup() {\n   *   myP = createP('this is some text');\n   * }\n   * </code></div>\n   */\n\n  /**\n   * Creates a &lt;span&gt;&lt;/span&gt; element in the DOM with given inner HTML.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createSpan\n   * @param  {String} html inner HTML for element created\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var mySpan;\n   * function setup() {\n   *   mySpan = createSpan('this is some text');\n   * }\n   * </code></div>\n   */\n  var tags = ['div', 'p', 'span'];\n  tags.forEach(function(tag) {\n    var method = 'create' + tag.charAt(0).toUpperCase() + tag.slice(1);\n    p5.prototype[method] = function(html) {\n      var elt = document.createElement(tag);\n      elt.innerHTML = typeof html === undefined ? \"\" : html;\n      return addElement(elt, this);\n    }\n  });\n\n  /**\n   * Creates an &lt;img /&gt; element in the DOM with given src and\n   * alternate text.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createImg\n   * @param  {String} src src path or url for image\n   * @param  {String} [alt] alternate text to be used if image does not load\n   * @param  {Function} [successCallback] callback to be called once image data is loaded\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var img;\n   * function setup() {\n   *   img = createImg('http://p5js.org/img/asterisk-01.png');\n   * }\n   * </code></div>\n   */\n  p5.prototype.createImg = function() {\n    var elt = document.createElement('img');\n    var args = arguments;\n    var self;\n    var setAttrs = function(){\n      self.width = elt.offsetWidth;\n      self.height = elt.offsetHeight;\n      if (args.length > 1 && typeof args[1] === 'function'){\n        self.fn = args[1];\n        self.fn();\n      }else if (args.length > 1 && typeof args[2] === 'function'){\n        self.fn = args[2];\n        self.fn();\n      }\n    };\n    elt.src = args[0];\n    if (args.length > 1 && typeof args[1] === 'string'){\n      elt.alt = args[1];\n    }\n    elt.onload = function(){\n      setAttrs();\n    }\n    self = addElement(elt, this);\n    return self;\n  };\n\n  /**\n   * Creates an &lt;a&gt;&lt;/a&gt; element in the DOM for including a hyperlink.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createA\n   * @param  {String} href       url of page to link to\n   * @param  {String} html       inner html of link element to display\n   * @param  {String} [target]   target where new link should open,\n   *                             could be _blank, _self, _parent, _top.\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var myLink;\n   * function setup() {\n   *   myLink = createA('http://p5js.org/', 'this is a link');\n   * }\n   * </code></div>\n   */\n  p5.prototype.createA = function(href, html, target) {\n    var elt = document.createElement('a');\n    elt.href = href;\n    elt.innerHTML = html;\n    if (target) elt.target = target;\n    return addElement(elt, this);\n  };\n\n  /** INPUT **/\n\n\n  /**\n   * Creates a slider &lt;input&gt;&lt;/input&gt; element in the DOM.\n   * Use .size() to set the display length of the slider.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createSlider\n   * @param  {Number} min minimum value of the slider\n   * @param  {Number} max maximum value of the slider\n   * @param  {Number} [value] default value of the slider\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div><code>\n   * var slider;\n   * function setup() {\n   *   slider = createSlider(0, 255, 100);\n   *   slider.position(10, 10);\n   *   slider.style('width', '80px');\n   * }\n   *\n   * function draw() {\n   *   var val = slider.value();\n   *   background(val);\n   * }\n   * </code></div>\n   */\n  p5.prototype.createSlider = function(min, max, value, step) {\n    var elt = document.createElement('input');\n    elt.type = 'range';\n    elt.min = min;\n    elt.max = max;\n    if (step) elt.step = step;\n    if (typeof(value) === \"number\") elt.value = value;\n    return addElement(elt, this);\n  };\n\n  /**\n   * Creates a &lt;button&gt;&lt;/button&gt; element in the DOM.\n   * Use .size() to set the display size of the button.\n   * Use .mousePressed() to specify behavior on press.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createButton\n   * @param  {String} label label displayed on the button\n   * @param  {String} [value] value of the button\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var button;\n   * function setup() {\n   *   createCanvas(100, 100);\n   *   background(0);\n   *   button = createButton('click me');\n   *   button.position(19, 19);\n   *   button.mousePressed(changeBG);\n   * }\n   *\n   * function changeBG() {\n   *   var val = random(255);\n   *   background(val);\n   * }\n   * </code></div>\n   */\n  p5.prototype.createButton = function(label, value) {\n    var elt = document.createElement('button');\n    elt.innerHTML = label;\n    elt.value = value;\n    if (value) elt.value = value;\n    return addElement(elt, this);\n  };\n\n  /**\n   * Creates a checkbox &lt;input&gt;&lt;/input&gt; element in the DOM.\n   * Calling .checked() on a checkbox returns if it is checked or not\n   *\n   * @method createCheckbox\n   * @param  {String} [label] label displayed after checkbox\n   * @param  {boolean} [value] value of the checkbox; checked is true, unchecked is false.Unchecked if no value given\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * var checkbox;\n   *\n   * function setup() {\n   *   checkbox = createCheckbox('label', false);\n   *   checkbox.changed(myCheckedEvent);\n   * }\n   *\n   * function myCheckedEvent() {\n   *   if (this.checked()) {\n   *     console.log(\"Unchecking!\");\n   *   } else {\n   *     console.log(\"Checking!\");\n   *   }\n   *\n   * </code></div>\n   */\n  p5.prototype.createCheckbox = function() {\n    var elt = document.createElement('input');\n    elt.type = 'checkbox';\n    //checkbox must be wrapped in p5.Element before label so that label appears after\n    var self = addElement(elt, this);\n    self.checked = function(){\n      if (arguments.length === 0){\n        return self.elt.checked;\n      }else if(arguments[0]){\n        self.elt.checked = true;\n      }else{\n        self.elt.checked = false;\n      }\n      return self;\n    };\n    this.value = function(val){\n      self.value = val;\n      return this;\n    };\n    if (arguments[0]){\n      var ran = Math.random().toString(36).slice(2);\n      var label = document.createElement('label');\n      elt.setAttribute('id', ran);\n      label.htmlFor = ran;\n      self.value(arguments[0]);\n      label.appendChild(document.createTextNode(arguments[0]));\n      addElement(label, this);\n    }\n    if (arguments[1]){\n      elt.checked = true;\n    }\n    return self;\n  };\n\n  /**\n   * Creates a dropdown menu &lt;select&gt;&lt;/select&gt; element in the DOM.\n   * @method createSelect\n   * @param {boolean} [multiple] [true if dropdown should support multiple selections]\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div><code>\n   * var sel;\n   *\n   * function setup() {\n   *   textAlign(CENTER);\n   *   background(200);\n   *   sel = createSelect();\n   *   sel.position(10, 10);\n   *   sel.option('pear');\n   *   sel.option('kiwi');\n   *   sel.option('grape');\n   *   sel.changed(mySelectEvent);\n   * }\n   *\n   * function mySelectEvent() {\n   *   var item = sel.value();\n   *   background(200);\n   *   text(\"it's a \"+item+\"!\", 50, 50);\n   * }\n   * </code></div>\n   */\n  p5.prototype.createSelect = function(mult) {\n    var elt = document.createElement('select');\n    if (mult){\n      elt.setAttribute('multiple', 'true');\n    }\n    var self = addElement(elt, this);\n    self.option = function(name, value){\n      var opt = document.createElement('option');\n      opt.innerHTML = name;\n      if (arguments.length > 1)\n        opt.value = value;\n      else\n        opt.value = name;\n      elt.appendChild(opt);\n    };\n    self.selected = function(value){\n      var arr = [];\n      if (arguments.length > 0){\n        for (var i = 0; i < this.elt.length; i++){\n          if (value.toString() === this.elt[i].value){\n            this.elt.selectedIndex = i;\n          }\n        }\n        return this;\n      }else{\n        if (mult){\n          for (var i = 0; i < this.elt.selectedOptions.length; i++){\n            arr.push(this.elt.selectedOptions[i].value);\n          }\n          return arr;\n        }else{\n          return this.elt.value;\n        }\n      }\n    };\n    return self;\n  };\n\n  /**\n   * Creates a radio button &lt;input&gt;&lt;/input&gt; element in the DOM.\n   *\n   * @method createRadio\n   * @param  {String} [divId] the id and name of the created div and input field respectively \n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   */\n  p5.prototype.createRadio = function() {\n    var radios = document.querySelectorAll(\"input[type=radio]\");\n    var count = 0;\n    if(radios.length > 1){\n      console.log(radios,radios[0].name);\n      var length = radios.length;\n      var prev=radios[0].name;\n      var current = radios[1].name;\n      count=1;\n      for(var i = 1; i < length; i++ ){\n        current = radios[i].name;\n        if(prev != current){\n          count++;\n        }\n        prev = current;\n      }\n    }\n    else if (radios.length == 1){\n      count = 1;\n    }\n    var elt = document.createElement('div');\n    var self = addElement(elt, this);\n    var times = -1;\n    self.option = function(name, value){\n      var opt = document.createElement('input');\n      opt.type = 'radio';\n      opt.innerHTML = name;\n      if (arguments.length > 1)\n        opt.value = value;\n      else\n        opt.value = name;\n      opt.setAttribute('name',\"defaultradio\"+count);\n      elt.appendChild(opt);\n      if (name){\n        times++;\n        var ran = Math.random().toString(36).slice(2);\n        var label = document.createElement('label');\n        opt.setAttribute('id', \"defaultradio\"+count+\"-\"+times);\n        label.htmlFor = \"defaultradio\"+count+\"-\"+times;\n        label.appendChild(document.createTextNode(name));\n        elt.appendChild(label);\n      }\n      return opt;\n    };\n    self.selected = function(){\n      var length = this.elt.childNodes.length;\n      if(arguments[0]) {\n        for (var i = 0; i < length; i+=2){\n          if(this.elt.childNodes[i].value == arguments[0])\n            this.elt.childNodes[i].checked = true;\n        }\n        return this;\n      } else {\n        for (var i = 0; i < length; i+=2){\n          if(this.elt.childNodes[i].checked == true)\n            return this.elt.childNodes[i].value;\n        }\n      }\n    };\n    self.value = function(){\n      var length = this.elt.childNodes.length;\n      if(arguments[0]) {\n        for (var i = 0; i < length; i+=2){\n          if(this.elt.childNodes[i].value == arguments[0])\n            this.elt.childNodes[i].checked = true;\n        }\n        return this;\n      } else {\n        for (var i = 0; i < length; i+=2){\n          if(this.elt.childNodes[i].checked == true)\n            return this.elt.childNodes[i].value;\n        }\n        return \"\";\n      }\n    };\n    return self\n  };\n  \n  /**\n   * Creates an &lt;input&gt;&lt;/input&gt; element in the DOM for text input.\n   * Use .size() to set the display length of the box.\n   * Appends to the container node if one is specified, otherwise\n   * appends to body.\n   *\n   * @method createInput\n   * @param  {Number} [value] default value of the input box\n   * @return {Object/p5.Element} pointer to p5.Element holding created node\n   * @example\n   * <div class=\"norender\"><code>\n   * function setup(){\n   *   var inp = createInput('');\n   *   inp.input(myInputEvent);\n   * }\n   *\n   * function myInputEvent(){\n   *   console.log('you are typing: ', this.value());\n   * }\n   *\n   * </code></div>\n   */\n  p5.prototype.createInput = function(value) {\n    var elt = document.createElement('input');\n    elt.type = 'text';\n    if (value) elt.value = value;\n    return addElement(elt, this);\n  };\n\n  /**\n   * Creates an &lt;input&gt;&lt;/input&gt; element in the DOM of type 'file'.\n   * This allows users to select local files for use in a sketch.\n   *\n   * @method createFileInput\n   * @param  {Function} [callback] callback function for when a file loaded\n   * @param  {String} [multiple] optional to allow multiple files selected\n   * @return {Object/p5.Element} pointer to p5.Element holding created DOM element\n   */\n  p5.prototype.createFileInput = function(callback, multiple) {\n\n    // Is the file stuff supported?\n    if (window.File && window.FileReader && window.FileList && window.Blob) {\n      // Yup, we're ok and make an input file selector\n      var elt = document.createElement('input');\n      elt.type = 'file';\n\n      // If we get a second argument that evaluates to true\n      // then we are looking for multiple files\n      if (multiple) {\n        // Anything gets the job done\n        elt.multiple = 'multiple';\n      }\n\n      // Function to handle when a file is selected\n      // We're simplifying life and assuming that we always\n      // want to load every selected file\n      function handleFileSelect(evt) {\n        // These are the files\n        var files = evt.target.files;\n        // Load each one and trigger a callback\n        for (var i = 0; i < files.length; i++) {\n          var f = files[i];\n          var reader = new FileReader();\n          function makeLoader(theFile) {\n            // Making a p5.File object\n            var p5file = new p5.File(theFile);\n            return function(e) {\n              p5file.data = e.target.result;\n              callback(p5file);\n            };\n          };\n          reader.onload = makeLoader(f);\n\n          // Text or data?\n          // This should likely be improved\n          if (f.type.indexOf('text') > -1) {\n            reader.readAsText(f);\n          } else {\n            reader.readAsDataURL(f);\n          }\n        }\n      }\n      \n      // Now let's handle when a file was selected\n      elt.addEventListener('change', handleFileSelect, false);\n      return addElement(elt, this);\n    } else {\n      console.log('The File APIs are not fully supported in this browser. Cannot create element.');\n    }\n  };\n\n\n  /** VIDEO STUFF **/\n\n  function createMedia(pInst, type, src, callback) {\n    var elt = document.createElement(type);\n\n    // allow src to be empty\n    var src = src || '';\n    if (typeof src === 'string') {\n      src = [src];\n    }\n    for (var i=0; i<src.length; i++)=\"\" {=\"\" var=\"\" source=\"document.createElement('source');\" source.src=\"src[i];\" elt.appendchild(source);=\"\" }=\"\" if=\"\" (typeof=\"\" callback=\"\" !=\"=\" 'undefined')=\"\" callbackhandler=\"function()\" callback();=\"\" elt.removeeventlistener('canplaythrough',=\"\" callbackhandler);=\"\" elt.addeventlistener('canplaythrough',=\"\" c=\"addElement(elt,\" pinst,=\"\" true);=\"\" c.loadedmetadata=\"false;\" set=\"\" width=\"\" and=\"\" height=\"\" onload=\"\" metadata=\"\" elt.addeventlistener('loadedmetadata',=\"\" function()=\"\" c.width=\"elt.videoWidth;\" c.height=\"elt.videoHeight;\" });=\"\" return=\"\" c;=\"\" **=\"\" *=\"\" creates=\"\" an=\"\" html5=\"\" &lt;video&gt;=\"\" element=\"\" in=\"\" the=\"\" dom=\"\" for=\"\" simple=\"\" playback=\"\" of=\"\" audio=\"\" video.=\"\" shown=\"\" by=\"\" default,=\"\" can=\"\" be=\"\" hidden with=\"\" .hide()=\"\" drawn=\"\" into=\"\" canvas=\"\" using=\"\" video().=\"\" appends=\"\" to=\"\" container=\"\" node=\"\" one=\"\" is=\"\" specified,=\"\" otherwise=\"\" body.=\"\" first=\"\" parameter=\"\" either=\"\" a=\"\" single=\"\" string=\"\" path=\"\" video=\"\" file,=\"\" or=\"\" array=\"\" paths=\"\" different=\"\" formats=\"\" same=\"\" this=\"\" useful=\"\" ensuring=\"\" that=\"\" your=\"\" play=\"\" across=\"\" browsers,=\"\" as=\"\" each=\"\" supports=\"\" formats.=\"\" see=\"\" <a=\"\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats\">this\n   * page for further information about supported formats.\n   *\n   * @method createVideo\n   * @param  {String|Array} src  path to a video file, or array of paths for\n   *                             supporting different browsers\n   * @param  {Object} [callback] callback function to be called upon\n   *                             'canplaythrough' event fire, that is, when the\n   *                             browser can play the media, and estimates that\n   *                             enough data has been loaded to play the media\n   *                             up to its end without having to stop for\n   *                             further buffering of content\n   * @return {Object/p5.Element} pointer to video p5.Element\n   */\n  p5.prototype.createVideo = function(src, callback) {\n    return createMedia(this, 'video', src, callback);\n  };\n\n  /** AUDIO STUFF **/\n\n  /**\n   * Creates a hidden HTML5 &lt;audio&gt; element in the DOM for simple audio\n   * playback. Appends to the container node if one is specified,\n   * otherwise appends to body. The first parameter\n   * can be either a single string path to a audio file, or an array of string\n   * paths to different formats of the same audio. This is useful for ensuring\n   * that your audio can play across different browsers, as each supports\n   * different formats. See <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats\" target=\"_blank\" rel=\"external\">this\n   * page for further information about supported formats</a>.\n   *\n   * @method createAudio\n   * @param  {String|Array} src  path to an audio file, or array of paths for\n   *                             supporting different browsers\n   * @param  {Object} [callback] callback function to be called upon\n   *                             'canplaythrough' event fire, that is, when the\n   *                             browser can play the media, and estimates that\n   *                             enough data has been loaded to play the media\n   *                             up to its end without having to stop for\n   *                             further buffering of content\n   * @return {Object/p5.Element} pointer to audio p5.Element\n   */\n  p5.prototype.createAudio = function(src, callback) {\n    return createMedia(this, 'audio', src, callback);\n  };\n\n\n  /** CAMERA STUFF **/\n\n  p5.prototype.VIDEO = 'video';\n  p5.prototype.AUDIO = 'audio';\n\n  navigator.getUserMedia  = navigator.getUserMedia ||\n                            navigator.webkitGetUserMedia ||\n                            navigator.mozGetUserMedia ||\n                            navigator.msGetUserMedia;\n\n  /**\n   * Creates a new &lt;video&gt; element that contains the audio/video feed\n   * from a webcam. This can be drawn onto the canvas using video(). More\n   * specific properties of the stream can be passing in a Constraints object.\n   * See the\n   * <a href=\"http://w3c.github.io/mediacapture-main/getusermedia.html\" target=\"_blank\" rel=\"external\">W3C\n   * spec</a> for possible properties. Note that not all of these are supported\n   * by all browsers.\n   *\n   * @method createCapture\n   * @param  {String|Constant|Object}   type type of capture, either VIDEO or\n   *                                    AUDIO if none specified, default both,\n   *                                    or a Constraints boject\n   * @param  {Function}                 callback function to be called once\n   *                                    stream has loaded\n   * @return {Object/p5.Element} capture video p5.Element\n   * @example\n   * <div class=\"norender\"><code>\n   * var capture;\n   *\n   * function setup() {\n   *   createCanvas(480, 120);\n   *   capture = createCapture(VIDEO);\n   * }\n   *\n   * function draw() {\n   *   image(capture, 0, 0, width, width*capture.height/capture.width);\n   *   filter(INVERT);\n   * }\n   * </code></div>\n   * <div class=\"norender\"><code>\n   * function setup() {\n   *   createCanvas(480, 120);\n   *   var constraints = {\n   *     video: {\n   *       mandatory: {\n   *         minWidth: 1280,\n   *         minHeight: 720\n   *       },\n   *       optional: [\n   *         { maxFrameRate: 10 }\n   *       ]\n   *     },\n   *     audio: true\n   *   };\n   *   createCapture(constraints, function(stream) {\n   *     console.log(stream);\n   *   });\n   * }\n   * </code></div>\n   */\n  p5.prototype.createCapture = function() {\n    var useVideo = true;\n    var useAudio = true;\n    var constraints;\n    var cb;\n    for (var i=0; i<arguments.length; i++)=\"\" {=\"\" if=\"\" (arguments[i]=\"==\" p5.prototype.video)=\"\" useaudio=\"false;\" }=\"\" else=\"\" p5.prototype.audio)=\"\" usevideo=\"false;\" (typeof=\"\" arguments[i]=\"==\" 'object')=\"\" constraints=\"arguments[i];\" 'function')=\"\" cb=\"arguments[i];\" (navigator.getusermedia)=\"\" var=\"\" elt=\"document.createElement('video');\" (!constraints)=\"\" usevideo,=\"\" audio:=\"\" useaudio};=\"\" navigator.getusermedia(constraints,=\"\" function(stream)=\"\" elt.src=\"window.URL.createObjectURL(stream);\" elt.onloadedmetadata=\"function(e)\" elt.play();=\"\" (cb)=\"\" cb(stream);=\"\" };=\"\" },=\"\" function(e)=\"\" console.log(e);=\"\" });=\"\" throw=\"\" 'getusermedia=\"\" not=\"\" supported=\"\" in=\"\" this=\"\" browser';=\"\" c=\"addElement(elt,\" this,=\"\" true);=\"\" c.loadedmetadata=\"false;\" set=\"\" width=\"\" and=\"\" height=\"\" onload=\"\" metadata=\"\" elt.addeventlistener('loadedmetadata',=\"\" function()=\"\" c.width=\"elt.videoWidth;\" c.height=\"elt.videoHeight;\" return=\"\" c;=\"\" **=\"\" *=\"\" creates=\"\" element=\"\" with=\"\" given=\"\" tag=\"\" the=\"\" dom=\"\" content.=\"\" appends=\"\" to=\"\" container=\"\" node=\"\" one=\"\" is=\"\" specified,=\"\" otherwise=\"\" body.=\"\" @method=\"\" createelement=\"\" @param=\"\" {string}=\"\" for=\"\" new=\"\" [content]=\"\" html=\"\" content=\"\" be=\"\" inserted=\"\" into=\"\" @return=\"\" {object=\"\" p5.element}=\"\" pointer=\"\" p5.element=\"\" holding=\"\" created=\"\" @example=\"\" <div=\"\" class=\"norender\"><code>\n   * var h2 = createElement('h2','im an h2 p5.element!');\n   * </code>\n   */\n  p5.prototype.createElement = function(tag, content) {\n    var elt = document.createElement(tag);\n    if (typeof content !== 'undefined') {\n      elt.innerHTML = content;\n    }\n    return addElement(elt, this);\n  };\n\n\n// =============================================================================\n//                         p5.Element additions\n// =============================================================================\n  /**\n   *\n   * Adds specified class to the element.\n   *\n   * @for p5.Element\n   * @method addClass\n   * @param  {String} class name of class to add\n   * @return {Object/p5.Element}\n   * @example\n   * <div class=\"norender\"><code>\n   * var div = createDiv('div');\n   * div.addClass('myClass');\n   * </code></div>\n   */\n  p5.Element.prototype.addClass = function(c) {\n    if (this.elt.className) {\n      // PEND don't add class more than once\n      //var regex = new RegExp('[^a-zA-Z\\d:]?'+c+'[^a-zA-Z\\d:]?');\n      //if (this.elt.className.search(/[^a-zA-Z\\d:]?hi[^a-zA-Z\\d:]?/) === -1) {\n      this.elt.className = this.elt.className+' '+c;\n      //}\n    } else {\n      this.elt.className = c;\n    }\n    return this;\n  }\n\n  /**\n   *\n   * Removes specified class from the element.\n   *\n   * @method removeClass\n   * @param  {String} class name of class to remove\n   * @return {Object/p5.Element}\n   */\n  p5.Element.prototype.removeClass = function(c) {\n    var regex = new RegExp('(?:^|\\\\s)'+c+'(?!\\\\S)');\n    this.elt.className = this.elt.className.replace(regex, '');\n    this.elt.className = this.elt.className.replace(/^\\s+|\\s+$/g, \"\"); //prettify (optional)\n    return this;\n  }\n\n  /**\n   *\n   * Attaches the element  as a child to the parent specified.\n   * Accepts either a string ID, DOM node, or p5.Element.\n   * If no argument is specified, an array of children DOM nodes is returned.\n   *\n   * @method child\n   * @param  {String|Object|p5.Element} [child] the ID, DOM node, or p5.Element\n   *                         to add to the current element\n   * @return {p5.Element}\n   * @example\n   * <div class=\"norender\"><code>\n   * var div0 = createDiv('this is the parent');\n   * var div1 = createDiv('this is the child');\n   * div0.child(div1); // use p5.Element\n   * </code></div>\n   * <div class=\"norender\"><code>\n   * var div0 = createDiv('this is the parent');\n   * var div1 = createDiv('this is the child');\n   * div1.id('apples');\n   * div0.child('apples'); // use id\n   * </code></div>\n   * <div class=\"norender\"><code>\n   * var div0 = createDiv('this is the parent');\n   * var elt = document.getElementById('myChildDiv');\n   * div0.child(elt); // use element from page\n   * </code></div>\n   */\n  p5.Element.prototype.child = function(c) {\n    if (c === null){\n      return this.elt.childNodes\n    }\n    if (typeof c === 'string') {\n      if (c[0] === '#') {\n        c = c.substring(1);\n      }\n      c = document.getElementById(c);\n    } else if (c instanceof p5.Element) {\n      c = c.elt;\n    }\n    this.elt.appendChild(c);\n    return this;\n  };\n\n  /**\n   * Centers a p5 Element either vertically, horizontally,\n   * or both, relative to its parent or according to\n   * the body if the Element has no parent. If no argument is passed\n   * the Element is aligned both vertically and horizontally.\n   *\n   * @param  {String} align       passing 'vertical', 'horizontal' aligns element accordingly\n   * @return {Object/p5.Element} pointer to p5.Element\n   * @example\n   * <div><code>\n   * function setup() {\n   *   var div = createDiv('').size(10,10);\n   *   div.style('background-color','orange');\n   *   div.center();\n   *\n   * }\n   * </code></div>\n   */\n  p5.Element.prototype.center = function(align) {\n    var style = this.elt.style.display;\n    var hidden = this.elt.style.display === 'none';\n    var parentHidden = this.parent().style.display === 'none';\n    var pos = { x : this.elt.offsetLeft, y : this.elt.offsetTop };\n\n    if (hidden) this.show();\n\n    this.elt.style.display = 'block';\n    this.position(0,0);\n\n    if (parentHidden) this.parent().style.display = 'block';\n\n    var wOffset = Math.abs(this.parent().offsetWidth - this.elt.offsetWidth);\n    var hOffset = Math.abs(this.parent().offsetHeight - this.elt.offsetHeight);\n    var y = pos.y;\n    var x = pos.x;\n\n    if (align === 'both' || align === undefined){\n      this.position(wOffset/2, hOffset/2);\n    }else if (align === 'horizontal'){\n      this.position(wOffset/2, y);\n    }else if (align === 'vertical'){\n      this.position(x, hOffset/2);\n    }\n\n    this.style('display', style);\n\n    if (hidden) this.hide();\n\n    if (parentHidden) this.parent().style.display = 'none';\n\n    return this;\n  };\n\n  /**\n   *\n   * If an argument is given, sets the inner HTML of the element,\n   * replacing any existing html. If no arguments are given, returns\n   * the inner HTML of the element.\n   *\n   * @for p5.Element\n   * @method html\n   * @param  {String} [html] the HTML to be placed inside the element\n   * @return {Object/p5.Element|String}\n   * @example\n   * <div class=\"norender\"><code>\n   * var div = createDiv('').size(100,100);\n   * div.style('background-color','orange');\n   * div.html('hi');\n   * </code></div>\n   */\n  p5.Element.prototype.html = function(html) {\n    if (typeof html !== 'undefined') {\n      this.elt.innerHTML = html;\n      return this;\n    } else {\n      return this.elt.innerHTML;\n    }\n  };\n\n  /**\n   *\n   * Sets the position of the element relative to (0, 0) of the\n   * window. Essentially, sets position:absolute and left and top\n   * properties of style. If no arguments given returns the x and y position\n   * of the element in an object.\n   *\n   * @method position\n   * @param  {Number} [x] x-position relative to upper left of window\n   * @param  {Number} [y] y-position relative to upper left of window\n   * @return {Object/p5.Element}\n   * @example\n   * <div><code class=\"norender\">\n   * function setup() {\n   *   var cnv = createCanvas(100, 100);\n   *   // positions canvas 50px to the right and 100px\n   *   // below upper left corner of the window\n   *   cnv.position(50, 100);\n   * }\n   * </code></div>\n   */\n  p5.Element.prototype.position = function() {\n    if (arguments.length === 0){\n      return { 'x' : this.elt.offsetLeft , 'y' : this.elt.offsetTop };\n    }else{\n      this.elt.style.position = 'absolute';\n      this.elt.style.left = arguments[0]+'px';\n      this.elt.style.top = arguments[1]+'px';\n      this.x = arguments[0];\n      this.y = arguments[1];\n      return this;\n    }\n  };\n\n  /**\n   * Translates an element with css transforms in either 2d (if 2 arguments given)\n   * or 3d (if 3 arguments given) space.\n   * @method  translate\n   * @param  {Number} x x-position in px\n   * @param  {Number} y y-position in px\n   * @param  {Number} [z] z-position in px\n   * @param  {Number} [perspective] sets the perspective of the parent element in px,\n   * default value set to 1000px\n   * @return {Object/p5.Element}\n   * @example\n   * <div><code class=\"norender\">\n   * function setup() {\n   *   var cnv = createCanvas(100,100);\n   *   //translates canvas 50px down\n   *   cnv.translate(0,50);\n   * }\n   * </code></div>\n   */\n  p5.Element.prototype.translate = function(){\n    this.elt.style.position = 'absolute';\n    // save out initial non-translate transform styling\n    var transform = '';\n    if (this.elt.style.transform) {\n      transform = this.elt.style.transform.replace(/translate3d\\(.*\\)/g, '');\n      transform = transform.replace(/translate[X-Z]?\\(.*\\)/g, '');\n    }\n    if (arguments.length === 2) {\n      this.elt.style.transform = 'translate('+arguments[0]+'px, '+arguments[1]+'px)';\n    } else if (arguments.length > 2) {\n      this.elt.style.transform = 'translate3d('+arguments[0]+'px,'+arguments[1]+'px,'+arguments[2]+'px)';\n      if (arguments.length === 3) {\n        this.elt.parentElement.style.perspective = '1000px';\n      } else {\n        this.elt.parentElement.style.perspective = arguments[3]+'px';\n      }\n    }\n    // add any extra transform styling back on end\n    this.elt.style.transform += transform;\n    return this;\n  };\n\n  /**\n   * Rotates an element with css transforms in either 2d (if 2 arguments given)\n   * or 3d (if 3 arguments given) space.\n   * @method  rotate\n   * @param  {Number} x amount of degrees to rotate the element along the x-axis in deg\n   * @param  {Number} [y] amount of degrees to rotate the element along the y-axis in deg\n   * @param  {Number} [z] amount of degrees to rotate the element along the z-axis in deg\n   * @return {Object/p5.Element}\n   * @example\n   * <div><code>\n   * var x = 0,\n   *     y = 0,\n   *     z = 0;\n   *\n   * function draw(){\n   *   x+=.5 % 360;\n   *   y+=.5 % 360;\n   *   z+=.5 % 360;\n   *   //rotates p5.js logo .5 degrees on every axis each frame.\n   *   select('canvas').rotate(x,y,z);\n   * }\n   * </code></div>\n   */\n  p5.Element.prototype.rotate = function(){\n    // save out initial non-rotate transform styling\n    var transform = '';\n    if (this.elt.style.transform) {\n      var transform = this.elt.style.transform.replace(/rotate3d\\(.*\\)/g, '');\n      transform = transform.replace(/rotate[X-Z]?\\(.*\\)/g, '');\n    }\n\n    if (arguments.length === 1){\n      this.elt.style.transform = 'rotate('+arguments[0]+'deg)';\n    }else if (arguments.length === 2){\n      this.elt.style.transform = 'rotate('+arguments[0]+'deg, '+arguments[1]+'deg)';\n    }else if (arguments.length === 3){\n      this.elt.style.transform = 'rotateX('+arguments[0]+'deg)';\n      this.elt.style.transform += 'rotateY('+arguments[1]+'deg)';\n      this.elt.style.transform += 'rotateZ('+arguments[2]+'deg)';\n    }\n    // add remaining transform back on\n    this.elt.style.transform += transform;\n    return this;\n  };\n\n  /**\n   * Sets the given style (css) property (1st arg) of the element with the\n   * given value (2nd arg). If a single argument is given, .style()\n   * returns the value of the given property; however, if the single argument\n   * is given in css syntax ('text-align:center'), .style() sets the css\n   * appropriatly. .style() also handles 2d and 3d css transforms. If\n   * the 1st arg is 'rotate', 'translate', or 'position', the following arguments\n   * accept Numbers as values. ('translate', 10, 100, 50);\n   *\n   * @method style\n   * @param  {String} property   property to be set\n   * @param  {String|Number|p5.Color} [value]   value to assign to property\n   * @param  {String|Number} [value]   value to assign to property (rotate/translate)\n   * @param  {String|Number} [value]   value to assign to property (rotate/translate)\n   * @param  {String|Number} [value]   value to assign to property (translate)\n   * @return {String|Object/p5.Element} value of property, if no value is specified\n   * or p5.Element\n   * @example\n   * <div><code class=\"norender\">\n   * var myDiv = createDiv(\"I like pandas.\");\n   * myDiv.style(\"font-size\", \"18px\");\n   * myDiv.style(\"color\", \"#ff0000\");\n   * </code></div>\n   * <div><code class=\"norender\">\n   * var col = color(25,23,200,50);\n   * var button = createButton(\"button\");\n   * button.style(\"background-color\", col);\n   * button.position(10, 10);\n   * </code></div>\n   * <div><code class=\"norender\">\n   * var myDiv = createDiv(\"I like lizards.\");\n   * myDiv.style(\"position\", 20, 20);\n   * myDiv.style(\"rotate\", 45);\n   * </code></div>\n   * <div><code class=\"norender\">\n   * var myDiv;\n   * function setup() {\n   *   background(200);\n   *   myDiv = createDiv(\"I like gray.\");\n   *   myDiv.position(20, 20);\n   * }\n   *\n   * function draw() {\n   *   myDiv.style(\"font-size\", mouseX+\"px\");\n   * }\n   * </code></div>\n   */\n  p5.Element.prototype.style = function(prop, val) {\n    var self = this;\n\n    if (val instanceof p5.Color) {\n      val = 'rgba(' + val.levels[0] + ',' + val.levels[1] + ',' + val.levels[2] + ',' + val.levels[3]/255 + ')'\n    }\n\n    if (typeof val === 'undefined') {\n      if (prop.indexOf(':') === -1) {\n        var styles = window.getComputedStyle(self.elt);\n        var style = styles.getPropertyValue(prop);\n        return style;\n      } else {\n        var attrs = prop.split(';');\n        for (var i = 0; i < attrs.length; i++) {\n          var parts = attrs[i].split(':');\n          if (parts[0] && parts[1]) {\n            this.elt.style[parts[0].trim()] = parts[1].trim();\n          }\n        }\n      }\n    } else {\n      if (prop === 'rotate' || prop === 'translate' || prop === 'position'){\n        var trans = Array.prototype.shift.apply(arguments);\n        this[trans].apply(this, arguments);\n      } else {\n        this.elt.style[prop] = val;\n        if (prop === 'width' || prop === 'height' || prop === 'left' || prop === 'top') {\n          var numVal = val.replace(/\\D+/g, '');\n          this[prop] = parseInt(numVal, 10); // pend: is this necessary?\n        }\n      }\n    }\n    return this;\n  };\n\n\n  /**\n   *\n   * Adds a new attribute or changes the value of an existing attribute\n   * on the specified element. If no value is specified, returns the\n   * value of the given attribute, or null if attribute is not set.\n   *\n   * @method attribute\n   * @param  {String} attr       attribute to set\n   * @param  {String} [value]    value to assign to attribute\n   * @return {String|Object/p5.Element} value of attribute, if no value is\n   *                             specified or p5.Element\n   * @example\n   * <div class=\"norender\"><code>\n   * var myDiv = createDiv(\"I like pandas.\");\n   *myDiv.attribute(\"align\", \"center\");\n   * </code></div>\n   */\n  p5.Element.prototype.attribute = function(attr, value) {\n    if (typeof value === 'undefined') {\n      return this.elt.getAttribute(attr);\n    } else {\n      this.elt.setAttribute(attr, value);\n      return this;\n    }\n  };\n\n\n  /**\n   * Either returns the value of the element if no arguments\n   * given, or sets the value of the element.\n   *\n   * @method value\n   * @param  {String|Number}     [value]\n   * @return {String|Object/p5.Element} value of element if no value is specified or p5.Element\n   */\n  p5.Element.prototype.value = function() {\n    if (arguments.length > 0) {\n      this.elt.value = arguments[0];\n      return this;\n    } else {\n      if (this.elt.type === 'range') {\n        return parseFloat(this.elt.value);\n      }\n      else return this.elt.value;\n    }\n  };\n\n  /**\n   *\n   * Shows the current element. Essentially, setting display:block for the style.\n   *\n   * @method show\n   * @return {Object/p5.Element}\n   */\n  p5.Element.prototype.show = function() {\n    this.elt.style.display = 'block';\n    return this;\n  };\n\n  /**\n   * Hides the current element. Essentially, setting display:none for the style.\n   *\n   * @method hide\n   * @return {Object/p5.Element}\n   */\n  p5.Element.prototype.hide = function() {\n    this.elt.style.display = 'none';\n    return this;\n  };\n\n  /**\n   *\n   * Sets the width and height of the element. AUTO can be used to\n   * only adjust one dimension. If no arguments given returns the width and height\n   * of the element in an object.\n   *\n   * @method size\n   * @param  {Number} [w] width of the element\n   * @param  {Number} [h] height of the element\n   * @return {Object/p5.Element}\n   */\n  p5.Element.prototype.size = function(w, h) {\n    if (arguments.length === 0){\n      return { 'width' : this.elt.offsetWidth , 'height' : this.elt.offsetHeight };\n    }else{\n      var aW = w;\n      var aH = h;\n      var AUTO = p5.prototype.AUTO;\n      if (aW !== AUTO || aH !== AUTO) {\n        if (aW === AUTO) {\n          aW = h * this.width / this.height;\n        } else if (aH === AUTO) {\n          aH = w * this.height / this.width;\n        }\n        // set diff for cnv vs normal div\n        if (this.elt instanceof HTMLCanvasElement) {\n          var j = {};\n          var k  = this.elt.getContext('2d');\n          for (var prop in k) {\n            j[prop] = k[prop];\n          }\n          this.elt.setAttribute('width', aW * this._pInst._pixelDensity);\n          this.elt.setAttribute('height', aH * this._pInst._pixelDensity);\n          this.elt.setAttribute('style', 'width:' + aW + 'px; height:' + aH + 'px');\n          this._pInst.scale(this._pInst._pixelDensity, this._pInst._pixelDensity);\n          for (var prop in j) {\n            this.elt.getContext('2d')[prop] = j[prop];\n          }\n        } else {\n          this.elt.style.width = aW+'px';\n          this.elt.style.height = aH+'px';\n          this.elt.width = aW;\n          this.elt.height = aH;\n          this.width = aW;\n          this.height = aH;\n        }\n\n        this.width = this.elt.offsetWidth;\n        this.height = this.elt.offsetHeight;\n\n        if (this._pInst) { // main canvas associated with p5 instance\n          if (this._pInst._curElement.elt === this.elt) {\n            this._pInst._setProperty('width', this.elt.offsetWidth);\n            this._pInst._setProperty('height', this.elt.offsetHeight);\n          }\n        }\n      }\n      return this;\n    }\n  };\n\n  /**\n   * Removes the element and deregisters all listeners.\n   * @method remove\n   * @example\n   * <div class=\"norender\"><code>\n   * var myDiv = createDiv('this is some text');\n   * myDiv.remove();\n   * </code></div>\n   */\n  p5.Element.prototype.remove = function() {\n    // deregister events\n    for (var ev in this._events) {\n      this.elt.removeEventListener(ev, this._events[ev]);\n    }\n    if (this.elt.parentNode) {\n      this.elt.parentNode.removeChild(this.elt);\n    }\n    delete(this);\n  };\n\n\n\n// =============================================================================\n//                         p5.MediaElement additions\n// =============================================================================\n\n\n  /**\n   * Extends p5.Element to handle audio and video. In addition to the methods\n   * of p5.Element, it also contains methods for controlling media. It is not\n   * called directly, but p5.MediaElements are created by calling createVideo,\n   * createAudio, and createCapture.\n   *\n   * @class p5.MediaElement\n   * @constructor\n   * @param {String} elt DOM node that is wrapped\n   * @param {Object} [pInst] pointer to p5 instance\n   */\n  p5.MediaElement = function(elt, pInst) {\n    p5.Element.call(this, elt, pInst);\n\n    var self = this;\n    this.elt.crossOrigin = 'anonymous';\n\n    this._prevTime = 0;\n    this._cueIDCounter = 0;\n    this._cues = [];\n    this._pixelDensity = 1;\n\n    /**\n     *  Path to the media element source.\n     *\n     *  @property src\n     *  @return {String} src\n     */\n    Object.defineProperty(self, 'src', {\n      get: function() {\n        var firstChildSrc = self.elt.children[0].src;\n        var srcVal = self.elt.src === window.location.href ? '' : self.elt.src;\n        var ret = firstChildSrc === window.location.href ? srcVal : firstChildSrc;\n        return ret;\n      },\n      set: function(newValue) {\n        for (var i = 0; i < self.elt.children.length; i++) {\n          self.elt.removeChild(self.elt.children[i]);\n        }\n        var source = document.createElement('source');\n        source.src = newValue;\n        elt.appendChild(source);\n        self.elt.src = newValue;\n      },\n    });\n\n    // private _onended callback, set by the method: onended(callback)\n    self._onended = function() {};\n    self.elt.onended = function() {\n      self._onended(self);\n    }\n  };\n  p5.MediaElement.prototype = Object.create(p5.Element.prototype);\n\n\n\n\n  /**\n   * Play an HTML5 media element.\n   *\n   * @method play\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.play = function() {\n    if (this.elt.currentTime === this.elt.duration) {\n      this.elt.currentTime = 0;\n    }\n\n    if (this.elt.readyState > 1) {\n      this.elt.play();\n    } else {\n      // in Chrome, playback cannot resume after being stopped and must reload\n      this.elt.load();\n      this.elt.play();\n    }\n    return this;\n  };\n\n  /**\n   * Stops an HTML5 media element (sets current time to zero).\n   *\n   * @method stop\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.stop = function() {\n    this.elt.pause();\n    this.elt.currentTime = 0;\n    return this;\n  };\n\n  /**\n   * Pauses an HTML5 media element.\n   *\n   * @method pause\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.pause = function() {\n    this.elt.pause();\n    return this;\n  };\n\n  /**\n   * Set 'loop' to true for an HTML5 media element, and starts playing.\n   *\n   * @method loop\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.loop = function() {\n    this.elt.setAttribute('loop', true);\n    this.play();\n    return this;\n  };\n  /**\n   * Set 'loop' to false for an HTML5 media element. Element will stop\n   * when it reaches the end.\n   *\n   * @method noLoop\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.noLoop = function() {\n    this.elt.setAttribute('loop', false);\n    return this;\n  };\n\n\n  /**\n   * Set HTML5 media element to autoplay or not.\n   *\n   * @method autoplay\n   * @param {Boolean} autoplay whether the element should autoplay\n   * @return {Object/p5.Element}\n   */\n  p5.MediaElement.prototype.autoplay = function(val) {\n    this.elt.setAttribute('autoplay', val);\n    return this;\n  };\n\n  /**\n   * Sets volume for this HTML5 media element. If no argument is given,\n   * returns the current volume.\n   *\n   * @param {Number}            [val] volume between 0.0 and 1.0\n   * @return {Number|p5.MediaElement} current volume or p5.MediaElement\n   * @method volume\n   */\n  p5.MediaElement.prototype.volume = function(val) {\n    if (typeof val === 'undefined') {\n      return this.elt.volume;\n    } else {\n      this.elt.volume = val;\n    }\n  };\n\n  /**\n   * If no arguments are given, returns the current time of the element.\n   * If an argument is given the current time of the element is set to it.\n   *\n   * @method time\n   * @param {Number} [time] time to jump to (in seconds)\n   * @return {Number|Object/p5.MediaElement} current time (in seconds)\n   *                                  or p5.MediaElement\n   */\n  p5.MediaElement.prototype.time = function(val) {\n    if (typeof val === 'undefined') {\n      return this.elt.currentTime;\n    } else {\n      this.elt.currentTime = val;\n    }\n  };\n\n  /**\n   * Returns the duration of the HTML5 media element.\n   *\n   * @method duration\n   * @return {Number} duration\n   */\n  p5.MediaElement.prototype.duration = function() {\n    return this.elt.duration;\n  };\n  p5.MediaElement.prototype.pixels = [];\n  p5.MediaElement.prototype.loadPixels = function() {\n    if (this.loadedmetadata) { // wait for metadata for w/h\n      if (!this.canvas) {\n        this.canvas = document.createElement('canvas');\n        this.drawingContext = this.canvas.getContext('2d');\n      }\n      if (this.canvas.width !== this.elt.width) {\n        this.canvas.width = this.elt.width;\n        this.canvas.height = this.elt.height;\n        this.width = this.canvas.width;\n        this.height = this.canvas.height;\n      }\n      this.drawingContext.drawImage(this.elt, 0, 0, this.canvas.width, this.canvas.height);\n      p5.Renderer2D.prototype.loadPixels.call(this);\n    }\n    return this;\n  }\n  p5.MediaElement.prototype.updatePixels =  function(x, y, w, h){\n    if (this.loadedmetadata) { // wait for metadata\n      p5.Renderer2D.prototype.updatePixels.call(this, x, y, w, h);\n    }\n    return this;\n  }\n  p5.MediaElement.prototype.get = function(x, y, w, h){\n    if (this.loadedmetadata) { // wait for metadata\n      return p5.Renderer2D.prototype.get.call(this, x, y, w, h);\n    } else return [0, 0, 0, 255];\n  };\n  p5.MediaElement.prototype.set = function(x, y, imgOrCol){\n    if (this.loadedmetadata) { // wait for metadata\n      p5.Renderer2D.prototype.set.call(this, x, y, imgOrCol);\n    }\n  };\n  /**\n   *  Schedule an event to be called when the audio or video\n   *  element reaches the end. If the element is looping,\n   *  this will not be called. The element is passed in\n   *  as the argument to the onended callback.\n   *  \n   *  @method  onended\n   *  @param  {Function} callback function to call when the\n   *                              soundfile has ended. The\n   *                              media element will be passed\n   *                              in as the argument to the\n   *                              callback.                            \n   *  @return {Object/p5.MediaElement}\n   *  @example\n   *  <div><code>\n   *  function setup() {\n   *    audioEl = createAudio('assets/beat.mp3');\n   *    audioEl.showControls(true);\n   *    audioEl.onended(sayDone);\n   *  }\n   *\n   *  function sayDone(elt) {\n   *    alert('done playing ' + elt.src );\n   *  }\n   *  </code></div>\n   */\n  p5.MediaElement.prototype.onended = function(callback) {\n    this._onended = callback;\n    return this;\n  };\n\n\n  /*** CONNECT TO WEB AUDIO API / p5.sound.js ***/\n\n  /**\n   *  Send the audio output of this element to a specified audioNode or\n   *  p5.sound object. If no element is provided, connects to p5's master\n   *  output. That connection is established when this method is first called.\n   *  All connections are removed by the .disconnect() method.\n   *\n   *  This method is meant to be used with the p5.sound.js addon library.\n   *\n   *  @method  connect\n   *  @param  {AudioNode|p5.sound object} audioNode AudioNode from the Web Audio API,\n   *  or an object from the p5.sound library\n   */\n  p5.MediaElement.prototype.connect = function(obj) {\n    var audioContext, masterOutput;\n\n    // if p5.sound exists, same audio context\n    if (typeof p5.prototype.getAudioContext === 'function') {\n      audioContext = p5.prototype.getAudioContext();\n      masterOutput = p5.soundOut.input;\n    } else {\n      try {\n        audioContext = obj.context;\n        masterOutput = audioContext.destination\n      } catch(e) {\n        throw 'connect() is meant to be used with Web Audio API or p5.sound.js'\n      }\n    }\n\n    // create a Web Audio MediaElementAudioSourceNode if none already exists\n    if (!this.audioSourceNode) {\n      this.audioSourceNode = audioContext.createMediaElementSource(this.elt);\n\n      // connect to master output when this method is first called\n      this.audioSourceNode.connect(masterOutput);\n    }\n\n    // connect to object if provided\n    if (obj) {\n      if (obj.input) {\n        this.audioSourceNode.connect(obj.input);\n      } else {\n        this.audioSourceNode.connect(obj);\n      }\n    }\n\n    // otherwise connect to master output of p5.sound / AudioContext\n    else {\n      this.audioSourceNode.connect(masterOutput);\n    }\n\n  };\n\n  /**\n   *  Disconnect all Web Audio routing, including to master output.\n   *  This is useful if you want to re-route the output through\n   *  audio effects, for example.\n   *\n   *  @method  disconnect\n   */\n  p5.MediaElement.prototype.disconnect = function() {\n    if (this.audioSourceNode) {\n      this.audioSourceNode.disconnect();\n    } else {\n      throw 'nothing to disconnect';\n    }\n  };\n\n\n  /*** SHOW / HIDE CONTROLS ***/\n\n  /**\n   *  Show the default MediaElement controls, as determined by the web browser.\n   *\n   *  @method  showControls\n   */\n  p5.MediaElement.prototype.showControls = function() {\n    // must set style for the element to show on the page\n    this.elt.style['text-align'] = 'inherit';\n    this.elt.controls = true;\n  };\n\n  /**\n   *  Hide the default mediaElement controls.\n   *\n   *  @method hideControls\n   */\n  p5.MediaElement.prototype.hideControls = function() {\n    this.elt.controls = false;\n  };\n\n  /*** SCHEDULE EVENTS ***/\n\n  /**\n   *  Schedule events to trigger every time a MediaElement\n   *  (audio/video) reaches a playback cue point.\n   *\n   *  Accepts a callback function, a time (in seconds) at which to trigger\n   *  the callback, and an optional parameter for the callback.\n   *\n   *  Time will be passed as the first parameter to the callback function,\n   *  and param will be the second parameter.\n   *\n   *\n   *  @method  addCue\n   *  @param {Number}   time     Time in seconds, relative to this media\n   *                             element's playback. For example, to trigger\n   *                             an event every time playback reaches two\n   *                             seconds, pass in the number 2. This will be\n   *                             passed as the first parameter to\n   *                             the callback function.\n   *  @param {Function} callback Name of a function that will be\n   *                             called at the given time. The callback will\n   *                             receive time and (optionally) param as its\n   *                             two parameters.\n   *  @param {Object} [value]    An object to be passed as the\n   *                             second parameter to the\n   *                             callback function.\n   *  @return {Number} id ID of this cue,\n   *                      useful for removeCue(id)\n   *  @example\n   *  <div><code>\n   *  function setup() {\n   *    background(255,255,255);\n   *\n   *    audioEl = createAudio('assets/beat.mp3');\n   *    audioEl.showControls();\n   *\n   *    // schedule three calls to changeBackground\n   *    audioEl.addCue(0.5, changeBackground, color(255,0,0) );\n   *    audioEl.addCue(1.0, changeBackground, color(0,255,0) );\n   *    audioEl.addCue(2.5, changeBackground, color(0,0,255) );\n   *    audioEl.addCue(3.0, changeBackground, color(0,255,255) );\n   *    audioEl.addCue(4.2, changeBackground, color(255,255,0) );\n   *    audioEl.addCue(5.0, changeBackground, color(255,255,0) );\n   *  }\n   *\n   *  function changeBackground(val) {\n   *    background(val);\n   *  }\n   *  </code></div>\n   */\n  p5.MediaElement.prototype.addCue = function(time, callback, val) {\n    var id = this._cueIDCounter++;\n\n    var cue = new Cue(callback, time, id, val);\n    this._cues.push(cue);\n\n    if (!this.elt.ontimeupdate) {\n      this.elt.ontimeupdate = this._onTimeUpdate.bind(this);\n    }\n\n    return id;\n  };\n\n  /**\n   *  Remove a callback based on its ID. The ID is returned by the\n   *  addCue method.\n   *\n   *  @method removeCue\n   *  @param  {Number} id ID of the cue, as returned by addCue\n   */\n  p5.MediaElement.prototype.removeCue = function(id) {\n    for (var i = 0; i < this._cues.length; i++) {\n      var cue = this._cues[i];\n      if (cue.id === id) {\n        this.cues.splice(i, 1);\n      }\n    }\n\n    if (this._cues.length === 0) {\n      this.elt.ontimeupdate = null\n    }\n  };\n\n  /**\n   *  Remove all of the callbacks that had originally been scheduled\n   *  via the addCue method.\n   *\n   *  @method  clearCues\n   */\n  p5.MediaElement.prototype.clearCues = function() {\n    this._cues = [];\n    this.elt.ontimeupdate = null;\n  };\n\n  // private method that checks for cues to be fired if events\n  // have been scheduled using addCue(callback, time).\n  p5.MediaElement.prototype._onTimeUpdate = function() {\n    var playbackTime = this.time();\n\n    for (var i = 0 ; i < this._cues.length; i++) {\n      var callbackTime = this._cues[i].time;\n      var val = this._cues[i].val;\n\n\n      if (this._prevTime < callbackTime && callbackTime </arguments.length;></src.length;></this._elements.length;></p>","date":"2016-02-11T06:07:31.000Z","updated":"2016-02-11T06:07:31.000Z","path":"libraries/p5.dom.js","layout":"false","title":"","comments":1,"_id":"cikt700vg000dafgnovp3z6eh"},{"title":"Categories","layout":"categories","_content":"","source":"categories/index.md","raw":"title: \"Categories\"\nlayout: \"categories\"\n---\n","date":"2016-01-29T02:41:29.000Z","updated":"2016-01-29T01:51:30.000Z","path":"categories/index.html","comments":1,"_id":"cikt700vk000eafgncam3wx2g"},{"layout":"false","_content":"<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Bar Chart</title>\n    <script src=\"../../libraries/p5.js\" type=\"text/javascript\"></script>\n\n    <script src=\"../../libraries/p5.dom.js\" type=\"text/javascript\"></script>\n    <script src=\"../../libraries/p5.sound.js\" type=\"text/javascript\"></script>\n\n    <script src=\"linegraph.js\" type=\"text/javascript\"></script>\n\n    <style> body {padding: 0; margin: 0;} canvas {vertical-align: top;} </style>\n  </head>\n  <body>\n  </body>\n</html>\n","source":"assignments/assignment2/boxchart.html","raw":"layout: false\n---\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Bar Chart</title>\n    <script src=\"../../libraries/p5.js\" type=\"text/javascript\"></script>\n\n    <script src=\"../../libraries/p5.dom.js\" type=\"text/javascript\"></script>\n    <script src=\"../../libraries/p5.sound.js\" type=\"text/javascript\"></script>\n\n    <script src=\"linegraph.js\" type=\"text/javascript\"></script>\n\n    <style> body {padding: 0; margin: 0;} canvas {vertical-align: top;} </style>\n  </head>\n  <body>\n  </body>\n</html>\n","date":"2016-02-19T04:18:52.000Z","updated":"2016-02-19T04:18:52.000Z","path":"assignments/assignment2/boxchart.html","title":"","comments":1,"_id":"cikt700w5000mafgntrm6c9va"},{"_content":"var CANVASW = 1500\nvar CANVASH = 1000\n\nvar GRAPH_ORIGINX = 100\nvar GRAPH_ORIGINY = 100\nvar GRAPHW = 300\nvar GRAPHH = 800\n\nvar VERTICAL_PADDING = 20\nvar HORIZONTAL_PADDING = 50\n\nvar HASHMARKL = 5\nvar WHISKERL = 15\nvar RADIAN = 8\n\nvar maxVal = Number.MIN_VALUE\nvar minVal = Number.MAX_VALUE\n\nvar table\nvar numRows\nvar numColumns\nvar time\nvar ratings\nvar title\nvar colors\nvar highlightColor\nvar numHashMarks\nvar distY\nvar whiskerY\n\nvar firstQuartile\nvar median\nvar thirdQuartile\nvar iqr\n\nvar outliers = []\n\nfunction preload() {\n  table = loadTable(\"presidents.csv\", \"csv\", \"header\")\n}\n\n// only for display purpose, bad coding yikes!\nfunction setup() {\n  createCanvas(CANVASW, CANVASH)\n  //count the columns\n  numRows = table.getRowCount()\n  numColumns = table.getColumnCount()\n\n  time = table.getColumn(\"time\")\n  ratings = table.getColumn(\"rating\")\n\n  title = \"Presidents Rating (100 high) from 1924 to 1974\"\n\n  colors = [\n    color(50, 70, 117),\n    color(67, 103, 186),\n    color(84, 129, 235),\n    color(140, 175, 255)\n  ]\n\n  highlightColor = color(150, 82, 217)\n  whiskerY = GRAPH_ORIGINY + VERTICAL_PADDING\n\n  preprocessInputData()\n}\n\n// called after we've got first and thirdquartiles\nfunction findOutliers(val) {\n  if (val >= thirdQuartile + 3 * iqr || val <= firstQuartile - 3 * iqr) {\n    outliers.push(val)\n  }\n}\n\nfunction preprocessInputData() {\n  var tmp = []\n  ratings.forEach(function(str) {\n    if (str != \"NA\") { tmp.push(parseFloat(str)) }\n  })\n  ratings = tmp\n  ratings.sort()\n  // we want the ceiling value because\n  // it's easier to draw hashmarks\n  minVal = Math.ceil(ratings[0])\n  maxVal = Math.ceil(ratings[ratings.length-1])\n  numHashMarks = maxVal - minVal + 1\n  distY = (GRAPHH - 2 * VERTICAL_PADDING) / (numHashMarks - 1)\n\n  // get required boundary data\n  var medianIndex = Math.floor((ratings.length - 1) / 2)\n  median = ratings[medianIndex]\n  var firstQuartileIndex = Math.floor(medianIndex / 2)\n  firstQuartile = ratings[firstQuartileIndex]\n  var thirdQuartileIndex = Math.floor((medianIndex + ratings.length - 1) / 2)\n  thirdQuartile = ratings[thirdQuartileIndex]\n  iqr = thirdQuartile - firstQuartile\n\n  ratings.forEach(findOutliers)\n}\n\nfunction draw() {\n  background(255)\n  drawGraph()\n}\n\nfunction drawGraph() {\n  drawBox()\n  drawSpine()\n  drawIQR()\n  drawTitle()\n}\n\nfunction drawBox() {\n  noFill()\n  stroke(51)\n  rect(GRAPH_ORIGINX, GRAPH_ORIGINY, GRAPHW, GRAPHH)\n\n  drawHashMarksForBothSides()\n}\n\n// Axes related stuff\nfunction drawHashMarksForBothSides() {\n  var lX\n  for (var i = 0; i < numHashMarks; ++i) {\n    var currentY = whiskerY + (i * distY)\n    // draw left hashMark\n    lX = GRAPH_ORIGINX\n    stroke(51)\n    line(lX, currentY, lX + HASHMARKL, currentY)\n    // draw right hashMark\n    lX = GRAPH_ORIGINX + GRAPHW - HASHMARKL\n    stroke(51)\n    line(lX, currentY, lX + HASHMARKL, currentY)\n    if (i % 4 == 0) {\n      drawHashMarkTextForBothSides(maxVal - i, currentY)\n    }\n  }\n}\n\nfunction drawSpine() {\n  var centerX = getCenterX()\n  var whiskerX = centerX - WHISKERL / 2\n  // upper whisker\n  stroke(51)\n  line(whiskerX, whiskerY, whiskerX + WHISKERL, whiskerY)\n  // lower whisker\n  var yL = GRAPH_ORIGINY + GRAPHH - VERTICAL_PADDING\n  stroke(51)\n  line(whiskerX, yL, whiskerX + WHISKERL, yL)\n  // spine\n  stroke(51)\n  line(centerX, whiskerY, centerX, yL)\n}\n\nfunction drawHashMarkTextForBothSides(val, y) {\n  var valStr = val.toString()\n  var len = textWidth(valStr)\n  var x = GRAPH_ORIGINX - len - 5\n  var yPos = y - 6\n  stroke(51)\n  text(valStr, x, yPos, len, 20)\n  x = GRAPH_ORIGINX + GRAPHW + 5\n  stroke(51)\n  text(valStr, x, yPos, len, 20)\n}\n\nfunction drawIQR() {\n  // draw IQR\n  var x = GRAPH_ORIGINX + HORIZONTAL_PADDING\n  var y = whiskerY + (maxVal - thirdQuartile) * distY\n  var width = GRAPHW - HORIZONTAL_PADDING * 2\n  var height = (thirdQuartile - firstQuartile) * distY\n  fill(255)\n  stroke(51)\n  rect(x, y, width, height)\n\n  // draw median line\n  y = whiskerY + (maxVal - median) * distY\n  stroke(51)\n  line(x, y, x + width, y)\n\n  outliers.forEach(drawPointForVal)\n}\n\nfunction getCenterX() {\n  return GRAPH_ORIGINX + (GRAPHW / 2)\n}\n\nfunction drawPointForVal(val) {\n  var difference = maxVal - val;\n  var y = whiskerY + difference * distY\n  fill(0)\n  noStroke()\n  ellipse(getCenterX(), y, RADIAN, RADIAN)\n}\n\nfunction drawTitle() {\n  var textLen = textWidth(title)\n  var padding = (GRAPHW - textLen) / 2\n\n  fill(125)\n  noStroke()\n  textAlign(CENTER)\n  textStyle(BOLD)\n  text(title, GRAPH_ORIGINX, GRAPH_ORIGINY - 50, textLen + 50, 20)\n}\n","source":"assignments/assignment2/boxplot.js","raw":"var CANVASW = 1500\nvar CANVASH = 1000\n\nvar GRAPH_ORIGINX = 100\nvar GRAPH_ORIGINY = 100\nvar GRAPHW = 300\nvar GRAPHH = 800\n\nvar VERTICAL_PADDING = 20\nvar HORIZONTAL_PADDING = 50\n\nvar HASHMARKL = 5\nvar WHISKERL = 15\nvar RADIAN = 8\n\nvar maxVal = Number.MIN_VALUE\nvar minVal = Number.MAX_VALUE\n\nvar table\nvar numRows\nvar numColumns\nvar time\nvar ratings\nvar title\nvar colors\nvar highlightColor\nvar numHashMarks\nvar distY\nvar whiskerY\n\nvar firstQuartile\nvar median\nvar thirdQuartile\nvar iqr\n\nvar outliers = []\n\nfunction preload() {\n  table = loadTable(\"presidents.csv\", \"csv\", \"header\")\n}\n\n// only for display purpose, bad coding yikes!\nfunction setup() {\n  createCanvas(CANVASW, CANVASH)\n  //count the columns\n  numRows = table.getRowCount()\n  numColumns = table.getColumnCount()\n\n  time = table.getColumn(\"time\")\n  ratings = table.getColumn(\"rating\")\n\n  title = \"Presidents Rating (100 high) from 1924 to 1974\"\n\n  colors = [\n    color(50, 70, 117),\n    color(67, 103, 186),\n    color(84, 129, 235),\n    color(140, 175, 255)\n  ]\n\n  highlightColor = color(150, 82, 217)\n  whiskerY = GRAPH_ORIGINY + VERTICAL_PADDING\n\n  preprocessInputData()\n}\n\n// called after we've got first and thirdquartiles\nfunction findOutliers(val) {\n  if (val >= thirdQuartile + 3 * iqr || val <= firstQuartile - 3 * iqr) {\n    outliers.push(val)\n  }\n}\n\nfunction preprocessInputData() {\n  var tmp = []\n  ratings.forEach(function(str) {\n    if (str != \"NA\") { tmp.push(parseFloat(str)) }\n  })\n  ratings = tmp\n  ratings.sort()\n  // we want the ceiling value because\n  // it's easier to draw hashmarks\n  minVal = Math.ceil(ratings[0])\n  maxVal = Math.ceil(ratings[ratings.length-1])\n  numHashMarks = maxVal - minVal + 1\n  distY = (GRAPHH - 2 * VERTICAL_PADDING) / (numHashMarks - 1)\n\n  // get required boundary data\n  var medianIndex = Math.floor((ratings.length - 1) / 2)\n  median = ratings[medianIndex]\n  var firstQuartileIndex = Math.floor(medianIndex / 2)\n  firstQuartile = ratings[firstQuartileIndex]\n  var thirdQuartileIndex = Math.floor((medianIndex + ratings.length - 1) / 2)\n  thirdQuartile = ratings[thirdQuartileIndex]\n  iqr = thirdQuartile - firstQuartile\n\n  ratings.forEach(findOutliers)\n}\n\nfunction draw() {\n  background(255)\n  drawGraph()\n}\n\nfunction drawGraph() {\n  drawBox()\n  drawSpine()\n  drawIQR()\n  drawTitle()\n}\n\nfunction drawBox() {\n  noFill()\n  stroke(51)\n  rect(GRAPH_ORIGINX, GRAPH_ORIGINY, GRAPHW, GRAPHH)\n\n  drawHashMarksForBothSides()\n}\n\n// Axes related stuff\nfunction drawHashMarksForBothSides() {\n  var lX\n  for (var i = 0; i < numHashMarks; ++i) {\n    var currentY = whiskerY + (i * distY)\n    // draw left hashMark\n    lX = GRAPH_ORIGINX\n    stroke(51)\n    line(lX, currentY, lX + HASHMARKL, currentY)\n    // draw right hashMark\n    lX = GRAPH_ORIGINX + GRAPHW - HASHMARKL\n    stroke(51)\n    line(lX, currentY, lX + HASHMARKL, currentY)\n    if (i % 4 == 0) {\n      drawHashMarkTextForBothSides(maxVal - i, currentY)\n    }\n  }\n}\n\nfunction drawSpine() {\n  var centerX = getCenterX()\n  var whiskerX = centerX - WHISKERL / 2\n  // upper whisker\n  stroke(51)\n  line(whiskerX, whiskerY, whiskerX + WHISKERL, whiskerY)\n  // lower whisker\n  var yL = GRAPH_ORIGINY + GRAPHH - VERTICAL_PADDING\n  stroke(51)\n  line(whiskerX, yL, whiskerX + WHISKERL, yL)\n  // spine\n  stroke(51)\n  line(centerX, whiskerY, centerX, yL)\n}\n\nfunction drawHashMarkTextForBothSides(val, y) {\n  var valStr = val.toString()\n  var len = textWidth(valStr)\n  var x = GRAPH_ORIGINX - len - 5\n  var yPos = y - 6\n  stroke(51)\n  text(valStr, x, yPos, len, 20)\n  x = GRAPH_ORIGINX + GRAPHW + 5\n  stroke(51)\n  text(valStr, x, yPos, len, 20)\n}\n\nfunction drawIQR() {\n  // draw IQR\n  var x = GRAPH_ORIGINX + HORIZONTAL_PADDING\n  var y = whiskerY + (maxVal - thirdQuartile) * distY\n  var width = GRAPHW - HORIZONTAL_PADDING * 2\n  var height = (thirdQuartile - firstQuartile) * distY\n  fill(255)\n  stroke(51)\n  rect(x, y, width, height)\n\n  // draw median line\n  y = whiskerY + (maxVal - median) * distY\n  stroke(51)\n  line(x, y, x + width, y)\n\n  outliers.forEach(drawPointForVal)\n}\n\nfunction getCenterX() {\n  return GRAPH_ORIGINX + (GRAPHW / 2)\n}\n\nfunction drawPointForVal(val) {\n  var difference = maxVal - val;\n  var y = whiskerY + difference * distY\n  fill(0)\n  noStroke()\n  ellipse(getCenterX(), y, RADIAN, RADIAN)\n}\n\nfunction drawTitle() {\n  var textLen = textWidth(title)\n  var padding = (GRAPHW - textLen) / 2\n\n  fill(125)\n  noStroke()\n  textAlign(CENTER)\n  textStyle(BOLD)\n  text(title, GRAPH_ORIGINX, GRAPH_ORIGINY - 50, textLen + 50, 20)\n}\n","date":"2016-02-20T01:38:07.000Z","updated":"2016-02-20T01:38:07.000Z","path":"assignments/assignment2/boxplot.js","layout":"false","_id":"cikt716q00021afgni4dbsd55","title":"","comments":1},{"_content":"var CANVASW = 1500\nvar CANVASH = 1000\n\nvar GRAPH_ORIGINX = 100\nvar GRAPH_ORIGINY = 100\nvar GRAPHW = 1200\nvar GRAPHH = 800\n\nvar ARROWW = 5\nvar ARROWL = 15\n\nvar AXESLEN = 700\n\nvar HASHMARKL = 5\nvar PADDINGX = 20\nvar PADDINGY = 45\n\nvar table\nvar numRows\nvar numColumns\nvar time\nvar ratings\nvar title\nvar colors\nvar highlightColor\n\nfunction preload() {\n  table = loadTable(\"presidents.csv\", \"csv\", \"header\")\n}\n\n// only for display purpose, bad coding yikes!\nfunction setup() {\n  createCanvas(CANVASW, CANVASH)\n  //count the columns\n  numRows = table.getRowCount()\n  numColumns = table.getColumnCount()\n\n  time = table.getColumn(\"time\")\n  ratings = table.getColumn(\"rating\")\n\n  title = \"Presidents Rating (100 high) from 1924 to 1974\"\n\n  colors = [\n    color(50, 70, 117),\n    color(67, 103, 186),\n    color(84, 129, 235),\n    color(140, 175, 255)\n  ]\n\n  highlightColor = color(150, 82, 217)\n}\n\nfunction draw() {\n  background(255)\n  drawGraph()\n}\n\n// Axes related stuff\nfunction drawAxes() {\n  beginShape()\n  vertex(GRAPH_ORIGINX, GRAPH_ORIGINY)\n  vertex(GRAPH_ORIGINX, GRAPH_ORIGINY + GRAPHH)\n  vertex(GRAPH_ORIGINX + GRAPHW, GRAPH_ORIGINY + GRAPHH)\n  endShape()\n\n  drawArrows()\n  drawHashMarks()\n}\n\nfunction drawArrows() {\n  fill(51)\n  // arrow for y axis\n  beginShape(TRIANGLES)\n  vertex(GRAPH_ORIGINX, GRAPH_ORIGINY)\n  vertex(GRAPH_ORIGINX - ARROWW, GRAPH_ORIGINY + ARROWL)\n  vertex(GRAPH_ORIGINX + ARROWW, GRAPH_ORIGINY + ARROWL)\n  endShape()\n\n  // arrow for x axis\n  beginShape(TRIANGLES)\n  vertex(GRAPH_ORIGINX + GRAPHW, GRAPH_ORIGINY + GRAPHH)\n  vertex(GRAPH_ORIGINX + GRAPHW - ARROWL, GRAPH_ORIGINY + GRAPHH - ARROWW)\n  vertex(GRAPH_ORIGINX + GRAPHW  - ARROWL, GRAPH_ORIGINY + GRAPHH + ARROWW)\n  endShape()\n}\n\nfunction drawHashMarks() {\n  drawHashMarksForYAxes()\n  drawHashMarksForXAxes()\n}\n","source":"assignments/assignment2/common.js","raw":"var CANVASW = 1500\nvar CANVASH = 1000\n\nvar GRAPH_ORIGINX = 100\nvar GRAPH_ORIGINY = 100\nvar GRAPHW = 1200\nvar GRAPHH = 800\n\nvar ARROWW = 5\nvar ARROWL = 15\n\nvar AXESLEN = 700\n\nvar HASHMARKL = 5\nvar PADDINGX = 20\nvar PADDINGY = 45\n\nvar table\nvar numRows\nvar numColumns\nvar time\nvar ratings\nvar title\nvar colors\nvar highlightColor\n\nfunction preload() {\n  table = loadTable(\"presidents.csv\", \"csv\", \"header\")\n}\n\n// only for display purpose, bad coding yikes!\nfunction setup() {\n  createCanvas(CANVASW, CANVASH)\n  //count the columns\n  numRows = table.getRowCount()\n  numColumns = table.getColumnCount()\n\n  time = table.getColumn(\"time\")\n  ratings = table.getColumn(\"rating\")\n\n  title = \"Presidents Rating (100 high) from 1924 to 1974\"\n\n  colors = [\n    color(50, 70, 117),\n    color(67, 103, 186),\n    color(84, 129, 235),\n    color(140, 175, 255)\n  ]\n\n  highlightColor = color(150, 82, 217)\n}\n\nfunction draw() {\n  background(255)\n  drawGraph()\n}\n\n// Axes related stuff\nfunction drawAxes() {\n  beginShape()\n  vertex(GRAPH_ORIGINX, GRAPH_ORIGINY)\n  vertex(GRAPH_ORIGINX, GRAPH_ORIGINY + GRAPHH)\n  vertex(GRAPH_ORIGINX + GRAPHW, GRAPH_ORIGINY + GRAPHH)\n  endShape()\n\n  drawArrows()\n  drawHashMarks()\n}\n\nfunction drawArrows() {\n  fill(51)\n  // arrow for y axis\n  beginShape(TRIANGLES)\n  vertex(GRAPH_ORIGINX, GRAPH_ORIGINY)\n  vertex(GRAPH_ORIGINX - ARROWW, GRAPH_ORIGINY + ARROWL)\n  vertex(GRAPH_ORIGINX + ARROWW, GRAPH_ORIGINY + ARROWL)\n  endShape()\n\n  // arrow for x axis\n  beginShape(TRIANGLES)\n  vertex(GRAPH_ORIGINX + GRAPHW, GRAPH_ORIGINY + GRAPHH)\n  vertex(GRAPH_ORIGINX + GRAPHW - ARROWL, GRAPH_ORIGINY + GRAPHH - ARROWW)\n  vertex(GRAPH_ORIGINX + GRAPHW  - ARROWL, GRAPH_ORIGINY + GRAPHH + ARROWW)\n  endShape()\n}\n\nfunction drawHashMarks() {\n  drawHashMarksForYAxes()\n  drawHashMarksForXAxes()\n}\n","date":"2016-02-20T01:38:07.000Z","updated":"2016-02-20T01:38:07.000Z","path":"assignments/assignment2/common.js","layout":"false","_id":"cikucd8o40023afgn9hupxbbz","title":"","comments":1},{"layout":"false","_content":"<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Bar Chart</title>\n    <script src=\"../../libraries/p5.js\" type=\"text/javascript\"></script>\n\n    <script src=\"boxplot.js\" type=\"text/javascript\"></script>\n\n    <style> body {padding: 0; margin: 0;} canvas {vertical-align: top;} </style>\n  </head>\n  <body>\n  </body>\n</html>\n","source":"assignments/assignment2/boxplot.html","raw":"layout: false\n---\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Bar Chart</title>\n    <script src=\"../../libraries/p5.js\" type=\"text/javascript\"></script>\n\n    <script src=\"boxplot.js\" type=\"text/javascript\"></script>\n\n    <style> body {padding: 0; margin: 0;} canvas {vertical-align: top;} </style>\n  </head>\n  <body>\n  </body>\n</html>\n","date":"2016-02-20T01:38:07.000Z","updated":"2016-02-20T01:38:07.000Z","path":"assignments/assignment2/boxplot.html","_id":"cikug72ei0008ndgn6e3u9tn1","title":"","comments":1}],"Post":[{"title":"Assignment1: Data Vis Using Processing","date":"2016-02-12T04:22:28.000Z","_content":"\n## README\n\nThis is a really simple version of CSV visualizer implemented using JAVA and Processing. To download the source code and executable, please click **[here.](https://www.dropbox.com/s/mye6asq4q00djyk/Submit%20Folder.zip?dl=0)** Simply double-click on the jar file to execute. You will get the test data after extracting the .zip file.\n\n_Note: You might need to install JRE6 on OSX to execute the jar file._\n\nIt has several features:\n1. You can use the \"Import\" button to select the input **CSV** file. The file must contain a header for its columns.\n2. After importing the file, the CSV Drawer will recognize the dimension of the input data and visualize the data using either a **bar chart** (1 dimensional data), **scatterplot** (2 dimensional data) or a **scatterplot matrix** (3 or more).\n3. Currently this vis only supports **number based input**. Which means for a CSV file that contains NAN values (like strings in a column), the data points will be skipped. And if the whole column is NAN, then the whole column is skipped.\n4. The vis implements basic user interactions. **a)** When the user moves the mouse over one data point the data point will be highlighted and a small tooltip will illustrate the actual data for this point. **b)** If user _clicks_ on a specific chart, there will be slider(s) appearing to the right of the \"import\" button. And user could use the slider(s) to filter the data displayed on the chart. _Note:_ For scatterplot matrix you need to click on the small graph in the grid to display the sliders for that chart.\n\n## Screenshots\n\n![A Simple Bar Chart](/blog/images/simplebar.png)\n\n![File Selection](/blog/images/simplef.png)\n\n![A Simple Scatterplot](/blog/images/simplesp.png)\n\n![A Simple Scatterplot Matrix](/blog/images/simplespm.png)\n\n![Bigger Dataset for Scatterplot Matrix with Filtering](/blog/images/simplefspm.png)\n\n## Insights on the Car Data\n\nBy looking at the last picture in the screenshots section above, it certainly revealed some interesting patterns in the car dataset.\n\n### Insight 1\n\n![X: Year, Y: MPG](/blog/images/yearmpg.png)\n\n![Slider](/blog/images/slider.png)\n\nThe little screenshot above combined with the minimum value for the slider tells us that the earliest year of the whole dataset is 1969. (Maybe domestic car is not widely manufactured before that time?)\n\n### Insight 2\n\n![X: Year, Y: MPG Filtered](/blog/images/yearmpgfilter.png)\n\nIn this screenshot we can see a point is left alone. And it becomes very clear after filtering that the highest MPG (miles per gallon) we can get in 1971 is 35. (And it's way higher than peers!)\n\n### Insight 3\n\n![X: Horsepower, Y: MPG](/blog/images/horsepowermpg.png)\n\nFrom this screenshot I know even without very sufficient common knowledge about cars that: the higher the horsepower, the lower the mpg we get from a car.\n\nAnd seems this [link](http://cars.axlegeeks.com/v/94/Average-Fuel-Economy-vs-Horsepower) verifies this conclusion.\n","source":"_posts/Assignment1-Data-Vis-Using-Processing.md","raw":"title: 'Assignment1: Data Vis Using Processing'\ndate: 2016-02-11 20:22:28\ncategories:\n- Computer Science\n- Data Visualization\ntags:\n- Assignments\n- Programming\n---\n\n## README\n\nThis is a really simple version of CSV visualizer implemented using JAVA and Processing. To download the source code and executable, please click **[here.](https://www.dropbox.com/s/mye6asq4q00djyk/Submit%20Folder.zip?dl=0)** Simply double-click on the jar file to execute. You will get the test data after extracting the .zip file.\n\n_Note: You might need to install JRE6 on OSX to execute the jar file._\n\nIt has several features:\n1. You can use the \"Import\" button to select the input **CSV** file. The file must contain a header for its columns.\n2. After importing the file, the CSV Drawer will recognize the dimension of the input data and visualize the data using either a **bar chart** (1 dimensional data), **scatterplot** (2 dimensional data) or a **scatterplot matrix** (3 or more).\n3. Currently this vis only supports **number based input**. Which means for a CSV file that contains NAN values (like strings in a column), the data points will be skipped. And if the whole column is NAN, then the whole column is skipped.\n4. The vis implements basic user interactions. **a)** When the user moves the mouse over one data point the data point will be highlighted and a small tooltip will illustrate the actual data for this point. **b)** If user _clicks_ on a specific chart, there will be slider(s) appearing to the right of the \"import\" button. And user could use the slider(s) to filter the data displayed on the chart. _Note:_ For scatterplot matrix you need to click on the small graph in the grid to display the sliders for that chart.\n\n## Screenshots\n\n![A Simple Bar Chart](/blog/images/simplebar.png)\n\n![File Selection](/blog/images/simplef.png)\n\n![A Simple Scatterplot](/blog/images/simplesp.png)\n\n![A Simple Scatterplot Matrix](/blog/images/simplespm.png)\n\n![Bigger Dataset for Scatterplot Matrix with Filtering](/blog/images/simplefspm.png)\n\n## Insights on the Car Data\n\nBy looking at the last picture in the screenshots section above, it certainly revealed some interesting patterns in the car dataset.\n\n### Insight 1\n\n![X: Year, Y: MPG](/blog/images/yearmpg.png)\n\n![Slider](/blog/images/slider.png)\n\nThe little screenshot above combined with the minimum value for the slider tells us that the earliest year of the whole dataset is 1969. (Maybe domestic car is not widely manufactured before that time?)\n\n### Insight 2\n\n![X: Year, Y: MPG Filtered](/blog/images/yearmpgfilter.png)\n\nIn this screenshot we can see a point is left alone. And it becomes very clear after filtering that the highest MPG (miles per gallon) we can get in 1971 is 35. (And it's way higher than peers!)\n\n### Insight 3\n\n![X: Horsepower, Y: MPG](/blog/images/horsepowermpg.png)\n\nFrom this screenshot I know even without very sufficient common knowledge about cars that: the higher the horsepower, the lower the mpg we get from a car.\n\nAnd seems this [link](http://cars.axlegeeks.com/v/94/Average-Fuel-Economy-vs-Horsepower) verifies this conclusion.\n","slug":"Assignment1-Data-Vis-Using-Processing","published":1,"updated":"2016-02-19T04:16:44.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cikt700um0000afgnr9uxp93k"},{"title":"Response on Chapter 7 of the VAD Book by Tamara Munzner","date":"2016-02-16T17:32:55.000Z","_content":"\n![Summary](/blog/images/chapterseven.png)\n\nAs usual, I posted the chart at the top of Chapter 7 which best summarizes what the author talks about in this chapter.\n\n## Synopsis\n\nIn this chapter the author described different encoding heuristics for how to arrange tabular data spatially. There are several design points we can consider according to the book. More specifically they are value arrangement, region arrangement, axis orientation and layout density.\n\nDifferent design points focus on some specific requirement, e,g., a bar chart make comparison much easier and also focus on the feasibility, e.g., scatterplot is most suitable for two-value tables.\n\n## Interesting Point\n\nThe concept that's quite new to me is the introduction of heatmaps. Although I have seen heatmap almost everyday, I didn't know anything about it. Below is one of my favorite heatmap:\n\n![Github Activity Indicator](/blog/images/githubactivity.png)\n\nHeatmaps are mainly used to encode data that has two key attributes which usually are ordinal or categorical. And one value that has no more than a dozen levels. As shown in the picture above. The heatmap uses weekdays and data as the keys, and different colors to encode number of commits. There are several critical points we need to consider when using heatmaps. The first is the color encoding of levels should be reasonable to human intuitions. For example, darker usually means more, in the contribution graph above, if we use lighter color for less contribution, I think people will hate Github. And also the number of levels should not be too many, as described in the book. I think it's the average number of different colors we can store in our human GPU when processing the vis.\n\n## Evolve on the Originals\n\nThe author also mentioned the idea of aggregating information on a given encoding idiom. My favorite is the use of **glyph** in value encodings. (See the picture below).\n\n![Glyph Example](/blog/images/glyphexample.png)\n\nThe scatterplot above uses glyph which is a bigger circle with color to indicate the life expectancy and infant morality for one country. From the graph we can know quickly the country we are looking for, or it speeds up locating and querying by using the term introduced in the book. And if you've seen the [video](https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen) you will know that the glyph introduces more possibilities for manipulation. The user can break out those bigger circles to get the data points belongs to that country, which is very cool.\n","source":"_posts/Response-on-Chapter-7-of-the-VAD-Book-by-Tamara-Munzner.md","raw":"title: Response on Chapter 7 of the VAD Book by Tamara Munzner\ndate: 2016-02-16 09:32:55\ncategories:\n- Computer Science\n- Data Visualization\ntags:\n- Assignments\n- Reviews\n---\n\n![Summary](/blog/images/chapterseven.png)\n\nAs usual, I posted the chart at the top of Chapter 7 which best summarizes what the author talks about in this chapter.\n\n## Synopsis\n\nIn this chapter the author described different encoding heuristics for how to arrange tabular data spatially. There are several design points we can consider according to the book. More specifically they are value arrangement, region arrangement, axis orientation and layout density.\n\nDifferent design points focus on some specific requirement, e,g., a bar chart make comparison much easier and also focus on the feasibility, e.g., scatterplot is most suitable for two-value tables.\n\n## Interesting Point\n\nThe concept that's quite new to me is the introduction of heatmaps. Although I have seen heatmap almost everyday, I didn't know anything about it. Below is one of my favorite heatmap:\n\n![Github Activity Indicator](/blog/images/githubactivity.png)\n\nHeatmaps are mainly used to encode data that has two key attributes which usually are ordinal or categorical. And one value that has no more than a dozen levels. As shown in the picture above. The heatmap uses weekdays and data as the keys, and different colors to encode number of commits. There are several critical points we need to consider when using heatmaps. The first is the color encoding of levels should be reasonable to human intuitions. For example, darker usually means more, in the contribution graph above, if we use lighter color for less contribution, I think people will hate Github. And also the number of levels should not be too many, as described in the book. I think it's the average number of different colors we can store in our human GPU when processing the vis.\n\n## Evolve on the Originals\n\nThe author also mentioned the idea of aggregating information on a given encoding idiom. My favorite is the use of **glyph** in value encodings. (See the picture below).\n\n![Glyph Example](/blog/images/glyphexample.png)\n\nThe scatterplot above uses glyph which is a bigger circle with color to indicate the life expectancy and infant morality for one country. From the graph we can know quickly the country we are looking for, or it speeds up locating and querying by using the term introduced in the book. And if you've seen the [video](https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen) you will know that the glyph introduces more possibilities for manipulation. The user can break out those bigger circles to get the data points belongs to that country, which is very cool.\n","slug":"Response-on-Chapter-7-of-the-VAD-Book-by-Tamara-Munzner","published":1,"updated":"2016-02-19T04:17:15.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cikt700w9000pafgnae2z7ige"},{"title":"Response on Chapter 4 of the VAD book by Tamara Munzner","date":"2016-02-11T05:02:29.000Z","_content":"\n![The Four-level Framework](/blog/images/fourlevelsofvalidation.png)\n\nIn this chapter the author talked about the \"Four-Level Validation Framework\". To be more specific they are \"the domain situation\", \"visual encoding interaction idiom\", \"data/task abstraction\" and \"algorithm\".\n\nAnd also we have different angles to attack those different layers. We could do it from bottom-up or we can also be driven by a specific problem. In a real situation the latter is more natural for people like myself because to me data vis is more like a tool to use to solve problems. So instead of investing years of time to researching how to build better lower infrastructure upon which people can build great data vis, I would rather start from a problem, build something that can be used and then figure out how to improve.\n\nThe takeaway is that data vis validation also could have a lot of potential traps. A good validation methodology is sometimes crucial and even trickier than figuring out a \"solution\" (this solution may not even be the thing our user wanted!).\n","source":"_posts/Response-on-Chapter-4-of-the-VAD-book-by-Tamara-Munzner.md","raw":"title: Response on Chapter 4 of the VAD book by Tamara Munzner\ndate: 2016-02-10 21:02:29\ncategories:\n- Computer Science\n- Data Visualization\ntags:\n- Assignments\n- Reviews\n---\n\n![The Four-level Framework](/blog/images/fourlevelsofvalidation.png)\n\nIn this chapter the author talked about the \"Four-Level Validation Framework\". To be more specific they are \"the domain situation\", \"visual encoding interaction idiom\", \"data/task abstraction\" and \"algorithm\".\n\nAnd also we have different angles to attack those different layers. We could do it from bottom-up or we can also be driven by a specific problem. In a real situation the latter is more natural for people like myself because to me data vis is more like a tool to use to solve problems. So instead of investing years of time to researching how to build better lower infrastructure upon which people can build great data vis, I would rather start from a problem, build something that can be used and then figure out how to improve.\n\nThe takeaway is that data vis validation also could have a lot of potential traps. A good validation methodology is sometimes crucial and even trickier than figuring out a \"solution\" (this solution may not even be the thing our user wanted!).\n","slug":"Response-on-Chapter-4-of-the-VAD-book-by-Tamara-Munzner","published":1,"updated":"2016-02-19T04:17:05.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cikt700wb000vafgnbvfihg68"},{"title":"Response on Chapter 3 of the VAD Book by Tamara Munzner","date":"2016-02-09T08:09:49.000Z","_content":"\nThis chapter basically answers the question of \"Why\" we want to create a vis tool. The author carefully introduced the language we should use in analyzing and describing the \"requirement\" of the user. And at the end the author gave us several examples in the field to illustrate how are we going to use the \"language\" in the chapter to analyze different vis tools. This chapter serves as the very basis that we should at least be aware of in future when we are building vis tools.\n","source":"_posts/Response-on-Chapter-3-of-the-VAD-book-by-Tamara-Munzner.md","raw":"title: Response on Chapter 3 of the VAD Book by Tamara Munzner\ndate: 2016-02-09 00:09:49\ncategories:\n- Computer Science\n- Data Visualization\ntags:\n- Assignments\n- Reviews\n---\n\nThis chapter basically answers the question of \"Why\" we want to create a vis tool. The author carefully introduced the language we should use in analyzing and describing the \"requirement\" of the user. And at the end the author gave us several examples in the field to illustrate how are we going to use the \"language\" in the chapter to analyze different vis tools. This chapter serves as the very basis that we should at least be aware of in future when we are building vis tools.\n","slug":"Response-on-Chapter-3-of-the-VAD-book-by-Tamara-Munzner","published":1,"updated":"2016-02-09T08:20:54.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cikt700wc0010afgno7pd8nup"},{"title":"Response on Chapter 2 of the VAD Book by Tamara Munzner","date":"2016-02-04T06:26:59.000Z","_content":"![This Picture Stands for Chapter 2](/blog/images/ch2maindiagram.png)\n\n## Something about Chapter 2\n\nThe author introduced several \"crosscutting\" concepts that can guide design choices for a vis tool. To me, it's more important to know these ideas if I still want to read the book. Instead of articulate the concepts in words, I think the vis at the beginning of this blog post stands for everything I need to know about Chapter 2.\n\nThere is one thing that stands out and make me think. It is the distinction between the abstract concept as a dataset and it's visual representation in a vis tool. For example, a table dataset could be represented in a form of network or tree if there are inherent connections between the values in the cells. This realization is important because it allows us to break the design of a vis tool into two pieces which are the abstract dataset and its representation. For each piece we would have different set of methodologies to analyze it or make design decisions based on it.\n","source":"_posts/Response-on-Chapter-2-of-the-VAD-book-by-Tamara-Munzner.md","raw":"title: Response on Chapter 2 of the VAD Book by Tamara Munzner\ndate: 2016-02-03 22:26:59\ncategories:\n- Computer Science\n- Data Visualization\ntags:\n- Assignments\n- Reviews\n---\n![This Picture Stands for Chapter 2](/blog/images/ch2maindiagram.png)\n\n## Something about Chapter 2\n\nThe author introduced several \"crosscutting\" concepts that can guide design choices for a vis tool. To me, it's more important to know these ideas if I still want to read the book. Instead of articulate the concepts in words, I think the vis at the beginning of this blog post stands for everything I need to know about Chapter 2.\n\nThere is one thing that stands out and make me think. It is the distinction between the abstract concept as a dataset and it's visual representation in a vis tool. For example, a table dataset could be represented in a form of network or tree if there are inherent connections between the values in the cells. This realization is important because it allows us to break the design of a vis tool into two pieces which are the abstract dataset and its representation. For each piece we would have different set of methodologies to analyze it or make design decisions based on it.\n","slug":"Response-on-Chapter-2-of-the-VAD-book-by-Tamara-Munzner","published":1,"updated":"2016-02-19T04:17:01.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cikt700we0015afgnoks62j0r"},{"title":"Response on Chapter 1 of the VAD Book by Tamara Munzner","date":"2016-02-02T01:59:21.000Z","_content":"\n![Cover of Visualization Analysis & Design by Tamara Munzner](/blog/images/VADfront.png)\n\nThis is a required response on the assigned reading of in CS686.\nAfter reading the preface I realized that [this book](http://www.amazon.com/Visualization-Analysis-Design-AK-Peters/dp/1466508914/ref=sr_1_1?ie=UTF8&qid=1454378728&sr=8-1&keywords=Tamara+Munzer) is really worth reading, at least for someone like me that doesn't have any former experience in Data Visualization.\n\n## Something About the Book\n\nBefore this book, if you want to learn Data Visualization you have basically two choices. First is you could dive right into academic papers, and as said by [Alark](http://cs.usfca.edu/~apjoshi/), those papers assume you knows a lot in the field. So the learning curve becomes very steep although the things you read is really \"fresh\" and you know right away where the idea originates from (may not be useful but sometimes makes me feel its more trust-worthy). Another way is to read some book that's related to Data Visualization, like some Computer Graphics books, which don't really talk about Data Visualization systematically, or some other books that really focused on the foundation of Data Visualization (the \"from bottom to top way\" as described by Tamara Munzner).\n\nNeither of the two ways of learning gives readers enough insights with which they can use immediately into the projects they care about. And that's the reason for the VAD book. Which focuses on the patterns & frameworks that help readers make the right design decisions and, even more, with those higher level concepts in mind it would become easier to read those academic papers if the reader wants to dig further.\n\n## Something About Chapter 1\n\nThe first chapter of this book is really explaining what is Data Visualization. The author starts from a fairly abstract definition of \"vis\" (I will start to use this phrase from now on since it's adopted by the author) and asking potential questions on the definition. Instead of writing a list that rephrases the things the author described in the chapter. I want to talk a little about something that really enlightened me.\n\nIn Chapter 1.2, when the author is trying to explain human's role with the vis tool, she mentioned that the \"many kinds of uses\" of a vis tool which can be for both transitional use or for long-term use. This indeed opened up my mind about tooling in a large project, and possible usage of vis tools.\n\nA simplest example is when we are writing a small project at school, most of the time we will print out debug information. Well, this is a primitive kind of visualization, which is not a \"good\" visualization simply because it doesn't scale.\n\nWhen the project gets larger, the time spent on tooling should grow respectively. And building a vis system sometimes is as important as implementing new features or even writing unit tests and integration tests. A great example is a monitoring system. It could be used not only for preventing regression introduced by adding new features or refactoring, but it sometimes can give out hidden patterns that will cause major crash. Just think of an unusual high I/O wait on your server, which sometimes is not sensible by your user but it could potentially hiding some defect in your HDD which will result in a total disaster in the near future.\n\nWith that said, a decent understanding in building good vis tools is very important not only for practitioners, but also for those who work in other fields that is related to complicated systems.\n","source":"_posts/Response-on-Chapter-1-of-the-VAD-book-by-Tamara-Munzner.md","raw":"title: Response on Chapter 1 of the VAD Book by Tamara Munzner\ndate: 2016-02-01 17:59:21\ncategories:\n- Computer Science\n- Data Visualization\ntags:\n- Assignments\n- Reviews\n---\n\n![Cover of Visualization Analysis & Design by Tamara Munzner](/blog/images/VADfront.png)\n\nThis is a required response on the assigned reading of in CS686.\nAfter reading the preface I realized that [this book](http://www.amazon.com/Visualization-Analysis-Design-AK-Peters/dp/1466508914/ref=sr_1_1?ie=UTF8&qid=1454378728&sr=8-1&keywords=Tamara+Munzer) is really worth reading, at least for someone like me that doesn't have any former experience in Data Visualization.\n\n## Something About the Book\n\nBefore this book, if you want to learn Data Visualization you have basically two choices. First is you could dive right into academic papers, and as said by [Alark](http://cs.usfca.edu/~apjoshi/), those papers assume you knows a lot in the field. So the learning curve becomes very steep although the things you read is really \"fresh\" and you know right away where the idea originates from (may not be useful but sometimes makes me feel its more trust-worthy). Another way is to read some book that's related to Data Visualization, like some Computer Graphics books, which don't really talk about Data Visualization systematically, or some other books that really focused on the foundation of Data Visualization (the \"from bottom to top way\" as described by Tamara Munzner).\n\nNeither of the two ways of learning gives readers enough insights with which they can use immediately into the projects they care about. And that's the reason for the VAD book. Which focuses on the patterns & frameworks that help readers make the right design decisions and, even more, with those higher level concepts in mind it would become easier to read those academic papers if the reader wants to dig further.\n\n## Something About Chapter 1\n\nThe first chapter of this book is really explaining what is Data Visualization. The author starts from a fairly abstract definition of \"vis\" (I will start to use this phrase from now on since it's adopted by the author) and asking potential questions on the definition. Instead of writing a list that rephrases the things the author described in the chapter. I want to talk a little about something that really enlightened me.\n\nIn Chapter 1.2, when the author is trying to explain human's role with the vis tool, she mentioned that the \"many kinds of uses\" of a vis tool which can be for both transitional use or for long-term use. This indeed opened up my mind about tooling in a large project, and possible usage of vis tools.\n\nA simplest example is when we are writing a small project at school, most of the time we will print out debug information. Well, this is a primitive kind of visualization, which is not a \"good\" visualization simply because it doesn't scale.\n\nWhen the project gets larger, the time spent on tooling should grow respectively. And building a vis system sometimes is as important as implementing new features or even writing unit tests and integration tests. A great example is a monitoring system. It could be used not only for preventing regression introduced by adding new features or refactoring, but it sometimes can give out hidden patterns that will cause major crash. Just think of an unusual high I/O wait on your server, which sometimes is not sensible by your user but it could potentially hiding some defect in your HDD which will result in a total disaster in the near future.\n\nWith that said, a decent understanding in building good vis tools is very important not only for practitioners, but also for those who work in other fields that is related to complicated systems.\n","slug":"Response-on-Chapter-1-of-the-VAD-book-by-Tamara-Munzner","published":1,"updated":"2016-02-19T04:16:58.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cikt700wi001aafgnukw2ncs0"},{"title":"Preface","date":"2016-01-29T02:06:19.000Z","_content":"\n\n![ - ArseniXC from Pixiv](/blog/images/28865167_p0.jpg)\n\nI created this blog by request of USF CS686 assignment. But it turns out to be a good place for some daily thoughts in Computing or Programming or even some other random stuff.\n","source":"_posts/Preface.md","raw":"title: Preface\ndate: 2016-01-28 18:06:19\ncategories:\n- Life\ntags:\n- Logistics\n---\n\n\n![ - ArseniXC from Pixiv](/blog/images/28865167_p0.jpg)\n\nI created this blog by request of USF CS686 assignment. But it turns out to be a good place for some daily thoughts in Computing or Programming or even some other random stuff.\n","slug":"Preface","published":1,"updated":"2016-02-19T04:16:54.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cikt700wk001fafgnayb2qs6w"},{"title":"Data Visualization Good vs. Bad","date":"2016-01-29T03:43:37.000Z","_content":"![](/blog/images/data-vis-gb-header.jpg)\n\nGood visualization can let people communicate much faster and easier, yet there are still some pieces of works that slows people down, or even worse, it could communicate the wrong information.\n\nHere we will look at two examples that show us both good and bad visualizations.\n\n### Good Example\nBelow is a graph describing race distribution in U.S. The original graph can be accessed from [here](http://demographics.coopercenter.org/DotMap/).\nI think this graph is a **good** data visualization for two reasons:\n\n1. It uses the actual United States map that make the data in the visualization more intuitive. Anyone who has a little geographic sense about U.S. will know how to interpret the data.\n\n2. This data visualization uses the raw data in the \"right way\". Which means it gives the raw data meaning that can let people find the underlying pattern. For example, if you are given a HUGE list of race-address information in text form, you will never figure out that black folks are distributed in the south and east parts of the country, but with this graph, you will know it at the first glance.\n\n![The Racial Dot Map: One Dot Per Person for the Entire U.S.](/blog/images/census_dot_map.png)\n\n### Bad Example\nA bad visualization is usually some graph that communicates the wrong idea, or express the data in a wrong way. This one reminds us that the visual elements of a visualization is not trivial since it could plant the wrong information into the reader's mind.\n\n![](/blog/images/wtf_data_viz.jpg)\n\nThere are at least two problems with this graph.\n\nFirst the three numbers doesn't sum up to 100%, but that could be okay because there might be some context that we don't know (like the classification of races mentioned in the graph.)\n\nAnother, which is more important, problem in this graph is that, the bars don't work with the numbers (African American's bar is way longer than the other two races while it's percentage is smaller.). Although it's possible that the author of this graph doesn't intend to express the ration using the \"bar\", but anyways, the graph still gives us an illusion that the African American portion has the biggest ratio.\n","source":"_posts/Data-Visualization-Good-vs-Bad.md","raw":"title: Data Visualization Good vs. Bad\ndate: 2016-01-28 19:43:37\ncategories:\n- Computer Science\n- Data Visualization\ntags:\n- Assignments\n---\n![](/blog/images/data-vis-gb-header.jpg)\n\nGood visualization can let people communicate much faster and easier, yet there are still some pieces of works that slows people down, or even worse, it could communicate the wrong information.\n\nHere we will look at two examples that show us both good and bad visualizations.\n\n### Good Example\nBelow is a graph describing race distribution in U.S. The original graph can be accessed from [here](http://demographics.coopercenter.org/DotMap/).\nI think this graph is a **good** data visualization for two reasons:\n\n1. It uses the actual United States map that make the data in the visualization more intuitive. Anyone who has a little geographic sense about U.S. will know how to interpret the data.\n\n2. This data visualization uses the raw data in the \"right way\". Which means it gives the raw data meaning that can let people find the underlying pattern. For example, if you are given a HUGE list of race-address information in text form, you will never figure out that black folks are distributed in the south and east parts of the country, but with this graph, you will know it at the first glance.\n\n![The Racial Dot Map: One Dot Per Person for the Entire U.S.](/blog/images/census_dot_map.png)\n\n### Bad Example\nA bad visualization is usually some graph that communicates the wrong idea, or express the data in a wrong way. This one reminds us that the visual elements of a visualization is not trivial since it could plant the wrong information into the reader's mind.\n\n![](/blog/images/wtf_data_viz.jpg)\n\nThere are at least two problems with this graph.\n\nFirst the three numbers doesn't sum up to 100%, but that could be okay because there might be some context that we don't know (like the classification of races mentioned in the graph.)\n\nAnother, which is more important, problem in this graph is that, the bars don't work with the numbers (African American's bar is way longer than the other two races while it's percentage is smaller.). Although it's possible that the author of this graph doesn't intend to express the ration using the \"bar\", but anyways, the graph still gives us an illusion that the African American portion has the biggest ratio.\n","slug":"Data-Visualization-Good-vs-Bad","published":1,"updated":"2016-02-19T04:16:51.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cikt700wl001kafgn8zgqurhu"},{"title":"Data Can Become Source of Magic","date":"2016-01-31T18:42:19.000Z","Category":["Computer Science","Data Visualization"],"_content":"\n**Retrospect on _Hans Rosling: The best stats you've ever seen_**\n\n![Hans Rosling \"Casting\" Data](/blog/images/hansrosling.png)\n\nI feel really lucky that I had the chance to watch this talk. Before that **I never got** Data Visualization.\n\nWhy is every body talking about it or how come people create a new discipline for something that's really depending on intuition.\n\nIn this talk, Hans Rosling was like a wizard, whose magic is to manipulate visual elements to convey critical information or trends to his audience. I did't get to it until I saw the pictures that all the lovely flowers grew on the soil with raw data embedded in it. But **data** is Hans Roling's mojo (of course with his knowledge and experience in this field.).\n\n\n![](/blog/images/ExMachinaCast.jpg)\n\n\n### What if you discovered oil before you invented the internal combustion engine?\n\nThe realization of that the data is the raw material which could be exploited and be used in some greater course, is no less than the invention of the combustion engine as inferred from [Oscar Isaac](http://www.imdb.com/name/nm1209966/)'s remark in [Ex Machina](http://www.imdb.com/title/tt0470752/).\n\nGiven that analogy, learning Data Visualization is more like learning technologies that build more efficient and more powerful engines. And for us computer science students or researchers, our duty is to practice and invent better tools that can help people build data visualization apps either used for a specific requirement or serve as a general framework that people use in a kind of situations.\n\nAt the end, please allow me to use another screenshot from Hans Roslings talk to remind me what we can do, and what we can achieve in the future.\n\n![](/blog/images/hansrosling2.png)\n","source":"_posts/Data-Can-Become-Source-of-Magic.md","raw":"title: Data Can Become Source of Magic\ndate: 2016-01-31 10:42:19\nCategory:\n- Computer Science\n- Data Visualization\ntags:\n- Assignments\n- Reviews\n---\n\n**Retrospect on _Hans Rosling: The best stats you've ever seen_**\n\n![Hans Rosling \"Casting\" Data](/blog/images/hansrosling.png)\n\nI feel really lucky that I had the chance to watch this talk. Before that **I never got** Data Visualization.\n\nWhy is every body talking about it or how come people create a new discipline for something that's really depending on intuition.\n\nIn this talk, Hans Rosling was like a wizard, whose magic is to manipulate visual elements to convey critical information or trends to his audience. I did't get to it until I saw the pictures that all the lovely flowers grew on the soil with raw data embedded in it. But **data** is Hans Roling's mojo (of course with his knowledge and experience in this field.).\n\n\n![](/blog/images/ExMachinaCast.jpg)\n\n\n### What if you discovered oil before you invented the internal combustion engine?\n\nThe realization of that the data is the raw material which could be exploited and be used in some greater course, is no less than the invention of the combustion engine as inferred from [Oscar Isaac](http://www.imdb.com/name/nm1209966/)'s remark in [Ex Machina](http://www.imdb.com/title/tt0470752/).\n\nGiven that analogy, learning Data Visualization is more like learning technologies that build more efficient and more powerful engines. And for us computer science students or researchers, our duty is to practice and invent better tools that can help people build data visualization apps either used for a specific requirement or serve as a general framework that people use in a kind of situations.\n\nAt the end, please allow me to use another screenshot from Hans Roslings talk to remind me what we can do, and what we can achieve in the future.\n\n![](/blog/images/hansrosling2.png)\n","slug":"Data-Can-Become-Source-of-Magic","published":1,"updated":"2016-02-19T04:16:38.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cikt700wn001oafgn9htb7c75"},{"title":"Cool Vis Weekly Report #1","date":"2016-02-09T07:17:07.000Z","Category":["Computer Science","Data Visualization"],"_content":"\n![Strength of Nations](/blog/images/sonus.png)\n\nTime flew by, now is the beginning of the 3rd week of my last semester. There are so many things I want to build while so little time left before starting the mundane life as a \"coding monkey\" (Chinese word for software practitioners since in Chinese the word for programmer sounds like the monkey who writes code. Kind of like nerd used in English.). During the past two weeks I was coding day and night without too much time reading blogs or surfing online. While today when I finally opened up my Pinterest board, there is this cool data vis came into my sight. And the name for it is \"Strength of Nations\".\n\nThe reason it caught my eye first is that it **looks good**. The combination of the colors used on the parchment forms a kind of harmony. Another example of a similar color usage is [here](http://ethanschoonover.com/solarized). But some further reading revealed that this is actually a pretty decent vis in technical aspects. As we can see each node represents scientific publications in a particular topic, while the links shows publications that explore more than one topic or interdisciplinary researches. This vis tool not only makes it very easy to locate and query a single topic but also gives a clear emphasis on the relationships between different disciplines. For the screenshot we know immediately United States has a significant numbers of papers in the social sciences and medical sciences and also has strong interdisciplinary researches pertain to Biochemistry. And from the screenshot below showing the comparison of countries, we can acquire the likelihood of emphasis on different areas of research and by the first look we know that China and Taiwan have very similar research focuses.\n\n![Strength of Nations](/blog/images/strengthofnations.png)\n","source":"_posts/Cool-Vis-Weekly-Report-1.md","raw":"title: 'Cool Vis Weekly Report #1'\ndate: 2016-02-08 23:17:07\nCategory:\n- Computer Science\n- Data Visualization\ntags:\n- Assignments\n- Reviews\n---\n\n![Strength of Nations](/blog/images/sonus.png)\n\nTime flew by, now is the beginning of the 3rd week of my last semester. There are so many things I want to build while so little time left before starting the mundane life as a \"coding monkey\" (Chinese word for software practitioners since in Chinese the word for programmer sounds like the monkey who writes code. Kind of like nerd used in English.). During the past two weeks I was coding day and night without too much time reading blogs or surfing online. While today when I finally opened up my Pinterest board, there is this cool data vis came into my sight. And the name for it is \"Strength of Nations\".\n\nThe reason it caught my eye first is that it **looks good**. The combination of the colors used on the parchment forms a kind of harmony. Another example of a similar color usage is [here](http://ethanschoonover.com/solarized). But some further reading revealed that this is actually a pretty decent vis in technical aspects. As we can see each node represents scientific publications in a particular topic, while the links shows publications that explore more than one topic or interdisciplinary researches. This vis tool not only makes it very easy to locate and query a single topic but also gives a clear emphasis on the relationships between different disciplines. For the screenshot we know immediately United States has a significant numbers of papers in the social sciences and medical sciences and also has strong interdisciplinary researches pertain to Biochemistry. And from the screenshot below showing the comparison of countries, we can acquire the likelihood of emphasis on different areas of research and by the first look we know that China and Taiwan have very similar research focuses.\n\n![Strength of Nations](/blog/images/strengthofnations.png)\n","slug":"Cool-Vis-Weekly-Report-1","published":1,"updated":"2016-02-19T04:16:30.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cikt700wp001rafgnhyybnznl"},{"title":"Assignment2: Data Vis Using P5.js","date":"2016-02-18T00:22:07.000Z","_content":"\n# README\n\nThis is a small project to get familiar with [P5.js](http://p5js.org/). As mentioned, the only purpose of the code here is to display a specific dataset (U.S. Presidents rating from 1945 - 1974 in this case.).\n\nImplemented features are as following:\n1. Showing the same dataset using bar chart, stacked bar chart, scatterplot, line graph and box plot.\n2. All vis are interactive (highlighting and showing tooltips) except for box plot.\n\n# Links\n\n[See Bar Chart]()\n\n![Bar Chart](/blog/images/barchart.png)\n\n[See Stacked Bar Chart]()\n\n![Stacked Bar Chart](/blog/images/stackedbarchart.png)\n\n[See Scatterplot]()\n\n![Scatterplot](/blog/images/scatterplot.png)\n\n[See Line Graph]()\n\n![Line Graph](/blog/images/linegraph.png)\n\n[See Box Plot]()\n\n![Box Plot](/blog/images/boxplot.png)\n\n# Note\n\nBelow is a faked dataset to show outliers. The faked test data can also be acquired [here](http://http://hanjoes.github.io/vis/assignments/assignment2/presidents_fake.csv).\n\n![Fake Data to Show Outliers](/blog/images/fake.png)\n","source":"_posts/Assignment2-Data-Vis-Using-P5-js.md","raw":"title: 'Assignment2: Data Vis Using P5.js'\ndate: 2016-02-17 16:22:07\ncategories:\n- Computer Science\n- Data Visualization\ntags:\n- Assignments\n- Programming\n---\n\n# README\n\nThis is a small project to get familiar with [P5.js](http://p5js.org/). As mentioned, the only purpose of the code here is to display a specific dataset (U.S. Presidents rating from 1945 - 1974 in this case.).\n\nImplemented features are as following:\n1. Showing the same dataset using bar chart, stacked bar chart, scatterplot, line graph and box plot.\n2. All vis are interactive (highlighting and showing tooltips) except for box plot.\n\n# Links\n\n[See Bar Chart]()\n\n![Bar Chart](/blog/images/barchart.png)\n\n[See Stacked Bar Chart]()\n\n![Stacked Bar Chart](/blog/images/stackedbarchart.png)\n\n[See Scatterplot]()\n\n![Scatterplot](/blog/images/scatterplot.png)\n\n[See Line Graph]()\n\n![Line Graph](/blog/images/linegraph.png)\n\n[See Box Plot]()\n\n![Box Plot](/blog/images/boxplot.png)\n\n# Note\n\nBelow is a faked dataset to show outliers. The faked test data can also be acquired [here](http://http://hanjoes.github.io/vis/assignments/assignment2/presidents_fake.csv).\n\n![Fake Data to Show Outliers](/blog/images/fake.png)\n","slug":"Assignment2-Data-Vis-Using-P5-js","published":1,"updated":"2016-02-20T01:38:07.000Z","_id":"cikt700wr001uafgn0h2klvuu","comments":1,"layout":"post","photos":[],"link":""}],"PostAsset":[],"PostCategory":[{"post_id":"cikt700um0000afgnr9uxp93k","category_id":"cikt700uq0001afgnkbn2npb0","_id":"cikt700us0006afgnsoecxyvn"},{"post_id":"cikt700um0000afgnr9uxp93k","category_id":"cikt700ur0004afgnf7bpj2f4","_id":"cikt700us0008afgnu8eh2ufq"},{"post_id":"cikt700w9000pafgnae2z7ige","category_id":"cikt700uq0001afgnkbn2npb0","_id":"cikt700wa000qafgnkcq6njup"},{"post_id":"cikt700w9000pafgnae2z7ige","category_id":"cikt700ur0004afgnf7bpj2f4","_id":"cikt700wa000safgnbo6ehsyp"},{"post_id":"cikt700wb000vafgnbvfihg68","category_id":"cikt700uq0001afgnkbn2npb0","_id":"cikt700wc000wafgn5dnf2haz"},{"post_id":"cikt700wb000vafgnbvfihg68","category_id":"cikt700ur0004afgnf7bpj2f4","_id":"cikt700wc000yafgnkzr5wixe"},{"post_id":"cikt700wc0010afgno7pd8nup","category_id":"cikt700uq0001afgnkbn2npb0","_id":"cikt700wd0011afgnhlehr74z"},{"post_id":"cikt700wc0010afgno7pd8nup","category_id":"cikt700ur0004afgnf7bpj2f4","_id":"cikt700we0013afgnp405n62y"},{"post_id":"cikt700we0015afgnoks62j0r","category_id":"cikt700uq0001afgnkbn2npb0","_id":"cikt700wg0016afgn9rv75oed"},{"post_id":"cikt700we0015afgnoks62j0r","category_id":"cikt700ur0004afgnf7bpj2f4","_id":"cikt700wg0018afgnesvvaqqc"},{"post_id":"cikt700wi001aafgnukw2ncs0","category_id":"cikt700uq0001afgnkbn2npb0","_id":"cikt700wj001bafgn2b4lho78"},{"post_id":"cikt700wi001aafgnukw2ncs0","category_id":"cikt700ur0004afgnf7bpj2f4","_id":"cikt700wj001dafgnwfs3bw98"},{"post_id":"cikt700wk001fafgnayb2qs6w","category_id":"cikt700wl001gafgnwv3wkfms","_id":"cikt700wl001jafgn0eyr7k8e"},{"post_id":"cikt700wl001kafgn8zgqurhu","category_id":"cikt700uq0001afgnkbn2npb0","_id":"cikt700wm001lafgndz11cyhy"},{"post_id":"cikt700wl001kafgn8zgqurhu","category_id":"cikt700ur0004afgnf7bpj2f4","_id":"cikt700wm001nafgnf5g3d0lv"},{"post_id":"cikt700wr001uafgn0h2klvuu","category_id":"cikt700uq0001afgnkbn2npb0","_id":"cikughrbq000kndgndpendizv"},{"post_id":"cikt700wr001uafgn0h2klvuu","category_id":"cikt700ur0004afgnf7bpj2f4","_id":"cikughrbr000lndgn3z951kau"}],"PostTag":[{"post_id":"cikt700um0000afgnr9uxp93k","tag_id":"cikt700uq0002afgn4tvi00xj","_id":"cikt700us0005afgne38zvbva"},{"post_id":"cikt700um0000afgnr9uxp93k","tag_id":"cikt700ur0003afgnytpwiz61","_id":"cikt700us0007afgnu91dw92h"},{"post_id":"cikt700w9000pafgnae2z7ige","tag_id":"cikt700uq0002afgn4tvi00xj","_id":"cikt700wa000tafgn5bp9u2c3"},{"post_id":"cikt700w9000pafgnae2z7ige","tag_id":"cikt700wa000rafgnh6ukdtl3","_id":"cikt700wb000uafgneutagrvx"},{"post_id":"cikt700wb000vafgnbvfihg68","tag_id":"cikt700uq0002afgn4tvi00xj","_id":"cikt700wc000xafgn6tuz9dtk"},{"post_id":"cikt700wb000vafgnbvfihg68","tag_id":"cikt700wa000rafgnh6ukdtl3","_id":"cikt700wc000zafgn1vargusw"},{"post_id":"cikt700wc0010afgno7pd8nup","tag_id":"cikt700uq0002afgn4tvi00xj","_id":"cikt700wd0012afgnocd4yzlt"},{"post_id":"cikt700wc0010afgno7pd8nup","tag_id":"cikt700wa000rafgnh6ukdtl3","_id":"cikt700we0014afgnraekdywt"},{"post_id":"cikt700we0015afgnoks62j0r","tag_id":"cikt700uq0002afgn4tvi00xj","_id":"cikt700wg0017afgno8mo3306"},{"post_id":"cikt700we0015afgnoks62j0r","tag_id":"cikt700wa000rafgnh6ukdtl3","_id":"cikt700wg0019afgna44usiy9"},{"post_id":"cikt700wi001aafgnukw2ncs0","tag_id":"cikt700uq0002afgn4tvi00xj","_id":"cikt700wj001cafgnrucanv62"},{"post_id":"cikt700wi001aafgnukw2ncs0","tag_id":"cikt700wa000rafgnh6ukdtl3","_id":"cikt700wj001eafgn5qfcr1sq"},{"post_id":"cikt700wk001fafgnayb2qs6w","tag_id":"cikt700wl001hafgnafugqgp7","_id":"cikt700wl001iafgn2eb8t3lg"},{"post_id":"cikt700wl001kafgn8zgqurhu","tag_id":"cikt700uq0002afgn4tvi00xj","_id":"cikt700wm001mafgntf90es86"},{"post_id":"cikt700wn001oafgn9htb7c75","tag_id":"cikt700uq0002afgn4tvi00xj","_id":"cikt700wp001pafgncheo2e39"},{"post_id":"cikt700wn001oafgn9htb7c75","tag_id":"cikt700wa000rafgnh6ukdtl3","_id":"cikt700wp001qafgnob2nwe5g"},{"post_id":"cikt700wp001rafgnhyybnznl","tag_id":"cikt700uq0002afgn4tvi00xj","_id":"cikt700wq001safgn9yxdjdfr"},{"post_id":"cikt700wp001rafgnhyybnznl","tag_id":"cikt700wa000rafgnh6ukdtl3","_id":"cikt700wq001tafgnl9xknx9p"},{"post_id":"cikt700wr001uafgn0h2klvuu","tag_id":"cikt700uq0002afgn4tvi00xj","_id":"cikt700ws001wafgnndozib16"},{"post_id":"cikt700wr001uafgn0h2klvuu","tag_id":"cikt700ur0003afgnytpwiz61","_id":"cikt700ws001yafgn9yty2nln"}],"Tag":[{"name":"Assignments","_id":"cikt700uq0002afgn4tvi00xj"},{"name":"Programming","_id":"cikt700ur0003afgnytpwiz61"},{"name":"Reviews","_id":"cikt700wa000rafgnh6ukdtl3"},{"name":"Logistics","_id":"cikt700wl001hafgnafugqgp7"}]}}